import{s as V}from"./index-Bk2Bjhp5.js";import{d as S,a as B,r as g,m as T,o as t,c,b as w,e as v,t as o,f as a,w as i,g as l,h as u,j as _,F as N,n as x,k as E,s as A}from"./index-Bot0NdAS.js";import{s as F}from"./index-pwqP0NcF.js";import{_ as I}from"./AuthHeader.vue_vue_type_script_setup_true_lang-2CoDYrhz.js";import{a as y}from"./index-Doe9P0fd.js";import"./logo-DVPvkljo.js";import"./index-C1MCGvOD.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BNw4G1oi.js";import"./index-Dc9sF7LC.js";import"./index-Cq5k_cZK.js";import"./index-fCZVCv1G.js";const M={class:"card flex flex-col items-center pt-4 gap-4"},R={class:"text-2xl"},b={key:0},j={key:1},W=S({__name:"VerifyChangeEmail",setup(q){const k=x(),m=E(),p=B(),s=g(!1),r=g(null);async function $(){s.value=!0;try{await y.verifyChangeEmail(k.query.token),r.value=!0;const{data:e}=await y.refresh();p.setToken(e),p.setUser(e)}catch(e){r.value=!1,console.log(e)}finally{s.value=!1}}return T(()=>{$()}),(e,n)=>{const f=F,d=A,h=V;return t(),c(N,null,[w(I),v("div",M,[v("div",R,o(e.$t("pages.login.emailVerification")),1),s.value?u("",!0):(t(),c("div",b,[r.value==!0?(t(),a(f,{key:0,severity:"success"},{default:i(()=>[l(o(e.$t("pages.login.emailSuccessfullyChangedAndVerified")),1)]),_:1})):(t(),a(f,{key:1,severity:"error"},{default:i(()=>[l(o(e.$t("pages.login.tokenIsInvalidTryAgain")),1)]),_:1}))])),s.value?u("",!0):(t(),c("div",j,[r.value==!0?(t(),a(d,{key:0,onClick:n[0]||(n[0]=C=>_(m).replace("/"))},{default:i(()=>[l(o(e.$t("pages.login.goToHome")),1)]),_:1})):(t(),a(d,{key:1,onClick:n[1]||(n[1]=C=>_(m).replace("/settings/change-email"))},{default:i(()=>[l(o(e.$t("pages.login.goToSettings")),1)]),_:1}))])),s.value?(t(),a(h,{key:2})):u("",!0)])],64)}}});export{W as default};
