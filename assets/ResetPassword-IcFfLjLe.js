import{h as T,o as j,s as b,a as L}from"./types-DIYiz6sG.js";import{s as N}from"./index-CG8UekkQ.js";import{s as R}from"./index-D0P9DXc-.js";import{s as S}from"./index-CAiSx_qo.js";import{a as q,u as A,r as h,b as o,e as i,f as a,h as s,g as k,w as n,t as c,k as M,F as d,j as $,l as P,x as D,p as E,q as Z}from"./index-BBjKxJpX.js";import{_ as G}from"./AuthHeader.vue_vue_type_script_setup_true_lang-BZTgrLDa.js";import{a as H}from"./http-MdAG8vYf.js";import"./index-Bcr1X6pB.js";import"./index-Ci047gnw.js";import"./index-CDtTVAa8.js";import"./logo-D1-3uCnC.js";const I={class:"card flex flex-col items-center pt-4"},J={class:"flex flex-1 items-center justify-center my-4"},K={class:"text-4xl font-semibold px-2 mr-4"},O={class:"flex flex-col gap-1"},Q={for:"password"},U={class:"my-0 flex flex-col gap-1"},W={class:"flex flex-col gap-1"},X={for:"confirm_password"},Y={class:"my-0 flex flex-col gap-1"},de=q({__name:"ResetPassword",setup(ee){const u=A(),V=D(),f=E(),r=h(!1),B=h({password:""}),F=T(j({password:b().min(8,{message:"Minimum 8 characters."}).max(100,{message:"Maximum 100 characters."}).refine(e=>/[a-z]/.test(e),{message:"Must have a lowercase letter."}).refine(e=>/[A-Z]/.test(e),{message:"Must have an uppercase letter."}).refine(e=>/[0-9]/.test(e),{message:"Must have a number."}),confirm_password:b()}).refine(e=>e.password===e.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),z=async e=>{if(!r.value&&e.valid){r.value=!0;try{const{data:t}=await H.resetPassword(V.query.token,e.states.password.value);f.replace({name:"login"}),u.add({severity:"success",summary:t.message,life:3e3})}catch(t){u.add({severity:"error",summary:t.response.data.error,life:3e3})}finally{r.value=!1}}};return(e,t)=>{const _=Z,g=S,w=R,v=N,C=L;return o(),i(d,null,[a(G),s("div",I,[a(_,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:t[0]||(t[0]=l=>k(f).replace({name:"login"}))},null,8,["label"]),a(C,{initialValues:B.value,resolver:k(F),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:n(l=>{var y,x;return[s("div",J,[s("p",K,c(e.$t("pages.login.newPassword")),1)]),s("div",O,[a(w,{variant:"on"},{default:n(()=>[a(g,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),s("label",Q,c(e.$t("pages.login.newPassword")),1)]),_:1}),(y=l.password)!=null&&y.invalid?(o(),M(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[s("ul",U,[(o(!0),i(d,null,$(l.password.errors,(m,p)=>(o(),i("li",{key:p},c(m.message),1))),128))])]),_:2},1024)):P("",!0)]),s("div",W,[a(w,{variant:"on"},{default:n(()=>[a(g,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),s("label",X,c(e.$t("pages.login.confirmPassword")),1)]),_:1}),(x=l.confirm_password)!=null&&x.invalid?(o(),M(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:n(()=>[s("ul",Y,[(o(!0),i(d,null,$(l.confirm_password.errors,(m,p)=>(o(),i("li",{key:p},c(m.message),1))),128))])]),_:2},1024)):P("",!0)]),a(_,{type:"submit",label:e.$t("pages.login.save"),loading:r.value,disabled:r.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{de as default};
