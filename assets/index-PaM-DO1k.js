import{s as T}from"./index-D5RqcZfo.js";import{d as A,u as F,r as $,e as C,o,c as r,a as s,t as c,k as d,h as t,G as L,i as R,j as h,y as D,F as b,n as P,l as N,s as U,C as q,f as M,B as W,b as B,q as w,K as E}from"./index-BXslawiU.js";import{s as G}from"./index-B45JFP4L.js";import{_ as K}from"./MainHeader.vue_vue_type_script_setup_true_lang-Dz4LHxHn.js";import"./index-DkBeW8WF.js";import{_ as j}from"./LessonCard.vue_vue_type_script_setup_true_lang-B1f8H03H.js";import{_ as S}from"./ProgressRing.vue_vue_type_script_setup_true_lang-O9O8xMMA.js";import{_ as H}from"./PageBackLink.vue_vue_type_script_setup_true_lang-BJzEane_.js";import{R as J}from"./routeApi-ynnPXWsk.js";import{m as O}from"./mapRouteFromDto-C1VVcbzq.js";import{g as Q}from"./groupLessonsByLevelAndType-C-co-UzZ.js";import{_ as X}from"./UserMenu.vue_vue_type_script_setup_true_lang-DWoBqxEk.js";import"./index-C3n_x_8f.js";import"./index-C6ro9I84.js";import"./index-UVfE29m3.js";import"./index-De9rL6wl.js";import"./index-CeAgpK5A.js";import"./lessonApi-B6FvAxav.js";import"./mapLessonFromDto-C9SLSKbW.js";import"./mapUnitFromDto-C-vlLM9s.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./lessonType-DG-bLtoJ.js";import"./logo-D1-3uCnC.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-Bm8m_4kh.js";import"./index-BbHqUexW.js";import"./index-D-Li2oDx.js";import"./otherApi-mbQmFMOk.js";import"./index-peSoFaWK.js";import"./index-CG2VAMzt.js";import"./index-BB79oU2T.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-DKeSLIQg.js";import"./index-CSI4_wiQ.js";import"./language-DYQF8nnT.js";const Y=A("route-store",()=>{const k=F(),l=$(null),x=$({}),i=$(!1);async function y(e){var n,f;try{i.value=!0;const{data:v}=await J.getRouteById(e);l.value=O(v),x.value=Q(((n=l.value)==null?void 0:n.lessons)??[],((f=l.value)==null?void 0:f.levels)??[])}catch(v){k.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{i.value=!1}}return{selectedRoute:l,isRouteLoading:i,groupedLessons:x,loadRouteById:y}}),Z={class:"flex gap-2 w-full h-full items-center"},ee={class:"flex-grow h-full flex flex-col justify-between"},se={class:"flex flex-col gap-[2px]"},te={class:"text-overline-small"},oe={class:"text-body-large-semibold text-neutral900"},le={class:"flex gap-1 items-center"},re={class:"text-body-large-regular text-neutral600"},ae=C({__name:"ContinueLessonCard",props:{lesson:{},route_id:{}},setup(k){const l=k,x=P(),i=$(!1),y=()=>{if(l.lesson.accessStatus!=="available"){l.lesson.accessStatus=="premium_restriction"&&(i.value=!0);return}x.push({name:l.lesson.lessonType=="project"?"project":l.lesson.studentProgress==100?"lesson-revise":"lesson",params:{id:l.lesson.id},query:{route_id:l.route_id}})};return(e,n)=>{const f=N,v=T;return o(),r(b,null,[s("div",{class:D(["rounded-2xl h-[180px] min-w-[440px] p-6 relative",e.lesson.lessonType=="learn"?"bg-[var(--color-purple50)]":e.lesson.lessonType=="practice"?"bg-[var(--color-primary50)]":"bg-slate-50"])},[s("div",Z,[s("div",ee,[s("div",se,[s("div",te,c(e.lesson.description),1),s("div",oe,c(e.lesson.name),1),s("div",le,[d(t(S),{value:e.lesson.studentProgress,size:15,strokeWidth:2},null,8,["value"]),s("div",re,[L(c(e.lesson.studentProgress),1),n[1]||(n[1]=s("span",{class:"ml-[2px]"},"%",-1))])])]),d(f,{label:e.$t("continue"),class:"min-w-[83px] w-fit",size:"small",severity:e.lesson.lessonType=="learn"?"help":void 0,onClick:y},null,8,["label","severity"])]),l.lesson.sourceImageUrl?(o(),R(v,{key:0,src:l.lesson.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):h("",!0)])],2),d(t(X),{"model-value":i.value,"onUpdate:modelValue":n[0]||(n[0]=m=>i.value=m)},null,8,["model-value"])],64)}}}),ne={class:"flex flex-col items-center"},ie={class:"w-full max-w-[1280px] px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10 flex flex-col gap-8"},ue={key:1,class:"flex justify-center"},ce={key:2,class:"flex flex-col gap-8"},de={class:"flex gap-4"},pe={class:"flex gap-[52px] items-center p-6 bg-white rounded-2xl h-[180px]"},me={class:"flex flex-col gap-[15px]"},_e={class:"flex flex-col gap-2"},fe={class:"flex gap-4 items-center"},ve={class:"text-heading-3-semibold"},ge={class:"flex gap-1 items-center"},xe={class:"text-heading-3-regular text-neutral600"},he={class:"text-lg text-gray-500 line-clamp-2"},ye={class:"text-heading-3-semibold text-neutral500 px-6"},be={key:0,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},ke={class:"flex justify-between"},we={class:"text-heading-4-semibold text-neutral600"},$e={class:"flex overflow-x-scroll gap-4"},Re={key:1,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},je={class:"text-heading-4-semibold text-neutral600"},Ie={class:"flex overflow-x-scroll gap-4"},Be={key:2,class:"flex flex-col w-full bg-white p-6 rounded-2xl gap-4"},Te={class:"text-heading-4-semibold text-neutral600"},Ce={class:"flex flex-wrap gap-4"},cs=C({__name:"RoutePage",setup(k){const l=E(),x=P(),i=Y(),{isRouteLoading:y,selectedRoute:e,groupedLessons:n}=U(i),{loadRouteById:f}=i;q(()=>f(Number(l.params.id)));const{locale:v}=M();W(v,async()=>{await f(Number(l.params.id))});const m=B(()=>{const u={};for(const a in n.value)u[a]={learn:n.value[a].learn.filter(g=>g.stage==="published"),practice:n.value[a].practice.filter(g=>g.stage==="published"),project:n.value[a].project.filter(g=>g.stage==="published")};return u}),I=B(()=>!e.value||!Array.isArray(e.value.lessons)?null:e.value.lessons.find(a=>a.studentProgress!==100&&!a.completed&&a.stage=="published")??e.value.lessons[0]??null);return(u,a)=>{const g=G,V=N,z=T;return o(),r("div",ne,[d(t(K)),s("div",ie,[d(t(H),{label:t(e)&&t(e).routeType=="hackathon"?u.$t("hackathon"):u.$t("courses"),onBack:a[0]||(a[0]=p=>t(x).replace({name:t(e)&&t(e).routeType=="hackathon"?"hackathon":"courses"}))},null,8,["label"]),t(y)?(o(),R(g,{key:0,class:"flex justify-center"})):t(e)?(o(),r("div",ce,[s("div",de,[s("div",pe,[s("div",me,[s("div",_e,[s("div",fe,[s("div",ve,c(t(e).name),1),s("div",ge,[d(t(S),{value:t(e).studentProgress,size:18,strokeWidth:2},null,8,["value"]),s("div",xe,[L(c(t(e).studentProgress),1),a[1]||(a[1]=s("span",{class:"ml-[2px]"},"%",-1))])])]),s("div",he,c(t(e).description),1)]),d(V,{label:u.$t("readMore"),size:"small",variant:"outlined",class:"w-fit"},null,8,["label"])]),t(e).sourceImage_url?(o(),R(z,{key:0,src:t(e).sourceImage_url,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):h("",!0)]),I.value?(o(),R(ae,{key:0,lesson:I.value,route_id:t(e).id},null,8,["lesson","route_id"])):h("",!0)]),(o(!0),r(b,null,w(t(e).levels,p=>(o(),r("div",{key:p.id,class:"flex flex-col gap-4"},[s("div",ye,c(p.name),1),m.value[p.id].learn.length>0?(o(),r("div",be,[s("div",ke,[s("div",we,c(u.$t("pages.projects.learn")),1)]),s("div",$e,[(o(!0),r(b,null,w(m.value[p.id].learn,_=>(o(),r("div",{key:_.id},[d(t(j),{lesson:_,route_id:t(e).id},null,8,["lesson","route_id"])]))),128))])])):h("",!0),m.value[p.id].practice.length>0?(o(),r("div",Re,[s("div",je,c(u.$t("pages.projects.practice")),1),s("div",Ie,[(o(!0),r(b,null,w(m.value[p.id].practice,_=>(o(),r("div",{key:_.id},[d(t(j),{lesson:_,route_id:t(e).id},null,8,["lesson","route_id"])]))),128))])])):h("",!0),t(e).routeType=="hackathon"&&m.value[p.id].project.length>0?(o(),r("div",Be,[s("div",Te,c(u.$t("project")),1),s("div",Ce,[(o(!0),r(b,null,w(m.value[p.id].project,_=>(o(),r("div",{key:_.id},[d(t(j),{lesson:_,route_id:t(e).id},null,8,["lesson","route_id"])]))),128))])])):h("",!0)]))),128))])):(o(),r("div",ue,"No route found"))])])}}});export{cs as default};
