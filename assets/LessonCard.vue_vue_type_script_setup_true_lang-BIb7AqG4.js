import{T as I}from"./index-DnxWnOWO.js";import{s as L}from"./index-BEGyIpqi.js";import{s as P}from"./index-i87uic1r.js";import{e as $,r as m,C as S,o as t,c as l,a as o,H as D,i as g,I as _,y as v,j as i,G as V,t as r,k as h,h as j,F,n as N,l as A}from"./index-RQaPKU3q.js";import"./index-zUgF_fUw.js";import{_ as E}from"./UserMenu.vue_vue_type_script_setup_true_lang-3l-gndQ6.js";import{L as k}from"./lessonApi-CDtd4rn4.js";import{m as U}from"./mapLessonFromDto-C2sH6sUU.js";const q={class:"absolute top-0 left-0"},M={class:"flex"},z={key:1,class:"p-3"},G={key:0},H={class:"text-neutral action-small-regular"},O={class:"flex gap-2 w-full h-full items-end"},R={class:"flex-grow flex flex-col gap-[2px]"},J={class:"text-overline-small"},K={class:"flex items-center gap-2"},Q={key:0,class:"text-purple h-[22px] w-4"},W={class:"text-body-large-semibold"},X={class:"pt-[10px] flex flex-col gap-1"},Y={key:0},Z={key:1},ss={key:2},ps=$({__name:"LessonCard",props:{lesson:{},route_id:{}},setup(b){const e=b,f=N(),p=m(!1),w=()=>{if(e.lesson.accessStatus!=="available"){e.lesson.accessStatus=="premium_restriction"&&(p.value=!0);return}f.push({name:e.lesson.lessonType=="project"?"project":e.lesson.studentProgress==100?"lesson-revise":"lesson",params:{id:e.lesson.id},query:{route_id:e.route_id}})};async function T(){if(e.lesson.accessStatus!=="available"){e.lesson.accessStatus=="premium_restriction"&&(p.value=!0);return}await k.resetLessonById(e.lesson.id),f.push({name:e.lesson.lessonType=="project"?"project":"lesson",params:{id:e.lesson.id},query:{route_id:e.route_id}})}const u=m(0),y=m(!1);async function x(s,n){try{y.value=!0;const{data:a}=await k.getLessonById(s,n),d=U(a);for(const c of d.units)if(c.unitType=="checklist"){u.value=c.xp;break}}catch(a){console.log(a)}finally{y.value=!1}}return S(()=>{e.route_id==4&&x(e.lesson.id,"4")}),(s,n)=>{const a=A,d=P,c=L,B=I;return t(),l(F,null,[o("div",{class:v(["flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer relative",s.lesson.accessStatus=="available"?s.lesson.lessonType=="learn"?"bg-[var(--color-purple50)]":s.lesson.lessonType=="practice"?"bg-[var(--color-primary50)]":"bg-slate-50":s.lesson.lessonType=="learn"?"bg-[var(--color-purple50)] bg-opacity-50":"bg-[var(--color-primary50)] bg-opacity-50"]),onClick:_(w,["stop","prevent"])},[o("div",q,[o("div",M,[s.lesson.studentProgress>0?D((t(),g(a,{key:0,icon:"pi pi-refresh",variant:"link",onClick:_(T,["stop","prevent"]),class:v(s.lesson.lessonType=="learn"?"text-purple400":"text-primary400")},null,8,["class"])),[[B,s.$t("startOver"),void 0,{top:!0}]]):i("",!0),e.route_id==4?(t(),l("div",z,[u.value>0?(t(),l("div",G,[V(r(u.value+" "),1),o("span",H,r(s.$t("points")),1)])):i("",!0)])):i("",!0)])]),o("div",O,[o("div",R,[o("div",J,r(s.lesson.description),1),o("div",K,[s.lesson.accessStatus==="premium_restriction"?(t(),l("div",Q,n[1]||(n[1]=[o("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):i("",!0),o("div",W,r(s.lesson.name),1)])]),e.lesson.sourceImageUrl?(t(),g(d,{key:0,src:e.lesson.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):i("",!0)]),o("div",X,[o("div",{class:v(["action-small-bold",s.lesson.lessonType=="learn"?"text-purple400":"text-primary400"])},[s.lesson.studentProgress==100||s.lesson.completed?(t(),l("span",Y,r(s.$t("done")),1)):s.lesson.studentProgress==0?(t(),l("span",Z,r(s.$t("start")),1)):(t(),l("span",ss,r(s.$t("inProgress")),1))],2),h(c,{value:s.lesson.studentProgress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:s.lesson.lessonType=="learn"?"var(--color-purple400)":"var(--color-primary400)"},background:s.lesson.lessonType=="learn"?"#CBBEFD":"#A9EAD8"}},null,8,["value","dt"])])],2),h(j(E),{"model-value":p.value,"onUpdate:modelValue":n[0]||(n[0]=C=>p.value=C)},null,8,["model-value"])],64)}}});export{ps as _};
