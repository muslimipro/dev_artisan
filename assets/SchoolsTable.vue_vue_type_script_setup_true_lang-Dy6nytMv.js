import{s as T,a as D}from"./index-BJXW17cL.js";import{s as C,a as V}from"./index-CBvRvFRr.js";import{s as F}from"./index-DoQeMzHI.js";import{e as I,f as N,r as g,o as r,i as S,w as a,a as c,c as i,t as o,j as B,m as y,k as t,G as u,h as v,y as M,b2 as z,l as E}from"./index-RQaPKU3q.js";const P={class:"flex items-center"},H={class:"flex-grow flex gap-2 items-center"},L={key:0,class:"text-2xl"},O={key:0},U={key:1},j={key:2},x={class:"w-44"},A={key:0,class:"w-40"},G={key:1,class:"w-40"},K={key:0,class:"w-40"},q={key:1,class:"w-40"},Z=I({__name:"SchoolsTable",props:{schools:{},loading:{type:Boolean}},setup(J){const{locale:h}=N(),f=g(),d=g();(()=>{d.value={global:{value:null,matchMode:z.CONTAINS}}})();const w=()=>{f.value.exportCSV()};function p(s){const l=new Date,_=new Date(s);l.setHours(0,0,0,0),_.setHours(0,0,0,0);const m=_.getTime()-l.getTime();return Math.ceil(m/(1e3*60*60*24))}return(s,l)=>{const _=E,m=C,b=F,$=V,n=T,k=D;return r(),S(k,{ref_key:"dt",ref:f,filters:d.value,"onUpdate:filters":l[1]||(l[1]=e=>d.value=e),value:s.schools,dataKey:"id",loading:s.loading,scrollable:"",globalFilterFields:["id","title_en","country","address","manager_email"],paginator:"",rows:10,rowsPerPageOptions:[5,10,25],class:"rounded-md overflow-hidden w-full"},{header:a(()=>[c("div",P,[c("div",H,[s.schools?(r(),i("div",L,o(s.$t("schools"))+" - "+o(s.schools.length),1)):B("",!0)]),y(s.$slots,"header-extra"),t(_,{label:s.$t("export"),icon:"pi pi-upload",severity:"info",variant:"outlined",class:"mr-2",onClick:w},null,8,["label"]),t($,null,{default:a(()=>[t(m,null,{default:a(()=>l[2]||(l[2]=[c("i",{class:"pi pi-search"},null,-1)])),_:1}),t(b,{modelValue:d.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value.global.value=e),placeholder:s.$t("pages.teacher.search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:a(()=>l[3]||(l[3]=[u(" No schools found. ")])),loading:a(()=>l[4]||(l[4]=[u(" Loading schools data. Please wait. ")])),default:a(()=>[t(n,{field:"id",header:"ID",sortable:""}),t(n,{field:"title_en",header:s.$t("name"),sortable:""},{body:a(({data:e})=>[v(h)==="en"?(r(),i("span",O,o(e.title_en),1)):v(h)==="kk"?(r(),i("span",U,o(e.title_kz),1)):(r(),i("span",j,o(e.title_ru),1))]),_:1},8,["header"]),t(n,{field:"country",header:s.$t("pages.settings.country"),sortable:""},null,8,["header"]),t(n,{field:"address",header:s.$t("pages.school.address"),sortable:""},null,8,["header"]),t(n,{field:"manager_email",header:s.$t("managerEmail"),sortable:""},null,8,["header"]),t(n,{field:"num_current_classes",header:s.$t("pages.teacher.classes"),sortable:""},{body:a(({data:e})=>[u(o(e.num_current_classes)+" / "+o(e.num_max_classes),1)]),_:1},8,["header"]),t(n,{field:"num_current_teachers",header:s.$t("pages.school.teachers"),sortable:""},{body:a(({data:e})=>[u(o(e.num_current_teachers)+" / "+o(e.num_max_teachers),1)]),_:1},8,["header"]),t(n,{field:"num_current_students",header:s.$t("pages.teacher.students"),sortable:""},{body:a(({data:e})=>[u(o(e.num_current_students)+" / "+o(e.num_max_students),1)]),_:1},8,["header"]),t(n,{field:"created_time",header:s.$t("createdTime"),sortable:""},{body:a(({data:e})=>[c("div",x,o(e.created_time.split("T")[0]+" "+e.created_time.split(".")[0].split("T")[1]),1)]),_:1},8,["header"]),t(n,{field:"subscription_start",header:s.$t("subscriptionStart"),sortable:""},{body:a(({data:e})=>[e.subscription_start?(r(),i("div",A,o(e.subscription_start.split("T")[0]),1)):(r(),i("div",G,"-"))]),_:1},8,["header"]),t(n,{field:"subscription_end",header:s.$t("subscriptionEnd"),sortable:""},{body:a(({data:e})=>[e.subscription_end?(r(),i("div",K,[c("span",{class:M({"text-red-500":p(new Date(e.subscription_end))<0,"text-orange-500":p(new Date(e.subscription_end))>=0&&p(new Date(e.subscription_end))<10})},o(e.subscription_end.split("T")[0])+" (left "+o(p(new Date(e.subscription_end)))+") ",3)])):(r(),i("div",q,"-"))]),_:1},8,["header"]),t(n,{frozen:!0,alignFrozen:"right",exportable:!1},{body:a(({data:e})=>[y(s.$slots,"actions",{row:e})]),_:3})]),_:3},8,["filters","value","loading"])}}});export{Z as _};
