import{d as b,aG as V,m as _,u as w,a as h,ag as k,r as x,o as S,f as B,w as n,b as r,j as u,e as d,g as C,t as T,k as E,s as D,au as N}from"./index-D-EZhA5_.js";import{S as M}from"./index-npflP2qz.js";const R={class:"text-blue-500"},q=b({__name:"VerifyEmailDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(m){const o=V(m,"modelValue"),c=E(),{locale:f}=_(),l=w(),p=h(),{user:v}=k(p),s=x(!1);async function y(){s.value=!0;try{await M.sendVerificationEmail(f.value),l.add({severity:"success",summary:"Verification email sent!",life:2e3})}catch(t){console.log(t),l.add({severity:"error",summary:"Email is invalid!",detail:t,life:2e3})}finally{s.value=!1}}return(t,e)=>{const i=D,g=N;return S(),B(g,{visible:o.value,"onUpdate:visible":e[1]||(e[1]=a=>o.value=a),modal:"",draggable:!1,class:"m-4 max-w-md",header:"Verify your email"},{footer:n(()=>[r(i,{label:"Change email",severity:"secondary",onClick:e[0]||(e[0]=a=>{u(c).replace({path:"/settings/change-email"}),o.value=!1})}),r(i,{label:"Send verification email",onClick:y,disabled:s.value,loading:s.value},null,8,["disabled","loading"])]),default:n(()=>{var a;return[d("div",null,[e[2]||(e[2]=C("To continue, you need to confirm your email. To do this, follow the link in the letter that we will send to ")),d("span",R,T((a=u(v))==null?void 0:a.email),1)])]}),_:1},8,["visible"])}}});export{q as _};
