import{s as b}from"./index-BQKo0YUX.js";import{e as h,r as k,o,c as i,a as e,H as $,i as j,I as P,j as v,t as l,k as m,y as I,h as d,F as g,n as S,l as C,s as B,b as L,C as R,f as T,B as V,q as D,M}from"./index-RQaPKU3q.js";import{_ as N}from"./MainHeader.vue_vue_type_script_setup_true_lang-BuW7JKj1.js";import"./index-zUgF_fUw.js";import{u as O}from"./useProjectsStore-CLvZD17N.js";import{T as U}from"./index-DnxWnOWO.js";import{s as q}from"./index-BEGyIpqi.js";import{s as E}from"./index-i87uic1r.js";import{_ as F}from"./UserMenu.vue_vue_type_script_setup_true_lang-3l-gndQ6.js";import{L as z}from"./lessonApi-CDtd4rn4.js";import"./index-C1N2nWcC.js";import"./index-DYe12pIs.js";import"./projectApi-C84aqwGt.js";import"./mapUnitFromDto-DRcH-Z8v.js";import"./transformUnitDtosToPages-BbPlv-Pt.js";import"./index-5bJt7VTk.js";import"./logo-D1-3uCnC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-DOQWPUhj.js";import"./index-CmgTJnJ7.js";import"./index-DoQeMzHI.js";import"./index-BQlFFWCz.js";import"./index-DZ_1xp5G.js";import"./index-ZflZKAdM.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D5A7GxOk.js";import"./index-csPL02fk.js";import"./language-DYQF8nnT.js";const A={class:"absolute top-0 left-0"},H={class:"flex gap-2 w-full h-full"},J={class:"flex flex-col justify-between items w-full"},G={class:"flex flex-col gap-[2px] justify-center"},K={class:"text-overline-small"},Q={class:"flex items-center gap-2"},W={key:0,class:"text-purple h-[22px] w-4"},X={class:"text-body-large-semibold"},Y={class:"pt-[10px] flex flex-col gap-1"},Z={class:"action-small-bold text-blue400"},ee={key:0},te={key:1},se={key:2},oe=h({__name:"ProjectCard",props:{project:{}},setup(x){const s=x,c=S(),a=k(!1),p=()=>{if(s.project.accessStatus!=="available"){s.project.accessStatus=="premium_restriction"&&(a.value=!0);return}c.push({name:"project",params:{id:s.project.id},query:{route_id:s.project.routeId}})};async function f(){if(s.project.accessStatus!=="available"){s.project.accessStatus=="premium_restriction"&&(a.value=!0);return}await z.resetLessonById(s.project.id),c.push({name:"project",params:{id:s.project.id},query:{route_id:s.project.routeId}})}return(t,r)=>{const n=C,_=E,u=q,y=U;return o(),i(g,null,[e("div",{class:I(["relative flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer bg-blue50",{"cursor-not-allowed opacity-60 pointer-events-none":t.project.accessStatus==="progress_restriction"}]),onClick:p},[e("div",A,[t.project.studentProgress>0?$((o(),j(n,{key:0,icon:"pi pi-refresh",variant:"link",onClick:P(f,["stop","prevent"]),class:"text-blue400"},null,512)),[[y,t.$t("startOver"),void 0,{top:!0}]]):v("",!0)]),e("div",H,[e("div",J,[r[2]||(r[2]=e("div",{class:"flex flex-wrap text-xs font-semibold pt-8"},null,-1)),e("div",G,[e("div",K,l(t.project.description),1),e("div",Q,[t.project.accessStatus==="premium_restriction"?(o(),i("div",W,r[1]||(r[1]=[e("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):v("",!0),e("div",X,l(t.project.name),1)])])]),s.project.sourceImageUrl?(o(),j(_,{key:0,src:s.project.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):v("",!0)]),e("div",Y,[e("div",Z,[t.project.studentProgress==100||t.project.completed?(o(),i("span",ee,l(t.$t("done")),1)):t.project.studentProgress==0?(o(),i("span",te,l(t.$t("start")),1)):(o(),i("span",se,l(t.$t("inProgress")),1))]),m(u,{value:t.project.studentProgress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-blue400)"},background:"var(--color-blue200)"}},null,8,["value"])])],2),m(d(F),{"model-value":a.value,"onUpdate:modelValue":r[0]||(r[0]=w=>a.value=w)},null,8,["model-value"])],64)}}}),re={class:"flex flex-col items-center"},ie={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},ae={class:"text-heading-2-bold text-neutral900"},le={class:"w-full max-w-[1280px] px-8 pb-10"},ce={key:1,class:"flex justify-center"},ne={key:2,class:"flex flex-col gap-8"},pe={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},Oe=h({__name:"ProjectsPage",setup(x){const s=O(),{projects:c,isLoading:a}=B(s),{loadProjects:p}=s,f=L(()=>{var r;return(r=c.value)==null?void 0:r.filter(n=>n.stage==="published"&&n.routeId!==M)});R(()=>p());const{locale:t}=T();return V(t,async()=>{await p()}),(r,n)=>{const _=b;return o(),i("div",re,[m(d(N)),e("div",ie,[e("div",ae,l(r.$t("projects")),1)]),e("div",le,[d(a)?(o(),j(_,{key:0,class:"flex justify-center"})):d(c)?(o(),i("div",ne,[e("div",pe,[(o(!0),i(g,null,D(f.value,u=>(o(),i("div",{key:u.id},[m(oe,{project:u},null,8,["project"])]))),128))])])):(o(),i("div",ce,"No projects yet"))])])}}});export{Oe as default};
