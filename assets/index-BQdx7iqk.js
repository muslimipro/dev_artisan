import{o as se,c as Oe,a as ie,$ as yr,d as Du,u as Iu,s as pn,r as fe,a0 as wu,a1 as Mu,a2 as ku,a3 as Lu,e as mr,b as fa,i as yt,t as St,h as re,j as mt,k as te,I as _n,H as Cr,K as fo,n as ll,l as ho,a4 as ul,P as cl,a5 as dl,w as Lt,F as Mn,q as Jr,y as Nu,R as ai,a6 as ha,C as fl,A as Ru,G as Gu,a7 as Fu,B as hl,L as ju}from"./index-8eYd0-Co.js";import{s as Bu}from"./index-DmPj76Dy.js";import{s as vo}from"./index-B3NttIqY.js";import{s as vl}from"./index-DZEPUsZQ.js";import{s as va}from"./index-WXQmNEQQ.js";import{s as po}from"./index-DQafit8Y.js";import{_ as Uu}from"./MainHeader.vue_vue_type_script_setup_true_lang-9nA_jXJL.js";import{C as Vi}from"./cloudStorageApi-bDCOPLaA.js";import"./index-v1ivQW6n.js";import{_ as Vu}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-BkFfrpR3.js";import{u as pl}from"./useLocaleStore-CGKTShgd.js";import{d as Hi}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{R as hi}from"./routeApi-C9o8WR_b.js";import{m as Hu}from"./mapRouteFromDto-C1VVcbzq.js";import{L as nn}from"./lessonApi-B_VTKClk.js";import{g as $u}from"./groupLessonsByLevelAndType-C-co-UzZ.js";import{s as Yu}from"./index-DW8h8G0I.js";import{s as Xu}from"./index-c_rbGUP2.js";import{s as Wu}from"./index-DSyhlytj.js";import{s as Ku}from"./index-DRGFISwW.js";import{s as zu}from"./index-19jCyGXe.js";import{A as Zu}from"./accessType-pqVUocEs.js";import{A as Xa,C as Ju}from"./lessonType-DG-bLtoJ.js";import{T as Qu}from"./index-CID063JX.js";import{_ as go}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as qu}from"./index-DXpPoTSi.js";import{s as ec}from"./index-DSx-p37b.js";import{u as gl}from"./useRoutesStore-NrETij2-.js";import{u as tc}from"./useProjectsStore-Bhad-IBN.js";import"./index-fKBIE13H.js";import"./index-CfMinl4z.js";import"./index-B8MXaspB.js";import"./UserMenu.vue_vue_type_script_setup_true_lang-BRlzN8C8.js";import"./logo-D1-3uCnC.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-Ba8DXsyo.js";import"./otherApi-DDWnLwKS.js";import"./index-Ck89Hfr2.js";import"./index-eKsVto-V.js";import"./index-DCkUGzHX.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-DZQGeYqM.js";import"./language-DYQF8nnT.js";import"./index-BqAwfTve.js";import"./mapLessonFromDto-C9SLSKbW.js";import"./mapUnitFromDto-C-vlLM9s.js";import"./index-BB-HFA2F.js";import"./index-VgJXLjdG.js";import"./index-CQCkvxda.js";import"./index-CsjCzc3Q.js";import"./index-C5W94n6N.js";import"./index-ahqnJA0E.js";import"./index-CrUX9qwQ.js";const nc={},rc={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ic(a,o){return se(),Oe("svg",rc,o[0]||(o[0]=[ie("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.5936 2.31883C11.483 1.89372 12.517 1.89372 13.4064 2.31883C13.7928 2.50351 14.1468 2.80551 14.6371 3.22367C14.6625 3.24538 14.6883 3.2674 14.7146 3.28973C14.9526 3.49262 15.0276 3.555 15.1035 3.60585C15.2965 3.73519 15.5132 3.82495 15.7411 3.86995C15.8307 3.88764 15.9278 3.89654 16.2396 3.92143C16.2739 3.92417 16.3078 3.92685 16.3411 3.92949C16.9834 3.98046 17.4473 4.01727 17.8511 4.15991C18.7807 4.48822 19.5118 5.21935 19.8401 6.14885C19.9827 6.55267 20.0195 7.01656 20.0705 7.6589C20.0732 7.69224 20.0758 7.72607 20.0786 7.76039C20.1035 8.0722 20.1124 8.16933 20.1301 8.25894C20.175 8.48684 20.2648 8.70355 20.3941 8.89652C20.445 8.97239 20.5074 9.04737 20.7103 9.28545C20.7326 9.31166 20.7546 9.33748 20.7763 9.36293C21.1945 9.85316 21.4965 10.2072 21.6812 10.5936C22.1063 11.483 22.1063 12.517 21.6812 13.4064C21.4965 13.7928 21.1945 14.1468 20.7764 14.6371C20.7546 14.6625 20.7326 14.6883 20.7103 14.7146C20.5074 14.9526 20.445 15.0276 20.3941 15.1035C20.2648 15.2965 20.175 15.5132 20.1301 15.7411C20.1124 15.8307 20.1035 15.9278 20.0786 16.2396C20.0758 16.2739 20.0732 16.3078 20.0705 16.3411C20.0195 16.9834 19.9827 17.4473 19.8401 17.8511C19.5118 18.7807 18.7807 19.5118 17.8511 19.8401C17.4473 19.9827 16.9834 20.0195 16.3411 20.0705C16.3078 20.0732 16.2739 20.0758 16.2396 20.0786C15.9278 20.1035 15.8307 20.1124 15.7411 20.1301C15.5132 20.175 15.2965 20.2648 15.1035 20.3941C15.0276 20.445 14.9526 20.5074 14.7146 20.7103C14.6883 20.7326 14.6625 20.7546 14.6371 20.7763C14.1468 21.1945 13.7928 21.4965 13.4064 21.6812C12.517 22.1063 11.483 22.1063 10.5936 21.6812C10.2072 21.4965 9.85315 21.1945 9.3629 20.7763C9.33746 20.7546 9.31165 20.7326 9.28545 20.7103C9.04736 20.5074 8.97239 20.445 8.89652 20.3941C8.70355 20.2648 8.48684 20.175 8.25894 20.1301C8.16933 20.1124 8.0722 20.1035 7.76039 20.0786C7.72607 20.0758 7.69225 20.0732 7.6589 20.0705C7.01656 20.0195 6.55267 19.9827 6.14885 19.8401C5.21935 19.5118 4.48822 18.7807 4.15991 17.8511C4.01727 17.4473 3.98046 16.9834 3.92949 16.3411C3.92685 16.3078 3.92417 16.2739 3.92143 16.2396C3.89654 15.9278 3.88764 15.8307 3.86995 15.7411C3.82495 15.5132 3.73519 15.2965 3.60585 15.1035C3.555 15.0276 3.49262 14.9526 3.28973 14.7146C3.2674 14.6884 3.24538 14.6625 3.22368 14.6371C2.80551 14.1468 2.50351 13.7928 2.31883 13.4064C1.89372 12.517 1.89372 11.483 2.31883 10.5936C2.50351 10.2072 2.80551 9.85315 3.22367 9.36291C3.24537 9.33747 3.26739 9.31165 3.28973 9.28545C3.49262 9.04736 3.555 8.97239 3.60585 8.89652C3.73519 8.70355 3.82495 8.48684 3.86995 8.25894C3.88764 8.16933 3.89654 8.0722 3.92143 7.76039C3.92417 7.72607 3.92685 7.69225 3.92949 7.6589C3.98046 7.01657 4.01727 6.55267 4.15991 6.14885C4.48822 5.21935 5.21935 4.48822 6.14885 4.15991C6.55267 4.01727 7.01657 3.98046 7.65891 3.92949C7.69225 3.92685 7.72607 3.92417 7.76039 3.92143C8.0722 3.89654 8.16933 3.88764 8.25894 3.86995C8.48684 3.82495 8.70355 3.73519 8.89652 3.60585C8.97239 3.555 9.04736 3.49262 9.28545 3.28973C9.31165 3.26739 9.33746 3.24538 9.36291 3.22367C9.85315 2.80551 10.2072 2.50351 10.5936 2.31883ZM12.7573 3.6769C12.2784 3.44799 11.7216 3.44799 11.2427 3.6769C11.0576 3.76539 10.8624 3.92352 10.2618 4.43537C10.2519 4.44378 10.2422 4.45207 10.2326 4.46026C10.0354 4.6283 9.89156 4.75097 9.73456 4.8562C9.37619 5.09639 8.97373 5.2631 8.55048 5.34666C8.36505 5.38327 8.17657 5.39827 7.91837 5.41883C7.90579 5.41983 7.89304 5.42084 7.88012 5.42187C7.09348 5.48465 6.84367 5.51084 6.65016 5.57919C6.14966 5.75597 5.75597 6.14966 5.57919 6.65016C5.51084 6.84367 5.48465 7.09348 5.42187 7.88012C5.42084 7.89304 5.41983 7.90579 5.41883 7.91837C5.39827 8.17657 5.38327 8.36505 5.34666 8.55048C5.2631 8.97373 5.09639 9.37619 4.8562 9.73456C4.75097 9.89156 4.6283 10.0354 4.46025 10.2326C4.45207 10.2422 4.44377 10.2519 4.43537 10.2618C3.92352 10.8624 3.76539 11.0576 3.6769 11.2427C3.44799 11.7216 3.44799 12.2784 3.6769 12.7573C3.76539 12.9424 3.92352 13.1376 4.43537 13.7382C4.44378 13.7481 4.45207 13.7578 4.46026 13.7674C4.6283 13.9646 4.75097 14.1084 4.8562 14.2654C5.09639 14.6238 5.2631 15.0263 5.34666 15.4495C5.38327 15.6349 5.39827 15.8234 5.41883 16.0816C5.41983 16.0942 5.42084 16.107 5.42187 16.1199C5.48465 16.9065 5.51084 17.1563 5.57919 17.3498C5.75597 17.8503 6.14966 18.244 6.65016 18.4208C6.84367 18.4892 7.09348 18.5154 7.88012 18.5781L7.91836 18.5812C8.17658 18.6017 8.36506 18.6167 8.55048 18.6533C8.97373 18.7369 9.37619 18.9036 9.73456 19.1438C9.89156 19.249 10.0354 19.3717 10.2326 19.5397L10.2618 19.5646C10.8624 20.0765 11.0576 20.2346 11.2427 20.3231C11.7216 20.552 12.2784 20.552 12.7573 20.3231C12.9424 20.2346 13.1376 20.0765 13.7382 19.5646L13.7675 19.5397C13.9646 19.3717 14.1084 19.249 14.2654 19.1438C14.6238 18.9036 15.0263 18.7369 15.4495 18.6533C15.6349 18.6167 15.8234 18.6017 16.0816 18.5812L16.1199 18.5781C16.9065 18.5154 17.1563 18.4892 17.3498 18.4208C17.8503 18.244 18.244 17.8503 18.4208 17.3498C18.4892 17.1563 18.5154 16.9065 18.5781 16.1199L18.5812 16.0816C18.6017 15.8234 18.6167 15.6349 18.6533 15.4495C18.7369 15.0263 18.9036 14.6238 19.1438 14.2654C19.249 14.1084 19.3717 13.9646 19.5397 13.7675L19.5646 13.7382C20.0765 13.1376 20.2346 12.9424 20.3231 12.7573C20.552 12.2784 20.552 11.7216 20.3231 11.2427C20.2346 11.0576 20.0765 10.8624 19.5646 10.2618L19.5397 10.2325C19.3717 10.0354 19.249 9.89155 19.1438 9.73456C18.9036 9.37619 18.7369 8.97373 18.6533 8.55048C18.6167 8.36505 18.6017 8.17658 18.5812 7.91836L18.5781 7.88012C18.5154 7.09348 18.4892 6.84367 18.4208 6.65016C18.244 6.14966 17.8503 5.75597 17.3498 5.57919C17.1563 5.51084 16.9065 5.48465 16.1199 5.42187C16.107 5.42084 16.0942 5.41983 16.0816 5.41883C15.8234 5.39827 15.6349 5.38327 15.4495 5.34666C15.0263 5.2631 14.6238 5.09639 14.2654 4.8562C14.1084 4.75097 13.9646 4.6283 13.7674 4.46025C13.7578 4.45207 13.7481 4.44377 13.7382 4.43537C13.1376 3.92352 12.9424 3.76539 12.7573 3.6769ZM16.0443 8.95913C16.3383 9.25304 16.3383 9.72957 16.0443 10.0235L11.027 15.0409C10.733 15.3348 10.2565 15.3348 9.96261 15.0409L7.95565 13.0339C7.66174 12.74 7.66174 12.2635 7.95565 11.9696C8.24957 11.6757 8.72609 11.6757 9.02 11.9696L10.4948 13.4443L14.98 8.95913C15.2739 8.66522 15.7504 8.66522 16.0443 8.95913Z",fill:"currentColor"},null,-1)]))}const oc=go(nc,[["render",ic]]),Hr={createLevelByRouteId:ac,updateLevelByIdAndRouteId:sc,deleteLevelByIdAndRouteId:lc,connectLesson:uc,disconnectLesson:cc,getLevelsByRouteId:dc};async function ac(a,o){return await yr.post(`v2/route/${a}/level`,{name:o.name})}async function sc(a,o,n,i){const e={};return i&&(e.lang=i),await yr.put(`v2/route/${o}/level/${a}`,{language:n.language,learn_count:n.learn_count,name:n.name,practice_count:n.practice_count},{params:e})}async function lc(a,o){return await yr.delete(`v2/route/${o}/level/${a}`)}async function uc(a,o,n){return await yr.post(`v2/route/${a}/level/${o}/lesson`,{lesson_id:n})}async function cc(a,o,n){return await yr.delete(`v2/route/${a}/level/${o}/lesson`,{data:{lesson_id:n}})}async function dc(a){return await yr.get(`v2/route/${a}/levels`)}function fc(a,o){const n=new Map,i={};for(const e of o)n.set(e.id,e.levelId),i[e.levelId]||(i[e.levelId]=[]);for(const e of a){const t=n.get(e.lesson_id);t!==void 0&&i[t].push(e)}return i}const si=Du("route-edit-store",()=>{const a=Iu(),o=pl(),{lang:n}=pn(o),i=fe("Order mode"),e=fe(null),t=fe({}),r=fe({}),s=fe(!1),l=fe(!1),u=fe(!1),c=fe(!1),d=fe(!1),f=fe(!1),h=fe(!1),p=fe(!1),y=fe(!1),g=fe(!1);async function E(k){var R,H,ve,De;try{s.value=!0;const{data:ye}=await hi.getRouteById(k,n.value);e.value=Hu(ye),t.value=$u(((R=e.value)==null?void 0:R.lessons)??[],((H=e.value)==null?void 0:H.levels)??[]),r.value=fc(((ve=e.value)==null?void 0:ve.dependencies)??[],((De=e.value)==null?void 0:De.lessons)??[])}catch(ye){a.add({severity:"error",summary:ye.response.data.error,life:2e3})}finally{s.value=!1}}async function b(k,R){try{l.value=!0;const{data:H}=await hi.updateRouteById(k,R,n.value);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}finally{l.value=!1}}async function x(k){try{u.value=!0;const{data:R}=await hi.deleteRouteById(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}finally{u.value=!1}}async function C(k){try{c.value=!0;const{data:R}=await Hr.createLevelByRouteId(e.value.id,k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}finally{c.value=!1}}async function S(k,R){try{d.value=!0;const{data:H}=await Hr.updateLevelByIdAndRouteId(k,e.value.id,R,n.value);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}finally{d.value=!1}}async function T(k){try{f.value=!0;const{data:R}=await Hr.deleteLevelByIdAndRouteId(k,e.value.id);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}finally{f.value=!1}}async function _(k){try{h.value=!0;const{data:R}=await nn.createLesson(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}finally{h.value=!1}}async function P(k,R){try{p.value=!0;const{data:H}=await nn.updateLessonById(k,R,n.value);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}finally{p.value=!1}}async function O(k){try{y.value=!0;const{data:R}=await nn.deleteLessonById(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}finally{y.value=!1}}async function I(k,R){try{g.value=!0;const{data:H}=await hi.updateRouteLessonsOrderById(k,R);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}finally{g.value=!1}}async function L(k){try{const{data:R}=await nn.setLessonDependency(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}}async function M(k){try{const{data:R}=await nn.removeLessonDependency(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}}async function N(k){try{const{data:R}=await nn.removeAllLessonDependencies(k);a.add({severity:"success",summary:R.message,life:2e3})}catch(R){a.add({severity:"error",summary:R.response.data.error,life:2e3})}}async function G(k,R){try{const{data:H}=await nn.duplicateLesson(k,R);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}}async function B(k,R){try{const{data:H}=await nn.moveLesson(k,R);a.add({severity:"success",summary:H.message,life:2e3})}catch(H){a.add({severity:"error",summary:H.response.data.error,life:2e3})}}return{mode:i,selectedRoute:e,isRouteLoading:s,isRouteUpdating:l,isRouteDeleting:u,isLevelCreating:c,isLevelUpdating:d,isLevelDeleting:f,isLessonCreating:h,isLessonUpdating:p,isLessonDeleting:y,isOrderUpdating:g,groupedLessons:t,groupedDependencies:r,loadRouteById:E,updateRouteById:b,deleteRouteById:x,createLevel:C,updateLevelById:S,deleteLevelById:T,createLesson:_,updateLessonById:P,deleteLessonById:O,updateRouteLessonsOrderById:I,createLessonDependency:L,deleteLessonDependency:M,deleteAllLessonDependencies:N,copyLessonById:G,moveLessonById:B}});var yl={exports:{}};/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Wa(a,o){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);o&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),n.push.apply(n,i)}return n}function Ut(a){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?Wa(Object(n),!0).forEach(function(i){hc(a,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(n,i))})}return a}function wi(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wi=function(o){return typeof o}:wi=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},wi(a)}function hc(a,o,n){return o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Pt(){return Pt=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])}return a},Pt.apply(this,arguments)}function vc(a,o){if(a==null)return{};var n={},i=Object.keys(a),e,t;for(t=0;t<i.length;t++)e=i[t],!(o.indexOf(e)>=0)&&(n[e]=a[e]);return n}function pc(a,o){if(a==null)return{};var n=vc(a,o),i,e;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);for(e=0;e<t.length;e++)i=t[e],!(o.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(n[i]=a[i])}return n}function gc(a){return yc(a)||mc(a)||Ec(a)||bc()}function yc(a){if(Array.isArray(a))return Uo(a)}function mc(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Ec(a,o){if(a){if(typeof a=="string")return Uo(a,o);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uo(a,o)}}function Uo(a,o){(o==null||o>a.length)&&(o=a.length);for(var n=0,i=new Array(o);n<o;n++)i[n]=a[n];return i}function bc(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xc="1.14.0";function Zt(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var qt=Zt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),li=Zt(/Edge/i),Ka=Zt(/firefox/i),$r=Zt(/safari/i)&&!Zt(/chrome/i)&&!Zt(/android/i),ml=Zt(/iP(ad|od|hone)/i),Cc=Zt(/chrome/i)&&Zt(/android/i),El={capture:!1,passive:!1};function ue(a,o,n){a.addEventListener(o,n,!qt&&El)}function le(a,o,n){a.removeEventListener(o,n,!qt&&El)}function $i(a,o){if(o){if(o[0]===">"&&(o=o.substring(1)),a)try{if(a.matches)return a.matches(o);if(a.msMatchesSelector)return a.msMatchesSelector(o);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(o)}catch{return!1}return!1}}function Sc(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function wt(a,o,n,i){if(a){n=n||document;do{if(o!=null&&(o[0]===">"?a.parentNode===n&&$i(a,o):$i(a,o))||i&&a===n)return a;if(a===n)break}while(a=Sc(a))}return null}var za=/\s+/g;function Ge(a,o,n){if(a&&o)if(a.classList)a.classList[n?"add":"remove"](o);else{var i=(" "+a.className+" ").replace(za," ").replace(" "+o+" "," ");a.className=(i+(n?" "+o:"")).replace(za," ")}}function Y(a,o,n){var i=a&&a.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(n=a.currentStyle),o===void 0?n:n[o];!(o in i)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),i[o]=n+(typeof n=="string"?"":"px")}}function kn(a,o){var n="";if(typeof a=="string")n=a;else do{var i=Y(a,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!o&&(a=a.parentNode));var e=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return e&&new e(n)}function bl(a,o,n){if(a){var i=a.getElementsByTagName(o),e=0,t=i.length;if(n)for(;e<t;e++)n(i[e],e);return i}return[]}function Bt(){var a=document.scrollingElement;return a||document.documentElement}function Ne(a,o,n,i,e){if(!(!a.getBoundingClientRect&&a!==window)){var t,r,s,l,u,c,d;if(a!==window&&a.parentNode&&a!==Bt()?(t=a.getBoundingClientRect(),r=t.top,s=t.left,l=t.bottom,u=t.right,c=t.height,d=t.width):(r=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(o||n)&&a!==window&&(e=e||a.parentNode,!qt))do if(e&&e.getBoundingClientRect&&(Y(e,"transform")!=="none"||n&&Y(e,"position")!=="static")){var f=e.getBoundingClientRect();r-=f.top+parseInt(Y(e,"border-top-width")),s-=f.left+parseInt(Y(e,"border-left-width")),l=r+t.height,u=s+t.width;break}while(e=e.parentNode);if(i&&a!==window){var h=kn(e||a),p=h&&h.a,y=h&&h.d;h&&(r/=y,s/=p,d/=p,c/=y,l=r+c,u=s+d)}return{top:r,left:s,bottom:l,right:u,width:d,height:c}}}function Za(a,o,n){for(var i=dn(a,!0),e=Ne(a)[o];i;){var t=Ne(i)[n],r=void 0;if(r=e>=t,!r)return i;if(i===Bt())break;i=dn(i,!1)}return!1}function ur(a,o,n,i){for(var e=0,t=0,r=a.children;t<r.length;){if(r[t].style.display!=="none"&&r[t]!==J.ghost&&(i||r[t]!==J.dragged)&&wt(r[t],n.draggable,a,!1)){if(e===o)return r[t];e++}t++}return null}function pa(a,o){for(var n=a.lastElementChild;n&&(n===J.ghost||Y(n,"display")==="none"||o&&!$i(n,o));)n=n.previousElementSibling;return n||null}function Be(a,o){var n=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==J.clone&&(!o||$i(a,o))&&n++;return n}function Ja(a){var o=0,n=0,i=Bt();if(a)do{var e=kn(a),t=e.a,r=e.d;o+=a.scrollLeft*t,n+=a.scrollTop*r}while(a!==i&&(a=a.parentNode));return[o,n]}function Pc(a,o){for(var n in a)if(a.hasOwnProperty(n)){for(var i in o)if(o.hasOwnProperty(i)&&o[i]===a[n][i])return Number(n)}return-1}function dn(a,o){if(!a||!a.getBoundingClientRect)return Bt();var n=a,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var e=Y(n);if(n.clientWidth<n.scrollWidth&&(e.overflowX=="auto"||e.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(e.overflowY=="auto"||e.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Bt();if(i||o)return n;i=!0}}while(n=n.parentNode);return Bt()}function Tc(a,o){if(a&&o)for(var n in o)o.hasOwnProperty(n)&&(a[n]=o[n]);return a}function So(a,o){return Math.round(a.top)===Math.round(o.top)&&Math.round(a.left)===Math.round(o.left)&&Math.round(a.height)===Math.round(o.height)&&Math.round(a.width)===Math.round(o.width)}var Yr;function xl(a,o){return function(){if(!Yr){var n=arguments,i=this;n.length===1?a.call(i,n[0]):a.apply(i,n),Yr=setTimeout(function(){Yr=void 0},o)}}}function Oc(){clearTimeout(Yr),Yr=void 0}function Cl(a,o,n){a.scrollLeft+=o,a.scrollTop+=n}function ga(a){var o=window.Polymer,n=window.jQuery||window.Zepto;return o&&o.dom?o.dom(a).cloneNode(!0):n?n(a).clone(!0)[0]:a.cloneNode(!0)}function Qa(a,o){Y(a,"position","absolute"),Y(a,"top",o.top),Y(a,"left",o.left),Y(a,"width",o.width),Y(a,"height",o.height)}function Po(a){Y(a,"position",""),Y(a,"top",""),Y(a,"left",""),Y(a,"width",""),Y(a,"height","")}var at="Sortable"+new Date().getTime();function _c(){var a=[],o;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(e){if(!(Y(e,"display")==="none"||e===J.ghost)){a.push({target:e,rect:Ne(e)});var t=Ut({},a[a.length-1].rect);if(e.thisAnimationDuration){var r=kn(e,!0);r&&(t.top-=r.f,t.left-=r.e)}e.fromRect=t}})}},addAnimationState:function(i){a.push(i)},removeAnimationState:function(i){a.splice(Pc(a,{target:i}),1)},animateAll:function(i){var e=this;if(!this.options.animation){clearTimeout(o),typeof i=="function"&&i();return}var t=!1,r=0;a.forEach(function(s){var l=0,u=s.target,c=u.fromRect,d=Ne(u),f=u.prevFromRect,h=u.prevToRect,p=s.rect,y=kn(u,!0);y&&(d.top-=y.f,d.left-=y.e),u.toRect=d,u.thisAnimationDuration&&So(f,d)&&!So(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=Dc(p,f,h,e.options)),So(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=e.options.animation),e.animate(u,p,d,l)),l&&(t=!0,r=Math.max(r,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(o),t?o=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),a=[]},animate:function(i,e,t,r){if(r){Y(i,"transition",""),Y(i,"transform","");var s=kn(this.el),l=s&&s.a,u=s&&s.d,c=(e.left-t.left)/(l||1),d=(e.top-t.top)/(u||1);i.animatingX=!!c,i.animatingY=!!d,Y(i,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=Ac(i),Y(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Y(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Y(i,"transition",""),Y(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function Ac(a){return a.offsetWidth}function Dc(a,o,n,i){return Math.sqrt(Math.pow(o.top-a.top,2)+Math.pow(o.left-a.left,2))/Math.sqrt(Math.pow(o.top-n.top,2)+Math.pow(o.left-n.left,2))*i.animation}var Hn=[],To={initializeByDefault:!0},ui={mount:function(o){for(var n in To)To.hasOwnProperty(n)&&!(n in o)&&(o[n]=To[n]);Hn.forEach(function(i){if(i.pluginName===o.pluginName)throw"Sortable: Cannot mount plugin ".concat(o.pluginName," more than once")}),Hn.push(o)},pluginEvent:function(o,n,i){var e=this;this.eventCanceled=!1,i.cancel=function(){e.eventCanceled=!0};var t=o+"Global";Hn.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][t]&&n[r.pluginName][t](Ut({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][o]&&n[r.pluginName][o](Ut({sortable:n},i)))})},initializePlugins:function(o,n,i,e){Hn.forEach(function(s){var l=s.pluginName;if(!(!o.options[l]&&!s.initializeByDefault)){var u=new s(o,n,o.options);u.sortable=o,u.options=o.options,o[l]=u,Pt(i,u.defaults)}});for(var t in o.options)if(o.options.hasOwnProperty(t)){var r=this.modifyOption(o,t,o.options[t]);typeof r<"u"&&(o.options[t]=r)}},getEventProperties:function(o,n){var i={};return Hn.forEach(function(e){typeof e.eventProperties=="function"&&Pt(i,e.eventProperties.call(n[e.pluginName],o))}),i},modifyOption:function(o,n,i){var e;return Hn.forEach(function(t){o[t.pluginName]&&t.optionListeners&&typeof t.optionListeners[n]=="function"&&(e=t.optionListeners[n].call(o[t.pluginName],i))}),e}};function Lr(a){var o=a.sortable,n=a.rootEl,i=a.name,e=a.targetEl,t=a.cloneEl,r=a.toEl,s=a.fromEl,l=a.oldIndex,u=a.newIndex,c=a.oldDraggableIndex,d=a.newDraggableIndex,f=a.originalEvent,h=a.putSortable,p=a.extraEventProperties;if(o=o||n&&n[at],!!o){var y,g=o.options,E="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!qt&&!li?y=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(i,!0,!0)),y.to=r||n,y.from=s||n,y.item=e||n,y.clone=t,y.oldIndex=l,y.newIndex=u,y.oldDraggableIndex=c,y.newDraggableIndex=d,y.originalEvent=f,y.pullMode=h?h.lastPutMode:void 0;var b=Ut(Ut({},p),ui.getEventProperties(i,o));for(var x in b)y[x]=b[x];n&&n.dispatchEvent(y),g[E]&&g[E].call(o,y)}}var Ic=["evt"],ft=function(o,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=i.evt,t=pc(i,Ic);ui.pluginEvent.bind(J)(o,n,Ut({dragEl:j,parentEl:Fe,ghostEl:oe,rootEl:Me,nextEl:An,lastDownEl:Mi,cloneEl:je,cloneHidden:un,dragStarted:Nr,putSortable:qe,activeSortable:J.active,originalEvent:e,oldIndex:rr,oldDraggableIndex:Xr,newIndex:gt,newDraggableIndex:ln,hideGhostForTarget:Ol,unhideGhostForTarget:_l,cloneNowHidden:function(){un=!0},cloneNowShown:function(){un=!1},dispatchSortableEvent:function(s){lt({sortable:n,name:s,originalEvent:e})}},t))};function lt(a){Lr(Ut({putSortable:qe,cloneEl:je,targetEl:j,rootEl:Me,oldIndex:rr,oldDraggableIndex:Xr,newIndex:gt,newDraggableIndex:ln},a))}var j,Fe,oe,Me,An,Mi,je,un,rr,gt,Xr,ln,vi,qe,tr=!1,Yi=!1,Xi=[],bn,_t,Oo,_o,qa,es,Nr,$n,Wr,Kr=!1,pi=!1,ki,ot,Ao=[],Vo=!1,Wi=[],yo=typeof document<"u",gi=ml,ts=li||qt?"cssFloat":"float",wc=yo&&!Cc&&!ml&&"draggable"in document.createElement("div"),Sl=function(){if(yo){if(qt)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),Pl=function(o,n){var i=Y(o),e=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),t=ur(o,0,n),r=ur(o,1,n),s=t&&Y(t),l=r&&Y(r),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ne(t).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ne(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(t&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return t&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=e&&i[ts]==="none"||r&&i[ts]==="none"&&u+c>e)?"vertical":"horizontal"},Mc=function(o,n,i){var e=i?o.left:o.top,t=i?o.right:o.bottom,r=i?o.width:o.height,s=i?n.left:n.top,l=i?n.right:n.bottom,u=i?n.width:n.height;return e===s||t===l||e+r/2===s+u/2},kc=function(o,n){var i;return Xi.some(function(e){var t=e[at].options.emptyInsertThreshold;if(!(!t||pa(e))){var r=Ne(e),s=o>=r.left-t&&o<=r.right+t,l=n>=r.top-t&&n<=r.bottom+t;if(s&&l)return i=e}}),i},Tl=function(o){function n(t,r){return function(s,l,u,c){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(t==null&&(r||d))return!0;if(t==null||t===!1)return!1;if(r&&t==="clone")return t;if(typeof t=="function")return n(t(s,l,u,c),r)(s,l,u,c);var f=(r?s:l).options.group.name;return t===!0||typeof t=="string"&&t===f||t.join&&t.indexOf(f)>-1}}var i={},e=o.group;(!e||wi(e)!="object")&&(e={name:e}),i.name=e.name,i.checkPull=n(e.pull,!0),i.checkPut=n(e.put),i.revertClone=e.revertClone,o.group=i},Ol=function(){!Sl&&oe&&Y(oe,"display","none")},_l=function(){!Sl&&oe&&Y(oe,"display","")};yo&&document.addEventListener("click",function(a){if(Yi)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Yi=!1,!1},!0);var xn=function(o){if(j){o=o.touches?o.touches[0]:o;var n=kc(o.clientX,o.clientY);if(n){var i={};for(var e in o)o.hasOwnProperty(e)&&(i[e]=o[e]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[at]._onDragOver(i)}}},Lc=function(o){j&&j.parentNode[at]._isOutsideThisEl(o.target)};function J(a,o){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=o=Pt({},o),a[at]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Pl(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:J.supportPointer!==!1&&"PointerEvent"in window&&!$r,emptyInsertThreshold:5};ui.initializePlugins(this,a,n);for(var i in n)!(i in o)&&(o[i]=n[i]);Tl(o);for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));this.nativeDraggable=o.forceFallback?!1:wc,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?ue(a,"pointerdown",this._onTapStart):(ue(a,"mousedown",this._onTapStart),ue(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(ue(a,"dragover",this),ue(a,"dragenter",this)),Xi.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Pt(this,_c())}J.prototype={constructor:J,_isOutsideThisEl:function(o){!this.el.contains(o)&&o!==this.el&&($n=null)},_getDirection:function(o,n){return typeof this.options.direction=="function"?this.options.direction.call(this,o,n,j):this.options.direction},_onTapStart:function(o){if(o.cancelable){var n=this,i=this.el,e=this.options,t=e.preventOnFilter,r=o.type,s=o.touches&&o.touches[0]||o.pointerType&&o.pointerType==="touch"&&o,l=(s||o).target,u=o.target.shadowRoot&&(o.path&&o.path[0]||o.composedPath&&o.composedPath()[0])||l,c=e.filter;if(Vc(i),!j&&!(/mousedown|pointerdown/.test(r)&&o.button!==0||e.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&$r&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=wt(l,e.draggable,i,!1),!(l&&l.animated)&&Mi!==l)){if(rr=Be(l),Xr=Be(l,e.draggable),typeof c=="function"){if(c.call(this,o,l,this)){lt({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:i,fromEl:i}),ft("filter",n,{evt:o}),t&&o.cancelable&&o.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=wt(u,d.trim(),i,!1),d)return lt({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),ft("filter",n,{evt:o}),!0}),c)){t&&o.cancelable&&o.preventDefault();return}e.handle&&!wt(u,e.handle,i,!1)||this._prepareDragStart(o,s,l)}}},_prepareDragStart:function(o,n,i){var e=this,t=e.el,r=e.options,s=t.ownerDocument,l;if(i&&!j&&i.parentNode===t){var u=Ne(i);if(Me=t,j=i,Fe=j.parentNode,An=j.nextSibling,Mi=i,vi=r.group,J.dragged=j,bn={target:j,clientX:(n||o).clientX,clientY:(n||o).clientY},qa=bn.clientX-u.left,es=bn.clientY-u.top,this._lastX=(n||o).clientX,this._lastY=(n||o).clientY,j.style["will-change"]="all",l=function(){if(ft("delayEnded",e,{evt:o}),J.eventCanceled){e._onDrop();return}e._disableDelayedDragEvents(),!Ka&&e.nativeDraggable&&(j.draggable=!0),e._triggerDragStart(o,n),lt({sortable:e,name:"choose",originalEvent:o}),Ge(j,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){bl(j,c.trim(),Do)}),ue(s,"dragover",xn),ue(s,"mousemove",xn),ue(s,"touchmove",xn),ue(s,"mouseup",e._onDrop),ue(s,"touchend",e._onDrop),ue(s,"touchcancel",e._onDrop),Ka&&this.nativeDraggable&&(this.options.touchStartThreshold=4,j.draggable=!0),ft("delayStart",this,{evt:o}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(li||qt))){if(J.eventCanceled){this._onDrop();return}ue(s,"mouseup",e._disableDelayedDrag),ue(s,"touchend",e._disableDelayedDrag),ue(s,"touchcancel",e._disableDelayedDrag),ue(s,"mousemove",e._delayedDragTouchMoveHandler),ue(s,"touchmove",e._delayedDragTouchMoveHandler),r.supportPointer&&ue(s,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(o){var n=o.touches?o.touches[0]:o;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){j&&Do(j),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var o=this.el.ownerDocument;le(o,"mouseup",this._disableDelayedDrag),le(o,"touchend",this._disableDelayedDrag),le(o,"touchcancel",this._disableDelayedDrag),le(o,"mousemove",this._delayedDragTouchMoveHandler),le(o,"touchmove",this._delayedDragTouchMoveHandler),le(o,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(o,n){n=n||o.pointerType=="touch"&&o,!this.nativeDraggable||n?this.options.supportPointer?ue(document,"pointermove",this._onTouchMove):n?ue(document,"touchmove",this._onTouchMove):ue(document,"mousemove",this._onTouchMove):(ue(j,"dragend",this),ue(Me,"dragstart",this._onDragStart));try{document.selection?Li(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(o,n){if(tr=!1,Me&&j){ft("dragStarted",this,{evt:n}),this.nativeDraggable&&ue(document,"dragover",Lc);var i=this.options;!o&&Ge(j,i.dragClass,!1),Ge(j,i.ghostClass,!0),J.active=this,o&&this._appendGhost(),lt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(_t){this._lastX=_t.clientX,this._lastY=_t.clientY,Ol();for(var o=document.elementFromPoint(_t.clientX,_t.clientY),n=o;o&&o.shadowRoot&&(o=o.shadowRoot.elementFromPoint(_t.clientX,_t.clientY),o!==n);)n=o;if(j.parentNode[at]._isOutsideThisEl(o),n)do{if(n[at]){var i=void 0;if(i=n[at]._onDragOver({clientX:_t.clientX,clientY:_t.clientY,target:o,rootEl:n}),i&&!this.options.dragoverBubble)break}o=n}while(n=n.parentNode);_l()}},_onTouchMove:function(o){if(bn){var n=this.options,i=n.fallbackTolerance,e=n.fallbackOffset,t=o.touches?o.touches[0]:o,r=oe&&kn(oe,!0),s=oe&&r&&r.a,l=oe&&r&&r.d,u=gi&&ot&&Ja(ot),c=(t.clientX-bn.clientX+e.x)/(s||1)+(u?u[0]-Ao[0]:0)/(s||1),d=(t.clientY-bn.clientY+e.y)/(l||1)+(u?u[1]-Ao[1]:0)/(l||1);if(!J.active&&!tr){if(i&&Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))<i)return;this._onDragStart(o,!0)}if(oe){r?(r.e+=c-(Oo||0),r.f+=d-(_o||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Y(oe,"webkitTransform",f),Y(oe,"mozTransform",f),Y(oe,"msTransform",f),Y(oe,"transform",f),Oo=c,_o=d,_t=t}o.cancelable&&o.preventDefault()}},_appendGhost:function(){if(!oe){var o=this.options.fallbackOnBody?document.body:Me,n=Ne(j,!0,gi,!0,o),i=this.options;if(gi){for(ot=o;Y(ot,"position")==="static"&&Y(ot,"transform")==="none"&&ot!==document;)ot=ot.parentNode;ot!==document.body&&ot!==document.documentElement?(ot===document&&(ot=Bt()),n.top+=ot.scrollTop,n.left+=ot.scrollLeft):ot=Bt(),Ao=Ja(ot)}oe=j.cloneNode(!0),Ge(oe,i.ghostClass,!1),Ge(oe,i.fallbackClass,!0),Ge(oe,i.dragClass,!0),Y(oe,"transition",""),Y(oe,"transform",""),Y(oe,"box-sizing","border-box"),Y(oe,"margin",0),Y(oe,"top",n.top),Y(oe,"left",n.left),Y(oe,"width",n.width),Y(oe,"height",n.height),Y(oe,"opacity","0.8"),Y(oe,"position",gi?"absolute":"fixed"),Y(oe,"zIndex","100000"),Y(oe,"pointerEvents","none"),J.ghost=oe,o.appendChild(oe),Y(oe,"transform-origin",qa/parseInt(oe.style.width)*100+"% "+es/parseInt(oe.style.height)*100+"%")}},_onDragStart:function(o,n){var i=this,e=o.dataTransfer,t=i.options;if(ft("dragStart",this,{evt:o}),J.eventCanceled){this._onDrop();return}ft("setupClone",this),J.eventCanceled||(je=ga(j),je.draggable=!1,je.style["will-change"]="",this._hideClone(),Ge(je,this.options.chosenClass,!1),J.clone=je),i.cloneId=Li(function(){ft("clone",i),!J.eventCanceled&&(i.options.removeCloneOnHide||Me.insertBefore(je,j),i._hideClone(),lt({sortable:i,name:"clone"}))}),!n&&Ge(j,t.dragClass,!0),n?(Yi=!0,i._loopId=setInterval(i._emulateDragOver,50)):(le(document,"mouseup",i._onDrop),le(document,"touchend",i._onDrop),le(document,"touchcancel",i._onDrop),e&&(e.effectAllowed="move",t.setData&&t.setData.call(i,e,j)),ue(document,"drop",i),Y(j,"transform","translateZ(0)")),tr=!0,i._dragStartId=Li(i._dragStarted.bind(i,n,o)),ue(document,"selectstart",i),Nr=!0,$r&&Y(document.body,"user-select","none")},_onDragOver:function(o){var n=this.el,i=o.target,e,t,r,s=this.options,l=s.group,u=J.active,c=vi===l,d=s.sort,f=qe||u,h,p=this,y=!1;if(Vo)return;function g(H,ve){ft(H,p,Ut({evt:o,isOwner:c,axis:h?"vertical":"horizontal",revert:r,dragRect:e,targetRect:t,canSort:d,fromSortable:f,target:i,completed:b,onMove:function(ye,Ce){return yi(Me,n,j,e,ye,Ne(ye),o,Ce)},changed:x},ve))}function E(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function b(H){return g("dragOverCompleted",{insertion:H}),H&&(c?u._hideClone():u._showClone(p),p!==f&&(Ge(j,qe?qe.options.ghostClass:u.options.ghostClass,!1),Ge(j,s.ghostClass,!0)),qe!==p&&p!==J.active?qe=p:p===J.active&&qe&&(qe=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===j&&!j.animated||i===n&&!i.animated)&&($n=null),!s.dragoverBubble&&!o.rootEl&&i!==document&&(j.parentNode[at]._isOutsideThisEl(o.target),!H&&xn(o)),!s.dragoverBubble&&o.stopPropagation&&o.stopPropagation(),y=!0}function x(){gt=Be(j),ln=Be(j,s.draggable),lt({sortable:p,name:"change",toEl:n,newIndex:gt,newDraggableIndex:ln,originalEvent:o})}if(o.preventDefault!==void 0&&o.cancelable&&o.preventDefault(),i=wt(i,s.draggable,n,!0),g("dragOver"),J.eventCanceled)return y;if(j.contains(o.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return b(!1);if(Yi=!1,u&&!s.disabled&&(c?d||(r=Fe!==Me):qe===this||(this.lastPutMode=vi.checkPull(this,u,j,o))&&l.checkPut(this,u,j,o))){if(h=this._getDirection(o,i)==="vertical",e=Ne(j),g("dragOverValid"),J.eventCanceled)return y;if(r)return Fe=Me,E(),this._hideClone(),g("revert"),J.eventCanceled||(An?Me.insertBefore(j,An):Me.appendChild(j)),b(!0);var C=pa(n,s.draggable);if(!C||Fc(o,h,this)&&!C.animated){if(C===j)return b(!1);if(C&&n===o.target&&(i=C),i&&(t=Ne(i)),yi(Me,n,j,e,i,t,o,!!i)!==!1)return E(),n.appendChild(j),Fe=n,x(),b(!0)}else if(C&&Gc(o,h,this)){var S=ur(n,0,s,!0);if(S===j)return b(!1);if(i=S,t=Ne(i),yi(Me,n,j,e,i,t,o,!1)!==!1)return E(),n.insertBefore(j,S),Fe=n,x(),b(!0)}else if(i.parentNode===n){t=Ne(i);var T=0,_,P=j.parentNode!==n,O=!Mc(j.animated&&j.toRect||e,i.animated&&i.toRect||t,h),I=h?"top":"left",L=Za(i,"top","top")||Za(j,"top","top"),M=L?L.scrollTop:void 0;$n!==i&&(_=t[I],Kr=!1,pi=!O&&s.invertSwap||P),T=jc(o,i,t,h,O?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,pi,$n===i);var N;if(T!==0){var G=Be(j);do G-=T,N=Fe.children[G];while(N&&(Y(N,"display")==="none"||N===oe))}if(T===0||N===i)return b(!1);$n=i,Wr=T;var B=i.nextElementSibling,k=!1;k=T===1;var R=yi(Me,n,j,e,i,t,o,k);if(R!==!1)return(R===1||R===-1)&&(k=R===1),Vo=!0,setTimeout(Rc,30),E(),k&&!B?n.appendChild(j):i.parentNode.insertBefore(j,k?B:i),L&&Cl(L,0,M-L.scrollTop),Fe=j.parentNode,_!==void 0&&!pi&&(ki=Math.abs(_-Ne(i)[I])),x(),b(!0)}if(n.contains(j))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){le(document,"mousemove",this._onTouchMove),le(document,"touchmove",this._onTouchMove),le(document,"pointermove",this._onTouchMove),le(document,"dragover",xn),le(document,"mousemove",xn),le(document,"touchmove",xn)},_offUpEvents:function(){var o=this.el.ownerDocument;le(o,"mouseup",this._onDrop),le(o,"touchend",this._onDrop),le(o,"pointerup",this._onDrop),le(o,"touchcancel",this._onDrop),le(document,"selectstart",this)},_onDrop:function(o){var n=this.el,i=this.options;if(gt=Be(j),ln=Be(j,i.draggable),ft("drop",this,{evt:o}),Fe=j&&j.parentNode,gt=Be(j),ln=Be(j,i.draggable),J.eventCanceled){this._nulling();return}tr=!1,pi=!1,Kr=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ho(this.cloneId),Ho(this._dragStartId),this.nativeDraggable&&(le(document,"drop",this),le(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),$r&&Y(document.body,"user-select",""),Y(j,"transform",""),o&&(Nr&&(o.cancelable&&o.preventDefault(),!i.dropBubble&&o.stopPropagation()),oe&&oe.parentNode&&oe.parentNode.removeChild(oe),(Me===Fe||qe&&qe.lastPutMode!=="clone")&&je&&je.parentNode&&je.parentNode.removeChild(je),j&&(this.nativeDraggable&&le(j,"dragend",this),Do(j),j.style["will-change"]="",Nr&&!tr&&Ge(j,qe?qe.options.ghostClass:this.options.ghostClass,!1),Ge(j,this.options.chosenClass,!1),lt({sortable:this,name:"unchoose",toEl:Fe,newIndex:null,newDraggableIndex:null,originalEvent:o}),Me!==Fe?(gt>=0&&(lt({rootEl:Fe,name:"add",toEl:Fe,fromEl:Me,originalEvent:o}),lt({sortable:this,name:"remove",toEl:Fe,originalEvent:o}),lt({rootEl:Fe,name:"sort",toEl:Fe,fromEl:Me,originalEvent:o}),lt({sortable:this,name:"sort",toEl:Fe,originalEvent:o})),qe&&qe.save()):gt!==rr&&gt>=0&&(lt({sortable:this,name:"update",toEl:Fe,originalEvent:o}),lt({sortable:this,name:"sort",toEl:Fe,originalEvent:o})),J.active&&((gt==null||gt===-1)&&(gt=rr,ln=Xr),lt({sortable:this,name:"end",toEl:Fe,originalEvent:o}),this.save()))),this._nulling()},_nulling:function(){ft("nulling",this),Me=j=Fe=oe=An=je=Mi=un=bn=_t=Nr=gt=ln=rr=Xr=$n=Wr=qe=vi=J.dragged=J.ghost=J.clone=J.active=null,Wi.forEach(function(o){o.checked=!0}),Wi.length=Oo=_o=0},handleEvent:function(o){switch(o.type){case"drop":case"dragend":this._onDrop(o);break;case"dragenter":case"dragover":j&&(this._onDragOver(o),Nc(o));break;case"selectstart":o.preventDefault();break}},toArray:function(){for(var o=[],n,i=this.el.children,e=0,t=i.length,r=this.options;e<t;e++)n=i[e],wt(n,r.draggable,this.el,!1)&&o.push(n.getAttribute(r.dataIdAttr)||Uc(n));return o},sort:function(o,n){var i={},e=this.el;this.toArray().forEach(function(t,r){var s=e.children[r];wt(s,this.options.draggable,e,!1)&&(i[t]=s)},this),n&&this.captureAnimationState(),o.forEach(function(t){i[t]&&(e.removeChild(i[t]),e.appendChild(i[t]))}),n&&this.animateAll()},save:function(){var o=this.options.store;o&&o.set&&o.set(this)},closest:function(o,n){return wt(o,n||this.options.draggable,this.el,!1)},option:function(o,n){var i=this.options;if(n===void 0)return i[o];var e=ui.modifyOption(this,o,n);typeof e<"u"?i[o]=e:i[o]=n,o==="group"&&Tl(i)},destroy:function(){ft("destroy",this);var o=this.el;o[at]=null,le(o,"mousedown",this._onTapStart),le(o,"touchstart",this._onTapStart),le(o,"pointerdown",this._onTapStart),this.nativeDraggable&&(le(o,"dragover",this),le(o,"dragenter",this)),Array.prototype.forEach.call(o.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Xi.splice(Xi.indexOf(this.el),1),this.el=o=null},_hideClone:function(){if(!un){if(ft("hideClone",this),J.eventCanceled)return;Y(je,"display","none"),this.options.removeCloneOnHide&&je.parentNode&&je.parentNode.removeChild(je),un=!0}},_showClone:function(o){if(o.lastPutMode!=="clone"){this._hideClone();return}if(un){if(ft("showClone",this),J.eventCanceled)return;j.parentNode==Me&&!this.options.group.revertClone?Me.insertBefore(je,j):An?Me.insertBefore(je,An):Me.appendChild(je),this.options.group.revertClone&&this.animate(j,je),Y(je,"display",""),un=!1}}};function Nc(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function yi(a,o,n,i,e,t,r,s){var l,u=a[at],c=u.options.onMove,d;return window.CustomEvent&&!qt&&!li?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=o,l.from=a,l.dragged=n,l.draggedRect=i,l.related=e||o,l.relatedRect=t||Ne(o),l.willInsertAfter=s,l.originalEvent=r,a.dispatchEvent(l),c&&(d=c.call(u,l,r)),d}function Do(a){a.draggable=!1}function Rc(){Vo=!1}function Gc(a,o,n){var i=Ne(ur(n.el,0,n.options,!0)),e=10;return o?a.clientX<i.left-e||a.clientY<i.top&&a.clientX<i.right:a.clientY<i.top-e||a.clientY<i.bottom&&a.clientX<i.left}function Fc(a,o,n){var i=Ne(pa(n.el,n.options.draggable)),e=10;return o?a.clientX>i.right+e||a.clientX<=i.right&&a.clientY>i.bottom&&a.clientX>=i.left:a.clientX>i.right&&a.clientY>i.top||a.clientX<=i.right&&a.clientY>i.bottom+e}function jc(a,o,n,i,e,t,r,s){var l=i?a.clientY:a.clientX,u=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,f=!1;if(!r){if(s&&ki<u*e){if(!Kr&&(Wr===1?l>c+u*t/2:l<d-u*t/2)&&(Kr=!0),Kr)f=!0;else if(Wr===1?l<c+ki:l>d-ki)return-Wr}else if(l>c+u*(1-e)/2&&l<d-u*(1-e)/2)return Bc(o)}return f=f||r,f&&(l<c+u*t/2||l>d-u*t/2)?l>c+u/2?1:-1:0}function Bc(a){return Be(j)<Be(a)?1:-1}function Uc(a){for(var o=a.tagName+a.className+a.src+a.href+a.textContent,n=o.length,i=0;n--;)i+=o.charCodeAt(n);return i.toString(36)}function Vc(a){Wi.length=0;for(var o=a.getElementsByTagName("input"),n=o.length;n--;){var i=o[n];i.checked&&Wi.push(i)}}function Li(a){return setTimeout(a,0)}function Ho(a){return clearTimeout(a)}yo&&ue(document,"touchmove",function(a){(J.active||tr)&&a.cancelable&&a.preventDefault()});J.utils={on:ue,off:le,css:Y,find:bl,is:function(o,n){return!!wt(o,n,o,!1)},extend:Tc,throttle:xl,closest:wt,toggleClass:Ge,clone:ga,index:Be,nextTick:Li,cancelNextTick:Ho,detectDirection:Pl,getChild:ur};J.get=function(a){return a[at]};J.mount=function(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];o[0].constructor===Array&&(o=o[0]),o.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(J.utils=Ut(Ut({},J.utils),i.utils)),ui.mount(i)})};J.create=function(a,o){return new J(a,o)};J.version=xc;var Xe=[],Rr,$o,Yo=!1,Io,wo,Ki,Gr;function Hc(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return a.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?ue(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ue(document,"pointermove",this._handleFallbackAutoScroll):i.touches?ue(document,"touchmove",this._handleFallbackAutoScroll):ue(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?le(document,"dragover",this._handleAutoScroll):(le(document,"pointermove",this._handleFallbackAutoScroll),le(document,"touchmove",this._handleFallbackAutoScroll),le(document,"mousemove",this._handleFallbackAutoScroll)),ns(),Ni(),Oc()},nulling:function(){Ki=$o=Rr=Yo=Gr=Io=wo=null,Xe.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var e=this,t=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(t,r);if(Ki=n,i||this.options.forceAutoScrollFallback||li||qt||$r){Mo(n,this.options,s,i);var l=dn(s,!0);Yo&&(!Gr||t!==Io||r!==wo)&&(Gr&&ns(),Gr=setInterval(function(){var u=dn(document.elementFromPoint(t,r),!0);u!==l&&(l=u,Ni()),Mo(n,e.options,u,i)},10),Io=t,wo=r)}else{if(!this.options.bubbleScroll||dn(s,!0)===Bt()){Ni();return}Mo(n,this.options,dn(s,!1),!1)}}},Pt(a,{pluginName:"scroll",initializeByDefault:!0})}function Ni(){Xe.forEach(function(a){clearInterval(a.pid)}),Xe=[]}function ns(){clearInterval(Gr)}var Mo=xl(function(a,o,n,i){if(o.scroll){var e=(a.touches?a.touches[0]:a).clientX,t=(a.touches?a.touches[0]:a).clientY,r=o.scrollSensitivity,s=o.scrollSpeed,l=Bt(),u=!1,c;$o!==n&&($o=n,Ni(),Rr=o.scroll,c=o.scrollFn,Rr===!0&&(Rr=dn(n,!0)));var d=0,f=Rr;do{var h=f,p=Ne(h),y=p.top,g=p.bottom,E=p.left,b=p.right,x=p.width,C=p.height,S=void 0,T=void 0,_=h.scrollWidth,P=h.scrollHeight,O=Y(h),I=h.scrollLeft,L=h.scrollTop;h===l?(S=x<_&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),T=C<P&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(S=x<_&&(O.overflowX==="auto"||O.overflowX==="scroll"),T=C<P&&(O.overflowY==="auto"||O.overflowY==="scroll"));var M=S&&(Math.abs(b-e)<=r&&I+x<_)-(Math.abs(E-e)<=r&&!!I),N=T&&(Math.abs(g-t)<=r&&L+C<P)-(Math.abs(y-t)<=r&&!!L);if(!Xe[d])for(var G=0;G<=d;G++)Xe[G]||(Xe[G]={});(Xe[d].vx!=M||Xe[d].vy!=N||Xe[d].el!==h)&&(Xe[d].el=h,Xe[d].vx=M,Xe[d].vy=N,clearInterval(Xe[d].pid),(M!=0||N!=0)&&(u=!0,Xe[d].pid=setInterval((function(){i&&this.layer===0&&J.active._onTouchMove(Ki);var B=Xe[this.layer].vy?Xe[this.layer].vy*s:0,k=Xe[this.layer].vx?Xe[this.layer].vx*s:0;typeof c=="function"&&c.call(J.dragged.parentNode[at],k,B,a,Ki,Xe[this.layer].el)!=="continue"||Cl(Xe[this.layer].el,k,B)}).bind({layer:d}),24))),d++}while(o.bubbleScroll&&f!==l&&(f=dn(f,!1)));Yo=u}},30),Al=function(o){var n=o.originalEvent,i=o.putSortable,e=o.dragEl,t=o.activeSortable,r=o.dispatchSortableEvent,s=o.hideGhostForTarget,l=o.unhideGhostForTarget;if(n){var u=i||t;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(r("spill"),this.onSpill({dragEl:e,putSortable:i}))}};function ya(){}ya.prototype={startIndex:null,dragStart:function(o){var n=o.oldDraggableIndex;this.startIndex=n},onSpill:function(o){var n=o.dragEl,i=o.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var e=ur(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(n,e):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Al};Pt(ya,{pluginName:"revertOnSpill"});function ma(){}ma.prototype={onSpill:function(o){var n=o.dragEl,i=o.putSortable,e=i||this.sortable;e.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),e.animateAll()},drop:Al};Pt(ma,{pluginName:"removeOnSpill"});var bt;function $c(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}return a.prototype={dragStart:function(n){var i=n.dragEl;bt=i},dragOverValid:function(n){var i=n.completed,e=n.target,t=n.onMove,r=n.activeSortable,s=n.changed,l=n.cancel;if(r.options.swap){var u=this.sortable.el,c=this.options;if(e&&e!==u){var d=bt;t(e)!==!1?(Ge(e,c.swapClass,!0),bt=e):bt=null,d&&d!==bt&&Ge(d,c.swapClass,!1)}s(),i(!0),l()}},drop:function(n){var i=n.activeSortable,e=n.putSortable,t=n.dragEl,r=e||this.sortable,s=this.options;bt&&Ge(bt,s.swapClass,!1),bt&&(s.swap||e&&e.options.swap)&&t!==bt&&(r.captureAnimationState(),r!==i&&i.captureAnimationState(),Yc(t,bt),r.animateAll(),r!==i&&i.animateAll())},nulling:function(){bt=null}},Pt(a,{pluginName:"swap",eventProperties:function(){return{swapItem:bt}}})}function Yc(a,o){var n=a.parentNode,i=o.parentNode,e,t;!n||!i||n.isEqualNode(o)||i.isEqualNode(a)||(e=Be(a),t=Be(o),n.isEqualNode(i)&&e<t&&t++,n.insertBefore(o,n.children[e]),i.insertBefore(a,i.children[t]))}var ne=[],pt=[],Sr,At,Pr=!1,ht=!1,Yn=!1,Te,Tr,mi;function Xc(){function a(o){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));o.options.supportPointer?ue(document,"pointerup",this._deselectMultiDrag):(ue(document,"mouseup",this._deselectMultiDrag),ue(document,"touchend",this._deselectMultiDrag)),ue(document,"keydown",this._checkKeyDown),ue(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,t){var r="";ne.length&&At===o?ne.forEach(function(s,l){r+=(l?", ":"")+s.textContent}):r=t.textContent,e.setData("Text",r)}}}return a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var i=n.dragEl;Te=i},delayEnded:function(){this.isMultiDrag=~ne.indexOf(Te)},setupClone:function(n){var i=n.sortable,e=n.cancel;if(this.isMultiDrag){for(var t=0;t<ne.length;t++)pt.push(ga(ne[t])),pt[t].sortableIndex=ne[t].sortableIndex,pt[t].draggable=!1,pt[t].style["will-change"]="",Ge(pt[t],this.options.selectedClass,!1),ne[t]===Te&&Ge(pt[t],this.options.chosenClass,!1);i._hideClone(),e()}},clone:function(n){var i=n.sortable,e=n.rootEl,t=n.dispatchSortableEvent,r=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ne.length&&At===i&&(rs(!0,e),t("clone"),r()))},showClone:function(n){var i=n.cloneNowShown,e=n.rootEl,t=n.cancel;this.isMultiDrag&&(rs(!1,e),pt.forEach(function(r){Y(r,"display","")}),i(),mi=!1,t())},hideClone:function(n){var i=this;n.sortable;var e=n.cloneNowHidden,t=n.cancel;this.isMultiDrag&&(pt.forEach(function(r){Y(r,"display","none"),i.options.removeCloneOnHide&&r.parentNode&&r.parentNode.removeChild(r)}),e(),mi=!0,t())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&At&&At.multiDrag._deselectMultiDrag(),ne.forEach(function(i){i.sortableIndex=Be(i)}),ne=ne.sort(function(i,e){return i.sortableIndex-e.sortableIndex}),Yn=!0},dragStarted:function(n){var i=this,e=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(e.captureAnimationState(),this.options.animation)){ne.forEach(function(r){r!==Te&&Y(r,"position","absolute")});var t=Ne(Te,!1,!0,!0);ne.forEach(function(r){r!==Te&&Qa(r,t)}),ht=!0,Pr=!0}e.animateAll(function(){ht=!1,Pr=!1,i.options.animation&&ne.forEach(function(r){Po(r)}),i.options.sort&&Ei()})}},dragOver:function(n){var i=n.target,e=n.completed,t=n.cancel;ht&&~ne.indexOf(i)&&(e(!1),t())},revert:function(n){var i=n.fromSortable,e=n.rootEl,t=n.sortable,r=n.dragRect;ne.length>1&&(ne.forEach(function(s){t.addAnimationState({target:s,rect:ht?Ne(s):r}),Po(s),s.fromRect=r,i.removeAnimationState(s)}),ht=!1,Wc(!this.options.removeCloneOnHide,e))},dragOverCompleted:function(n){var i=n.sortable,e=n.isOwner,t=n.insertion,r=n.activeSortable,s=n.parentEl,l=n.putSortable,u=this.options;if(t){if(e&&r._hideClone(),Pr=!1,u.animation&&ne.length>1&&(ht||!e&&!r.options.sort&&!l)){var c=Ne(Te,!1,!0,!0);ne.forEach(function(f){f!==Te&&(Qa(f,c),s.appendChild(f))}),ht=!0}if(!e)if(ht||Ei(),ne.length>1){var d=mi;r._showClone(i),r.options.animation&&!mi&&d&&pt.forEach(function(f){r.addAnimationState({target:f,rect:Tr}),f.fromRect=Tr,f.thisAnimationDuration=null})}else r._showClone(i)}},dragOverAnimationCapture:function(n){var i=n.dragRect,e=n.isOwner,t=n.activeSortable;if(ne.forEach(function(s){s.thisAnimationDuration=null}),t.options.animation&&!e&&t.multiDrag.isMultiDrag){Tr=Pt({},i);var r=kn(Te,!0);Tr.top-=r.f,Tr.left-=r.e}},dragOverAnimationComplete:function(){ht&&(ht=!1,Ei())},drop:function(n){var i=n.originalEvent,e=n.rootEl,t=n.parentEl,r=n.sortable,s=n.dispatchSortableEvent,l=n.oldIndex,u=n.putSortable,c=u||this.sortable;if(i){var d=this.options,f=t.children;if(!Yn)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ge(Te,d.selectedClass,!~ne.indexOf(Te)),~ne.indexOf(Te))ne.splice(ne.indexOf(Te),1),Sr=null,Lr({sortable:r,rootEl:e,name:"deselect",targetEl:Te,originalEvt:i});else{if(ne.push(Te),Lr({sortable:r,rootEl:e,name:"select",targetEl:Te,originalEvt:i}),i.shiftKey&&Sr&&r.el.contains(Sr)){var h=Be(Sr),p=Be(Te);if(~h&&~p&&h!==p){var y,g;for(p>h?(g=h,y=p):(g=p,y=h+1);g<y;g++)~ne.indexOf(f[g])||(Ge(f[g],d.selectedClass,!0),ne.push(f[g]),Lr({sortable:r,rootEl:e,name:"select",targetEl:f[g],originalEvt:i}))}}else Sr=Te;At=c}if(Yn&&this.isMultiDrag){if(ht=!1,(t[at].options.sort||t!==e)&&ne.length>1){var E=Ne(Te),b=Be(Te,":not(."+this.options.selectedClass+")");if(!Pr&&d.animation&&(Te.thisAnimationDuration=null),c.captureAnimationState(),!Pr&&(d.animation&&(Te.fromRect=E,ne.forEach(function(C){if(C.thisAnimationDuration=null,C!==Te){var S=ht?Ne(C):E;C.fromRect=S,c.addAnimationState({target:C,rect:S})}})),Ei(),ne.forEach(function(C){f[b]?t.insertBefore(C,f[b]):t.appendChild(C),b++}),l===Be(Te))){var x=!1;ne.forEach(function(C){if(C.sortableIndex!==Be(C)){x=!0;return}}),x&&s("update")}ne.forEach(function(C){Po(C)}),c.animateAll()}At=c}(e===t||u&&u.lastPutMode!=="clone")&&pt.forEach(function(C){C.parentNode&&C.parentNode.removeChild(C)})}},nullingGlobal:function(){this.isMultiDrag=Yn=!1,pt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),le(document,"pointerup",this._deselectMultiDrag),le(document,"mouseup",this._deselectMultiDrag),le(document,"touchend",this._deselectMultiDrag),le(document,"keydown",this._checkKeyDown),le(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Yn<"u"&&Yn)&&At===this.sortable&&!(n&&wt(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;ne.length;){var i=ne[0];Ge(i,this.options.selectedClass,!1),ne.shift(),Lr({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:i,originalEvt:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Pt(a,{pluginName:"multiDrag",utils:{select:function(n){var i=n.parentNode[at];!i||!i.options.multiDrag||~ne.indexOf(n)||(At&&At!==i&&(At.multiDrag._deselectMultiDrag(),At=i),Ge(n,i.options.selectedClass,!0),ne.push(n))},deselect:function(n){var i=n.parentNode[at],e=ne.indexOf(n);!i||!i.options.multiDrag||!~e||(Ge(n,i.options.selectedClass,!1),ne.splice(e,1))}},eventProperties:function(){var n=this,i=[],e=[];return ne.forEach(function(t){i.push({multiDragElement:t,index:t.sortableIndex});var r;ht&&t!==Te?r=-1:ht?r=Be(t,":not(."+n.options.selectedClass+")"):r=Be(t),e.push({multiDragElement:t,index:r})}),{items:gc(ne),clones:[].concat(pt),oldIndicies:i,newIndicies:e}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function Wc(a,o){ne.forEach(function(n,i){var e=o.children[n.sortableIndex+(a?Number(i):0)];e?o.insertBefore(n,e):o.appendChild(n)})}function rs(a,o){pt.forEach(function(n,i){var e=o.children[n.sortableIndex+(a?Number(i):0)];e?o.insertBefore(n,e):o.appendChild(n)})}function Ei(){ne.forEach(function(a){a!==Te&&a.parentNode&&a.parentNode.removeChild(a)})}J.mount(new Hc);J.mount(ma,ya);const Kc=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Xc,Sortable:J,Swap:$c,default:J},Symbol.toStringTag,{value:"Module"})),zc=wu(Kc);(function(a,o){(function(i,e){a.exports=e(Mu,zc)})(typeof self<"u"?self:ku,function(n,i){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var l=t[s]={i:s,l:!1,exports:{}};return e[s].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=e,r.c=t,r.d=function(s,l,u){r.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:u})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,l){if(l&1&&(s=r(s)),l&8||l&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),l&2&&typeof s!="string")for(var c in s)r.d(u,c,(function(d){return s[d]}).bind(null,c));return u},r.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(l,"a",l),l},r.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},r.p="",r(r.s="fb15")}({"00ee":function(e,t,r){var s=r("b622"),l=s("toStringTag"),u={};u[l]="z",e.exports=String(u)==="[object z]"},"0366":function(e,t,r){var s=r("1c0b");e.exports=function(l,u,c){if(s(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(d){return l.call(u,d)};case 2:return function(d,f){return l.call(u,d,f)};case 3:return function(d,f,h){return l.call(u,d,f,h)}}return function(){return l.apply(u,arguments)}}},"057f":function(e,t,r){var s=r("fc6a"),l=r("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return c.slice()}};e.exports.f=function(h){return c&&u.call(h)=="[object Window]"?d(h):l(s(h))}},"06cf":function(e,t,r){var s=r("83ab"),l=r("d1e7"),u=r("5c6c"),c=r("fc6a"),d=r("c04e"),f=r("5135"),h=r("0cfb"),p=Object.getOwnPropertyDescriptor;t.f=s?p:function(g,E){if(g=c(g),E=d(E,!0),h)try{return p(g,E)}catch{}if(f(g,E))return u(!l.f.call(g,E),g[E])}},"0cfb":function(e,t,r){var s=r("83ab"),l=r("d039"),u=r("cc12");e.exports=!s&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(e,t,r){var s=r("23e7"),l=r("d58f").left,u=r("a640"),c=r("ae40"),d=u("reduce"),f=c("reduce",{1:0});s({target:"Array",proto:!0,forced:!d||!f},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(e,t,r){var s=r("c6b6"),l=r("9263");e.exports=function(u,c){var d=u.exec;if(typeof d=="function"){var f=d.call(u,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(s(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}},"159b":function(e,t,r){var s=r("da84"),l=r("fdbc"),u=r("17c2"),c=r("9112");for(var d in l){var f=s[d],h=f&&f.prototype;if(h&&h.forEach!==u)try{c(h,"forEach",u)}catch{h.forEach=u}}},"17c2":function(e,t,r){var s=r("b727").forEach,l=r("a640"),u=r("ae40"),c=l("forEach"),d=u("forEach");e.exports=!c||!d?function(h){return s(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(e,t,r){var s=r("d066");e.exports=s("document","documentElement")},"1c0b":function(e,t){e.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},"1c7e":function(e,t,r){var s=r("b622"),l=s("iterator"),u=!1;try{var c=0,d={next:function(){return{done:!!c++}},return:function(){u=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}e.exports=function(f,h){if(!h&&!u)return!1;var p=!1;try{var y={};y[l]=function(){return{next:function(){return{done:p=!0}}}},f(y)}catch{}return p}},"1d80":function(e,t){e.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},"1dde":function(e,t,r){var s=r("d039"),l=r("b622"),u=r("2d00"),c=l("species");e.exports=function(d){return u>=51||!s(function(){var f=[],h=f.constructor={};return h[c]=function(){return{foo:1}},f[d](Boolean).foo!==1})}},"23cb":function(e,t,r){var s=r("a691"),l=Math.max,u=Math.min;e.exports=function(c,d){var f=s(c);return f<0?l(f+d,0):u(f,d)}},"23e7":function(e,t,r){var s=r("da84"),l=r("06cf").f,u=r("9112"),c=r("6eeb"),d=r("ce4e"),f=r("e893"),h=r("94ca");e.exports=function(p,y){var g=p.target,E=p.global,b=p.stat,x,C,S,T,_,P;if(E?C=s:b?C=s[g]||d(g,{}):C=(s[g]||{}).prototype,C)for(S in y){if(_=y[S],p.noTargetGet?(P=l(C,S),T=P&&P.value):T=C[S],x=h(E?S:g+(b?".":"#")+S,p.forced),!x&&T!==void 0){if(typeof _==typeof T)continue;f(_,T)}(p.sham||T&&T.sham)&&u(_,"sham",!0),c(C,S,_,p)}}},"241c":function(e,t,r){var s=r("ca84"),l=r("7839"),u=l.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(d){return s(d,u)}},"25f0":function(e,t,r){var s=r("6eeb"),l=r("825a"),u=r("d039"),c=r("ad6d"),d="toString",f=RegExp.prototype,h=f[d],p=u(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),y=h.name!=d;(p||y)&&s(RegExp.prototype,d,function(){var E=l(this),b=String(E.source),x=E.flags,C=String(x===void 0&&E instanceof RegExp&&!("flags"in f)?c.call(E):x);return"/"+b+"/"+C},{unsafe:!0})},"2ca0":function(e,t,r){var s=r("23e7"),l=r("06cf").f,u=r("50c4"),c=r("5a34"),d=r("1d80"),f=r("ab13"),h=r("c430"),p="".startsWith,y=Math.min,g=f("startsWith"),E=!h&&!g&&!!function(){var b=l(String.prototype,"startsWith");return b&&!b.writable}();s({target:"String",proto:!0,forced:!E&&!g},{startsWith:function(x){var C=String(d(this));c(x);var S=u(y(arguments.length>1?arguments[1]:void 0,C.length)),T=String(x);return p?p.call(C,T,S):C.slice(S,S+T.length)===T}})},"2d00":function(e,t,r){var s=r("da84"),l=r("342f"),u=s.process,c=u&&u.versions,d=c&&c.v8,f,h;d?(f=d.split("."),h=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(h=f[1]))),e.exports=h&&+h},"342f":function(e,t,r){var s=r("d066");e.exports=s("navigator","userAgent")||""},"35a1":function(e,t,r){var s=r("f5df"),l=r("3f8c"),u=r("b622"),c=u("iterator");e.exports=function(d){if(d!=null)return d[c]||d["@@iterator"]||l[s(d)]}},"37e8":function(e,t,r){var s=r("83ab"),l=r("9bf2"),u=r("825a"),c=r("df75");e.exports=s?Object.defineProperties:function(f,h){u(f);for(var p=c(h),y=p.length,g=0,E;y>g;)l.f(f,E=p[g++],h[E]);return f}},"3bbe":function(e,t,r){var s=r("861d");e.exports=function(l){if(!s(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(e,t,r){var s=r("6547").charAt,l=r("69f3"),u=r("7dd0"),c="String Iterator",d=l.set,f=l.getterFor(c);u(String,"String",function(h){d(this,{type:c,string:String(h),index:0})},function(){var p=f(this),y=p.string,g=p.index,E;return g>=y.length?{value:void 0,done:!0}:(E=s(y,g),p.index+=E.length,{value:E,done:!1})})},"3f8c":function(e,t){e.exports={}},4160:function(e,t,r){var s=r("23e7"),l=r("17c2");s({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(e,t,r){var s=r("da84");e.exports=s},"44ad":function(e,t,r){var s=r("d039"),l=r("c6b6"),u="".split;e.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object},"44d2":function(e,t,r){var s=r("b622"),l=r("7c73"),u=r("9bf2"),c=s("unscopables"),d=Array.prototype;d[c]==null&&u.f(d,c,{configurable:!0,value:l(null)}),e.exports=function(f){d[c][f]=!0}},"44e7":function(e,t,r){var s=r("861d"),l=r("c6b6"),u=r("b622"),c=u("match");e.exports=function(d){var f;return s(d)&&((f=d[c])!==void 0?!!f:l(d)=="RegExp")}},4930:function(e,t,r){var s=r("d039");e.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"4d64":function(e,t,r){var s=r("fc6a"),l=r("50c4"),u=r("23cb"),c=function(d){return function(f,h,p){var y=s(f),g=l(y.length),E=u(p,g),b;if(d&&h!=h){for(;g>E;)if(b=y[E++],b!=b)return!0}else for(;g>E;E++)if((d||E in y)&&y[E]===h)return d||E||0;return!d&&-1}};e.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(e,t,r){var s=r("23e7"),l=r("b727").filter,u=r("1dde"),c=r("ae40"),d=u("filter"),f=c("filter");s({target:"Array",proto:!0,forced:!d||!f},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,r){var s=r("0366"),l=r("7b0b"),u=r("9bdd"),c=r("e95a"),d=r("50c4"),f=r("8418"),h=r("35a1");e.exports=function(y){var g=l(y),E=typeof this=="function"?this:Array,b=arguments.length,x=b>1?arguments[1]:void 0,C=x!==void 0,S=h(g),T=0,_,P,O,I,L,M;if(C&&(x=s(x,b>2?arguments[2]:void 0,2)),S!=null&&!(E==Array&&c(S)))for(I=S.call(g),L=I.next,P=new E;!(O=L.call(I)).done;T++)M=C?u(I,x,[O.value,T],!0):O.value,f(P,T,M);else for(_=d(g.length),P=new E(_);_>T;T++)M=C?x(g[T],T):g[T],f(P,T,M);return P.length=T,P}},"4fad":function(e,t,r){var s=r("23e7"),l=r("6f53").entries;s({target:"Object",stat:!0},{entries:function(c){return l(c)}})},"50c4":function(e,t,r){var s=r("a691"),l=Math.min;e.exports=function(u){return u>0?l(s(u),9007199254740991):0}},5135:function(e,t){var r={}.hasOwnProperty;e.exports=function(s,l){return r.call(s,l)}},5319:function(e,t,r){var s=r("d784"),l=r("825a"),u=r("7b0b"),c=r("50c4"),d=r("a691"),f=r("1d80"),h=r("8aa5"),p=r("14c3"),y=Math.max,g=Math.min,E=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g,C=function(S){return S===void 0?S:String(S)};s("replace",2,function(S,T,_,P){var O=P.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,I=P.REPLACE_KEEPS_$0,L=O?"$":"$0";return[function(G,B){var k=f(this),R=G==null?void 0:G[S];return R!==void 0?R.call(G,k,B):T.call(String(k),G,B)},function(N,G){if(!O&&I||typeof G=="string"&&G.indexOf(L)===-1){var B=_(T,N,this,G);if(B.done)return B.value}var k=l(N),R=String(this),H=typeof G=="function";H||(G=String(G));var ve=k.global;if(ve){var De=k.unicode;k.lastIndex=0}for(var ye=[];;){var Ce=p(k,R);if(Ce===null||(ye.push(Ce),!ve))break;var Re=String(Ce[0]);Re===""&&(k.lastIndex=h(R,c(k.lastIndex),De))}for(var Ie="",Ae=0,xe=0;xe<ye.length;xe++){Ce=ye[xe];for(var pe=String(Ce[0]),tt=y(g(d(Ce.index),R.length),0),Je=[],Rt=1;Rt<Ce.length;Rt++)Je.push(C(Ce[Rt]));var Tt=Ce.groups;if(H){var Gt=[pe].concat(Je,tt,R);Tt!==void 0&&Gt.push(Tt);var U=String(G.apply(void 0,Gt))}else U=M(pe,R,tt,Je,Tt,G);tt>=Ae&&(Ie+=R.slice(Ae,tt)+U,Ae=tt+pe.length)}return Ie+R.slice(Ae)}];function M(N,G,B,k,R,H){var ve=B+N.length,De=k.length,ye=x;return R!==void 0&&(R=u(R),ye=b),T.call(H,ye,function(Ce,Re){var Ie;switch(Re.charAt(0)){case"$":return"$";case"&":return N;case"`":return G.slice(0,B);case"'":return G.slice(ve);case"<":Ie=R[Re.slice(1,-1)];break;default:var Ae=+Re;if(Ae===0)return Ce;if(Ae>De){var xe=E(Ae/10);return xe===0?Ce:xe<=De?k[xe-1]===void 0?Re.charAt(1):k[xe-1]+Re.charAt(1):Ce}Ie=k[Ae-1]}return Ie===void 0?"":Ie})}})},5692:function(e,t,r){var s=r("c430"),l=r("c6cd");(e.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,r){var s=r("d066"),l=r("241c"),u=r("7418"),c=r("825a");e.exports=s("Reflect","ownKeys")||function(f){var h=l.f(c(f)),p=u.f;return p?h.concat(p(f)):h}},"5a34":function(e,t,r){var s=r("44e7");e.exports=function(l){if(s(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(e,t){e.exports=function(r,s){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:s}}},"5db7":function(e,t,r){var s=r("23e7"),l=r("a2bf"),u=r("7b0b"),c=r("50c4"),d=r("1c0b"),f=r("65f0");s({target:"Array",proto:!0},{flatMap:function(p){var y=u(this),g=c(y.length),E;return d(p),E=f(y,0),E.length=l(E,y,y,g,0,1,p,arguments.length>1?arguments[1]:void 0),E}})},6547:function(e,t,r){var s=r("a691"),l=r("1d80"),u=function(c){return function(d,f){var h=String(l(d)),p=s(f),y=h.length,g,E;return p<0||p>=y?c?"":void 0:(g=h.charCodeAt(p),g<55296||g>56319||p+1===y||(E=h.charCodeAt(p+1))<56320||E>57343?c?h.charAt(p):g:c?h.slice(p,p+2):(g-55296<<10)+(E-56320)+65536)}};e.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(e,t,r){var s=r("861d"),l=r("e8b5"),u=r("b622"),c=u("species");e.exports=function(d,f){var h;return l(d)&&(h=d.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:s(h)&&(h=h[c],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}},"69f3":function(e,t,r){var s=r("7f9a"),l=r("da84"),u=r("861d"),c=r("9112"),d=r("5135"),f=r("f772"),h=r("d012"),p=l.WeakMap,y,g,E,b=function(O){return E(O)?g(O):y(O,{})},x=function(O){return function(I){var L;if(!u(I)||(L=g(I)).type!==O)throw TypeError("Incompatible receiver, "+O+" required");return L}};if(s){var C=new p,S=C.get,T=C.has,_=C.set;y=function(O,I){return _.call(C,O,I),I},g=function(O){return S.call(C,O)||{}},E=function(O){return T.call(C,O)}}else{var P=f("state");h[P]=!0,y=function(O,I){return c(O,P,I),I},g=function(O){return d(O,P)?O[P]:{}},E=function(O){return d(O,P)}}e.exports={set:y,get:g,has:E,enforce:b,getterFor:x}},"6eeb":function(e,t,r){var s=r("da84"),l=r("9112"),u=r("5135"),c=r("ce4e"),d=r("8925"),f=r("69f3"),h=f.get,p=f.enforce,y=String(String).split("String");(e.exports=function(g,E,b,x){var C=x?!!x.unsafe:!1,S=x?!!x.enumerable:!1,T=x?!!x.noTargetGet:!1;if(typeof b=="function"&&(typeof E=="string"&&!u(b,"name")&&l(b,"name",E),p(b).source=y.join(typeof E=="string"?E:"")),g===s){S?g[E]=b:c(E,b);return}else C?!T&&g[E]&&(S=!0):delete g[E];S?g[E]=b:l(g,E,b)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||d(this)})},"6f53":function(e,t,r){var s=r("83ab"),l=r("df75"),u=r("fc6a"),c=r("d1e7").f,d=function(f){return function(h){for(var p=u(h),y=l(p),g=y.length,E=0,b=[],x;g>E;)x=y[E++],(!s||c.call(p,x))&&b.push(f?[x,p[x]]:p[x]);return b}};e.exports={entries:d(!0),values:d(!1)}},"73d9":function(e,t,r){var s=r("44d2");s("flatMap")},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,r){var s=r("428f"),l=r("5135"),u=r("e538"),c=r("9bf2").f;e.exports=function(d){var f=s.Symbol||(s.Symbol={});l(f,d)||c(f,d,{value:u.f(d)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,r){var s=r("1d80");e.exports=function(l){return Object(s(l))}},"7c73":function(e,t,r){var s=r("825a"),l=r("37e8"),u=r("7839"),c=r("d012"),d=r("1be4"),f=r("cc12"),h=r("f772"),p=">",y="<",g="prototype",E="script",b=h("IE_PROTO"),x=function(){},C=function(O){return y+E+p+O+y+"/"+E+p},S=function(O){O.write(C("")),O.close();var I=O.parentWindow.Object;return O=null,I},T=function(){var O=f("iframe"),I="java"+E+":",L;return O.style.display="none",d.appendChild(O),O.src=String(I),L=O.contentWindow.document,L.open(),L.write(C("document.F=Object")),L.close(),L.F},_,P=function(){try{_=document.domain&&new ActiveXObject("htmlfile")}catch{}P=_?S(_):T();for(var O=u.length;O--;)delete P[g][u[O]];return P()};c[b]=!0,e.exports=Object.create||function(I,L){var M;return I!==null?(x[g]=s(I),M=new x,x[g]=null,M[b]=I):M=P(),L===void 0?M:l(M,L)}},"7dd0":function(e,t,r){var s=r("23e7"),l=r("9ed3"),u=r("e163"),c=r("d2bb"),d=r("d44e"),f=r("9112"),h=r("6eeb"),p=r("b622"),y=r("c430"),g=r("3f8c"),E=r("ae93"),b=E.IteratorPrototype,x=E.BUGGY_SAFARI_ITERATORS,C=p("iterator"),S="keys",T="values",_="entries",P=function(){return this};e.exports=function(O,I,L,M,N,G,B){l(L,I,M);var k=function(xe){if(xe===N&&ye)return ye;if(!x&&xe in ve)return ve[xe];switch(xe){case S:return function(){return new L(this,xe)};case T:return function(){return new L(this,xe)};case _:return function(){return new L(this,xe)}}return function(){return new L(this)}},R=I+" Iterator",H=!1,ve=O.prototype,De=ve[C]||ve["@@iterator"]||N&&ve[N],ye=!x&&De||k(N),Ce=I=="Array"&&ve.entries||De,Re,Ie,Ae;if(Ce&&(Re=u(Ce.call(new O)),b!==Object.prototype&&Re.next&&(!y&&u(Re)!==b&&(c?c(Re,b):typeof Re[C]!="function"&&f(Re,C,P)),d(Re,R,!0,!0),y&&(g[R]=P))),N==T&&De&&De.name!==T&&(H=!0,ye=function(){return De.call(this)}),(!y||B)&&ve[C]!==ye&&f(ve,C,ye),g[I]=ye,N)if(Ie={values:k(T),keys:G?ye:k(S),entries:k(_)},B)for(Ae in Ie)(x||H||!(Ae in ve))&&h(ve,Ae,Ie[Ae]);else s({target:I,proto:!0,forced:x||H},Ie);return Ie}},"7f9a":function(e,t,r){var s=r("da84"),l=r("8925"),u=s.WeakMap;e.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(e,t,r){var s=r("861d");e.exports=function(l){if(!s(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(e,t,r){var s=r("d039");e.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(e,t,r){var s=r("c04e"),l=r("9bf2"),u=r("5c6c");e.exports=function(c,d,f){var h=s(d);h in c?l.f(c,h,u(0,f)):c[h]=f}},"861d":function(e,t){e.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},8875:function(e,t,r){var s,l,u;(function(c,d){l=[],s=d,u=typeof s=="function"?s.apply(t,l):s,u!==void 0&&(e.exports=u)})(typeof self<"u"?self:this,function(){function c(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(_){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,p=f.exec(_.stack)||h.exec(_.stack),y=p&&p[1]||!1,g=p&&p[2]||!1,E=document.location.href.replace(document.location.hash,""),b,x,C,S=document.getElementsByTagName("script");y===E&&(b=document.documentElement.outerHTML,x=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),C=b.replace(x,"$1").trim());for(var T=0;T<S.length;T++)if(S[T].readyState==="interactive"||S[T].src===y||y===E&&S[T].innerHTML&&S[T].innerHTML.trim()===C)return S[T];return null}}return c})},8925:function(e,t,r){var s=r("c6cd"),l=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(u){return l.call(u)}),e.exports=s.inspectSource},"8aa5":function(e,t,r){var s=r("6547").charAt;e.exports=function(l,u,c){return u+(c?s(l,u).length:1)}},"8bbf":function(e,t){e.exports=n},"90e3":function(e,t){var r=0,s=Math.random();e.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++r+s).toString(36)}},9112:function(e,t,r){var s=r("83ab"),l=r("9bf2"),u=r("5c6c");e.exports=s?function(c,d,f){return l.f(c,d,u(1,f))}:function(c,d,f){return c[d]=f,c}},9263:function(e,t,r){var s=r("ad6d"),l=r("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,d=u,f=function(){var g=/a/,E=/b*/g;return u.call(g,"a"),u.call(E,"a"),g.lastIndex!==0||E.lastIndex!==0}(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,y=f||p||h;y&&(d=function(E){var b=this,x,C,S,T,_=h&&b.sticky,P=s.call(b),O=b.source,I=0,L=E;return _&&(P=P.replace("y",""),P.indexOf("g")===-1&&(P+="g"),L=String(E).slice(b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&E[b.lastIndex-1]!==`
`)&&(O="(?: "+O+")",L=" "+L,I++),C=new RegExp("^(?:"+O+")",P)),p&&(C=new RegExp("^"+O+"$(?!\\s)",P)),f&&(x=b.lastIndex),S=u.call(_?C:b,L),_?S?(S.input=S.input.slice(I),S[0]=S[0].slice(I),S.index=b.lastIndex,b.lastIndex+=S[0].length):b.lastIndex=0:f&&S&&(b.lastIndex=b.global?S.index+S[0].length:x),p&&S&&S.length>1&&c.call(S[0],C,function(){for(T=1;T<arguments.length-2;T++)arguments[T]===void 0&&(S[T]=void 0)}),S}),e.exports=d},"94ca":function(e,t,r){var s=r("d039"),l=/#|\.prototype\./,u=function(p,y){var g=d[c(p)];return g==h?!0:g==f?!1:typeof y=="function"?s(y):!!y},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},d=u.data={},f=u.NATIVE="N",h=u.POLYFILL="P";e.exports=u},"99af":function(e,t,r){var s=r("23e7"),l=r("d039"),u=r("e8b5"),c=r("861d"),d=r("7b0b"),f=r("50c4"),h=r("8418"),p=r("65f0"),y=r("1dde"),g=r("b622"),E=r("2d00"),b=g("isConcatSpreadable"),x=9007199254740991,C="Maximum allowed index exceeded",S=E>=51||!l(function(){var O=[];return O[b]=!1,O.concat()[0]!==O}),T=y("concat"),_=function(O){if(!c(O))return!1;var I=O[b];return I!==void 0?!!I:u(O)},P=!S||!T;s({target:"Array",proto:!0,forced:P},{concat:function(I){var L=d(this),M=p(L,0),N=0,G,B,k,R,H;for(G=-1,k=arguments.length;G<k;G++)if(H=G===-1?L:arguments[G],_(H)){if(R=f(H.length),N+R>x)throw TypeError(C);for(B=0;B<R;B++,N++)B in H&&h(M,N,H[B])}else{if(N>=x)throw TypeError(C);h(M,N++,H)}return M.length=N,M}})},"9bdd":function(e,t,r){var s=r("825a");e.exports=function(l,u,c,d){try{return d?u(s(c)[0],c[1]):u(c)}catch(h){var f=l.return;throw f!==void 0&&s(f.call(l)),h}}},"9bf2":function(e,t,r){var s=r("83ab"),l=r("0cfb"),u=r("825a"),c=r("c04e"),d=Object.defineProperty;t.f=s?d:function(h,p,y){if(u(h),p=c(p,!0),u(y),l)try{return d(h,p,y)}catch{}if("get"in y||"set"in y)throw TypeError("Accessors not supported");return"value"in y&&(h[p]=y.value),h}},"9ed3":function(e,t,r){var s=r("ae93").IteratorPrototype,l=r("7c73"),u=r("5c6c"),c=r("d44e"),d=r("3f8c"),f=function(){return this};e.exports=function(h,p,y){var g=p+" Iterator";return h.prototype=l(s,{next:u(1,y)}),c(h,g,!1,!0),d[g]=f,h}},"9f7f":function(e,t,r){var s=r("d039");function l(u,c){return RegExp(u,c)}t.UNSUPPORTED_Y=s(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),t.BROKEN_CARET=s(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(e,t,r){var s=r("e8b5"),l=r("50c4"),u=r("0366"),c=function(d,f,h,p,y,g,E,b){for(var x=y,C=0,S=E?u(E,b,3):!1,T;C<p;){if(C in h){if(T=S?S(h[C],C,f):h[C],g>0&&s(T))x=c(d,f,T,l(T.length),x,g-1)-1;else{if(x>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[x]=T}x++}C++}return x};e.exports=c},a352:function(e,t){e.exports=i},a434:function(e,t,r){var s=r("23e7"),l=r("23cb"),u=r("a691"),c=r("50c4"),d=r("7b0b"),f=r("65f0"),h=r("8418"),p=r("1dde"),y=r("ae40"),g=p("splice"),E=y("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,x=Math.min,C=9007199254740991,S="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!g||!E},{splice:function(_,P){var O=d(this),I=c(O.length),L=l(_,I),M=arguments.length,N,G,B,k,R,H;if(M===0?N=G=0:M===1?(N=0,G=I-L):(N=M-2,G=x(b(u(P),0),I-L)),I+N-G>C)throw TypeError(S);for(B=f(O,G),k=0;k<G;k++)R=L+k,R in O&&h(B,k,O[R]);if(B.length=G,N<G){for(k=L;k<I-G;k++)R=k+G,H=k+N,R in O?O[H]=O[R]:delete O[H];for(k=I;k>I-G+N;k--)delete O[k-1]}else if(N>G)for(k=I-G;k>L;k--)R=k+G-1,H=k+N-1,R in O?O[H]=O[R]:delete O[H];for(k=0;k<N;k++)O[k+L]=arguments[k+2];return O.length=I-G+N,B}})},a4d3:function(e,t,r){var s=r("23e7"),l=r("da84"),u=r("d066"),c=r("c430"),d=r("83ab"),f=r("4930"),h=r("fdbf"),p=r("d039"),y=r("5135"),g=r("e8b5"),E=r("861d"),b=r("825a"),x=r("7b0b"),C=r("fc6a"),S=r("c04e"),T=r("5c6c"),_=r("7c73"),P=r("df75"),O=r("241c"),I=r("057f"),L=r("7418"),M=r("06cf"),N=r("9bf2"),G=r("d1e7"),B=r("9112"),k=r("6eeb"),R=r("5692"),H=r("f772"),ve=r("d012"),De=r("90e3"),ye=r("b622"),Ce=r("e538"),Re=r("746f"),Ie=r("d44e"),Ae=r("69f3"),xe=r("b727").forEach,pe=H("hidden"),tt="Symbol",Je="prototype",Rt=ye("toPrimitive"),Tt=Ae.set,Gt=Ae.getterFor(tt),U=Object[Je],V=l.Symbol,Se=u("JSON","stringify"),we=M.f,Ye=N.f,nt=I.f,en=G.f,rt=R("symbols"),Ot=R("op-symbols"),Yt=R("string-to-symbol-registry"),Pe=R("symbol-to-string-registry"),it=R("wks"),tn=l.QObject,En=!tn||!tn[Je]||!tn[Je].findChild,br=d&&p(function(){return _(Ye({},"a",{get:function(){return Ye(this,"a",{value:7}).a}})).a!=7})?function(ee,X,Z){var he=we(U,X);he&&delete U[X],Ye(ee,X,Z),he&&ee!==U&&Ye(U,X,he)}:Ye,xr=function(ee,X){var Z=rt[ee]=_(V[Je]);return Tt(Z,{type:tt,tag:ee,description:X}),d||(Z.description=X),Z},D=h?function(ee){return typeof ee=="symbol"}:function(ee){return Object(ee)instanceof V},A=function(X,Z,he){X===U&&A(Ot,Z,he),b(X);var ge=S(Z,!0);return b(he),y(rt,ge)?(he.enumerable?(y(X,pe)&&X[pe][ge]&&(X[pe][ge]=!1),he=_(he,{enumerable:T(0,!1)})):(y(X,pe)||Ye(X,pe,T(1,{})),X[pe][ge]=!0),br(X,ge,he)):Ye(X,ge,he)},w=function(X,Z){b(X);var he=C(Z),ge=P(he).concat(me(he));return xe(ge,function(dt){(!d||$.call(he,dt))&&A(X,dt,he[dt])}),X},F=function(X,Z){return Z===void 0?_(X):w(_(X),Z)},$=function(X){var Z=S(X,!0),he=en.call(this,Z);return this===U&&y(rt,Z)&&!y(Ot,Z)?!1:he||!y(this,Z)||!y(rt,Z)||y(this,pe)&&this[pe][Z]?he:!0},q=function(X,Z){var he=C(X),ge=S(Z,!0);if(!(he===U&&y(rt,ge)&&!y(Ot,ge))){var dt=we(he,ge);return dt&&y(rt,ge)&&!(y(he,pe)&&he[pe][ge])&&(dt.enumerable=!0),dt}},ae=function(X){var Z=nt(C(X)),he=[];return xe(Z,function(ge){!y(rt,ge)&&!y(ve,ge)&&he.push(ge)}),he},me=function(X){var Z=X===U,he=nt(Z?Ot:C(X)),ge=[];return xe(he,function(dt){y(rt,dt)&&(!Z||y(U,dt))&&ge.push(rt[dt])}),ge};if(f||(V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var X=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Z=De(X),he=function(ge){this===U&&he.call(Ot,ge),y(this,pe)&&y(this[pe],Z)&&(this[pe][Z]=!1),br(this,Z,T(1,ge))};return d&&En&&br(U,Z,{configurable:!0,set:he}),xr(Z,X)},k(V[Je],"toString",function(){return Gt(this).tag}),k(V,"withoutSetter",function(ee){return xr(De(ee),ee)}),G.f=$,N.f=A,M.f=q,O.f=I.f=ae,L.f=me,Ce.f=function(ee){return xr(ye(ee),ee)},d&&(Ye(V[Je],"description",{configurable:!0,get:function(){return Gt(this).description}}),c||k(U,"propertyIsEnumerable",$,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:V}),xe(P(it),function(ee){Re(ee)}),s({target:tt,stat:!0,forced:!f},{for:function(ee){var X=String(ee);if(y(Yt,X))return Yt[X];var Z=V(X);return Yt[X]=Z,Pe[Z]=X,Z},keyFor:function(X){if(!D(X))throw TypeError(X+" is not a symbol");if(y(Pe,X))return Pe[X]},useSetter:function(){En=!0},useSimple:function(){En=!1}}),s({target:"Object",stat:!0,forced:!f,sham:!d},{create:F,defineProperty:A,defineProperties:w,getOwnPropertyDescriptor:q}),s({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ae,getOwnPropertySymbols:me}),s({target:"Object",stat:!0,forced:p(function(){L.f(1)})},{getOwnPropertySymbols:function(X){return L.f(x(X))}}),Se){var He=!f||p(function(){var ee=V();return Se([ee])!="[null]"||Se({a:ee})!="{}"||Se(Object(ee))!="{}"});s({target:"JSON",stat:!0,forced:He},{stringify:function(X,Z,he){for(var ge=[X],dt=1,Co;arguments.length>dt;)ge.push(arguments[dt++]);if(Co=Z,!(!E(Z)&&X===void 0||D(X)))return g(Z)||(Z=function(Au,fi){if(typeof Co=="function"&&(fi=Co.call(this,Au,fi)),!D(fi))return fi}),ge[1]=Z,Se.apply(null,ge)}})}V[Je][Rt]||B(V[Je],Rt,V[Je].valueOf),Ie(V,tt),ve[pe]=!0},a630:function(e,t,r){var s=r("23e7"),l=r("4df4"),u=r("1c7e"),c=!u(function(d){Array.from(d)});s({target:"Array",stat:!0,forced:c},{from:l})},a640:function(e,t,r){var s=r("d039");e.exports=function(l,u){var c=[][l];return!!c&&s(function(){c.call(null,u||function(){throw 1},1)})}},a691:function(e,t){var r=Math.ceil,s=Math.floor;e.exports=function(l){return isNaN(l=+l)?0:(l>0?s:r)(l)}},ab13:function(e,t,r){var s=r("b622"),l=s("match");e.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}},ac1f:function(e,t,r){var s=r("23e7"),l=r("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(e,t,r){var s=r("825a");e.exports=function(){var l=s(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(e,t,r){var s=r("83ab"),l=r("d039"),u=r("5135"),c=Object.defineProperty,d={},f=function(h){throw h};e.exports=function(h,p){if(u(d,h))return d[h];p||(p={});var y=[][h],g=u(p,"ACCESSORS")?p.ACCESSORS:!1,E=u(p,0)?p[0]:f,b=u(p,1)?p[1]:void 0;return d[h]=!!y&&!l(function(){if(g&&!s)return!0;var x={length:-1};g?c(x,1,{enumerable:!0,get:f}):x[1]=1,y.call(x,E,b)})}},ae93:function(e,t,r){var s=r("e163"),l=r("9112"),u=r("5135"),c=r("b622"),d=r("c430"),f=c("iterator"),h=!1,p=function(){return this},y,g,E;[].keys&&(E=[].keys(),"next"in E?(g=s(s(E)),g!==Object.prototype&&(y=g)):h=!0),y==null&&(y={}),!d&&!u(y,f)&&l(y,f,p),e.exports={IteratorPrototype:y,BUGGY_SAFARI_ITERATORS:h}},b041:function(e,t,r){var s=r("00ee"),l=r("f5df");e.exports=s?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(e,t,r){var s=r("83ab"),l=r("9bf2").f,u=Function.prototype,c=u.toString,d=/^\s*function ([^ (]*)/,f="name";s&&!(f in u)&&l(u,f,{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})},b622:function(e,t,r){var s=r("da84"),l=r("5692"),u=r("5135"),c=r("90e3"),d=r("4930"),f=r("fdbf"),h=l("wks"),p=s.Symbol,y=f?p:p&&p.withoutSetter||c;e.exports=function(g){return u(h,g)||(d&&u(p,g)?h[g]=p[g]:h[g]=y("Symbol."+g)),h[g]}},b64b:function(e,t,r){var s=r("23e7"),l=r("7b0b"),u=r("df75"),c=r("d039"),d=c(function(){u(1)});s({target:"Object",stat:!0,forced:d},{keys:function(h){return u(l(h))}})},b727:function(e,t,r){var s=r("0366"),l=r("44ad"),u=r("7b0b"),c=r("50c4"),d=r("65f0"),f=[].push,h=function(p){var y=p==1,g=p==2,E=p==3,b=p==4,x=p==6,C=p==5||x;return function(S,T,_,P){for(var O=u(S),I=l(O),L=s(T,_,3),M=c(I.length),N=0,G=P||d,B=y?G(S,M):g?G(S,0):void 0,k,R;M>N;N++)if((C||N in I)&&(k=I[N],R=L(k,N,O),p)){if(y)B[N]=R;else if(R)switch(p){case 3:return!0;case 5:return k;case 6:return N;case 2:f.call(B,k)}else if(b)return!1}return x?-1:E||b?b:B}};e.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},c04e:function(e,t,r){var s=r("861d");e.exports=function(l,u){if(!s(l))return l;var c,d;if(u&&typeof(c=l.toString)=="function"&&!s(d=c.call(l))||typeof(c=l.valueOf)=="function"&&!s(d=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!s(d=c.call(l)))return d;throw TypeError("Can't convert object to primitive value")}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var r={}.toString;e.exports=function(s){return r.call(s).slice(8,-1)}},c6cd:function(e,t,r){var s=r("da84"),l=r("ce4e"),u="__core-js_shared__",c=s[u]||l(u,{});e.exports=c},c740:function(e,t,r){var s=r("23e7"),l=r("b727").findIndex,u=r("44d2"),c=r("ae40"),d="findIndex",f=!0,h=c(d);d in[]&&Array(1)[d](function(){f=!1}),s({target:"Array",proto:!0,forced:f||!h},{findIndex:function(y){return l(this,y,arguments.length>1?arguments[1]:void 0)}}),u(d)},c8ba:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}e.exports=r},c975:function(e,t,r){var s=r("23e7"),l=r("4d64").indexOf,u=r("a640"),c=r("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,h=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:f||!h||!p},{indexOf:function(g){return f?d.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,t,r){var s=r("5135"),l=r("fc6a"),u=r("4d64").indexOf,c=r("d012");e.exports=function(d,f){var h=l(d),p=0,y=[],g;for(g in h)!s(c,g)&&s(h,g)&&y.push(g);for(;f.length>p;)s(h,g=f[p++])&&(~u(y,g)||y.push(g));return y}},caad:function(e,t,r){var s=r("23e7"),l=r("4d64").includes,u=r("44d2"),c=r("ae40"),d=c("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!d},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(e,t,r){var s=r("da84"),l=r("861d"),u=s.document,c=l(u)&&l(u.createElement);e.exports=function(d){return c?u.createElement(d):{}}},ce4e:function(e,t,r){var s=r("da84"),l=r("9112");e.exports=function(u,c){try{l(s,u,c)}catch{s[u]=c}return c}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(r){try{return!!r()}catch{return!0}}},d066:function(e,t,r){var s=r("428f"),l=r("da84"),u=function(c){return typeof c=="function"?c:void 0};e.exports=function(c,d){return arguments.length<2?u(s[c])||u(l[c]):s[c]&&s[c][d]||l[c]&&l[c][d]}},d1e7:function(e,t,r){var s={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!s.call({1:2},1);t.f=u?function(d){var f=l(this,d);return!!f&&f.enumerable}:s},d28b:function(e,t,r){var s=r("746f");s("iterator")},d2bb:function(e,t,r){var s=r("825a"),l=r("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,c={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(c,[]),u=c instanceof Array}catch{}return function(h,p){return s(h),l(p),u?d.call(h,p):h.__proto__=p,h}}():void 0)},d3b7:function(e,t,r){var s=r("00ee"),l=r("6eeb"),u=r("b041");s||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(e,t,r){var s=r("9bf2").f,l=r("5135"),u=r("b622"),c=u("toStringTag");e.exports=function(d,f,h){d&&!l(d=h?d:d.prototype,c)&&s(d,c,{configurable:!0,value:f})}},d58f:function(e,t,r){var s=r("1c0b"),l=r("7b0b"),u=r("44ad"),c=r("50c4"),d=function(f){return function(h,p,y,g){s(p);var E=l(h),b=u(E),x=c(E.length),C=f?x-1:0,S=f?-1:1;if(y<2)for(;;){if(C in b){g=b[C],C+=S;break}if(C+=S,f?C<0:x<=C)throw TypeError("Reduce of empty array with no initial value")}for(;f?C>=0:x>C;C+=S)C in b&&(g=p(g,b[C],C,E));return g}};e.exports={left:d(!1),right:d(!0)}},d784:function(e,t,r){r("ac1f");var s=r("6eeb"),l=r("d039"),u=r("b622"),c=r("9263"),d=r("9112"),f=u("species"),h=!l(function(){var b=/./;return b.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(b,"$<a>")!=="7"}),p=function(){return"a".replace(/./,"$0")==="$0"}(),y=u("replace"),g=function(){return/./[y]?/./[y]("a","$0")==="":!1}(),E=!l(function(){var b=/(?:)/,x=b.exec;b.exec=function(){return x.apply(this,arguments)};var C="ab".split(b);return C.length!==2||C[0]!=="a"||C[1]!=="b"});e.exports=function(b,x,C,S){var T=u(b),_=!l(function(){var N={};return N[T]=function(){return 7},""[b](N)!=7}),P=_&&!l(function(){var N=!1,G=/a/;return b==="split"&&(G={},G.constructor={},G.constructor[f]=function(){return G},G.flags="",G[T]=/./[T]),G.exec=function(){return N=!0,null},G[T](""),!N});if(!_||!P||b==="replace"&&!(h&&p&&!g)||b==="split"&&!E){var O=/./[T],I=C(T,""[b],function(N,G,B,k,R){return G.exec===c?_&&!R?{done:!0,value:O.call(G,B,k)}:{done:!0,value:N.call(B,G,k)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),L=I[0],M=I[1];s(String.prototype,b,L),s(RegExp.prototype,T,x==2?function(N,G){return M.call(N,this,G)}:function(N){return M.call(N,this)})}S&&d(RegExp.prototype[T],"sham",!0)}},d81d:function(e,t,r){var s=r("23e7"),l=r("b727").map,u=r("1dde"),c=r("ae40"),d=u("map"),f=c("map");s({target:"Array",proto:!0,forced:!d||!f},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})},da84:function(e,t,r){(function(s){var l=function(u){return u&&u.Math==Math&&u};e.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof s=="object"&&s)||Function("return this")()}).call(this,r("c8ba"))},dbb4:function(e,t,r){var s=r("23e7"),l=r("83ab"),u=r("56ef"),c=r("fc6a"),d=r("06cf"),f=r("8418");s({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var y=c(p),g=d.f,E=u(y),b={},x=0,C,S;E.length>x;)S=g(y,C=E[x++]),S!==void 0&&f(b,C,S);return b}})},dbf1:function(e,t,r){(function(s){r.d(t,"a",function(){return u});function l(){return typeof window<"u"?window.console:s.console}var u=l()}).call(this,r("c8ba"))},ddb0:function(e,t,r){var s=r("da84"),l=r("fdbc"),u=r("e260"),c=r("9112"),d=r("b622"),f=d("iterator"),h=d("toStringTag"),p=u.values;for(var y in l){var g=s[y],E=g&&g.prototype;if(E){if(E[f]!==p)try{c(E,f,p)}catch{E[f]=p}if(E[h]||c(E,h,y),l[y]){for(var b in u)if(E[b]!==u[b])try{c(E,b,u[b])}catch{E[b]=u[b]}}}}},df75:function(e,t,r){var s=r("ca84"),l=r("7839");e.exports=Object.keys||function(c){return s(c,l)}},e01a:function(e,t,r){var s=r("23e7"),l=r("83ab"),u=r("da84"),c=r("5135"),d=r("861d"),f=r("9bf2").f,h=r("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var y={},g=function(){var T=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),_=this instanceof g?new p(T):T===void 0?p():p(T);return T===""&&(y[_]=!0),_};h(g,p);var E=g.prototype=p.prototype;E.constructor=g;var b=E.toString,x=String(p("test"))=="Symbol(test)",C=/^Symbol\((.*)\)[^)]+$/;f(E,"description",{configurable:!0,get:function(){var T=d(this)?this.valueOf():this,_=b.call(T);if(c(y,T))return"";var P=x?_.slice(7,-1):_.replace(C,"$1");return P===""?void 0:P}}),s({global:!0,forced:!0},{Symbol:g})}},e163:function(e,t,r){var s=r("5135"),l=r("7b0b"),u=r("f772"),c=r("e177"),d=u("IE_PROTO"),f=Object.prototype;e.exports=c?Object.getPrototypeOf:function(h){return h=l(h),s(h,d)?h[d]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},e177:function(e,t,r){var s=r("d039");e.exports=!s(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(e,t,r){var s=r("fc6a"),l=r("44d2"),u=r("3f8c"),c=r("69f3"),d=r("7dd0"),f="Array Iterator",h=c.set,p=c.getterFor(f);e.exports=d(Array,"Array",function(y,g){h(this,{type:f,target:s(y),index:0,kind:g})},function(){var y=p(this),g=y.target,E=y.kind,b=y.index++;return!g||b>=g.length?(y.target=void 0,{value:void 0,done:!0}):E=="keys"?{value:b,done:!1}:E=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(e,t,r){var s=r("23e7"),l=r("d039"),u=r("fc6a"),c=r("06cf").f,d=r("83ab"),f=l(function(){c(1)}),h=!d||f;s({target:"Object",stat:!0,forced:h,sham:!d},{getOwnPropertyDescriptor:function(y,g){return c(u(y),g)}})},e538:function(e,t,r){var s=r("b622");t.f=s},e893:function(e,t,r){var s=r("5135"),l=r("56ef"),u=r("06cf"),c=r("9bf2");e.exports=function(d,f){for(var h=l(f),p=c.f,y=u.f,g=0;g<h.length;g++){var E=h[g];s(d,E)||p(d,E,y(f,E))}}},e8b5:function(e,t,r){var s=r("c6b6");e.exports=Array.isArray||function(u){return s(u)=="Array"}},e95a:function(e,t,r){var s=r("b622"),l=r("3f8c"),u=s("iterator"),c=Array.prototype;e.exports=function(d){return d!==void 0&&(l.Array===d||c[u]===d)}},f5df:function(e,t,r){var s=r("00ee"),l=r("c6b6"),u=r("b622"),c=u("toStringTag"),d=l(function(){return arguments}())=="Arguments",f=function(h,p){try{return h[p]}catch{}};e.exports=s?l:function(h){var p,y,g;return h===void 0?"Undefined":h===null?"Null":typeof(y=f(p=Object(h),c))=="string"?y:d?l(p):(g=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":g}},f772:function(e,t,r){var s=r("5692"),l=r("90e3"),u=s("keys");e.exports=function(c){return u[c]||(u[c]=l(c))}},fb15:function(e,t,r){if(r.r(t),typeof window<"u"){var s=window.document.currentScript;{var l=r("8875");s=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(r.p=u[1])}r("99af"),r("4de4"),r("4160"),r("c975"),r("d81d"),r("a434"),r("159b"),r("a4d3"),r("e439"),r("dbb4"),r("b64b");function c(D,A,w){return A in D?Object.defineProperty(D,A,{value:w,enumerable:!0,configurable:!0,writable:!0}):D[A]=w,D}function d(D,A){var w=Object.keys(D);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(D);A&&(F=F.filter(function($){return Object.getOwnPropertyDescriptor(D,$).enumerable})),w.push.apply(w,F)}return w}function f(D){for(var A=1;A<arguments.length;A++){var w=arguments[A]!=null?arguments[A]:{};A%2?d(Object(w),!0).forEach(function(F){c(D,F,w[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(w)):d(Object(w)).forEach(function(F){Object.defineProperty(D,F,Object.getOwnPropertyDescriptor(w,F))})}return D}function h(D){if(Array.isArray(D))return D}r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function p(D,A){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(D)))){var w=[],F=!0,$=!1,q=void 0;try{for(var ae=D[Symbol.iterator](),me;!(F=(me=ae.next()).done)&&(w.push(me.value),!(A&&w.length===A));F=!0);}catch(He){$=!0,q=He}finally{try{!F&&ae.return!=null&&ae.return()}finally{if($)throw q}}return w}}r("a630"),r("fb6a"),r("b0c0"),r("25f0");function y(D,A){(A==null||A>D.length)&&(A=D.length);for(var w=0,F=new Array(A);w<A;w++)F[w]=D[w];return F}function g(D,A){if(D){if(typeof D=="string")return y(D,A);var w=Object.prototype.toString.call(D).slice(8,-1);if(w==="Object"&&D.constructor&&(w=D.constructor.name),w==="Map"||w==="Set")return Array.from(D);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return y(D,A)}}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(D,A){return h(D)||p(D,A)||g(D,A)||E()}function x(D){if(Array.isArray(D))return y(D)}function C(D){if(typeof Symbol<"u"&&Symbol.iterator in Object(D))return Array.from(D)}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(D){return x(D)||C(D)||g(D)||S()}var _=r("a352"),P=r.n(_);function O(D){D.parentElement!==null&&D.parentElement.removeChild(D)}function I(D,A,w){var F=w===0?D.children[0]:D.children[w-1].nextSibling;D.insertBefore(A,F)}var L=r("dbf1");r("13d5"),r("4fad"),r("ac1f"),r("5319");function M(D){var A=Object.create(null);return function(F){var $=A[F];return $||(A[F]=D(F))}}var N=/-(\w)/g,G=M(function(D){return D.replace(N,function(A,w){return w.toUpperCase()})});r("5db7"),r("73d9");var B=["Start","Add","Remove","Update","End"],k=["Choose","Unchoose","Sort","Filter","Clone"],R=["Move"],H=[R,B,k].flatMap(function(D){return D}).map(function(D){return"on".concat(D)}),ve={manage:R,manageAndEmit:B,emit:k};function De(D){return H.indexOf(D)!==-1}r("caad"),r("2ca0");var ye=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ce(D){return ye.includes(D)}function Re(D){return["transition-group","TransitionGroup"].includes(D)}function Ie(D){return["id","class","role","style"].includes(D)||D.startsWith("data-")||D.startsWith("aria-")||D.startsWith("on")}function Ae(D){return D.reduce(function(A,w){var F=b(w,2),$=F[0],q=F[1];return A[$]=q,A},{})}function xe(D){var A=D.$attrs,w=D.componentData,F=w===void 0?{}:w,$=Ae(Object.entries(A).filter(function(q){var ae=b(q,2),me=ae[0];return ae[1],Ie(me)}));return f(f({},$),F)}function pe(D){var A=D.$attrs,w=D.callBackBuilder,F=Ae(tt(A));Object.entries(w).forEach(function(q){var ae=b(q,2),me=ae[0],He=ae[1];ve[me].forEach(function(ee){F["on".concat(ee)]=He(ee)})});var $="[data-draggable]".concat(F.draggable||"");return f(f({},F),{},{draggable:$})}function tt(D){return Object.entries(D).filter(function(A){var w=b(A,2),F=w[0];return w[1],!Ie(F)}).map(function(A){var w=b(A,2),F=w[0],$=w[1];return[G(F),$]}).filter(function(A){var w=b(A,2),F=w[0];return w[1],!De(F)})}r("c740");function Je(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}function Rt(D,A){for(var w=0;w<A.length;w++){var F=A[w];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(D,F.key,F)}}function Tt(D,A,w){return A&&Rt(D.prototype,A),D}var Gt=function(A){var w=A.el;return w},U=function(A,w){return A.__draggable_context=w},V=function(A){return A.__draggable_context},Se=function(){function D(A){var w=A.nodes,F=w.header,$=w.default,q=w.footer,ae=A.root,me=A.realList;Je(this,D),this.defaultNodes=$,this.children=[].concat(T(F),T($),T(q)),this.externalComponent=ae.externalComponent,this.rootTransition=ae.transition,this.tag=ae.tag,this.realList=me}return Tt(D,[{key:"render",value:function(w,F){var $=this.tag,q=this.children,ae=this._isRootComponent,me=ae?{default:function(){return q}}:q;return w($,F,me)}},{key:"updated",value:function(){var w=this.defaultNodes,F=this.realList;w.forEach(function($,q){U(Gt($),{element:F[q],index:q})})}},{key:"getUnderlyingVm",value:function(w){return V(w)}},{key:"getVmIndexFromDomIndex",value:function(w,F){var $=this.defaultNodes,q=$.length,ae=F.children,me=ae.item(w);if(me===null)return q;var He=V(me);if(He)return He.index;if(q===0)return 0;var ee=Gt($[0]),X=T(ae).findIndex(function(Z){return Z===ee});return w<X?0:q}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),D}(),we=r("8bbf");function Ye(D,A){var w=D[A];return w?w():[]}function nt(D){var A=D.$slots,w=D.realList,F=D.getKey,$=w||[],q=["header","footer"].map(function(Z){return Ye(A,Z)}),ae=b(q,2),me=ae[0],He=ae[1],ee=A.item;if(!ee)throw new Error("draggable element must have an item slot");var X=$.flatMap(function(Z,he){return ee({element:Z,index:he}).map(function(ge){return ge.key=F(Z),ge.props=f(f({},ge.props||{}),{},{"data-draggable":!0}),ge})});if(X.length!==$.length)throw new Error("Item slot must have only one child");return{header:me,footer:He,default:X}}function en(D){var A=Re(D),w=!Ce(D)&&!A;return{transition:A,externalComponent:w,tag:w?Object(we.resolveComponent)(D):A?we.TransitionGroup:D}}function rt(D){var A=D.$slots,w=D.tag,F=D.realList,$=D.getKey,q=nt({$slots:A,realList:F,getKey:$}),ae=en(w);return new Se({nodes:q,root:ae,realList:F})}function Ot(D,A){var w=this;Object(we.nextTick)(function(){return w.$emit(D.toLowerCase(),A)})}function Yt(D){var A=this;return function(w,F){if(A.realList!==null)return A["onDrag".concat(D)](w,F)}}function Pe(D){var A=this,w=Yt.call(this,D);return function(F,$){w.call(A,F,$),Ot.call(A,D,F)}}var it=null,tn={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(A){return A}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},En=["update:modelValue","change"].concat(T([].concat(T(ve.manageAndEmit),T(ve.emit)).map(function(D){return D.toLowerCase()}))),br=Object(we.defineComponent)({name:"draggable",inheritAttrs:!1,props:tn,emits:En,data:function(){return{error:!1}},render:function(){try{this.error=!1;var A=this.$slots,w=this.$attrs,F=this.tag,$=this.componentData,q=this.realList,ae=this.getKey,me=rt({$slots:A,tag:F,realList:q,getKey:ae});this.componentStructure=me;var He=xe({$attrs:w,componentData:$});return me.render(we.h,He)}catch(ee){return this.error=!0,Object(we.h)("pre",{style:{color:"red"}},ee.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&L.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var A=this;if(!this.error){var w=this.$attrs,F=this.$el,$=this.componentStructure;$.updated();var q=pe({$attrs:w,callBackBuilder:{manageAndEmit:function(He){return Pe.call(A,He)},emit:function(He){return Ot.bind(A,He)},manage:function(He){return Yt.call(A,He)}}}),ae=F.nodeType===1?F:F.parentElement;this._sortable=new P.a(ae,q),this.targetDomElement=ae,ae.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var A=this.list;return A||this.modelValue},getKey:function(){var A=this.itemKey;return typeof A=="function"?A:function(w){return w[A]}}},watch:{$attrs:{handler:function(A){var w=this._sortable;w&&tt(A).forEach(function(F){var $=b(F,2),q=$[0],ae=$[1];w.option(q,ae)})},deep:!0}},methods:{getUnderlyingVm:function(A){return this.componentStructure.getUnderlyingVm(A)||null},getUnderlyingPotencialDraggableComponent:function(A){return A.__draggable_component__},emitChanges:function(A){var w=this;Object(we.nextTick)(function(){return w.$emit("change",A)})},alterList:function(A){if(this.list){A(this.list);return}var w=T(this.modelValue);A(w),this.$emit("update:modelValue",w)},spliceList:function(){var A=arguments,w=function($){return $.splice.apply($,T(A))};this.alterList(w)},updatePosition:function(A,w){var F=function(q){return q.splice(w,0,q.splice(A,1)[0])};this.alterList(F)},getRelatedContextFromMoveEvent:function(A){var w=A.to,F=A.related,$=this.getUnderlyingPotencialDraggableComponent(w);if(!$)return{component:$};var q=$.realList,ae={list:q,component:$};if(w!==F&&q){var me=$.getUnderlyingVm(F)||{};return f(f({},me),ae)}return ae},getVmIndexFromDomIndex:function(A){return this.componentStructure.getVmIndexFromDomIndex(A,this.targetDomElement)},onDragStart:function(A){this.context=this.getUnderlyingVm(A.item),A.item._underlying_vm_=this.clone(this.context.element),it=A.item},onDragAdd:function(A){var w=A.item._underlying_vm_;if(w!==void 0){O(A.item);var F=this.getVmIndexFromDomIndex(A.newIndex);this.spliceList(F,0,w);var $={element:w,newIndex:F};this.emitChanges({added:$})}},onDragRemove:function(A){if(I(this.$el,A.item,A.oldIndex),A.pullMode==="clone"){O(A.clone);return}var w=this.context,F=w.index,$=w.element;this.spliceList(F,1);var q={element:$,oldIndex:F};this.emitChanges({removed:q})},onDragUpdate:function(A){O(A.item),I(A.from,A.item,A.oldIndex);var w=this.context.index,F=this.getVmIndexFromDomIndex(A.newIndex);this.updatePosition(w,F);var $={element:this.context.element,oldIndex:w,newIndex:F};this.emitChanges({moved:$})},computeFutureIndex:function(A,w){if(!A.element)return 0;var F=T(w.to.children).filter(function(me){return me.style.display!=="none"}),$=F.indexOf(w.related),q=A.component.getVmIndexFromDomIndex($),ae=F.indexOf(it)!==-1;return ae||!w.willInsertAfter?q:q+1},onDragMove:function(A,w){var F=this.move,$=this.realList;if(!F||!$)return!0;var q=this.getRelatedContextFromMoveEvent(A),ae=this.computeFutureIndex(q,A),me=f(f({},this.context),{},{futureIndex:ae}),He=f(f({},A),{},{relatedContext:q,draggedContext:me});return F(He,w)},onDragEnd:function(){it=null}}}),xr=br;t.default=xr},fb6a:function(e,t,r){var s=r("23e7"),l=r("861d"),u=r("e8b5"),c=r("23cb"),d=r("50c4"),f=r("fc6a"),h=r("8418"),p=r("b622"),y=r("1dde"),g=r("ae40"),E=y("slice"),b=g("slice",{ACCESSORS:!0,0:0,1:2}),x=p("species"),C=[].slice,S=Math.max;s({target:"Array",proto:!0,forced:!E||!b},{slice:function(_,P){var O=f(this),I=d(O.length),L=c(_,I),M=c(P===void 0?I:P,I),N,G,B;if(u(O)&&(N=O.constructor,typeof N=="function"&&(N===Array||u(N.prototype))?N=void 0:l(N)&&(N=N[x],N===null&&(N=void 0)),N===Array||N===void 0))return C.call(O,L,M);for(G=new(N===void 0?Array:N)(S(M-L,0)),B=0;L<M;L++,B++)L in O&&h(G,B,O[L]);return G.length=B,G}})},fc6a:function(e,t,r){var s=r("44ad"),l=r("1d80");e.exports=function(u){return s(l(u))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,r){var s=r("4930");e.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(yl);var Zc=yl.exports;const Jc=Lu(Zc);function ar(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ar=function(o){return typeof o}:ar=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ar(a)}function W(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function is(a,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function Q(a,o,n){return o&&is(a.prototype,o),n&&is(a,n),a}function v(a,o,n){return o in a?Object.defineProperty(a,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[o]=n,a}function Ee(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),o&&Xo(a,o)}function Le(a){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Le(a)}function Xo(a,o){return Xo=Object.setPrototypeOf||function(i,e){return i.__proto__=e,i},Xo(a,o)}function Qc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qc(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:m(a)}function be(a){var o=Qc();return function(){var i=Le(a),e;if(o){var t=Le(this).constructor;e=Reflect.construct(i,arguments,t)}else e=i.apply(this,arguments);return qc(this,e)}}function ed(a,o){for(;!Object.prototype.hasOwnProperty.call(a,o)&&(a=Le(a),a!==null););return a}function Ue(a,o,n){return typeof Reflect<"u"&&Reflect.get?Ue=Reflect.get:Ue=function(e,t,r){var s=ed(e,t);if(s){var l=Object.getOwnPropertyDescriptor(s,t);return l.get?l.get.call(r):l.value}},Ue(a,o,n||a)}function Ri(a,o){return nd(a)||id(a,o)||Dl(a,o)||ad()}function cr(a){return td(a)||rd(a)||Dl(a)||od()}function td(a){if(Array.isArray(a))return Wo(a)}function nd(a){if(Array.isArray(a))return a}function rd(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function id(a,o){var n=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(n!=null){var i=[],e=!0,t=!1,r,s;try{for(n=n.call(a);!(e=(r=n.next()).done)&&(i.push(r.value),!(o&&i.length===o));e=!0);}catch(l){t=!0,s=l}finally{try{!e&&n.return!=null&&n.return()}finally{if(t)throw s}}return i}}function Dl(a,o){if(a){if(typeof a=="string")return Wo(a,o);var n=Object.prototype.toString.call(a).slice(8,-1);if(n==="Object"&&a.constructor&&(n=a.constructor.name),n==="Map"||n==="Set")return Array.from(a);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wo(a,o)}}function Wo(a,o){(o==null||o>a.length)&&(o=a.length);for(var n=0,i=new Array(o);n<o;n++)i[n]=a[n];return i}function od(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ad(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cn(a,o,n){return a==="*"?!0:a.length>0?a.indexOf(o)!==-1:!n}function K(a,o,n){var i;a=a||{},o=o||{};var e=a,t=o;for(i in t)e[i]=t[i];return a}function Ko(a){return Object.prototype.toString.call(a)==="[object Number]"}function Ve(a){return typeof a=="string"}function Il(a){return typeof a=="boolean"}function dr(a){return a==null?!1:Object.prototype.toString.call(a)==="[object Object]"}function sd(a){return Object.prototype.toString.call(a)==="[object Date]"}function Nn(a){return Object.prototype.toString.call(a)==="[object Function]"}function zi(a){if(Ve(a))return""+a;if(Il(a))return!!a;if(sd(a))return new Date(a.getTime());if(Nn(a))return a;if(Array.isArray(a)){for(var o=[],n=0;n<a.length;n++)o.push(zi(a[n]));return o}else if(dr(a)){var i={};for(var e in a)i[e]=zi(a[e]);return i}else return a}function Zi(a,o,n,i){var e={},t,r,s={};for(n=n||[],i=i||[],r=0;r<n.length;r++)e[n[r]]=!0;for(r=0;r<i.length;r++)s[i[r]]=!0;var l=zi(a);for(r in o)if(l[r]==null||s[r])l[r]=o[r];else if(e[r])t=[],t.push.apply(t,Array.isArray(l[r])?l[r]:[l[r]]),t.push(o[r]),l[r]=t;else if(Ve(o[r])||Il(o[r])||Nn(o[r])||Ko(o[r]))l[r]=o[r];else if(Array.isArray(o[r]))t=[],Array.isArray(l[r])&&t.push.apply(t,l[r]),t.push.apply(t,o[r]),l[r]=t;else if(dr(o[r])){dr(l[r])||(l[r]={});for(var u in o[r])l[r][u]=o[r][u]}return l}function wl(a,o,n){for(var i=0;i<n.length;i++){var e=n[i][0][n[i][1]].apply(n[i][0],n[i][2]);if(e===o)return e}return a}function ld(a,o,n,i){var e=function(s){var l=s.match(/(\${.*?})/g);if(l!=null)for(var u=0;u<l.length;u++){var c=o[l[u].substring(2,l[u].length-1)]||"";c!=null&&(s=s.replace(l[u],c))}if(l=s.match(/({{.*?}})/g),l!=null)for(var d=0;d<l.length;d++){var f=o[l[d].substring(2,l[d].length-2)]||"";f!=null&&(s=s.replace(l[d],f))}return s},t=function r(s){if(s!=null){if(Ve(s))return e(s);if(Nn(s)&&!i&&(s.name||"").indexOf(n)===0)return s(o);if(Array.isArray(s)){for(var l=[],u=0;u<s.length;u++)l.push(r(s[u]));return l}else if(dr(s)){var c={};for(var d in s)c[d]=r(s[d]);return c}else return s}};return t(a)}function z(a,o){if(a)for(var n=0;n<a.length;n++)o(a[n]);else return null}function gn(a,o){if(a){for(var n=0;n<a.length;n++)if(o(a[n]))return n}return-1}function ud(a,o){var n=[];if(a)for(var i=0;i<a.length;i++)o(a[i])&&n.push(i);return n}function Ea(a,o){var n=gn(a,o);return n===-1?null:a[n]}function cd(a,o){var n=ud(a,o);return n.map(function(i){return a[i]})}function Ml(a,o){var n=null;return a.forEach(function(i){o(i)&&(n=i)}),n}function dd(a){var o=[];return a.forEach(function(n){o.push(n)}),o}function Ze(a,o){var n=gn(a,o);return n>-1&&a.splice(n,1),n!==-1}function bi(a){if(Array.fromArray!=null)return Array.from(a);var o=[];return Array.prototype.push.apply(o,a),o}function os(a,o){var n=a.indexOf(o);return n>-1&&a.splice(n,1),n!==-1}function kl(a,o,n,i){var e=a[o];return e==null&&(e=[],a[o]=e),e[i?"unshift":"push"](n),e}function Or(a,o,n){return a.indexOf(o)===-1?(a.push(o),!0):!1}var Qe=[];for(var _r=0;_r<256;_r++)Qe[_r]=(_r<16?"0":"")+_r.toString(16);function Ke(){var a=Math.random()*4294967295|0,o=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return Qe[a&255]+Qe[a>>8&255]+Qe[a>>16&255]+Qe[a>>24&255]+"-"+Qe[o&255]+Qe[o>>8&255]+"-"+Qe[o>>16&15|64]+Qe[o>>24&255]+"-"+Qe[n&63|128]+Qe[n>>8&255]+"-"+Qe[n>>16&255]+Qe[n>>24&255]+Qe[i&255]+Qe[i>>8&255]+Qe[i>>16&255]+Qe[i>>24&255]}function Ji(a,o,n){var i={x:a.x-o.x,y:a.y-o.y},e=Math.cos(n/360*Math.PI*2),t=Math.sin(n/360*Math.PI*2);return{x:i.x*e-i.y*t+o.x,y:i.y*e+i.x*t+o.y,cr:e,sr:t}}function ba(a){if(a==null)return null;for(var o=a.replace(/^\s\s*/,""),n=/\s/,i=o.length;n.test(o.charAt(--i)););return o.slice(0,i+1)}function fd(a,o){a=a.length==null||typeof a=="string"?[a]:a;for(var n=0;n<a.length;n++)o(a[n])}function Ll(a,o){for(var n=[],i=0;i<a.length;i++)n.push(o(a[i]));return n}function We(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];if(typeof console<"u")try{var i=arguments[arguments.length-1];console.log(i)}catch{}}function Qi(a){return a<0?-1:a>0?1:0}function xi(a,o,n){return function(){var i=null;try{o!=null&&(i=o.apply(this,arguments))}catch(e){We("jsPlumb function failed : "+e)}if(a!=null&&(n==null||i!==n))try{i=a.apply(this,arguments)}catch(e){We("wrapped function failed : "+e)}return i}}function as(a,o,n){return a.has(o)||a.set(o,n()),a.get(o)}function Nl(a,o){for(var n=a.__proto__;n!=null;){if(n instanceof o)return!0;n=n.__proto__}return!1}function hd(a,o,n,i){if(o.length===0)o.push(a);else{for(var e=i?-1:1,t=0,r=o.length,s=Math.floor((t+r)/2);r>t;){var l=n(a,o[s])*e;l<0?r=s:t=s+1,s=Math.floor((t+r)/2)}o.splice(s,0,a)}}function Rn(a,o,n){n=n||a.parentNode;for(var i=n.querySelectorAll(o),e=0;e<i.length;e++)if(i[e]===a)return!0;return!1}function Qr(a,o){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!o&&a.preventDefault&&a.preventDefault()}function Wt(a,o,n,i){if(i&&Rn(a,o,n))return a;for(a=a.parentNode;a!=null&&a!==n;){if(Rn(a,o))return a;a=a.parentNode}}function vt(a){return a.srcElement||a.target}function vd(a,o,n){o=ba(o),typeof a.className.baseVal<"u"?a.className.baseVal=o:a.className=o;try{var i=a.classList;if(i!=null){for(;i.length>0;)i.remove(i.item(0));for(var e=0;e<n.length;e++)n[e]&&i.add(n[e])}}catch(t){We("WARN: cannot set class list",t)}}function xa(a){return a.className!=null?typeof a.className.baseVal>"u"?a.className:a.className.baseVal:""}function Rl(a,o,n){var i=o==null?[]:Array.isArray(o)?o:o.split(/\s+/),e=n==null?[]:Array.isArray(n)?n:n.split(/\s+/),t=xa(a),r=t.split(/\s+/),s=function(u,c){for(var d=0;d<c.length;d++)if(u)r.indexOf(c[d])===-1&&r.push(c[d]);else{var f=r.indexOf(c[d]);f!==-1&&r.splice(f,1)}};s(!0,i),s(!1,e),vd(a,r.join(" "),r)}function qr(a){return!Ve(a)&&!Array.isArray(a)&&a.length!=null&&a.documentElement==null&&a.nodeType==null}function pd(a){return xa(a)}function Dn(a,o){var n=function(e,t){if(e!=null&&t!=null&&t.length>0)if(e.classList){var r=ba(t).split(/\s+/);z(r,function(s){e.classList.add(s)})}else Rl(e,t)};qr(a)?z(a,function(i){return n(i,o)}):n(a,o)}function gd(a,o){return a.classList?a.classList.contains(o):xa(a).indexOf(o)!==-1}function zo(a,o){var n=function(e,t){if(e!=null&&t!=null&&t.length>0)if(e.classList){var r=ba(t).split(/\s+/);r.forEach(function(s){e.classList.remove(s)})}else Rl(e,null,t)};qr(a)?z(a,function(i){return n(i,o)}):n(a,o)}function yd(a,o){var n=this,i=function(t,r){t!=null&&r!=null&&r.length>0&&(t.classList?t.classList.toggle(r):n.hasClass(t,r)?n.removeClass(t,r):n.addClass(t,r))};qr(a)?z(a,function(e){return i(e,o)}):i(a,o)}function Gl(a,o,n,i){return Fl(null,a,o,n,i)}function Fl(a,o,n,i,e){var t=a==null?document.createElement(o):document.createElementNS(a,o),r;n=n||{};for(r in n)t.style[r]=n[r];i&&(t.className=i),e=e||{};for(r in e)t.setAttribute(r,""+e[r]);return t}function nr(a){var o=a.getBoundingClientRect(),n=document.body,i=document.documentElement,e=window.pageYOffset||i.scrollTop||n.scrollTop,t=window.pageXOffset||i.scrollLeft||n.scrollLeft,r=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,l=o.top+e-r,u=o.left+t-s;return{x:Math.round(u),y:Math.round(l)}}function md(a){return{w:a.offsetWidth,h:a.offsetHeight}}function Ed(a){try{return{w:parseFloat(a.width.baseVal.value),h:parseFloat(a.height.baseVal.value)}}catch{return{w:0,h:0}}}function bd(a){try{return{x:parseFloat(a.x.baseVal.value),y:parseFloat(a.y.baseVal.value)}}catch{return{x:0,y:0}}}function Ci(a,o){var n=o.getContainer().getBoundingClientRect(),i=a.getBoundingClientRect(),e=o.currentZoom;return{x:(i.left-n.left)/e,y:(i.top-n.top)/e}}function Ar(a,o){var n=a.getBoundingClientRect(),i=o.currentZoom;return{w:n.width/i,h:n.height/i}}var Gn;(function(a){a.SVG="SVG",a.HTML="HTML"})(Gn||(Gn={}));function Zo(a){return a instanceof SVGElement?Gn.SVG:Gn.HTML}function xd(a){return Zo(a)===Gn.SVG}function Fn(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.map(function(i){return"."+i}).join(",")}function Cd(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.join(" ")}function mo(){for(var a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.map(function(i){return"["+i+"]"}).join(",")}var Jo="source",jl="target",Qo="block",fr="none",ei="absolute",ss="fixed",Sd="static",Bl="data-jtk-group",cn="data-jtk-managed",Gi="data-jtk-not-draggable",ls="tabindex",Pd="data-jtk-scope",Ul=Pd+"-",Vl="checkCondition",Td="checkDropAllowed",Ca="jtk-connector",Od="jtk-connector-outline",_d="jtk-connected",sr="jtk-endpoint",Ad="jtk-endpoint-connected",Dd="jtk-endpoint-full",Sa="jtk-floating-endpoint",Id="jtk-endpoint-drop-allowed",wd="jtk-endpoint-drop-forbidden",Md="jtk-endpoint-anchor",Si="jtk-group-collapsed",Dr="jtk-group-expanded",Eo="jtk-overlay",kd="anchor:changed",Pa="connection",Hl="internal.connection",$l="connection:detach",Ta="connection:move",Ld="container:change",Nd="endpoint:replaced",Yl="internal.endpoint:unregistered",Oa="internal.connection:detached",Xl="element:manage",Rd="group:added",Gd="group:collapse",Fd="group:expand",jd="group:member:added",Bd="group:member:removed",Ud="group:removed",Wl="maxConnections",Vd="group:nested:added",Hd="group:nested:removed",Kl="element:unmanage",zl="zoom",lr="isDetachAllowed",$d="beforeDrag",Zl="beforeDrop",Jl="beforeDetach",Yd="beforeStartDetach",ke=mo(cn),Xd="Cannot establish connection: source endpoint is full",Wd="Cannot establish connection: target endpoint is full",Kd="Cannot establish connection: source does not exist",zd="Cannot establish connection: target does not exist",Zd="connectionOverlays",us={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Ir="stroke-dasharray",ko="dashstyle",Jd="fill",Qd="stroke",qd="stroke-width",ef="strokeWidth",Ql="svg",qo="path",cs={svg:"http://www.w3.org/2000/svg"};function Jt(a,o){for(var n in o)a.setAttribute(n,""+o[n])}function Qt(a,o){return o=o||{},o.version="1.1",o.xmlns=cs.svg,Fl(cs.svg,a,null,null,o)}function ql(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"}function ea(a,o,n){if(o.setAttribute(Jd,n.fill?n.fill:fr),o.setAttribute(Qd,n.stroke?n.stroke:fr),n.strokeWidth&&o.setAttribute(qd,n.strokeWidth),n[ko]&&n[ef]&&!n[Ir]){var i=n[ko].indexOf(",")===-1?" ":",",e=n[ko].split(i),t="";z(e,function(s){t+=Math.floor(s*n.strokeWidth)+i}),o.setAttribute(Ir,t)}else n[Ir]&&o.setAttribute(Ir,n[Ir]);for(var r in us)n[r]&&o.setAttribute(us[r],n[r])}function Fi(a,o,n){a.childNodes.length>n?a.insertBefore(o,a.childNodes[n]):a.appendChild(o)}function _e(a,o,n){var i=[a,o];return i.join(":")}var ds="data-jtk-container",tf="data-jtk-group-content",Pi="data-jtk-enabled",Lo="data-jtk-scope",Vn="endpoint",Ht="element",$t="connection",eu="div",ut="click",Kt="contextmenu",Et="dblclick",Mt="dbltap",nf="focus",ce="mousedown",_a="mouseenter",Aa="mouseexit",ze="mousemove",de="mouseup",xt="mouseout",Ct="mouseover",kt="tap",rf="touchstart",of="touchend",af="touchmove",sf="drag:move",lf="drag:stop",uf="drag:start",qi="revert",cf="connection:abort",fs="connection:drag",hs=_e(Ht,ut),df=_e(Ht,Et),vs=_e(Ht,Mt),ff=_e(Ht,xt),hf=_e(Ht,Ct),vf=_e(Ht,ze),pf=_e(Ht,de),gf=_e(Ht,ce),yf=_e(Ht,Kt),ps=_e(Ht,kt),mf=_e(Vn,ut),Ef=_e(Vn,Et),bf=_e(Vn,xt),xf=_e(Vn,Ct),Cf=_e(Vn,de),Sf=_e(Vn,ce),Pf=_e($t,ut),Tf=_e($t,Et),Of=_e($t,Mt),_f=_e($t,xt),Af=_e($t,Ct),Df=_e($t,de),If=_e($t,ce),wf=_e($t,Kt),Mf=_e($t,kt),gs="position",Dt=Fn(Ca),Sn=Fn(sr),kf=mo(Bl),Lf=mo(tf),Xt=Fn(Eo),yn;(function(a){a.Circle="Circle",a.Ellipse="Ellipse",a.Triangle="Triangle",a.Diamond="Diamond",a.Rectangle="Rectangle",a.Square="Square"})(yn||(yn={}));var Vt;(function(a){a.Assign="Assign",a.AutoDefault="AutoDefault",a.Bottom="Bottom",a.BottomLeft="BottomLeft",a.BottomRight="BottomRight",a.Center="Center",a.Continuous="Continuous",a.ContinuousBottom="ContinuousBottom",a.ContinuousLeft="ContinuousLeft",a.ContinuousRight="ContinuousRight",a.ContinuousTop="ContinuousTop",a.ContinuousLeftRight="ContinuousLeftRight",a.ContinuousTopBottom="ContinuousTopBottom",a.Left="Left",a.Perimeter="Perimeter",a.Right="Right",a.Top="Top",a.TopLeft="TopLeft",a.TopRight="TopRight"})(Vt||(Vt={}));function Nf(){return{d:1/0,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null}}function eo(){return{xmin:1/0,xmax:-1/0,ymin:1/0,ymax:-1/0}}var Da=function(){function a(o){W(this,a),this.params=o,v(this,"x1",void 0),v(this,"x2",void 0),v(this,"y1",void 0),v(this,"y2",void 0),v(this,"extents",eo()),v(this,"type",void 0),this.x1=o.x1,this.y1=o.y1,this.x2=o.x2,this.y2=o.y2}return Q(a,[{key:"findClosestPointOnPath",value:function(n,i){return Nf()}},{key:"lineIntersection",value:function(n,i,e,t){return[]}},{key:"boxIntersection",value:function(n,i,e,t){var r=[];return r.push.apply(r,this.lineIntersection(n,i,n+e,i)),r.push.apply(r,this.lineIntersection(n+e,i,n+e,i+t)),r.push.apply(r,this.lineIntersection(n+e,i+t,n,i+t)),r.push.apply(r,this.lineIntersection(n,i+t,n,i)),r}},{key:"boundingBoxIntersection",value:function(n){return this.boxIntersection(n.x,n.y,n.w,n.h)}}]),a}(),tu="undefined",to="default",nu="true",ir="false",wn="*",wr,Mr;function Rf(a,o,n,i,e,t,r){return new Touch({target:a,identifier:Ke(),pageX:o,pageY:n,screenX:i,screenY:e,clientX:t||i,clientY:r||e})}function Gf(){var a=[];return a.push.apply(a,arguments),a.item=function(o){return this[o]},a}function Ff(a,o,n,i,e,t,r){return Gf(Rf(a,o,n,i,e,t,r))}function hr(a,o,n){n=n||a.parentNode;for(var i=n.querySelectorAll(o),e=0;e<i.length;e++)if(i[e]===a)return!0;return!1}function ti(a){return a.srcElement||a.target}function ta(a,o,n,i){if(i){var e=a.composedPath?a.composedPath():a.path;if(typeof e<"u"&&e.indexOf)return{path:e,end:e.indexOf(n)};var t={path:[],end:-1},r=function s(l){t.path.push(l),l===n?t.end=t.path.length-1:l.parentNode!=null&&s(l.parentNode)};return r(o),t}else return{path:[o],end:1}}function jf(a,o){var n=0,i;for(n=0,i=a.length;n<i&&a[n][0]!==o;n++);n<a.length&&a.splice(n,1)}var Bf=1;function zr(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints!=null&&navigator.maxTouchPoints>0}function ji(){return"onmousedown"in document.documentElement}var zt=(wr={},v(wr,ce,rf),v(wr,de,of),v(wr,ze,af),wr),Uf="page",Vf="screen",Hf="client";function Ia(a,o){if(a==null)return{x:0,y:0};var n=ru(a),i=Xf(n,0);return{x:i[o+"X"],y:i[o+"Y"]}}function no(a){return Ia(a,Uf)}function $f(a){return Ia(a,Vf)}function Yf(a){return Ia(a,Hf)}function Xf(a,o){return a.item?a.item(o):a[o]}function ru(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]}function Wf(a){return ru(a).length}function ro(a,o,n,i,e){if(ou(a,o,n),i.__tauid=n.__tauid,a.addEventListener)a.addEventListener(o,n,!1,e);else if(a.attachEvent){var t=o+n.__tauid;a["e"+t]=n,a[t]=function(){a["e"+t]&&a["e"+t](window.event)},a.attachEvent("on"+o,a[t])}}function ni(a,o,n){var i=this;n!=null&&iu(a,function(e){if(Kf(e,o,n),n.__tauid!=null){if(e.removeEventListener)e.removeEventListener(o,n,!1),zr()&&zt[o]&&e.removeEventListener(zt[o],n,!1);else if(i.detachEvent){var t=o+n.__tauid;e[t]&&e.detachEvent("on"+o,e[t]),e[t]=null,e["e"+t]=null}}n.__taTouchProxy&&ni(a,n.__taTouchProxy[1],n.__taTouchProxy[0])})}function iu(a,o){if(a!=null)for(var n=typeof a=="string"?document.querySelectorAll(a):a.length!=null?a:[a],i=0;i<n.length;i++)o(n[i])}function ou(a,o,n){var i=Bf++;return a.__ta=a.__ta||{},a.__ta[o]=a.__ta[o]||{},a.__ta[o][i]=n,n.__tauid=i,i}function Kf(a,o,n){if(a.__ta&&a.__ta[o]&&delete a.__ta[o][n.__tauid],n.__taExtra){for(var i=0;i<n.__taExtra.length;i++)ni(a,n.__taExtra[i][0],n.__taExtra[i][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()}var zf=/:not\(([^)]+)\)/;function io(a,o,n,i){if(a==null)return n;var e=a.split(","),t=[],r=[];z(e,function(l){var u=l.match(zf);u!=null?r.push(u[1]):t.push(l)}),r.length>0&&t.length===0&&t.push(wn);var s=function l(u){l.__tauid=n.__tauid;var c=ti(u),d=!1,f=c,h=ta(u,c,o,a!=null);if(h.end!=-1)for(var p=0;!d&&p<h.end;p++){f=h.path[p];for(var y=0;y<r.length;y++)if(hr(f,r[y],o))return;for(var g=0;!d&&g<t.length;g++)if(hr(f,t[g],o)){n.apply(f,[u,f]),d=!0;break}}};return Zf(n,i,s),s}function Zf(a,o,n){a.__taExtra=a.__taExtra||[],a.__taExtra.push([o,n])}var Bi=function(o,n,i,e,t){if(zr()&&zt[n]){var r=io(e,o,i,zt[n]);ro(o,zt[n],r,i,t)}n===nf&&o.getAttribute(ls)==null&&o.setAttribute(ls,"1"),ro(o,n,io(e,o,i,n),i,t)},No=(Mr={},v(Mr,kt,{touches:1,taps:1}),v(Mr,Mt,{touches:1,taps:2}),v(Mr,Kt,{touches:2,taps:1}),Mr);function ys(a,o,n,i){for(var e in n.__tamee[a])n.__tamee[a].hasOwnProperty(e)&&n.__tamee[a][e].apply(i,[o])}var Jf=function(){function a(){W(this,a)}return Q(a,null,[{key:"generate",value:function(n,i){return function(e,t,r,s){if(t==Kt&&ji())Bi(e,t,r,s);else{if(e.__taTapHandler==null){var l=e.__taTapHandler={tap:[],dbltap:[],down:!1,taps:0,downSelectors:[]},u=function(p){for(var y=ti(p),g=ta(p,y,e,s!=null),E=!1,b=0;b<g.end;b++){if(E)return;y=g.path[b];for(var x=0;x<l.downSelectors.length;x++)if(l.downSelectors[x]==null||hr(y,l.downSelectors[x],e)){l.down=!0,setTimeout(d,n),setTimeout(f,i),E=!0;break}}},c=function(p){if(l.down){var y=ti(p),g,E;l.taps++;var b=Wf(p);for(var x in No)if(No.hasOwnProperty(x)){var C=No[x];if(C.touches===b&&(C.taps===1||C.taps===l.taps))for(var S=0;S<l[x].length;S++){E=ta(p,y,e,l[x][S][1]!=null);for(var T=0;T<E.end;T++)if(g=E.path[T],l[x][S][1]==null||hr(g,l[x][S][1],e)){l[x][S][0].apply(g,[p,g]);break}}}}},d=function(){l.down=!1},f=function(){l.taps=0};e.__taTapHandler.downHandler=u,e.__taTapHandler.upHandler=c,Bi(e,ce,u),Bi(e,de,c)}e.__taTapHandler.downSelectors.push(s),e.__taTapHandler[t].push([r,s]),r.__taUnstore=function(){e.__taTapHandler!=null&&(Ze(e.__taTapHandler.downSelectors,function(h){return h===s}),jf(e.__taTapHandler[t],r),e.__taTapHandler.downSelectors.length===0&&(ni(e,ce,e.__taTapHandler.downHandler),ni(e,de,e.__taTapHandler.upHandler),delete e.__taTapHandler))}}}}}]),a}(),Qf=function(){function a(){W(this,a)}return Q(a,null,[{key:"generate",value:function(){var n=[];return function(i,e,t,r){if(!i.__tamee){i.__tamee={over:!1,mouseenter:[],mouseexit:[]};var s=function(c){var d=ti(c);(r==null&&d==i&&!i.__tamee.over||hr(d,r,i)&&(d.__tamee==null||!d.__tamee.over))&&(ys(_a,c,i,d),d.__tamee=d.__tamee||{},d.__tamee.over=!0,n.push(d))},l=function(c){for(var d=ti(c),f=0;f<n.length;f++)d==n[f]&&!hr(c.relatedTarget||c.toElement,"*",d)&&(d.__tamee.over=!1,n.splice(f,1),ys(Aa,c,i,d))};ro(i,Ct,io(r,i,s,Ct),s),ro(i,xt,io(r,i,l,xt),l)}t.__taUnstore=function(){delete i.__tamee[e][t.__tauid]},ou(i,e,t),i.__tamee[e][t.__tauid]=t}}}]),a}(),wa=function(){function a(o){W(this,a),v(this,"clickThreshold",void 0),v(this,"dblClickThreshold",void 0),v(this,"tapHandler",void 0),v(this,"mouseEnterExitHandler",void 0),o=o||{},this.clickThreshold=o.clickThreshold||250,this.dblClickThreshold=o.dblClickThreshold||450,this.mouseEnterExitHandler=Qf.generate(),this.tapHandler=Jf.generate(this.clickThreshold,this.dblClickThreshold)}return Q(a,[{key:"_doBind",value:function(n,i,e,t,r){if(e!=null){var s=n;i===kt||i===Mt||i===Kt?this.tapHandler(s,i,e,t,r):i===_a||i==Aa?this.mouseEnterExitHandler(s,i,e,t,r):Bi(s,i,e,t,r)}}},{key:"on",value:function(n,i,e,t,r){var s=t==null?null:e,l=t??e;return this._doBind(n,i,l,s,r),this}},{key:"off",value:function(n,i,e){return ni(n,i,e),this}},{key:"trigger",value:function(n,i,e,t,r){var s=ji()&&(typeof MouseEvent>"u"||e==null||e.constructor===MouseEvent),l=zr()&&!ji()&&zt[i]?zt[i]:i,u=!(zr()&&!ji()&&zt[i]),c=no(e),d=$f(e),f=Yf(e);return iu(n,function(h){var p;e=e||{screenX:d.x,screenY:d.y,clientX:f.x,clientY:f.y};var y=function(C){t&&(C.payload=t)},g={TouchEvent:function(C){var S=Ff(h,c.x,c.y,d.x,d.y,f.x,f.y),T=C.initTouchEvent||C.initEvent;T(l,!0,!0,window,null,d.x,d.y,f.x,f.y,!1,!1,!1,!1,S,S,S,1,0)},MouseEvents:function(C){C.initMouseEvent(l,!0,!0,window,r??1,d.x,d.y,f.x,f.y,!1,!1,!1,!1,1,h)}},E=!u&&!s&&zr()&&zt[i],b=E?"TouchEvent":"MouseEvents";p=document.createEvent(b),g[b](p),y(p),h.dispatchEvent(p)}),this}}]),a}(),qf=[null,[1,-1],[1,1],[-1,1],[-1,-1]],eh=[null,[-1,-1],[-1,1],[1,1],[1,-1]],Pn=2*Math.PI;function vr(a,o){return o.x===a.x?o.y>a.y?1/0:-1/0:o.y===a.y?o.x>a.x?0:-0:(o.y-a.y)/(o.x-a.x)}function th(a,o){return-1/vr(a,o)}function na(a,o){return Math.sqrt(Math.pow(o.y-a.y,2)+Math.pow(o.x-a.x,2))}function Ma(a,o){return o.x>a.x||o.x==a.x?o.y>a.y?2:1:o.y>a.y?3:4}function nh(a,o){var n=vr(a,o),i=Math.atan(n),e=Ma(a,o);return(e==4||e==3)&&(i+=Math.PI),i<0&&(i+=2*Math.PI),i}function au(a,o){var n=a.x,i=a.x+a.w,e=a.y,t=a.y+a.h,r=o.x,s=o.x+o.w,l=o.y,u=o.y+o.h;return n<=r&&r<=i&&e<=l&&l<=t||n<=s&&s<=i&&e<=l&&l<=t||n<=r&&r<=i&&e<=u&&u<=t||n<=s&&r<=i&&e<=u&&u<=t||r<=n&&n<=s&&l<=e&&e<=u||r<=i&&i<=s&&l<=e&&e<=u||r<=n&&n<=s&&l<=t&&t<=u||r<=i&&n<=s&&l<=t&&t<=u}function In(a,o,n){var i=vr(a,o),e=Ma(a,o),t=n>0?qf[e]:eh[e],r=Math.atan(i),s=Math.abs(n*Math.sin(r))*t[1],l=Math.abs(n*Math.cos(r))*t[0];return{x:a.x+l,y:a.y+s}}function rh(a,o,n){var i=vr(a,o),e=Math.atan(-1/i),t=n/2*Math.sin(e),r=n/2*Math.cos(e);return[{x:o.x+r,y:o.y+t},{x:o.x-r,y:o.y-t}]}function ih(a,o,n,i){n=n??(o.thresholdX==null?o.w/2:o.thresholdX),i=i??(o.thresholdY==null?o.h/2:o.thresholdY);var e=Math.floor(a.x/o.w),t=o.w*e,r=t+o.w,s=Math.abs(a.x-t)<=n?t:Math.abs(r-a.x)<=n?r:a.x,l=Math.floor(a.y/o.h),u=o.h*l,c=u+o.h,d=Math.abs(a.y-u)<=i?u:Math.abs(c-a.y)<=i?c:a.y;return{x:s,y:d}}function oh(a,o,n){if(Rn(o,n,a))return o;for(var i=o.parentNode;i!=null&&i!==a;){if(Rn(i,n,a))return i;i=i.parentNode}}function ah(a){return typeof a=="function"?(a._katavorioId=Ke(),a._katavorioId):a}function ms(a,o,n){var i=o.parentNode,e=a.getSize(i),t=a.getSize(o),r=n.x,s=r+t.w,l=n.y,u=l+t.h;return s>0&&r<e.w&&u>0&&l<e.h}function sh(a,o,n){for(var i=null,e=o.getAttribute("katavorio-draggable"),t=e!=null?"[katavorio-draggable='"+e+"'] ":"",r=0;r<a.length;r++)if(i=oh(o,n,t+a[r].selector),i!=null){if(a[r].filter){var s=Rn(n,a[r].filter,i),l=a[r].filterExclude===!0;if(l&&!s||s)return null}return[a[r],i]}return null}var su="start",lu="beforeStart",uu="drag",lh="drop",uh="over",ch="out",cu="stop",du="katavorio-draggable",dh=du,fh=10,hh=10,Ro=function(){return!0},vh=function(){return!1},Fr={delegatedDraggable:"katavorio-delegated-draggable",draggable:dh,drag:"katavorio-drag",selected:"katavorio-drag-selected",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},Nt;(function(a){a.absolutePosition="absolutePosition",a.transform="transform",a.xyAttributes="xyAttributes"})(Nt||(Nt={}));var ka=new Map;ka.set(Nt.absolutePosition,function(a,o){a.style.left="".concat(o.x,"px"),a.style.top="".concat(o.y,"px")});ka.set(Nt.xyAttributes,function(a,o){a.setAttribute("x","".concat(o.x)),a.setAttribute("y","".concat(o.y))});var La=new Map;La.set(Nt.absolutePosition,function(a){return{x:a.offsetLeft,y:a.offsetTop}});La.set(Nt.xyAttributes,function(a){return{x:parseFloat(a.getAttribute("x")),y:parseFloat(a.getAttribute("y"))}});var Na=new Map;Na.set(Nt.absolutePosition,function(a,o){a.style.width="".concat(o.w,"px"),a.style.height="".concat(o.h,"px")});Na.set(Nt.xyAttributes,function(a,o){a.setAttribute("width","".concat(o.w)),a.setAttribute("height","".concat(o.h))});var Ra=new Map;Ra.set(Nt.absolutePosition,function(a){return{w:a.offsetWidth,h:a.offsetHeight}});Ra.set(Nt.xyAttributes,function(a){return{w:parseFloat(a.getAttribute("width")),h:parseFloat(a.getAttribute("height"))}});var Go=[cu,su,uu,lh,uh,ch,lu],ph=function(){},Xn=function(o,n){if(o!=null){o=!Ve(o)&&o.tagName==null&&o.length!=null?o:[o];for(var i=0;i<o.length;i++)n.apply(o[i],[o[i]])}},gh=function(o,n,i){var e=o.srcElement||o.target;return!Rn(e,i.getInputFilterSelector(),n)},yh=function(){function a(o,n){W(this,a),this.el=o,this.manager=n,v(this,"_class",void 0),v(this,"uuid",Ke()),v(this,"enabled",!0),v(this,"scopes",[]),v(this,"eventManager",void 0),this.eventManager=n.eventManager}return Q(a,[{key:"setEnabled",value:function(n){this.enabled=n}},{key:"isEnabled",value:function(){return this.enabled}},{key:"toggleEnabled",value:function(){this.enabled=!this.enabled}},{key:"addScope",value:function(n){var i={};Xn(this.scopes,function(t){i[t]=!0}),Xn(n?n.split(/\s+/):[],function(t){i[t]=!0}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}},{key:"removeScope",value:function(n){var i={};Xn(this.scopes,function(t){i[t]=!0}),Xn(n?n.split(/\s+/):[],function(t){delete i[t]}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}},{key:"toggleScope",value:function(n){var i={};Xn(this.scopes,function(t){i[t]=!0}),Xn(n?n.split(/\s+/):[],function(t){i[t]?delete i[t]:i[t]=!0}),this.scopes.length=0;for(var e in i)this.scopes.push(e)}}]),a}();function mh(a){return{w:a.parentNode.offsetWidth+a.parentNode.scrollLeft,h:a.parentNode.offsetHeight+a.parentNode.scrollTop}}var Zr;(function(a){a.notNegative="notNegative",a.parent="parent",a.parentEnclosed="parentEnclosed"})(Zr||(Zr={}));var Eh=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;if(W(this,n),r=o.call(this,i,t),v(m(r),"_class",void 0),v(m(r),"rightButtonCanDrag",void 0),v(m(r),"consumeStartEvent",void 0),v(m(r),"clone",void 0),v(m(r),"scroll",void 0),v(m(r),"trackScroll",void 0),v(m(r),"_downAt",void 0),v(m(r),"_posAtDown",void 0),v(m(r),"_pagePosAtDown",void 0),v(m(r),"_pageDelta",{x:0,y:0}),v(m(r),"_moving",void 0),v(m(r),"_lastPosition",void 0),v(m(r),"_lastScrollValues",{x:0,y:0}),v(m(r),"_initialScroll",{x:0,y:0}),v(m(r),"_size",void 0),v(m(r),"_currentParentPosition",void 0),v(m(r),"_ghostParentPosition",void 0),v(m(r),"_dragEl",void 0),v(m(r),"_multipleDrop",void 0),v(m(r),"_ghostProxyOffsets",void 0),v(m(r),"_ghostDx",void 0),v(m(r),"_ghostDy",void 0),v(m(r),"_isConstrained",!1),v(m(r),"_ghostProxyParent",void 0),v(m(r),"_useGhostProxy",void 0),v(m(r),"_ghostProxyFunction",void 0),v(m(r),"_activeSelectorParams",void 0),v(m(r),"_availableSelectors",[]),v(m(r),"_canDrag",void 0),v(m(r),"_consumeFilteredEvents",void 0),v(m(r),"_parent",void 0),v(m(r),"_ignoreZoom",void 0),v(m(r),"_filters",{}),v(m(r),"_constrainRect",void 0),v(m(r),"_elementToDrag",void 0),v(m(r),"downListener",void 0),v(m(r),"moveListener",void 0),v(m(r),"upListener",void 0),v(m(r),"scrollTracker",void 0),v(m(r),"listeners",{start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]}),r._class=r.manager.css.draggable,Dn(r.el,r._class),r.downListener=r._downListener.bind(m(r)),r.upListener=r._upListener.bind(m(r)),r.moveListener=r._moveListener.bind(m(r)),r.rightButtonCanDrag=e.rightButtonCanDrag===!0,r.consumeStartEvent=e.consumeStartEvent!==!1,r._dragEl=r.el,r.clone=e.clone===!0,r.scroll=e.scroll===!0,r.trackScroll=e.trackScroll!==!1,r._multipleDrop=e.multipleDrop!==!1,r._canDrag=e.canDrag||Ro,r._consumeFilteredEvents=e.consumeFilteredEvents,r._parent=e.parent,r._ignoreZoom=e.ignoreZoom===!0,r._ghostProxyParent=e.ghostProxyParent,r.trackScroll&&(r.scrollTracker=r._trackScroll.bind(m(r)),document.addEventListener("scroll",r.scrollTracker)),e.ghostProxy===!0?r._useGhostProxy=Ro:e.ghostProxy&&typeof e.ghostProxy=="function"?r._useGhostProxy=e.ghostProxy:r._useGhostProxy=function(l,u){return r._activeSelectorParams&&r._activeSelectorParams.useGhostProxy?r._activeSelectorParams.useGhostProxy(l,u):!1},e.makeGhostProxy?r._ghostProxyFunction=e.makeGhostProxy:r._ghostProxyFunction=function(l){return r._activeSelectorParams&&r._activeSelectorParams.makeGhostProxy?r._activeSelectorParams.makeGhostProxy(l):l.cloneNode(!0)},e.selector){var s=r.el.getAttribute(du);s==null&&(s=""+new Date().getTime(),r.el.setAttribute("katavorio-draggable",s)),r._availableSelectors.push(e)}return r.eventManager.on(r.el,ce,r.downListener),r}return Q(n,[{key:"_trackScroll",value:function(e){if(this._moving){var t={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},r=t.x-this._lastScrollValues.x,s=t.y-this._lastScrollValues.y,l={x:r+this._lastPosition.x,y:s+this._lastPosition.y},u=l.x-this._downAt.x,c=l.y-this._downAt.y,d=this._ignoreZoom?1:this.manager.getZoom();this._dragEl&&this._dragEl.parentNode&&(u+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,c+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),u/=d,c/=d,this.moveBy(u,c,e),this._lastPosition=l,this._lastScrollValues=t}}},{key:"on",value:function(e,t){this.listeners[e]&&this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(this.listeners[e]){for(var r=[],s=0;s<this.listeners[e].length;s++)this.listeners[e][s]!==t&&r.push(this.listeners[e][s]);this.listeners[e]=r}}},{key:"_upListener",value:function(e){this._downAt&&(this._downAt=null,this.eventManager.off(document,ze,this.moveListener),this.eventManager.off(document,de,this.upListener),zo(document.body,Fr.noSelect),this.unmark(e),this.stop(e),this._moving=!1,this.clone?(this._dragEl&&this._dragEl.parentNode&&this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=null):this._activeSelectorParams&&this._activeSelectorParams.revertFunction&&this._activeSelectorParams.revertFunction(this._dragEl,this.manager.getPosition(this._dragEl))===!0&&(this.manager.setPosition(this._dragEl,this._posAtDown),this._dispatch(qi,this._dragEl)))}},{key:"_downListener",value:function(e){if(!e.defaultPrevented){var t=this.rightButtonCanDrag||e.which!==3&&e.button!==2;if(t&&this.isEnabled()&&this._canDrag()){var r=this._testFilter(e)&&gh(e,this.el,this.manager);if(r){this._activeSelectorParams=null,this._elementToDrag=null,this._availableSelectors.length===0&&console.log("JSPLUMB: no available drag selectors");var s=e.target||e.srcElement,l=sh(this._availableSelectors,this.el,s);if(l!=null&&(this._activeSelectorParams=l[0],this._elementToDrag=l[1]),this._activeSelectorParams==null||this._elementToDrag==null)return;var u=this._activeSelectorParams.dragInit?this._activeSelectorParams.dragInit(this._elementToDrag,e):null;if(u!=null&&(this._elementToDrag=u),this.clone)if(this._dragEl=this._elementToDrag.cloneNode(!0),Dn(this._dragEl,Fr.clonedDrag),this._dragEl.setAttribute("id",null),this._dragEl.style.position="absolute",this._parent!=null){var c=this.manager.getPosition(this.el);this._dragEl.style.left=c.x+"px",this._dragEl.style.top=c.y+"px",this._parent.appendChild(this._dragEl)}else{var d=nr(this._elementToDrag);this._dragEl.style.left=d.x+"px",this._dragEl.style.top=d.y+"px",document.body.appendChild(this._dragEl)}else this._dragEl=this._elementToDrag;this.consumeStartEvent&&Qr(e),this._downAt=no(e),this._dragEl&&this._dragEl.parentNode&&(this._initialScroll={x:this._dragEl.parentNode.scrollLeft,y:this._dragEl.parentNode.scrollTop}),this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=nr(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),this.eventManager.on(document,ze,this.moveListener),this.eventManager.on(document,de,this.upListener),Dn(document.body,Fr.noSelect),this._dispatch(lu,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size})}else this._consumeFilteredEvents&&Qr(e)}}}},{key:"_moveListener",value:function(e){if(this._downAt){if(!this._moving){var t=this._dispatch(su,{el:this.el,pos:this._posAtDown,e,drag:this,size:this._size});if(t!==!1){if(!this._downAt)return;this.mark(t),this._moving=!0}else this.abort()}if(this._downAt){var r=no(e),s=r.x-this._downAt.x,l=r.y-this._downAt.y,u=this._ignoreZoom?1:this.manager.getZoom();this._lastPosition={x:r.x,y:r.y},this._lastScrollValues={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop},this._dragEl&&this._dragEl.parentNode&&(s+=this._dragEl.parentNode.scrollLeft-this._initialScroll.x,l+=this._dragEl.parentNode.scrollTop-this._initialScroll.y),s/=u,l/=u,this.moveBy(s,l,e)}}}},{key:"getDragDelta",value:function(){return this._posAtDown!=null&&this._downAt!=null?{x:this._downAt.x-this._posAtDown.x,y:this._downAt.y-this._posAtDown.y}:{x:0,y:0}}},{key:"mark",value:function(e){this._posAtDown=this.manager.getPosition(this._dragEl),this._pagePosAtDown=nr(this._dragEl),this._pageDelta={x:this._pagePosAtDown.x-this._posAtDown.x,y:this._pagePosAtDown.y-this._posAtDown.y},this._size=this.manager.getSize(this._dragEl),Dn(this._dragEl,this.manager.css.drag),this._constrainRect=mh(this._dragEl),this._ghostDx=0,this._ghostDy=0}},{key:"unmark",value:function(e){this._isConstrained&&this._useGhostProxy(this._elementToDrag,this._dragEl)?(this._ghostProxyOffsets={x:this._dragEl.offsetLeft-this._ghostDx,y:this._dragEl.offsetTop-this._ghostDy},this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag):this._ghostProxyOffsets=null,zo(this._dragEl,this.manager.css.drag),this._isConstrained=!1}},{key:"moveBy",value:function(e,t,r){var s=this.toGrid({x:this._posAtDown.x+e,y:this._posAtDown.y+t}),l=this._doConstrain(s,this._dragEl,this._constrainRect,this._size,r);if(l!=null){if(this._useGhostProxy(this.el,this._dragEl))if(s.x!==l.x||s.y!==l.y){if(!this._isConstrained){var u=this._ghostProxyFunction(this._elementToDrag);Dn(u,Fr.ghostProxy),this._ghostProxyParent?(this._ghostProxyParent.appendChild(u),this._currentParentPosition=nr(this._elementToDrag.parentNode),this._ghostParentPosition=nr(this._ghostProxyParent),this._ghostDx=this._currentParentPosition.x-this._ghostParentPosition.x,this._ghostDy=this._currentParentPosition.y-this._ghostParentPosition.y):this._elementToDrag.parentNode.appendChild(u),this._dragEl=u,this._isConstrained=!0}l=s}else this._isConstrained&&(this._dragEl.parentNode.removeChild(this._dragEl),this._dragEl=this._elementToDrag,this._isConstrained=!1,this._currentParentPosition=null,this._ghostParentPosition=null,this._ghostDx=0,this._ghostDy=0);this.manager.setPosition(this._dragEl,{x:l.x+this._ghostDx,y:l.y+this._ghostDy}),this._dispatch(uu,{el:this.el,pos:l,e:r,drag:this,size:this._size,originalPos:this._posAtDown})}}},{key:"abort",value:function(){this._downAt!=null&&this._upListener()}},{key:"getDragElement",value:function(e){return e?this._elementToDrag||this.el:this._dragEl||this.el}},{key:"stop",value:function(e,t){if(t||this._moving){var r=[],s=this.manager.getPosition(this._dragEl);r.push([this._dragEl,s,this,this._size]),this._dispatch(cu,{el:this._dragEl,pos:this._ghostProxyOffsets||s,finalPos:s,e,drag:this,selection:r,size:this._size,originalPos:{x:this._posAtDown.x,y:this._posAtDown.y}})}else this._moving||this._activeSelectorParams.dragAbort&&this._activeSelectorParams.dragAbort(this._elementToDrag)}},{key:"_dispatch",value:function(e,t){var r=null;if(this._activeSelectorParams&&this._activeSelectorParams[e])r=this._activeSelectorParams[e](t);else if(this.listeners[e])for(var s=0;s<this.listeners[e].length;s++)try{var l=this.listeners[e][s](t);l!=null&&(r=l)}catch{}return r}},{key:"resolveGrid",value:function(){var e={grid:null,thresholdX:fh/2,thresholdY:hh/2};return this._activeSelectorParams!=null&&this._activeSelectorParams.grid!=null&&(e.grid=this._activeSelectorParams.grid,this._activeSelectorParams.snapThreshold!=null&&(e.thresholdX=this._activeSelectorParams.snapThreshold,e.thresholdY=this._activeSelectorParams.snapThreshold)),e}},{key:"toGrid",value:function(e){var t=this.resolveGrid(),r=t.grid,s=t.thresholdX,l=t.thresholdY;if(r==null)return e;var u=r?r.w/2:s,c=r?r.h/2:l;return ih(e,r,u,c)}},{key:"setUseGhostProxy",value:function(e){this._useGhostProxy=e?Ro:vh}},{key:"_doConstrain",value:function(e,t,r,s,l){return this._activeSelectorParams!=null&&this._activeSelectorParams.constrainFunction&&typeof this._activeSelectorParams.constrainFunction=="function"?this._activeSelectorParams.constrainFunction(e,t,r,s,l):e}},{key:"_testFilter",value:function(e){for(var t in this._filters){var r=this._filters[t],s=r[0](e);if(r[1]&&(s=!s),!s)return!1}return!0}},{key:"addFilter",value:function(e,t){var r=this;if(e){var s=ah(e);this._filters[s]=[function(l){var u=l.srcElement||l.target,c;return Ve(e)?c=Rn(u,e,r.el):typeof e=="function"&&(c=e(l,r.el)),c},t!==!1]}}},{key:"removeFilter",value:function(e){var t=typeof e=="function"?e._katavorioId:e;delete this._filters[t]}},{key:"clearAllFilters",value:function(){this._filters={}}},{key:"addSelector",value:function(e,t){e.selector&&(t?this._availableSelectors.unshift(e):this._availableSelectors.push(e))}},{key:"destroy",value:function(){this.eventManager.off(this.el,ce,this.downListener),this.eventManager.off(document,ze,this.moveListener),this.eventManager.off(document,de,this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null,this.scrollTracker!=null&&document.removeEventListener("scroll",this.scrollTracker)}}]),n}(yh),bh=["input","textarea","select","button","option"],xh=bh.join(","),Ch=function(){function a(o){W(this,a),v(this,"eventManager",void 0),v(this,"zoom",1),v(this,"css",{}),v(this,"inputFilterSelector",void 0),v(this,"positioningStrategy",void 0),v(this,"_positionSetter",void 0),v(this,"_positionGetter",void 0),v(this,"_sizeSetter",void 0),v(this,"_sizeGetter",void 0),o=o||{},this.inputFilterSelector=o.inputFilterSelector||xh,this.eventManager=new wa,this.zoom=o.zoom||1,this.positioningStrategy=o.positioningStrategy||Nt.absolutePosition,this._positionGetter=La.get(this.positioningStrategy),this._positionSetter=ka.get(this.positioningStrategy),this._sizeGetter=Ra.get(this.positioningStrategy),this._sizeSetter=Na.get(this.positioningStrategy);var n=o.css||{};K(this.css,n)}return Q(a,[{key:"getPosition",value:function(n){return this._positionGetter(n)}},{key:"setPosition",value:function(n,i){this._positionSetter(n,i)}},{key:"getSize",value:function(n){return this._sizeGetter(n)}},{key:"getZoom",value:function(){return this.zoom}},{key:"setZoom",value:function(n){this.zoom=n}},{key:"_prepareParams",value:function(n){n=n||{};var i={events:{}},e;for(e in n)i[e]=n[e];for(e=0;e<Go.length;e++)i.events[Go[e]]=n[Go[e]]||ph;return i}},{key:"getInputFilterSelector",value:function(){return this.inputFilterSelector}},{key:"setInputFilterSelector",value:function(n){return this.inputFilterSelector=n,this}},{key:"draggable",value:function(n,i){if(n._katavorioDrag==null){var e=this._prepareParams(i),t=new Eh(n,e,this);return Dn(n,Fr.delegatedDraggable),n._katavorioDrag=t,t}else return n._katavorioDrag}},{key:"destroyDraggable",value:function(n){n._katavorioDrag&&(n._katavorioDrag.destroy(),delete n._katavorioDrag)}}]),a}(),Ui="jtk-drag-selected",Sh=function(){function a(o){W(this,a),this.instance=o,v(this,"_dragSelection",[]),v(this,"_dragSizes",new Map),v(this,"_dragElements",new Map),v(this,"_dragElementStartPositions",new Map),v(this,"_dragElementPositions",new Map),v(this,"__activeSet",void 0)}return Q(a,[{key:"_activeSet",get:function(){return this.__activeSet==null?this._dragSelection:this.__activeSet}},{key:"length",get:function(){return this._dragSelection.length}},{key:"filterActiveSet",value:function(n){var i=this;this.__activeSet=[],z(this._dragSelection,function(e){n(e)&&i.__activeSet.push(e)})}},{key:"clear",value:function(){var n=this;this.reset(),z(this._dragSelection,function(i){return n.instance.removeClass(i.jel,Ui)}),this._dragSelection.length=0}},{key:"reset",value:function(){this._dragElementStartPositions.clear(),this._dragElementPositions.clear(),this._dragSizes.clear(),this._dragElements.clear(),this.__activeSet=null}},{key:"initialisePositions",value:function(){var n=this;z(this._activeSet,function(i){var e=n.instance.viewport.getPosition(i.id),t={x:parseInt(""+i.jel.offsetLeft,10),y:parseInt(""+i.jel.offsetTop,10)};n._dragElementStartPositions.set(i.id,t),n._dragElementPositions.set(i.id,t),n._dragSizes.set(i.id,{w:e.w,h:e.h})})}},{key:"updatePositions",value:function(n,i,e){var t=this,r=n.x-i.x,s=n.y-i.y;z(this._activeSet,function(l){var u=t._dragElementStartPositions.get(l.id);if(u){var c=u.x+r,d=u.y+s,f=t._dragSizes.get(l.id),h={x:c,y:d,w:f.w,h:f.h};if(l.jel._jsPlumbParentGroup&&l.jel._jsPlumbParentGroup.constrain){var p={w:l.jel.parentNode.offsetWidth+l.jel.parentNode.scrollLeft,h:l.jel.parentNode.offsetHeight+l.jel.parentNode.scrollTop};h.x=Math.max(h.x,0),h.y=Math.max(h.y,0),h.x=Math.min(h.x,p.w-f.w),h.y=Math.min(h.y,p.h-f.h)}t._dragElementPositions.set(l.id,{x:c,y:d}),l.jel.style.left=h.x+"px",l.jel.style.top=h.y+"px",e(l.jel,l.id,f,h)}})}},{key:"each",value:function(n){var i=this;z(this._activeSet,function(e){var t=i._dragSizes.get(e.id),r=i._dragElementPositions.get(e.id),s=i._dragElementStartPositions.get(e.id);n(e.jel,e.id,r,t,s)})}},{key:"add",value:function(n,i){var e=n;i=i||this.instance.getId(e);var t=gn(this._dragSelection,function(r){return r.id===i});t===-1&&(this.instance.addClass(n,Ui),this._dragSelection.push({id:i,jel:e}))}},{key:"remove",value:function(n){var i=this,e=n;this._dragSelection=this._dragSelection.filter(function(t){var r=t.jel!==e;return r||i.instance.removeClass(t.jel,Ui),r})}},{key:"toggle",value:function(n){var i=n,e=gn(this._dragSelection,function(t){return t.jel===i});e!==-1?this.remove(i):this.add(n)}}]),a}(),Ph="jtk-delegated-draggable",Th="jtk-draggable",Oh="jtk-drag",_h="jtk-ghost-proxy",fn="jtk-drag-active",Ah="jtk-dragged",hn="jtk-drag-hover",Dh=function(){function a(o,n,i){var e=this;W(this,a),this.instance=o,this.dragSelection=n,v(this,"collicat",void 0),v(this,"drag",void 0),v(this,"_draggables",{}),v(this,"_dlist",[]),v(this,"_elementsWithEndpoints",{}),v(this,"_draggablesForElements",{}),v(this,"handlers",[]),v(this,"_trackScroll",void 0),v(this,"_filtersToAdd",[]),this.collicat=new Ch({zoom:this.instance.currentZoom,css:{noSelect:this.instance.dragSelectClass,delegatedDraggable:Ph,draggable:Th,drag:Oh,selected:Ui,active:fn,hover:hn,ghostProxy:_h}}),this.instance.bind(zl,function(t){e.collicat.setZoom(t)}),i=i||{},this._trackScroll=i.trackScroll!==!1}return Q(a,[{key:"addHandler",value:function(n,i){var e=this,t=K({selector:n.selector},i||{});t.start=xi(t.start,function(l){return n.onStart(l)},!1),t.drag=xi(t.drag,function(l){return n.onDrag(l)}),t.stop=xi(t.stop,function(l){return n.onStop(l)});var r=(n.onBeforeStart||function(l){}).bind(n);if(t.beforeStart=xi(t.beforeStart,function(l){return r(l)}),t.dragInit=function(l,u){return n.onDragInit(l,u)},t.dragAbort=function(l){return n.onDragAbort(l)},n.useGhostProxy&&(t.useGhostProxy=n.useGhostProxy,t.makeGhostProxy=n.makeGhostProxy),t.constrainFunction==null&&t.containment!=null)switch(t.containment){case Zr.notNegative:{t.constrainFunction=function(l,u,c,d){return{x:Math.max(0,Math.min(l.x)),y:Math.max(0,Math.min(l.y))}};break}case Zr.parent:{var s=t.containmentPadding||5;t.constrainFunction=function(l,u,c,d){var f=l.x<0?0:l.x>c.w-s?c.w-s:l.x,h=l.y<0?0:l.y>c.h-s?c.h-s:l.y;return{x:f,y:h}};break}case Zr.parentEnclosed:{t.constrainFunction=function(l,u,c,d){var f=l.x<0?0:l.x+d.w>c.w?c.w-d.w:l.x,h=l.y<0?0:l.y+d.h>c.h?c.h-d.h:l.y;return{x:f,y:h}};break}}this.drag==null?(t.trackScroll=this._trackScroll,this.drag=this.collicat.draggable(this.instance.getContainer(),t),z(this._filtersToAdd,function(l){return e.drag.addFilter(l[0],l[1])}),this.drag.on(qi,function(l){e.instance.revalidate(l)})):this.drag.addSelector(t),this.handlers.push({handler:n,options:t}),n.init(this.drag)}},{key:"addSelector",value:function(n,i){this.drag&&this.drag.addSelector(n,i)}},{key:"addFilter",value:function(n,i){this.drag==null?this._filtersToAdd.push([n,i===!0]):this.drag.addFilter(n,i)}},{key:"removeFilter",value:function(n){this.drag!=null&&this.drag.removeFilter(n)}},{key:"setFilters",value:function(n){var i=this;z(n,function(e){i.drag.addFilter(e[0],e[1])})}},{key:"reset",value:function(){var n=[];if(z(this.handlers,function(t){t.handler.reset()}),this.handlers.length=0,this.drag!=null){var i=this.drag._filters;for(var e in i)n.push([e,i[e][1]]);this.collicat.destroyDraggable(this.instance.getContainer())}return delete this.drag,n}},{key:"setOption",value:function(n,i){var e=Ea(this.handlers,function(t){return t.handler===n});e!=null&&K(e.options,i||{})}}]),a}();function Ih(a,o){return Ve(o)?{id:o,active:!0}:{id:o.id,active:o.active}}function wh(a,o){var n=Ml(a.members,function(i){return i.el===o});return n!==null?n.active===!0:!1}function Mh(a){for(var o=[],n=a._jsPlumbParentGroup;n!=null;)o.push(n.el),n=n.group;return o}var ra=function(){function a(o,n){W(this,a),this.instance=o,this._dragSelection=n,v(this,"selector","> "+ke+":not("+Fn(Eo)+")"),v(this,"_dragOffset",null),v(this,"_groupLocations",[]),v(this,"_intersectingGroups",[]),v(this,"_currentDragParentGroup",null),v(this,"_dragGroupByElementIdMap",{}),v(this,"_dragGroupMap",{}),v(this,"_currentDragGroup",null),v(this,"_currentDragGroupOffsets",new Map),v(this,"_currentDragGroupSizes",new Map),v(this,"_currentDragGroupOriginalPositions",new Map),v(this,"_dragPayload",null),v(this,"drag",void 0),v(this,"originalPosition",void 0)}return Q(a,[{key:"onDragInit",value:function(n){return null}},{key:"onDragAbort",value:function(n){return null}},{key:"getDropGroup",value:function(){var n=null;if(this._intersectingGroups.length>0){var i=this._intersectingGroups[0].groupLoc.group,e=this._intersectingGroups[0].intersectingElement,t=e._jsPlumbParentGroup;t!==i&&(t==null||!t.overrideDrop(e,i))&&(n=this._intersectingGroups[0])}return n}},{key:"onStop",value:function(n){var i,e=this,t=n.drag.getDragElement(),r=this.getDropGroup(),s=[];s.push({el:t,id:this.instance.getId(t),pos:n.finalPos,originalGroup:t._jsPlumbParentGroup,redrawResult:null,originalPos:n.originalPos,reverted:!1,dropGroup:r!=null?r.groupLoc.group:null});function l(p,y,g,E,b){var x=g.x,C=g.y;if(p._jsPlumbParentGroup&&p._jsPlumbParentGroup.constrain){var S={w:p.parentNode.offsetWidth+p.parentNode.scrollLeft,h:p.parentNode.offsetHeight+p.parentNode.scrollTop};x=Math.max(x,0),C=Math.max(C,0),x=Math.min(x,S.w-E.w),C=Math.min(C,S.h-E.h),g.x=x,g.y=C}s.push({el:p,id:y,pos:g,originalPos:b,originalGroup:p._jsPlumbParentGroup,redrawResult:null,reverted:!1,dropGroup:r==null?void 0:r.groupLoc.group})}if(this._dragSelection.each(function(p,y,g,E,b){p!==n.el&&l(p,y,{x:g.x,y:g.y},E,b)}),(i=this._currentDragGroup)===null||i===void 0||i.members.forEach(function(p){if(p.el!==n.el){var y=e._currentDragGroupOffsets.get(p.elId),g=e._currentDragGroupSizes.get(p.elId),E={x:n.finalPos.x+y[0].x,y:n.finalPos.y+y[0].y};l(p.el,p.elId,E,g,e._currentDragGroupOriginalPositions.get(p.elId))}}),z(s,function(p){var y=p.originalGroup!=null,g=y&&ms(e.instance,p.el,p.pos),E={x:0,y:0};if(y&&!g){if(r==null){var b=e._pruneOrOrphan(p,!0,!0);b.pos!=null?p.pos=b.pos.pos:!b.pruned&&p.originalGroup.revert&&(p.pos=p.originalPos,p.reverted=!0)}}else y&&g&&(E=e._computeOffsetByParentGroup(p.originalGroup));r!=null&&!g?e.instance.groupManager.addToGroup(r.groupLoc.group,!1,p.el):p.dropGroup=null,p.reverted&&e.instance.setPosition(p.el,p.pos),p.redrawResult=e.instance.setElementPosition(p.el,p.pos.x+E.x,p.pos.y+E.y),e.instance.removeClass(p.el,Ah),e.instance.select({source:p.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.sourceElementDraggingClass,!0),e.instance.select({target:p.el}).removeClass(e.instance.elementDraggingClass+" "+e.instance.targetElementDraggingClass,!0)}),s[0].originalGroup!=null){var u=t._jsPlumbParentGroup;if(u!==s[0].originalGroup){var c=n.drag.getDragElement(!0);if(s[0].originalGroup.ghost){var d=this.instance.getPosition(this.instance.getGroupContentArea(u)),f=this.instance.getPosition(this.instance.getGroupContentArea(s[0].originalGroup)),h={x:f.x+n.pos.x-d.x,y:f.y+n.pos.y-d.y};c.style.left=h.x+"px",c.style.top=h.y+"px",this.instance.revalidate(c)}}}this.instance.fire(lf,{elements:s,e:n.e,el:t,payload:this._dragPayload}),this._cleanup()}},{key:"_cleanup",value:function(){var n=this;z(this._groupLocations,function(i){n.instance.removeClass(i.el,fn),n.instance.removeClass(i.el,hn)}),this._currentDragParentGroup=null,this._groupLocations.length=0,this.instance.hoverSuspended=!1,this._dragOffset=null,this._dragSelection.reset(),this._dragPayload=null,this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroupOriginalPositions.clear(),this._currentDragGroup=null}},{key:"reset",value:function(){}},{key:"init",value:function(n){this.drag=n}},{key:"onDrag",value:function(n){var i=this,e=n.drag.getDragElement(),t=this.instance.getId(e),r=n.pos,s=this.instance.viewport.getPosition(t),l={x:r.x,y:r.y};this._intersectingGroups.length=0,this._dragOffset!=null&&(l.x+=this._dragOffset.x,l.y+=this._dragOffset.y);var u=function(f,h,p){if(p){var y=new Set;z(i._groupLocations,function(g){!y.has(g.group.id)&&au(h,g.r)?(g.group!==i._currentDragParentGroup&&i.instance.addClass(g.el,hn),i._intersectingGroups.push({groupLoc:g,intersectingElement:n.drag.getDragElement(!0),d:0}),z(i.instance.groupManager.getAncestors(g.group),function(E){return y.add(E.id)})):i.instance.removeClass(g.el,hn)})}i.instance.setElementPosition(f,h.x,h.y),i.instance.fire(sf,{el:f,e:n.e,pos:{x:h.x,y:h.y},originalPosition:i.originalPosition,payload:i._dragPayload})},c={x:l.x,y:l.y,w:s.w,h:s.h};u(e,c,!0),this._dragSelection.updatePositions(r,this.originalPosition,function(d,f,h,p){u(d,p,!1)}),this._currentDragGroupOffsets.forEach(function(d,f){var h=i._currentDragGroupSizes.get(f),p={x:c.x+d[0].x,y:c.y+d[0].y,w:h.w,h:h.h};d[1].style.left=p.x+"px",d[1].style.top=p.y+"px",u(d[1],p,!1)})}},{key:"_computeOffsetByParentGroup",value:function(n){var i=this.instance.getPosition(n.el),e=n.contentArea;if(e!==n.el){var t=this.instance.getPosition(e);i.x+=t.x,i.y+=t.y}if(n.el._jsPlumbParentGroup){var r=this._computeOffsetByParentGroup(n.el._jsPlumbParentGroup);i.x+=r.x,i.y+=r.y}return i}},{key:"onStart",value:function(n){var i=this,e=n.drag.getDragElement(),t=this.instance.getPosition(e);this.originalPosition={x:n.pos.x,y:n.pos.y},e._jsPlumbParentGroup&&(this._dragOffset=this._computeOffsetByParentGroup(e._jsPlumbParentGroup),this._currentDragParentGroup=e._jsPlumbParentGroup);var r=!0,s=e.getAttribute(Gi);if((this.instance.elementsDraggable===!1||s!=null&&s!==ir)&&(r=!1),r){this._groupLocations.length=0,this._intersectingGroups.length=0,this.instance.hoverSuspended=!0;var l=n.drag.getDragElement(!0),u=l.querySelectorAll(ke),c=Mh(l),d=[];Array.prototype.push.apply(d,u),Array.prototype.push.apply(d,c),this._dragSelection.filterActiveSet(function(y){return d.indexOf(y.jel)===-1}),this._dragSelection.initialisePositions();var f=function(g,E,b){if(!g._isJsPlumbGroup||i.instance.allowNestedGroups){var x=!g._jsPlumbParentGroup,C=x||g._jsPlumbParentGroup.dropOverride!==!0,S=!x&&(g._jsPlumbParentGroup.ghost||g._jsPlumbParentGroup.constrain!==!0);(x||C&&S)&&(z(i.instance.groupManager.getGroups(),function(T){var _=g._jsPlumbGroup;if(T.droppable!==!1&&T.enabled!==!1&&g._jsPlumbGroup!==T&&!i.instance.groupManager.isDescendant(T,_)){var P=T.el,O=i.instance.getId(P),I=i.instance.viewport.getPosition(O),L={x:I.x,y:I.y,w:I.w,h:I.h},M={el:P,r:L,group:T};i._groupLocations.push(M),T!==i._currentDragParentGroup&&i.instance.addClass(P,fn)}}),i._groupLocations.sort(function(T,_){return i.instance.groupManager.isDescendant(T.group,_.group)?-1:i.instance.groupManager.isAncestor(_.group,T.group)?1:0}))}return i.instance.select({source:g}).addClass(i.instance.elementDraggingClass+" "+i.instance.sourceElementDraggingClass,!0),i.instance.select({target:g}).addClass(i.instance.elementDraggingClass+" "+i.instance.targetElementDraggingClass,!0),i.instance.fire(uf,{el:g,e:n.e,originalPosition:i.originalPosition,pos:i.originalPosition,dragGroup:E,dragGroupMemberSpec:b})},h=this.instance.getId(e);this._currentDragGroup=this._dragGroupByElementIdMap[h],this._currentDragGroup&&!wh(this._currentDragGroup,e)&&(this._currentDragGroup=null);var p=f(e);if(p===!1)return this._cleanup(),!1;this._dragPayload=p,this._currentDragGroup!=null&&(this._currentDragGroupOffsets.clear(),this._currentDragGroupSizes.clear(),this._currentDragGroup.members.forEach(function(y){var g=i.instance.viewport.getPosition(y.elId);i._currentDragGroupOffsets.set(y.elId,[{x:g.x-t.x,y:g.y-t.y},y.el]),i._currentDragGroupSizes.set(y.elId,g),i._currentDragGroupOriginalPositions.set(y.elId,{x:g.x,y:g.y}),f(y.el,i._currentDragGroup,y)}))}return r}},{key:"addToDragGroup",value:function(n){var i=this,e=Ih(this.instance,n),t=this._dragGroupMap[e.id];t==null&&(t={id:e.id,members:new Set},this._dragGroupMap[e.id]=t);for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];this.removeFromDragGroup.apply(this,s),z(s,function(u){var c=i.instance.getId(u);t.members.add({elId:c,el:u,active:e.active}),i._dragGroupByElementIdMap[c]=t})}},{key:"removeFromDragGroup",value:function(){for(var n=this,i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];z(e,function(r){var s=n.instance.getId(r),l=n._dragGroupByElementIdMap[s];if(l!=null){var u=new Set;l.members.forEach(function(c){c.el!==r&&u.add(c)}),l.members=u,delete n._dragGroupByElementIdMap[s]}})}},{key:"setDragGroupState",value:function(n){for(var i=this,e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var s=t.map(function(l){return i.instance.getId(l)});z(s,function(l){var u=i._dragGroupByElementIdMap[l];if(u!=null){var c=Ml(u.members,function(d){return d.elId===l});c!=null&&(c.active=n)}})}},{key:"clearDragGroup",value:function(n){var i=this,e=this._dragGroupMap[n];e!=null&&(e.members.forEach(function(t){delete i._dragGroupByElementIdMap[t.elId]}),e.members.clear())}},{key:"_pruneOrOrphan",value:function(n,i,e){var t=n.el,r={pruned:!1,pos:null};if(e||!ms(this.instance,t,n.pos)){var s=t._jsPlumbParentGroup;s.prune?(t._isJsPlumbGroup?this.instance.removeGroup(t._jsPlumbGroup):s.remove(n.el,!0),r.pruned=!0):s.orphan&&(r.pos=this.instance.groupManager.orphan(n.el,i),t._isJsPlumbGroup?s.removeGroup(t._jsPlumbGroup):s.remove(n.el))}return r}}]),a}(),Es={},bs={},xs={},vn={get:function(o,n,i){var e=Es[n];if(e)return new e(o,i);throw{message:"jsPlumb: unknown endpoint type '"+n+"'"}},clone:function(o){var n=xs[o.type];return vn.get(o.endpoint,o.type,n.getParams(o))},compute:function(o,n,i,e){var t=bs[o.type];if(t!=null)return t(o,n,i,e);We("jsPlumb: cannot find endpoint calculator for endpoint of type ",o.type)},registerHandler:function(o){xs[o.type]=o,Es[o.type]=o.cls,bs[o.type]=o.compute}},Er=function(){function a(o,n){W(this,a),this.endpoint=o,v(this,"typeId",void 0),v(this,"x",void 0),v(this,"y",void 0),v(this,"w",void 0),v(this,"h",void 0),v(this,"computedValue",void 0),v(this,"bounds",eo()),v(this,"classes",[]),v(this,"instance",void 0),v(this,"type",void 0),n=n||{},this.instance=o.instance,o.cssClass&&this.classes.push(o.cssClass),n.cssClass&&this.classes.push(n.cssClass)}return Q(a,[{key:"addClass",value:function(n){this.classes.push(n),this.instance.addEndpointClass(this.endpoint,n)}},{key:"removeClass",value:function(n){this.classes=this.classes.filter(function(i){return i!==n}),this.instance.removeEndpointClass(this.endpoint,n)}},{key:"compute",value:function(n,i,e){this.computedValue=vn.compute(this,n,i,e),this.bounds.xmin=this.x,this.bounds.ymin=this.y,this.bounds.xmax=this.x+this.w,this.bounds.ymax=this.y+this.h}},{key:"setVisible",value:function(n){this.instance.setEndpointVisible(this.endpoint,n)}}]),a}(),Wn,Kn,zn,pr;(function(a){a.top="top",a.left="left",a.right="right",a.bottom="bottom"})(pr||(pr={}));var $e=pr.top,st=pr.left,et=pr.right,ct=pr.bottom,kh=[st,et],Lh=[$e,ct],Nh=function(){function a(o,n,i){W(this,a),this.instance=o,this.element=n,v(this,"isFloating",!0),v(this,"isContinuous",void 0),v(this,"isDynamic",void 0),v(this,"locations",[]),v(this,"currentLocation",0),v(this,"locked",!1),v(this,"cssClass",""),v(this,"timestamp",null),v(this,"type","Floating"),v(this,"id",Ke()),v(this,"orientation",[0,0]),v(this,"size",void 0),this.size=o.viewport.getPosition(i),this.locations.push({x:.5,y:.5,ox:this.orientation[0],oy:this.orientation[1],offx:0,offy:0,iox:this.orientation[0],ioy:this.orientation[1],cls:""})}return Q(a,[{key:"_updateOrientationInRouter",value:function(){this.instance.router.setAnchorOrientation(this,[this.locations[0].ox,this.locations[0].oy])}},{key:"over",value:function(n){this.orientation=this.instance.router.getEndpointOrientation(n),this.locations[0].ox=this.orientation[0],this.locations[0].oy=this.orientation[1],this._updateOrientationInRouter()}},{key:"out",value:function(){this.orientation=null,this.locations[0].ox=this.locations[0].iox,this.locations[0].oy=this.locations[0].ioy,this._updateOrientationInRouter()}}]),a}(),Cs=(Wn={},v(Wn,$e,ct),v(Wn,et,st),v(Wn,st,et),v(Wn,ct,$e),Wn),fu=(Kn={},v(Kn,$e,et),v(Kn,et,ct),v(Kn,st,$e),v(Kn,ct,st),Kn),hu=(zn={},v(zn,$e,st),v(zn,et,$e),v(zn,st,ct),v(zn,ct,et),zn);function Rh(a){return a.faces.length===0?$e:a.faces[0]}function jr(a,o){return a.faces.indexOf(o)!==-1}function Gh(a,o){return(a.clockwise?fu:hu)[o]}function Fh(a,o){return(a.clockwise?hu:fu)[o]}function Ss(a,o){return a.lockedAxis==null?a.lockedFace==null?jr(a,o)===!0:a.lockedFace===o:a.lockedAxis.indexOf(o)!==-1}function jh(a,o){if(jr(a,o))return o;if(jr(a,Cs[o]))return Cs[o];var n=Gh(a,o);if(jr(a,n))return n;var i=Fh(a,o);return jr(a,i)?i:o}var Ps={x:.5,y:0,ox:0,oy:-1,offx:0,offy:0},Ts={x:.5,y:1,ox:0,oy:1,offx:0,offy:0},Os={x:0,y:.5,ox:-1,oy:0,offx:0,offy:0},_s={x:1,y:.5,ox:1,oy:0,offx:0,offy:0},Bh={x:0,y:0,ox:0,oy:-1,offx:0,offy:0},Uh={x:1,y:0,ox:1,oy:-1,offx:0,offy:0},Vh={x:0,y:1,ox:0,oy:1,offx:0,offy:0},Hh={x:1,y:1,ox:0,oy:1,offx:0,offy:0},$h={x:.5,y:.5,ox:0,oy:0,offx:0,offy:0},vu={Top:[Ps],Bottom:[Ts],Left:[Os],Right:[_s],TopLeft:[Bh],TopRight:[Uh],BottomLeft:[Vh],BottomRight:[Hh],Center:[$h],AutoDefault:[Ps,Os,Ts,_s]},Yh={Continuous:{faces:[$e,st,ct,et]},ContinuousTop:{faces:[$e]},ContinuousRight:{faces:[et]},ContinuousBottom:{faces:[ct]},ContinuousLeft:{faces:[st]},ContinuousLeftRight:{faces:[st,et]},ContinuousTopBottom:{faces:[$e,ct]}};function As(a,o){if(o=o||{},a===Vt.Perimeter)return qh(o);var n=vu[a];if(n!=null)return oo(a,Ll(n,function(i){return K({iox:i.ox,ioy:i.oy},i)}),o);if(n=Yh[a],n!=null)return Kh(a,n.faces,o);throw{message:"jsPlumb: unknown anchor type '"+a+"'"}}function oo(a,o,n){return{type:a,locations:o,currentLocation:0,locked:!1,id:Ke(),isFloating:!1,isContinuous:!1,isDynamic:o.length>1,timestamp:null,cssClass:n.cssClass||""}}function Xh(a,o,n){return new Nh(a,o,n)}var Wh="currentFace";function Kh(a,o,n){var i={type:a,locations:[],currentLocation:0,locked:!1,id:Ke(),cssClass:n.cssClass||"",isFloating:!1,isContinuous:!0,timestamp:null,faces:n.faces||o,lockedFace:null,lockedAxis:null,clockwise:n.clockwise!==!1,__currentFace:null};return Object.defineProperty(i,Wh,{get:function(){return this.__currentFace},set:function(t){this.__currentFace=jh(this,t)}}),i}function Ds(a){return a.length<7&&a.every(Ko)||a.length===7&&a.slice(0,5).every(Ko)&&Ve(a[6])}function Br(a){if(Ve(a))return As(a,null);if(Array.isArray(a))if(Ds(a)){var o=a;return oo(null,[{x:o[0],y:o[1],ox:o[2],oy:o[3],offx:o[4]==null?0:o[4],offy:o[5]==null?0:o[5],iox:o[2],ioy:o[3],cls:o[6]||""}],{cssClass:o[6]||""})}else{var n=Ll(a,function(e){if(Ve(e)){var t=vu[e];return t!=null?K({iox:t[0].ox,ioy:t[0].oy,cls:""},t[0]):null}else if(Ds(e))return{x:e[0],y:e[1],ox:e[2],oy:e[3],offx:e[4]==null?0:e[4],offy:e[5]==null?0:e[5],iox:e[2],ioy:e[3],cls:e[6]||""}}).filter(function(e){return e!=null});return oo("Dynamic",n,{})}else{var i=a;return As(i.type,i.options)}}function pu(a){for(var o=.5,n=Math.PI*2/a,i=[],e=0,t=0;t<a;t++){var r=o+o*Math.sin(e),s=o+o*Math.cos(e);i.push({x:r,y:s,ox:0,oy:0,offx:0,offy:0,iox:0,ioy:0,cls:""}),e+=n}return i}function zh(a,o){for(var n=o/a.length,i=[],e=function(s,l,u,c,d,f,h){n=o*d;for(var p=(u-s)/n,y=(c-l)/n,g=0;g<n;g++)i.push({x:s+p*g,y:l+y*g,ox:f??0,oy:h??0,offx:0,offy:0,iox:0,ioy:0,cls:""})},t=0;t<a.length;t++)e.apply(null,a[t]);return i}function Ga(a,o){for(var n=[],i=0;i<a.length;i++)n.push([a[i][0],a[i][1],a[i][2],a[i][3],1/a.length,a[i][4],a[i][5]]);return zh(n,o)}function gu(a){return Ga([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]],a)}function Zh(a){return Ga([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]],a)}function Jh(a){return Ga([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]],a)}function Qh(a,o){for(var n=[],i=o/180*Math.PI,e=0;e<a.length;e++){var t=a[e].x-.5,r=a[e].y-.5;n.push({x:.5+(t*Math.cos(i)-r*Math.sin(i)),y:.5+(t*Math.sin(i)+r*Math.cos(i)),ox:a[e].ox,oy:a[e].oy,offx:0,offy:0,iox:0,ioy:0,cls:""})}return n}var mn=new Map;mn.set(yn.Circle,pu);mn.set(yn.Ellipse,pu);mn.set(yn.Rectangle,gu);mn.set(yn.Square,gu);mn.set(yn.Diamond,Zh);mn.set(yn.Triangle,Jh);function qh(a){a=a||{};var o=a.anchorCount||60,n=a.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");if(!mn.has(n))throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var i=mn.get(n)(o);a.rotation&&(i=Qh(i,a.rotation));var e=oo(Vt.Perimeter,i,a),t=K(e,{shape:n});return t}var Is=function(){function a(o,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;W(this,a),this.selector=o,this.def=n,this.exclude=i,v(this,"id",void 0),v(this,"redrop",void 0),this.id=Ke(),this.redrop=n.def.redrop||yu}return Q(a,[{key:"setEnabled",value:function(n){this.def.enabled=n}},{key:"isEnabled",value:function(){return this.def.enabled!==!1}}]),a}(),yu="strict",ev="any",tv="anySource",nv="anyTarget",rv="anySourceOrTarget";function iv(a,o,n,i,e,t){var r=Xh(t,i,e),s={paintStyle:a.getPaintStyle(),preparedAnchor:r,element:i,scope:a.scope,cssClass:[Sa,a.cssClass].join(" ")};o!=null&&(Nl(o,Er)?s.existingEndpoint=o:s.endpoint=o);var l=t._internal_newEndpoint(s);return t._paintEndpoint(l,{}),l}function ov(a,o,n,i,e){for(var t=a.target||a.srcElement,r=!1,s=i.getSelector(o,n),l=0;l<s.length;l++)if(s[l]===t){r=!0;break}return e?!r:r}var av=Fn(fn,hn),ws="sourceSelectorEndpoint",Ms=function(){function a(o){W(this,a),this.instance=o,v(this,"jpc",void 0),v(this,"existingJpc",void 0),v(this,"_originalAnchorSpec",void 0),v(this,"ep",void 0),v(this,"endpointRepresentation",void 0),v(this,"canvasElement",void 0),v(this,"_activeDefinition",void 0),v(this,"placeholderInfo",{id:null,element:null}),v(this,"floatingIndex",void 0),v(this,"floatingId",void 0),v(this,"floatingElement",void 0),v(this,"floatingEndpoint",void 0),v(this,"floatingAnchor",void 0),v(this,"_stopped",void 0),v(this,"inPlaceCopy",void 0),v(this,"endpointDropTargets",[]),v(this,"currentDropTarget",null),v(this,"payload",void 0),v(this,"floatingConnections",{}),v(this,"_forceReattach",void 0),v(this,"_forceDetach",void 0),v(this,"mousedownHandler",void 0),v(this,"mouseupHandler",void 0),v(this,"selector",Fn(sr));var n=o.getContainer();this.mousedownHandler=this._mousedownHandler.bind(this),this.mouseupHandler=this._mouseupHandler.bind(this),o.on(n,ce,ke,this.mousedownHandler),o.on(n,de,[ke,Fn(sr)].join(","),this.mouseupHandler)}return Q(a,[{key:"_resolveDragParent",value:function(n,i){var e=this.instance.getContainer(),t=Wt(i,ke,e,!0);if(n.parentSelector!=null){var r=Wt(i,n.parentSelector,e,!0);return r!=null&&(t=Wt(r.parentNode,ke,e,!1)),r||t}else return t}},{key:"_mousedownHandler",value:function(n){var i,e;if(!(n.which===3||n.button===2)){var t=n.target||n.srcElement;if(e=this._getSourceDefinition(n),!(e!=null&&(i=this._resolveDragParent(e.def.def,t),i==null||i.getAttribute(Pi)===ir))&&e){var r=n.currentTarget,s;if(t.getAttribute(Pi)!==ir){if(Qr(n),this._activeDefinition=e,s=e.def.def,s.canAcceptNewConnection!=null&&!s.canAcceptNewConnection(i,n))return!1;var l=Ks(n,i,this.instance.currentZoom),u={element:i};if(K(u,s),u.isTemporarySource=!0,s.scope)u.scope=s.scope;else{var c=t.getAttribute(Lo);c!=null&&(u.scope=c)}var d=s.parameterExtractor?s.parameterExtractor(i,t,n):{};if(u=Zi(u,d),u.maxConnections!=null&&u.maxConnections>=0){var f=this.instance.select({source:i}).length;if(f>=u.maxConnections)return Qr(n),s.onMaxConnections&&s.onMaxConnections({element:i,maxConnections:u.maxConnections},n),n.stopImmediatePropagation&&n.stopImmediatePropagation(),!1}if(s.anchorPositionFinder){var h=s.anchorPositionFinder(i,l,s,n);h!=null&&(u.anchor=h)}this._originalAnchorSpec=u.anchor||(this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors[0]:this.instance.defaults.anchor);var p=this.instance.router.prepareAnchor(this._originalAnchorSpec),y=[l.x,l.y,0,0];if(p.locations.length>0)y[2]=p.locations[0].ox,y[3]=p.locations[0].oy;else if(p.isContinuous){var g=l.x<.5?l.x:1-l.x,E=l.y<.5?l.y:1-l.y;y[2]=g<E?l.x<.5?-1:1:0,y[3]=E<g?l.y<.5?-1:1:0}u.anchor=y,u.deleteOnEmpty=!0,this.ep=this.instance._internal_newEndpoint(u);var b={};if(s.extract){for(var x in s.extract){var C=t.getAttribute(x);C&&(b[s.extract[x]]=C)}this.ep.mergeParameters(b)}if(u.uniqueEndpoint){var S=this.ep.elementId,T=this.instance.getManagedData(S,ws,e.id);T==null?(this.instance.setManagedData(S,ws,e.id,this.ep),this.ep.deleteOnEmpty=!1):this.ep.finalEndpoint=T}r._jsPlumbOrphanedEndpoints=r._jsPlumbOrphanedEndpoints||[],r._jsPlumbOrphanedEndpoints.push(this.ep),this.instance.trigger(this.ep.endpoint.canvas,ce,n,b)}}}}},{key:"_mouseupHandler",value:function(n){var i=n.currentTarget||n.srcElement;i._jsPlumbOrphanedEndpoints&&(fd(i._jsPlumbOrphanedEndpoints,this.instance._maybePruneEndpoint.bind(this.instance)),i._jsPlumbOrphanedEndpoints.length=0),this._activeDefinition=null}},{key:"onDragInit",value:function(n){var i=Ci(n,this.instance),e=Ar(n,this.instance);return this._makeDraggablePlaceholder(i,e),this.placeholderInfo.element.jtk=n.jtk,this.placeholderInfo.element}},{key:"onDragAbort",value:function(n){this._cleanupDraggablePlaceholder()}},{key:"_makeDraggablePlaceholder",value:function(n,i){this.placeholderInfo=this.placeholderInfo||{};var e=Gl(eu,{position:"absolute"});this.instance._appendElementToContainer(e);var t=this.instance.getId(e);return this.instance.setPosition(e,n),e.style.width=i.w+"px",e.style.height=i.h+"px",this.instance.manage(e),this.placeholderInfo.id=t,this.placeholderInfo.element=e,e}},{key:"_cleanupDraggablePlaceholder",value:function(){this.placeholderInfo.element&&(this.instance.unmanage(this.placeholderInfo.element,!0),delete this.placeholderInfo.element,delete this.placeholderInfo.id)}},{key:"reset",value:function(){var n=this.instance.getContainer();this.instance.off(n,de,this.mouseupHandler),this.instance.off(n,ce,this.mousedownHandler)}},{key:"init",value:function(n){}},{key:"startNewConnectionDrag",value:function(n,i){this.jpc=this.instance._newConnection({sourceEndpoint:this.ep,targetEndpoint:this.floatingEndpoint,source:this.ep.element,target:this.placeholderInfo.element,paintStyle:this.ep.connectorStyle,hoverPaintStyle:this.ep.connectorHoverStyle,connector:this.ep.connector,overlays:this.ep.connectorOverlays,type:this.ep.edgeType,cssClass:this.ep.connectorClass,hoverClass:this.ep.connectorHoverClass,scope:n,data:i}),this.jpc.pending=!0,this.jpc.addClass(this.instance.draggingClass),this.ep.addClass(this.instance.draggingClass),this.instance.fire(fs,this.jpc)}},{key:"startExistingConnectionDrag",value:function(){this.existingJpc=!0,this.instance.setHover(this.jpc,!1);var n=this.jpc.endpoints[0].id===this.ep.id?0:1;this.ep.detachFromConnection(this.jpc,null,!0),this.floatingEndpoint.addConnection(this.jpc),this.instance.fire(fs,this.jpc),this.instance.sourceOrTargetChanged(this.jpc.endpoints[n].elementId,this.placeholderInfo.id,this.jpc,this.placeholderInfo.element,n),this.jpc.suspendedEndpoint=this.jpc.endpoints[n],this.jpc.suspendedElement=this.jpc.endpoints[n].element,this.jpc.suspendedElementId=this.jpc.endpoints[n].elementId,this.jpc.suspendedElementType=n===0?Jo:jl,this.instance.setHover(this.jpc.suspendedEndpoint,!1),this.floatingEndpoint.referenceEndpoint=this.jpc.suspendedEndpoint,this.floatingEndpoint.mergeParameters(this.jpc.suspendedEndpoint.parameters),this.jpc.endpoints[n]=this.floatingEndpoint,this.jpc.addClass(this.instance.draggingClass),this.floatingId=this.placeholderInfo.id,this.floatingIndex=n,this.instance._refreshEndpoint(this.ep)}},{key:"_shouldStartDrag",value:function(){var n=!0;this.ep.enabled||(n=!1),this.jpc==null&&!this.ep.isSource&&!this.ep.isTemporarySource&&(n=!1),this.ep.isSource&&this.ep.isFull()&&!(this.jpc!=null&&this.ep.dragAllowedWhenFull)&&(n=!1),this.jpc!=null&&!this.jpc.isDetachable(this.ep)&&(this.ep.isFull()?n=!1:this.jpc=null);var i={},e=this.instance.checkCondition(this.jpc==null?$d:Yd,{endpoint:this.ep,source:this.ep.element,sourceId:this.ep.elementId,connection:this.jpc});return e===!1?n=!1:ar(e)==="object"?(i=e,K(i,this.payload||{})):i=this.payload||{},[n,i]}},{key:"_createFloatingEndpoint",value:function(n){var i=this.ep.endpoint;if(this.ep.edgeType!=null){var e=this.instance._deriveEndpointAndAnchorSpec(this.ep.edgeType);i=e.endpoints[1]}this.floatingEndpoint=iv(this.ep,i,n,this.placeholderInfo.element,this.placeholderInfo.id,this.instance),this.floatingAnchor=this.floatingEndpoint._anchor,this.floatingEndpoint.deleteOnEmpty=!0,this.floatingElement=this.floatingEndpoint.endpoint.canvas,this.floatingId=this.instance.getId(this.floatingElement)}},{key:"_populateTargets",value:function(n,i){var e=this,t=this.jpc&&this.jpc.endpoints[0]===this.ep,r,s=this.instance.getContainer().querySelectorAll([".",sr,"[",Ul,this.ep.scope,"]:not(.",Sa,")"].join(""));if(z(s,function(d){if((e.jpc!=null||d!==n)&&d!==e.floatingElement&&(e.jpc!=null||!d.jtk.endpoint.isFull())&&(t&&d.jtk.endpoint.isSource||!t&&d.jtk.endpoint.isTarget)){var f=Ci(d,e.instance),h=Ar(d,e.instance);r={x:f.x,y:f.y,w:h.w,h:h.h},e.endpointDropTargets.push({el:d,targetEl:d,r,endpoint:d.jtk.endpoint,def:null}),e.instance.addClass(d,fn)}}),t){var l=Ea(this.instance.sourceSelectors,function(d){return d.isEnabled()&&(d.def.def.scope==null||d.def.def.scope===e.ep.scope)});if(l!=null){var u=this._findTargetZones(l);z(u,function(d){if(d.getAttribute(Pi)!==ir){var f=d.getAttribute(Lo);if(f!=null&&f!==e.ep.scope)return;var h={r:null,el:d};h.targetEl=Wt(d,ke,e.instance.getContainer(),!0);var p=Ci(h.el,e.instance),y=Ar(h.el,e.instance);h.r={x:p.x,y:p.y,w:y.w,h:y.h},l.def.def.rank!=null&&(h.rank=l.def.def.rank),h.def=l.def,e.endpointDropTargets.push(h),e.instance.addClass(h.targetEl,fn)}})}}else{var c=cd(this.instance.targetSelectors,function(d){return d.isEnabled()});c.forEach(function(d){var f=e._findTargetZones(d);z(f,function(h){if(h.getAttribute(Pi)!==ir){var p=h.getAttribute(Lo);if(p!=null&&p!==e.ep.scope)return;var y={r:null,el:h};if(d.def.def.parentSelector!=null&&(y.targetEl=Wt(h,d.def.def.parentSelector,e.instance.getContainer(),!0)),y.targetEl==null&&(y.targetEl=Wt(h,ke,e.instance.getContainer(),!0)),(d.def.def.allowLoopback===!1||e._activeDefinition&&e._activeDefinition.def.def.allowLoopback===!1)&&y.targetEl===e.ep.element||d.def.def.canAcceptNewConnection!=null&&!d.def.def.canAcceptNewConnection(y.targetEl,i))return;var g=d.def.def.maxConnections;if(g!=null&&g!==-1&&e.instance.select({target:y.targetEl}).length>=g)return;var E=Ci(h,e.instance),b=Ar(h,e.instance);y.r={x:E.x,y:E.y,w:b.w,h:b.h},y.def=d.def,d.def.def.rank!=null&&(y.rank=d.def.def.rank),e.endpointDropTargets.push(y),e.instance.addClass(y.targetEl,fn)}})})}this.endpointDropTargets.sort(function(d,f){if(d.targetEl._isJsPlumbGroup&&!f.targetEl._isJsPlumbGroup)return 1;if(!d.targetEl._isJsPlumbGroup&&f.targetEl._isJsPlumbGroup)return-1;if(d.targetEl._isJsPlumbGroup&&f.targetEl._isJsPlumbGroup){if(e.instance.groupManager.isAncestor(d.targetEl._jsPlumbGroup,f.targetEl._jsPlumbGroup))return-1;if(e.instance.groupManager.isAncestor(f.targetEl._jsPlumbGroup,d.targetEl._jsPlumbGroup))return 1}else if(d.rank!=null&&f.rank!=null){if(d.rank>f.rank)return-1;if(d.rank<f.rank)return 1}else return 0})}},{key:"_findTargetZones",value:function(n){var i;if(n.redrop===ev){var e=this.instance.targetSelectors.map(function(r){return r.selector});e.push.apply(e,cr(this.instance.sourceSelectors.map(function(r){return r.selector}))),e.push(ke),i=e.join(",")}else if(n.redrop===yu)i=n.selector;else if(n.redrop===tv)i=this.instance.sourceSelectors.map(function(r){return r.selector}).join(",");else if(n.redrop===nv)i=this.instance.targetSelectors.map(function(r){return r.selector}).join(",");else if(n.redrop===rv){var t=this.instance.targetSelectors.map(function(r){return r.selector});t.push.apply(t,cr(this.instance.sourceSelectors.map(function(r){return r.selector}))),i=t.join(",")}return this.instance.getContainer().querySelectorAll(i)}},{key:"onStart",value:function(n){this.endpointDropTargets.length=0,this.currentDropTarget=null,this._stopped=!1;var i=n.drag.getDragElement();if(this.ep=i.jtk.endpoint,!this.ep)return!1;this.endpointRepresentation=this.ep.endpoint,this.canvasElement=this.endpointRepresentation.canvas,this.jpc=this.ep.connectorSelector();var e=this._shouldStartDrag(),t=Ri(e,2),r=t[0],s=t[1];if(r===!1)return this._stopped=!0,!1;this.instance.setHover(this.ep,!1),this.instance.isConnectionBeingDragged=!0,this.jpc&&!this.ep.isFull()&&this.ep.isSource&&(this.jpc=null),this._createFloatingEndpoint(this.canvasElement),this._populateTargets(this.canvasElement,n.e),this.jpc==null?this.startNewConnectionDrag(this.ep.scope,s):this.startExistingConnectionDrag(),this._registerFloatingConnection(this.placeholderInfo,this.jpc),this.instance.currentlyDragging=!0}},{key:"onBeforeStart",value:function(n){this.payload=n.e.payload||{}}},{key:"onDrag",value:function(n){if(this._stopped)return!0;if(this.placeholderInfo.element){var i=Ar(this.floatingElement,this.instance);this.instance.setElementPosition(this.placeholderInfo.element,n.pos.x,n.pos.y);for(var e={x:n.pos.x,y:n.pos.y,w:i.w,h:i.h},t,r,s,l=0;l<this.endpointDropTargets.length;l++)if(au(e,this.endpointDropTargets[l].r)){t=this.endpointDropTargets[l];break}if(t!==this.currentDropTarget&&this.currentDropTarget!=null&&(r=this._getFloatingAnchorIndex(),this.instance.removeClass(this.currentDropTarget.el,hn),this.currentDropTarget.endpoint&&(this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),this.currentDropTarget.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.out()),t!=null&&(this.instance.addClass(t.el,hn),r=this._getFloatingAnchorIndex(),t.endpoint!=null))if(s=t.endpoint.isSource&&r===0||t.endpoint.isTarget&&r!==0||this.jpc.suspendedEndpoint&&t.endpoint.referenceEndpoint&&t.endpoint.referenceEndpoint.id===this.jpc.suspendedEndpoint.id,s){var u=this.instance.checkCondition(Td,{sourceEndpoint:this.jpc.endpoints[r],targetEndpoint:t.endpoint.endpoint,connection:this.jpc});u?(t.endpoint.endpoint.addClass(this.instance.endpointDropAllowedClass),t.endpoint.endpoint.removeClass(this.instance.endpointDropForbiddenClass)):(t.endpoint.endpoint.removeClass(this.instance.endpointDropAllowedClass),t.endpoint.endpoint.addClass(this.instance.endpointDropForbiddenClass)),this.floatingAnchor.over(t.endpoint),this.instance._paintConnection(this.jpc)}else t=null;this.currentDropTarget=t}}},{key:"_maybeCleanup",value:function(n){n._mtNew&&n.connections.length===0?this.instance.deleteEndpoint(n):delete n._mtNew}},{key:"_reattachOrDiscard",value:function(n){var i=this.jpc.suspendedEndpoint!=null,e=this._getFloatingAnchorIndex();return i&&this._shouldReattach()?(e===0?(this.jpc.source=this.jpc.suspendedElement,this.jpc.sourceId=this.jpc.suspendedElementId):(this.jpc.target=this.jpc.suspendedElement,this.jpc.targetId=this.jpc.suspendedElementId),this._doForceReattach(e),!0):(this._discard(e,n),!1)}},{key:"onStop",value:function(n){var i=this,e=n.e;this.instance.isConnectionBeingDragged=!1,this.instance.currentlyDragging=!1;var t=Cd(hn,fn),r=this.instance.getContainer().querySelectorAll(av);if(z(r,function(f){i.instance.removeClass(f,t)}),this.jpc&&this.jpc.endpoints!=null){var s=this.jpc.suspendedEndpoint!=null,l=this._getFloatingAnchorIndex(),u=this.jpc.suspendedEndpoint,c;if(this.currentDropTarget!=null)if(c=this._getDropEndpoint(n,this.jpc),c==null)this._reattachOrDiscard(n.e);else if(u&&u.id===c.id)this._doForceReattach(l);else if(!c.enabled)this._reattachOrDiscard(n.e);else if(c.isFull())c.fire(Wl,{endpoint:this,connection:this.jpc,maxConnections:this.instance.defaults.maxConnections},e),this._reattachOrDiscard(n.e);else{l===0?(this.jpc.source=c.element,this.jpc.sourceId=c.elementId):(this.jpc.target=c.element,this.jpc.targetId=c.elementId);var d=!0;s&&this.jpc.suspendedEndpoint.id!==c.id&&(!this.jpc.isDetachAllowed(this.jpc)||!this.jpc.endpoints[l].isDetachAllowed(this.jpc)||!this.jpc.suspendedEndpoint.isDetachAllowed(this.jpc)||!this.instance.checkCondition("beforeDetach",this.jpc))&&(d=!1),d=d&&c.isDropAllowed(this.jpc.sourceId,this.jpc.targetId,this.jpc.scope,this.jpc,c),d?this._drop(c,l,e,d):this._reattachOrDiscard(n.e)}else this._reattachOrDiscard(n.e);this.instance._refreshEndpoint(this.ep),this.ep.removeClass(this.instance.draggingClass),this._cleanupDraggablePlaceholder(),this.jpc.removeClass(this.instance.draggingClass),delete this.jpc.suspendedEndpoint,delete this.jpc.suspendedElement,delete this.jpc.suspendedElementType,delete this.jpc.suspendedElementId,delete this.jpc.suspendedIndex,delete this.floatingId,delete this.floatingIndex,delete this.floatingElement,delete this.floatingEndpoint,delete this.floatingAnchor,delete this.jpc.pending,c!=null&&this._maybeCleanup(c)}}},{key:"_getSourceDefinition",value:function(n){for(var i,e=this.instance.getContainer(),t=0;t<this.instance.sourceSelectors.length;t++)if(i=this.instance.sourceSelectors[t],i.isEnabled()){var r=ov(n,e,i.selector,this.instance,i.exclude);if(r!==!1)return i}}},{key:"_getDropEndpoint",value:function(n,i){var e;if(this.currentDropTarget.endpoint==null){var t=this.currentDropTarget.def,r=n.e.target||n.e.srcElement;if(t==null)return null;var s=this.currentDropTarget.targetEl,l=Ks(n.e,s,this.instance.currentZoom),u=this.instance._deriveEndpointAndAnchorSpec(i.getType().join(" "),!0),c=u.endpoints?K(n,{endpoint:t.def.endpoint||u.endpoints[1],cssClass:t.def.cssClass||"",source:t.def.source===!0,target:t.def.target===!0}):n,d=this.instance.validAnchorsSpec(u.anchors)?u.anchors:this.instance.areDefaultAnchorsSet()?this.instance.defaults.anchors:null,f=t.def.anchor,h=t.def.anchorPositionFinder?t.def.anchorPositionFinder(s,l,t.def,n.e):null,p=h??f??(d!=null&&d[1]!=null?d[1]:null);p!=null&&(c=K(c,{anchor:p})),t.def.portId!=null&&(c.portId=t.def.portId);var y=t.def.parameterExtractor?t.def.parameterExtractor(this.currentDropTarget.el,r,n.e):{};if(c=Zi(c,y),c.element=s,e=this.instance._internal_newEndpoint(c),e._mtNew=!0,e.deleteOnEmpty=!0,t.def.parameters&&e.mergeParameters(t.def.parameters),t.def.extract){var g={};for(var E in t.def.extract){var b=this.currentDropTarget.el.getAttribute(E);b&&(g[t.def.extract[E]]=b)}e.mergeParameters(g)}}else e=this.currentDropTarget.endpoint;return e&&(e.removeClass(this.instance.endpointDropAllowedClass),e.removeClass(this.instance.endpointDropForbiddenClass)),e}},{key:"_doForceReattach",value:function(n){this.floatingEndpoint.detachFromConnection(this.jpc,null,!0),this.jpc.endpoints[n]=this.jpc.suspendedEndpoint,this.instance.setHover(this.jpc,!1),this.jpc._forceDetach=!0,this.jpc.suspendedEndpoint.addConnection(this.jpc),this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.suspendedEndpoint.elementId,this.jpc,this.jpc.suspendedEndpoint.element,n),this.instance.deleteEndpoint(this.floatingEndpoint),this.instance.repaint(this.jpc.source),delete this.jpc._forceDetach}},{key:"_shouldReattach",value:function(){if(this.jpc.isReattach()||this.jpc._forceReattach)return!0;var n=this.jpc.suspendedEndpoint,i=this.jpc.suspendedElementType==Jo?1:0,e=this.jpc.endpoints[i];return!wl(!0,!1,[[n,lr,[this.jpc]],[e,lr,[this.jpc]],[this.jpc,lr,[this.jpc]],[this.instance,Vl,[Jl,this.jpc]]])}},{key:"_discard",value:function(n,i){this.jpc.pending?this.instance.fire(cf,this.jpc,i):(n===0?(this.jpc.source=this.jpc.suspendedEndpoint.element,this.jpc.sourceId=this.jpc.suspendedEndpoint.elementId):(this.jpc.target=this.jpc.suspendedEndpoint.element,this.jpc.targetId=this.jpc.suspendedEndpoint.elementId),this.jpc.endpoints[n]=this.jpc.suspendedEndpoint),this.floatingEndpoint&&this.floatingEndpoint.detachFromConnection(this.jpc),this.instance.deleteConnection(this.jpc,{originalEvent:i,force:!0})}},{key:"_drop",value:function(n,i,e,t){if(this.jpc.endpoints[i].detachFromConnection(this.jpc),this.jpc.suspendedEndpoint&&this.jpc.suspendedEndpoint.detachFromConnection(this.jpc),this.jpc.endpoints[i]=n,n.addConnection(this.jpc),this.jpc.suspendedEndpoint){var r=this.jpc.suspendedEndpoint.elementId;this.instance.fireMoveEvent({index:i,originalSourceId:i===0?r:this.jpc.sourceId,newSourceId:i===0?n.elementId:this.jpc.sourceId,originalTargetId:i===1?r:this.jpc.targetId,newTargetId:i===1?n.elementId:this.jpc.targetId,originalEndpoint:this.jpc.suspendedEndpoint,connection:this.jpc,newEndpoint:n},e)}if(i===1?this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.targetId,this.jpc,this.jpc.target,1):this.instance.sourceOrTargetChanged(this.floatingId,this.jpc.sourceId,this.jpc,this.jpc.source,0),this.jpc.endpoints[0].finalEndpoint){var s=this.jpc.endpoints[0];s.detachFromConnection(this.jpc),this.jpc.endpoints[0]=this.jpc.endpoints[0].finalEndpoint,this.jpc.endpoints[0].addConnection(this.jpc)}dr(t)&&this.jpc.mergeData(t),this._originalAnchorSpec&&(this.jpc.endpoints[0].setAnchor(this._originalAnchorSpec),this._originalAnchorSpec=null),this.instance._finaliseConnection(this.jpc,null,e),this.instance.setHover(this.jpc,!1),this.instance.revalidate(this.jpc.endpoints[0].element)}},{key:"_registerFloatingConnection",value:function(n,i){this.floatingConnections[n.id]=i}},{key:"_getFloatingAnchorIndex",value:function(){return this.floatingIndex==null?1:this.floatingIndex}}]),a}(),ks=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),t.instance=i,t.dragSelection=e,v(m(t),"selector",[">",kf,ke].join(" ")),v(m(t),"doRevalidate",void 0),t.doRevalidate=t._revalidate.bind(m(t)),t}return Q(n,[{key:"reset",value:function(){this.drag.off(qi,this.doRevalidate)}},{key:"_revalidate",value:function(e){this.instance.revalidate(e)}},{key:"init",value:function(e){this.drag=e,e.on(qi,this.doRevalidate)}},{key:"useGhostProxy",value:function(e,t){var r=t._jsPlumbParentGroup;return r==null?!1:r.ghost===!0}},{key:"makeGhostProxy",value:function(e){var t=e,r=t.cloneNode(!0);return r._jsPlumbParentGroup=t._jsPlumbParentGroup,r}}]),n}(ra),Fa=function(){function a(o,n){W(this,a),this.instance=o,this.overlay=n,v(this,"htmlElementOverlay",void 0),this.htmlElementOverlay=n}return Q(a,null,[{key:"getElement",value:function(n,i,e){if(n.canvas==null){if(e&&i){n.canvas=e(i);var t=n.instance.overlayClass+" "+(n.cssClass?n.cssClass:"");n.instance.addClass(n.canvas,t)}else n.canvas=Gl(eu,{},n.instance.overlayClass+" "+(n.cssClass?n.cssClass:""));n.instance.setAttribute(n.canvas,"jtk-overlay-id",n.id);for(var r in n.attributes)n.instance.setAttribute(n.canvas,r,n.attributes[r]);n.canvas.style.position=ei,n.instance._appendElement(n.canvas,n.instance.getContainer()),n.instance.getId(n.canvas);var s="translate(-50%, -50%)";n.canvas.style.webkitTransform=s,n.canvas.style.mozTransform=s,n.canvas.style.msTransform=s,n.canvas.style.oTransform=s,n.canvas.style.transform=s,n.isVisible()||(n.canvas.style.display=fr),n.canvas.jtk={overlay:n}}return n.canvas}},{key:"destroy",value:function(n){n.canvas&&n.canvas.parentNode&&n.canvas.parentNode.removeChild(n.canvas),delete n.canvas,delete n.cachedDimensions}},{key:"_getDimensions",value:function(n,i){return(n.cachedDimensions==null||i)&&(n.cachedDimensions={w:1,h:1}),n.cachedDimensions}}]),a}(),ci=function(){function a(){W(this,a),v(this,"_listeners",{}),v(this,"eventsSuspended",!1),v(this,"tick",!1),v(this,"eventsToDieOn",{ready:!0}),v(this,"queue",[])}return Q(a,[{key:"fire",value:function(n,i,e){var t=null;if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[n]){var r=this._listeners[n].length,s=0,l=!1;if(!this.shouldFireEvent||this.shouldFireEvent(n,i,e))for(;!l&&s<r&&t!==!1;){if(this.eventsToDieOn[n])this._listeners[n][s](i,e);else try{t=this._listeners[n][s](i,e)}catch(u){We("jsPlumb: fire failed for event "+n+" : "+(u.message||u))}s++,(this._listeners==null||this._listeners[n]==null)&&(l=!0)}}this.tick=!1,this._drain()}return t}},{key:"_drain",value:function(){var n=this.queue.pop();n&&this.fire.apply(this,n)}},{key:"unbind",value:function(n,i){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof n=="string")delete this._listeners[n];else if(n.__jsPlumb){var e;for(var t in n.__jsPlumb)e=n.__jsPlumb[t],os(this._listeners[e]||[],n)}}else arguments.length===2&&os(this._listeners[n]||[],i);return this}},{key:"getListener",value:function(n){return this._listeners[n]||[]}},{key:"isSuspendEvents",value:function(){return this.eventsSuspended}},{key:"setSuspendEvents",value:function(n){this.eventsSuspended=n}},{key:"bind",value:function(n,i,e){var t=this,r=function(u){kl(t._listeners,u,i,e),i.__jsPlumb=i.__jsPlumb||{},i.__jsPlumb[Ke()]=u};if(typeof n=="string")r(n);else if(n.length!=null)for(var s=0;s<n.length;s++)r(n[s]);return this}},{key:"silently",value:function(n){this.setSuspendEvents(!0);try{n()}catch(i){We("Cannot execute silent function "+i)}this.setSuspendEvents(!1)}}]),a}();(function(a){Ee(n,a);var o=be(n);function n(){return W(this,n),o.apply(this,arguments)}return Q(n,[{key:"shouldFireEvent",value:function(e,t,r){return!0}}]),n})(ci);function ia(a){var o=null;return Ve(a)?o={type:a,options:{}}:o=a,o.options.id=o.options.id||Ke(),o}var bo=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;W(this,n),r=o.call(this),r.instance=i,r.component=e,v(m(r),"id",void 0),v(m(r),"type",void 0),v(m(r),"cssClass",void 0),v(m(r),"visible",!0),v(m(r),"location",void 0),v(m(r),"events",void 0),v(m(r),"attributes",void 0),t=t||{},r.id=t.id||Ke(),r.cssClass=t.cssClass||"",r.setLocation(t.location),r.events=t.events||{},r.attributes=t.attributes||{};for(var s in r.events)r.bind(s,r.events[s]);return r}return Q(n,[{key:"setLocation",value:function(e){var t=this.location==null?.5:this.location;if(e!=null)try{var r=typeof e=="string"?parseFloat(e):e;isNaN(r)||(t=r)}catch{}this.location=t}},{key:"shouldFireEvent",value:function(e,t,r){return!0}},{key:"setVisible",value:function(e){this.visible=e,this.instance.setOverlayVisible(this,e)}},{key:"isVisible",value:function(){return this.visible}}]),n}(ci),Ls={},jn={get:function(o,n,i,e){var t=Ls[n];if(t)return new t(o,i,e);throw{message:"jsPlumb: unknown overlay type '"+n+"'"}},register:function(o,n){Ls[o]=n}},Bn=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;return W(this,n),r=o.call(this,i,e,t),r.instance=i,r.component=e,v(m(r),"label",void 0),v(m(r),"labelText",void 0),v(m(r),"type",n.type),v(m(r),"cachedDimensions",void 0),t=t||{label:""},r.setLabel(t.label),r}return Q(n,[{key:"getLabel",value:function(){return Nn(this.label)?this.label(this):this.labelText}},{key:"setLabel",value:function(e){this.label=e,this.labelText=null,this.instance.updateLabel(this)}},{key:"getDimensions",value:function(){return{w:1,h:1}}},{key:"updateFrom",value:function(e){e.label!=null&&this.setLabel(e.label),e.location!=null&&(this.setLocation(e.location),this.instance.updateLabel(this))}}]),n}(bo);v(Bn,"type","Label");function rn(a){return a.type===Bn.type}jn.register(Bn.type,Bn);function Ti(a){return a==null?null:a.split(" ").filter(function(o){return o!=null&&o.length>0})}function Ns(a,o,n){for(var i in o)a[i]=n}var sv="connector",lv="override",uv="cssClass",Rs="__default",cv="anchor",dv="anchors",Ur="__label",fv="jtk-default-label",mu="overlay",hv="labelLocation",Gs="add",Fs="remove";function Zn(a,o){if(a.getDefaultType){var n=a.getTypeDescriptor(),i={},e=a.getDefaultType(),t=K({},e);Ns(i,e,Rs),a._types.forEach(function(r){if(r!==Rs){var s=a.instance.getType(r,n);if(s!=null){var l=new Set([sv,cv,dv]);if(s.mergeStrategy===lv)for(var u in s)l.add(u);t=Zi(t,s,[uv],dd(l)),Ns(i,s,r)}}}),o&&(t=ld(t,o,"_")),a.applyType(t,i)}}function Fo(a,o){var n=a.instance.getType(o,a.getTypeDescriptor());n!=null&&n.cssClass&&a.removeClass(n.cssClass)}function js(a){if(a.paintStyle&&a.hoverPaintStyle){var o={};K(o,a.paintStyle),K(o,a.hoverPaintStyle),a.hoverPaintStyle=o}}function vv(a,o){var n={cssClass:o.cssClass,id:Ur,component:a},i=K(n,o);return new Bn(a.instance,a,i)}function pv(a,o){var n=null;if(Ve(o))n=jn.get(a.instance,o,a,{});else if(o.type!=null&&o.options!=null){var i=o,e=K({},i.options);n=jn.get(a.instance,i.type,a,e)}else n=o;return n.id=n.id||Ke(),a.cacheTypeItem(mu,n,n.id),a.overlays[n.id]=n,n}var Eu=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;if(W(this,n),t=o.call(this),t.instance=i,v(m(t),"defaultLabelLocation",.5),v(m(t),"overlays",{}),v(m(t),"overlayPositions",{}),v(m(t),"overlayPlacements",{}),v(m(t),"clone",void 0),v(m(t),"deleted",void 0),v(m(t),"segment",void 0),v(m(t),"x",void 0),v(m(t),"y",void 0),v(m(t),"w",void 0),v(m(t),"h",void 0),v(m(t),"id",void 0),v(m(t),"visible",!0),v(m(t),"typeId",void 0),v(m(t),"params",{}),v(m(t),"paintStyle",void 0),v(m(t),"hoverPaintStyle",void 0),v(m(t),"paintStyleInUse",void 0),v(m(t),"_hover",!1),v(m(t),"lastPaintedAt",void 0),v(m(t),"data",void 0),v(m(t),"_defaultType",void 0),v(m(t),"events",void 0),v(m(t),"parameters",void 0),v(m(t),"_types",void 0),v(m(t),"_typeCache",void 0),v(m(t),"cssClass",void 0),v(m(t),"hoverClass",void 0),v(m(t),"beforeDetach",void 0),v(m(t),"beforeDrop",void 0),e=e||{},t.cssClass=e.cssClass||"",t.hoverClass=e.hoverClass||i.defaults.hoverClass,t.beforeDetach=e.beforeDetach,t.beforeDrop=e.beforeDrop,t._types=new Set,t._typeCache={},t.parameters=zi(e.parameters||{}),t.id=e.id||t.getIdPrefix()+new Date().getTime(),t._defaultType={parameters:t.parameters,scope:e.scope||t.instance.defaultScope,overlays:{}},e.events)for(var r in e.events)t.bind(r,e.events[r]);t.clone=function(){var h=Object.create(t.constructor.prototype);return t.constructor.apply(h,[i,e]),h},t.overlays={},t.overlayPositions={};var s=e.overlays||[],l={},u=t.getDefaultOverlayKey();if(u){var c=t.instance.defaults[u];c&&s.push.apply(s,cr(c));for(var d=0;d<s.length;d++){var f=ia(s[d]);l[f.options.id]=f}}return t._defaultType.overlays=l,e.label&&(t.getDefaultType().overlays[Ur]={type:Bn.type,options:{label:e.label,location:e.labelLocation||t.defaultLabelLocation,id:Ur,cssClass:fv}}),t}return Q(n,[{key:"isDetachAllowed",value:function(e){var t=!0;if(this.beforeDetach)try{t=this.beforeDetach(e)}catch(r){We("jsPlumb: beforeDetach callback failed",r)}return t}},{key:"isDropAllowed",value:function(e,t,r,s,l){var u,c={sourceId:e,targetId:t,scope:r,connection:s,dropEndpoint:l};if(this.beforeDrop)try{u=this.beforeDrop(c)}catch(d){We("jsPlumb: beforeDrop callback failed",d)}else u=this.instance.checkCondition(Zl,c);return u}},{key:"getDefaultType",value:function(){return this._defaultType}},{key:"appendToDefaultType",value:function(e){for(var t in e)this._defaultType[t]=e[t]}},{key:"getId",value:function(){return this.id}},{key:"cacheTypeItem",value:function(e,t,r){this._typeCache[r]=this._typeCache[r]||{},this._typeCache[r][e]=t}},{key:"getCachedTypeItem",value:function(e,t){return this._typeCache[t]?this._typeCache[t][e]:null}},{key:"setType",value:function(e,t){this.clearTypes(),(Ti(e)||[]).forEach(this._types.add,this._types),Zn(this,t)}},{key:"getType",value:function(){return Array.from(this._types.keys())}},{key:"reapplyTypes",value:function(e){Zn(this,e)}},{key:"hasType",value:function(e){return this._types.has(e)}},{key:"addType",value:function(e,t){var r=Ti(e),s=!1;if(r!=null){for(var l=0,u=r.length;l<u;l++)this._types.has(r[l])||(this._types.add(r[l]),s=!0);s&&Zn(this,t)}}},{key:"removeType",value:function(e,t){var r=this,s=Ti(e),l=!1,u=function(h){return r._types.has(h)?(Fo(r,h),r._types.delete(h),!0):!1};if(s!=null){for(var c=0,d=s.length;c<d;c++)l=u(s[c])||l;l&&Zn(this,t)}}},{key:"clearTypes",value:function(e){var t=this;this._types.forEach(function(r){Fo(t,r)}),this._types.clear(),Zn(this,e)}},{key:"toggleType",value:function(e,t){var r=Ti(e);if(r!=null){for(var s=0,l=r.length;s<l;s++)this._types.has(r[s])?(Fo(this,r[s]),this._types.delete(r[s])):this._types.add(r[s]);Zn(this,t)}}},{key:"applyType",value:function(e,t){if(this.setPaintStyle(e.paintStyle),this.setHoverPaintStyle(e.hoverPaintStyle),this.mergeParameters(e.parameters),this.paintStyleInUse=this.getPaintStyle(),e.overlays){var r={},s;for(s in e.overlays){var l=this.overlays[e.overlays[s].options.id];if(l)l.updateFrom(e.overlays[s].options),r[e.overlays[s].options.id]=!0,this.instance.reattachOverlay(l,this);else{var u=this.getCachedTypeItem(mu,e.overlays[s].options.id);u!=null?(this.instance.reattachOverlay(u,this),u.setVisible(!0),u.updateFrom(e.overlays[s].options),this.overlays[u.id]=u):u=this.addOverlay(e.overlays[s]),r[u.id]=!0}}for(s in this.overlays)r[this.overlays[s].id]==null&&this.removeOverlay(this.overlays[s].id,!0)}}},{key:"setPaintStyle",value:function(e){this.paintStyle=e,this.paintStyleInUse=this.paintStyle,js(this)}},{key:"getPaintStyle",value:function(){return this.paintStyle}},{key:"setHoverPaintStyle",value:function(e){this.hoverPaintStyle=e,js(this)}},{key:"getHoverPaintStyle",value:function(){return this.hoverPaintStyle}},{key:"destroy",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions={},this.unbind(),this.clone=null}},{key:"isHover",value:function(){return this._hover}},{key:"mergeParameters",value:function(e){e!=null&&K(this.parameters,e)}},{key:"setVisible",value:function(e){this.visible=e,e?this.showOverlays():this.hideOverlays()}},{key:"isVisible",value:function(){return this.visible}},{key:"setAbsoluteOverlayPosition",value:function(e,t){this.overlayPositions[e.id]=t}},{key:"getAbsoluteOverlayPosition",value:function(e){return this.overlayPositions?this.overlayPositions[e.id]:null}},{key:"_clazzManip",value:function(e,t){for(var r in this.overlays)e===Gs?this.instance.addOverlayClass(this.overlays[r],t):e===Fs&&this.instance.removeOverlayClass(this.overlays[r],t)}},{key:"addClass",value:function(e,t){var r=(this.cssClass||"").split(" ");r.push(e),this.cssClass=r.join(" "),this._clazzManip(Gs,e)}},{key:"removeClass",value:function(e,t){var r=(this.cssClass||"").split(" ");this.cssClass=r.filter(function(s){return s!==e}).join(" "),this._clazzManip(Fs,e)}},{key:"getClass",value:function(){return this.cssClass}},{key:"shouldFireEvent",value:function(e,t,r){return!0}},{key:"getData",value:function(){return this.data}},{key:"setData",value:function(e){this.data=e||{}}},{key:"mergeData",value:function(e){this.data=K(this.data,e)}},{key:"addOverlay",value:function(e){var t=pv(this,e);if(this.getData&&t.type===Bn.type&&!Ve(e)){var r=this.getData(),s=e.options;if(r){var l=s.labelLocationAttribute||hv,u=r[l];u&&(t.location=u)}}return t}},{key:"getOverlay",value:function(e){return this.overlays[e]}},{key:"getOverlays",value:function(){return this.overlays}},{key:"hideOverlay",value:function(e){var t=this.getOverlay(e);t&&t.setVisible(!1)}},{key:"hideOverlays",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t=t||[];for(var s in this.overlays)(t.length===0||t.indexOf(s)!==-1)&&this.overlays[s].setVisible(!1)}},{key:"showOverlay",value:function(e){var t=this.getOverlay(e);t&&t.setVisible(!0)}},{key:"showOverlays",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t=t||[];for(var s in this.overlays)(t.length===0||t.indexOf(s)!==-1)&&this.overlays[s].setVisible(!0)}},{key:"removeAllOverlays",value:function(){for(var e in this.overlays)this.instance.destroyOverlay(this.overlays[e]);this.overlays={},this.overlayPositions=null,this.overlayPlacements={}}},{key:"removeOverlay",value:function(e,t){var r=this.overlays[e];r&&(r.setVisible(!1),t||this.instance.destroyOverlay(r),delete this.overlays[e],this.overlayPositions&&delete this.overlayPositions[e],this.overlayPlacements&&delete this.overlayPlacements[e])}},{key:"removeOverlays",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var s=0,l=t.length;s<l;s++)this.removeOverlay(arguments[s])}},{key:"getLabel",value:function(){var e=this.getLabelOverlay();return e!=null?e.getLabel():null}},{key:"getLabelOverlay",value:function(){return this.getOverlay(Ur)}},{key:"setLabel",value:function(e){var t=this.getLabelOverlay();if(t)if(Ve(e)||Nn(e))t.setLabel(e);else{var s=e;s.label&&t.setLabel(s.label),s.location&&(t.location=s.location)}else{var r=Ve(e)||Nn(e)?{label:e}:e;t=vv(this,r),this.overlays[Ur]=t}}}]),n}(ci),gv=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],or=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;W(this,n),t=o.call(this,i,e),t.instance=i,v(m(t),"connections",[]),v(m(t),"endpoint",void 0),v(m(t),"element",void 0),v(m(t),"elementId",void 0),v(m(t),"dragAllowedWhenFull",!0),v(m(t),"timestamp",void 0),v(m(t),"portId",void 0),v(m(t),"maxConnections",void 0),v(m(t),"proxiedBy",void 0),v(m(t),"connectorClass",void 0),v(m(t),"connectorHoverClass",void 0),v(m(t),"finalEndpoint",void 0),v(m(t),"enabled",!0),v(m(t),"isSource",void 0),v(m(t),"isTarget",void 0),v(m(t),"isTemporarySource",void 0),v(m(t),"connectionCost",1),v(m(t),"connectionsDirected",void 0),v(m(t),"connectionsDetachable",void 0),v(m(t),"reattachConnections",void 0),v(m(t),"currentAnchorClass",void 0),v(m(t),"referenceEndpoint",void 0),v(m(t),"edgeType",void 0),v(m(t),"connector",void 0),v(m(t),"connectorOverlays",void 0),v(m(t),"connectorStyle",void 0),v(m(t),"connectorHoverStyle",void 0),v(m(t),"deleteOnEmpty",void 0),v(m(t),"uuid",void 0),v(m(t),"scope",void 0),v(m(t),"_anchor",void 0),v(m(t),"defaultLabelLocation",[.5,.5]),t.appendToDefaultType({edgeType:e.edgeType,maxConnections:e.maxConnections==null?t.instance.defaults.maxConnections:e.maxConnections,paintStyle:e.paintStyle||t.instance.defaults.endpointStyle,hoverPaintStyle:e.hoverPaintStyle||t.instance.defaults.endpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector}),t.enabled=e.enabled!==!1,t.visible=!0,t.element=e.element,t.uuid=e.uuid,t.portId=e.portId,t.elementId=e.elementId,t.connectionCost=e.connectionCost==null?1:e.connectionCost,t.connectionsDirected=e.connectionsDirected,t.currentAnchorClass="",t.events={},t.connectorOverlays=e.connectorOverlays,t.connectorStyle=e.connectorStyle,t.connectorHoverStyle=e.connectorHoverStyle,t.connector=e.connector,t.edgeType=e.edgeType,t.connectorClass=e.connectorClass,t.connectorHoverClass=e.connectorHoverClass,t.deleteOnEmpty=e.deleteOnEmpty===!0,t.isSource=e.source||!1,t.isTemporarySource=e.isTemporarySource||!1,t.isTarget=e.target||!1,t.connections=e.connections||[],t.scope=e.scope||i.defaultScope,t.timestamp=null,t.reattachConnections=e.reattachConnections||i.defaults.reattachConnections,t.connectionsDetachable=i.defaults.connectionsDetachable,e.connectionsDetachable===!1&&(t.connectionsDetachable=!1),t.dragAllowedWhenFull=e.dragAllowedWhenFull!==!1,e.onMaxConnections&&t.bind(Wl,e.onMaxConnections);var r=e.endpoint||e.existingEndpoint||i.defaults.endpoint;if(t.setEndpoint(r),e.preparedAnchor!=null)t.setPreparedAnchor(e.preparedAnchor);else{var s=e.anchor?e.anchor:e.anchors?e.anchors:i.defaults.anchor||Vt.Top;t.setAnchor(s)}var l=[to,e.type||""].join(" ");return t.addType(l,e.data),t}return Q(n,[{key:"getIdPrefix",value:function(){return"_jsplumb_e"}},{key:"getTypeDescriptor",value:function(){return"endpoint"}},{key:"getXY",value:function(){return{x:this.endpoint.x,y:this.endpoint.y}}},{key:"getDefaultOverlayKey",value:function(){return"endpointOverlays"}},{key:"_updateAnchorClass",value:function(){var e=this._anchor&&this._anchor.cssClass;if(e!=null&&e.length>0){var t=this.instance.endpointAnchorClassPrefix+"-"+this.currentAnchorClass;this.currentAnchorClass=e;var r=this.instance.endpointAnchorClassPrefix+(this.currentAnchorClass?"-"+this.currentAnchorClass:"");t!==r&&(this.removeClass(t),this.addClass(r),this.instance.removeClass(this.element,t),this.instance.addClass(this.element,r))}}},{key:"setPreparedAnchor",value:function(e){return this.instance.router.setAnchor(this,e),this._updateAnchorClass(),this}},{key:"_anchorLocationChanged",value:function(e){this.fire(kd,{endpoint:this,anchor:e}),this._updateAnchorClass()}},{key:"setAnchor",value:function(e){var t=this.instance.router.prepareAnchor(e);return this.setPreparedAnchor(t),this}},{key:"addConnection",value:function(e){this.connections.push(e),this.instance._refreshEndpoint(this)}},{key:"detachFromConnection",value:function(e,t,r){t=t??this.connections.indexOf(e),t>=0&&(this.connections.splice(t,1),this.instance._refreshEndpoint(this)),!r&&this.deleteOnEmpty&&this.connections.length===0&&this.instance.deleteEndpoint(this)}},{key:"deleteEveryConnection",value:function(e){for(var t=this.connections.length,r=0;r<t;r++)this.instance.deleteConnection(this.connections[0],e)}},{key:"detachFrom",value:function(e){for(var t=[],r=0;r<this.connections.length;r++)(this.connections[r].endpoints[1]===e||this.connections[r].endpoints[0]===e)&&t.push(this.connections[r]);for(var s=0,l=t.length;s<l;s++)this.instance.deleteConnection(t[0]);return this}},{key:"setVisible",value:function(e,t,r){if(Ue(Le(n.prototype),"setVisible",this).call(this,e),this.endpoint.setVisible(e),e?this.showOverlays():this.hideOverlays(),!t){for(var s=0;s<this.connections.length;s++)if(this.connections[s].setVisible(e),!r){var l=this===this.connections[s].endpoints[0]?1:0;this.connections[s].endpoints[l].connections.length===1&&this.connections[s].endpoints[l].setVisible(e,!0,!0)}}}},{key:"applyType",value:function(e,t){Ue(Le(n.prototype),"applyType",this).call(this,e,t),this.setPaintStyle(e.endpointStyle||e.paintStyle),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle),this.connectorStyle=e.connectorStyle,this.connectorHoverStyle=e.connectorHoverStyle,this.connector=e.connector,this.connectorOverlays=e.connectorOverlays,this.edgeType=e.edgeType,e.maxConnections!=null&&(this.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),K(e,gv),this.instance.applyEndpointType(this,e)}},{key:"destroy",value:function(){Ue(Le(n.prototype),"destroy",this).call(this),this.deleted=!0,this.endpoint!=null&&this.instance.destroyEndpoint(this)}},{key:"isFull",value:function(){return this.maxConnections===0?!0:!(this.isFloating()||this.maxConnections<0||this.connections.length<this.maxConnections)}},{key:"isFloating",value:function(){return this.instance.router.isFloating(this)}},{key:"isConnectedTo",value:function(e){var t=!1;if(e){for(var r=0;r<this.connections.length;r++)if(this.connections[r].endpoints[1]===e||this.connections[r].endpoints[0]===e){t=!0;break}}return t}},{key:"setDragAllowedWhenFull",value:function(e){this.dragAllowedWhenFull=e}},{key:"getUuid",value:function(){return this.uuid}},{key:"connectorSelector",value:function(){return this.connections[0]}},{key:"prepareEndpoint",value:function(e,t){var r={cssClass:this.cssClass,endpoint:this},s;if(Nl(e,Er)){var l=e;s=vn.clone(l),s.classes=r.cssClass.split(" ")}else if(Ve(e))s=vn.get(this,e,r);else{var u=e;K(r,u.options||{}),s=vn.get(this,u.type,r)}return s.typeId=t,s}},{key:"setEndpoint",value:function(e){var t=this.prepareEndpoint(e);this.setPreparedEndpoint(t)}},{key:"setPreparedEndpoint",value:function(e){this.endpoint!=null&&this.instance.destroyEndpoint(this),this.endpoint=e}},{key:"addClass",value:function(e,t){Ue(Le(n.prototype),"addClass",this).call(this,e,t),this.endpoint!=null&&this.endpoint.addClass(e)}},{key:"removeClass",value:function(e,t){Ue(Le(n.prototype),"removeClass",this).call(this,e,t),this.endpoint!=null&&this.endpoint.removeClass(e)}}]),n}(Eu),Oi="anchors",jo="connector";function Bs(a,o,n,i,e,t,r){var s;if(o)a.endpoints[n]=o,o.addConnection(a);else{var l=r||a.endpointSpec||a.endpointsSpec[n]||a.instance.defaults.endpoints[n]||a.instance.defaults.endpoint,u=a.endpointStyles[n]||a.endpointStyle||a.instance.defaults.endpointStyles[n]||a.instance.defaults.endpointStyle;u.fill==null&&a.paintStyle!=null&&(u.fill=a.paintStyle.stroke),u.outlineStroke==null&&a.paintStyle!=null&&(u.outlineStroke=a.paintStyle.outlineStroke),u.outlineWidth==null&&a.paintStyle!=null&&(u.outlineWidth=a.paintStyle.outlineWidth);var c=a.endpointHoverStyles[n]||a.endpointHoverStyle||a.endpointHoverStyle||a.instance.defaults.endpointHoverStyles[n]||a.instance.defaults.endpointHoverStyle;a.hoverPaintStyle!=null&&(c==null&&(c={}),c.fill==null&&(c.fill=a.hoverPaintStyle.stroke));var d=a.uuids?a.uuids[n]:null;i=i??(a.instance.defaults.anchors!=null?a.instance.defaults.anchors[n]:a.instance.defaults.anchor),s=a.instance._internal_newEndpoint({paintStyle:u,hoverPaintStyle:c,endpoint:l,connections:[a],uuid:d,element:e,scope:a.scope,anchor:i,reattachConnections:a.reattach||a.instance.defaults.reattachConnections,connectionsDetachable:a.detachable||a.instance.defaults.connectionsDetachable}),a.instance._refreshEndpoint(s),o==null&&(s.deleteOnEmpty=!0),a.endpoints[n]=s}return s}var ri=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;W(this,n),t=o.call(this,i,e),t.instance=i,v(m(t),"connector",void 0),v(m(t),"defaultLabelLocation",.5),v(m(t),"scope",void 0),v(m(t),"typeId","_jsplumb_connection"),v(m(t),"previousConnection",void 0),v(m(t),"sourceId",void 0),v(m(t),"targetId",void 0),v(m(t),"source",void 0),v(m(t),"target",void 0),v(m(t),"detachable",!0),v(m(t),"reattach",!1),v(m(t),"uuids",void 0),v(m(t),"cost",1),v(m(t),"directed",void 0),v(m(t),"endpoints",[null,null]),v(m(t),"endpointStyles",void 0),v(m(t),"endpointSpec",void 0),v(m(t),"endpointsSpec",void 0),v(m(t),"endpointStyle",{}),v(m(t),"endpointHoverStyle",{}),v(m(t),"endpointHoverStyles",void 0),v(m(t),"suspendedEndpoint",void 0),v(m(t),"suspendedIndex",void 0),v(m(t),"suspendedElement",void 0),v(m(t),"suspendedElementId",void 0),v(m(t),"suspendedElementType",void 0),v(m(t),"_forceReattach",void 0),v(m(t),"_forceDetach",void 0),v(m(t),"proxies",[]),v(m(t),"pending",!1),t.id=e.id,t.previousConnection=e.previousConnection,t.source=e.source,t.target=e.target,e.sourceEndpoint?(t.source=e.sourceEndpoint.element,t.sourceId=e.sourceEndpoint.elementId):t.sourceId=i.getId(t.source),e.targetEndpoint?(t.target=e.targetEndpoint.element,t.targetId=e.targetEndpoint.elementId):t.targetId=i.getId(t.target),t.scope=e.scope;var r=e.anchors?e.anchors[0]:e.anchor,s=e.anchors?e.anchors[1]:e.anchor;i.manage(t.source),i.manage(t.target),t.visible=!0,t.params={cssClass:e.cssClass,hoverClass:e.hoverClass,"pointer-events":e["pointer-events"],overlays:e.overlays},t.lastPaintedAt=null,e.type&&(e.endpoints=e.endpoints||t.instance._deriveEndpointAndAnchorSpec(e.type).endpoints),t.endpointSpec=e.endpoint,t.endpointsSpec=e.endpoints||[null,null],t.endpointStyle=e.endpointStyle,t.endpointHoverStyle=e.endpointHoverStyle,t.endpointStyles=e.endpointStyles||[null,null],t.endpointHoverStyles=e.endpointHoverStyles||[null,null],t.paintStyle=e.paintStyle,t.hoverPaintStyle=e.hoverPaintStyle,t.uuids=e.uuids,t.makeEndpoint(!0,t.source,t.sourceId,r,e.sourceEndpoint),t.makeEndpoint(!1,t.target,t.targetId,s,e.targetEndpoint),t.scope||(t.scope=t.endpoints[0].scope),e.deleteEndpointsOnEmpty!=null&&(t.endpoints[0].deleteOnEmpty=e.deleteEndpointsOnEmpty,t.endpoints[1].deleteOnEmpty=e.deleteEndpointsOnEmpty);var l=t.instance.defaults.connectionsDetachable;e.detachable===!1&&(l=!1),t.endpoints[0].connectionsDetachable===!1&&(l=!1),t.endpoints[1].connectionsDetachable===!1&&(l=!1),t.endpointsSpec=e.endpoints||[null,null],t.endpointSpec=e.endpoint||null;var u=e.reattach||t.endpoints[0].reattachConnections||t.endpoints[1].reattachConnections||t.instance.defaults.reattachConnections,c=K({},t.endpoints[0].connectorStyle||t.endpoints[1].connectorStyle||e.paintStyle||t.instance.defaults.paintStyle);if(t.appendToDefaultType({detachable:l,reattach:u,paintStyle:c,hoverPaintStyle:K({},t.endpoints[0].connectorHoverStyle||t.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||t.instance.defaults.hoverPaintStyle)}),e.outlineWidth&&(c.outlineWidth=e.outlineWidth),e.outlineColor&&(c.outlineStroke=e.outlineColor),e.lineWidth&&(c.strokeWidth=e.lineWidth),e.color&&(c.stroke=e.color),!t.instance._suspendDrawing){var d=t.instance._suspendedAt||Ke();t.instance._paintEndpoint(t.endpoints[0],{timestamp:d}),t.instance._paintEndpoint(t.endpoints[1],{timestamp:d})}t.cost=e.cost||t.endpoints[0].connectionCost,t.directed=e.directed,e.directed==null&&(t.directed=t.endpoints[0].connectionsDirected);var f=K({},t.endpoints[1].parameters);K(f,t.endpoints[0].parameters),K(f,t.parameters),t.parameters=f,t.paintStyleInUse=t.getPaintStyle()||{},t._setConnector(t.endpoints[0].connector||t.endpoints[1].connector||e.connector||t.instance.defaults.connector,!0);var h=e.data==null||!dr(e.data)?{}:e.data;t.setData(h);var p=[to,t.endpoints[0].edgeType,t.endpoints[1].edgeType,e.type].join(" ");return/[^\s]/.test(p)&&t.addType(p,e.data),t}return Q(n,[{key:"getIdPrefix",value:function(){return"_jsPlumb_c"}},{key:"getDefaultOverlayKey",value:function(){return Zd}},{key:"getXY",value:function(){return{x:this.connector.x,y:this.connector.y}}},{key:"makeEndpoint",value:function(e,t,r,s,l){return r=r||this.instance.getId(t),Bs(this,l,e?0:1,s,t)}},{key:"getTypeDescriptor",value:function(){return n.type}},{key:"isDetachable",value:function(e){return this.detachable===!1?!1:e!=null?e.connectionsDetachable===!0:this.detachable===!0}},{key:"setDetachable",value:function(e){this.detachable=e===!0}},{key:"isReattach",value:function(){return this.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0}},{key:"setReattach",value:function(e){this.reattach=e===!0}},{key:"applyType",value:function(e,t){var r=null;e.connector!=null&&(r=this.getCachedTypeItem(jo,t.connector),r==null&&(r=this.prepareConnector(e.connector,t.connector),this.cacheTypeItem(jo,r,t.connector)),this.setPreparedConnector(r)),Ue(Le(n.prototype),"applyType",this).call(this,e,t),e.detachable!=null&&this.setDetachable(e.detachable),e.reattach!=null&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope);var s=null;e.anchor?(s=this.getCachedTypeItem(Oi,t.anchor),s==null&&(s=[Br(e.anchor),Br(e.anchor)],this.cacheTypeItem(Oi,s,t.anchor))):e.anchors&&(s=this.getCachedTypeItem(Oi,t.anchors),s==null&&(s=[Br(e.anchors[0]),Br(e.anchors[1])],this.cacheTypeItem(Oi,s,t.anchors))),s!=null&&(this.instance.router.setConnectionAnchors(this,s),this.instance.router.isDynamicAnchor(this.endpoints[1])&&this.instance.repaint(this.endpoints[1].element)),this.instance.applyConnectorType(this.connector,e)}},{key:"addClass",value:function(e,t){Ue(Le(n.prototype),"addClass",this).call(this,e),t&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.instance.addConnectorClass(this.connector,e)}},{key:"removeClass",value:function(e,t){Ue(Le(n.prototype),"removeClass",this).call(this,e),t&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.instance.removeConnectorClass(this.connector,e)}},{key:"setVisible",value:function(e){Ue(Le(n.prototype),"setVisible",this).call(this,e),this.connector&&this.instance.setConnectorVisible(this.connector,e),this.instance._paintConnection(this)}},{key:"destroy",value:function(){Ue(Le(n.prototype),"destroy",this).call(this),this.endpoints=null,this.endpointStyles=null,this.source=null,this.target=null,this.instance.destroyConnector(this),this.connector=null,this.deleted=!0}},{key:"getUuids",value:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]}},{key:"prepareConnector",value:function(e,t){var r={cssClass:this.params.cssClass,hoverClass:this.params.hoverClass,"pointer-events":this.params["pointer-events"]},s;if(Ve(e))s=this.instance._makeConnector(this,e,r);else{var l=e;s=this.instance._makeConnector(this,l.type,Zi(l.options||{},r))}return t!=null&&(s.typeId=t),s}},{key:"setPreparedConnector",value:function(e,t,r,s){if(this.connector!==e){var l,u="";if(this.connector!=null&&(l=this.connector,u=this.instance.getConnectorClass(this.connector),this.instance.destroyConnector(this)),this.connector=e,s&&this.cacheTypeItem(jo,e,s),this.addClass(u),l!=null){var c=this.getOverlays();for(var d in c)this.instance.reattachOverlay(c[d],this)}t||this.instance._paintConnection(this)}}},{key:"_setConnector",value:function(e,t,r,s){var l=this.prepareConnector(e,s);this.setPreparedConnector(l,t,r,s)}},{key:"replaceEndpoint",value:function(e,t){var r=this.endpoints[e],s=r.elementId,l=this.instance.getEndpoints(r.element),u=l.indexOf(r),c=Bs(this,null,e,null,r.element,s,t);this.endpoints[e]=c,l.splice(u,1,c),r.detachFromConnection(this),this.instance.deleteEndpoint(r),this.instance.fire(Nd,{previous:r,current:c})}}]),n}(Eu);v(ri,"type","connection");function Vr(a){if(a.path==null){var o=K({"jtk-overlay-id":a.id},a.attributes);a.path=Qt(qo,o);var n=a.instance.overlayClass+" "+(a.cssClass?a.cssClass:"");a.instance.addClass(a.path,n),a.path.jtk={overlay:a}}var i=a.path.parentNode;if(i==null){if(a.component instanceof ri){var e=a.component.connector;i=e!=null?e.canvas:null}else if(a.component instanceof or){var t=a.component.endpoint;i=t!=null?t.canvas:t}i!=null&&Fi(i,a.path,1)}return a.path}function yv(a,o,n,i){Vr(a);var e=[0,0];i.xmin<0&&(e[0]=-i.xmin),i.ymin<0&&(e[1]=-i.ymin);var t={d:o,stroke:n.stroke?n.stroke:null,fill:n.fill?n.fill:null,transform:"translate("+e[0]+","+e[1]+")","pointer-events":"visibleStroke"};Jt(a.path,t)}function mv(a,o){var n=a;n.path!=null&&n.path.parentNode!=null&&n.path.parentNode.removeChild(n.path),n.bgPath!=null&&n.bgPath.parentNode!=null&&n.bgPath.parentNode.removeChild(n.bgPath),delete n.path,delete n.bgPath}(function(a){Ee(n,a);var o=be(n);function n(){var i;W(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=o.call.apply(o,[this].concat(t)),v(m(i),"path",void 0),i}return n})(bo);var bu=function(){function a(){W(this,a)}return Q(a,null,[{key:"paint",value:function(n,i,e,t){if(e!=null){var r=[n.x,n.y],s=[n.w,n.h];if(t!=null&&(t.xmin<0&&(r[0]+=t.xmin),t.ymin<0&&(r[1]+=t.ymin),s[0]=t.xmax+(t.xmin<0?-t.xmin:0),s[1]=t.ymax+(t.ymin<0?-t.ymin:0)),isFinite(s[0])&&isFinite(s[1])){var l={width:""+(s[0]||0),height:""+(s[1]||0)};i.containerType===Gn.HTML?Jt(n.canvas,K(l,{style:ql([r[0],r[1]])})):Jt(n.canvas,K(l,{x:r[0],y:r[1]}))}}}}]),a}();function Ev(a,o,n,i){bv(a,o),bu.paint(o,a,n,i);var e="",t=[0,0];if(i.xmin<0&&(t[0]=-i.xmin),i.ymin<0&&(t[1]=-i.ymin),o.segments.length>0){e=a.getPathData(o);var r={d:e,transform:"translate("+t[0]+","+t[1]+")","pointer-events":"visibleStroke"},s=null;if(n.outlineStroke){var l=n.outlineWidth||1,u=n.strokeWidth+2*l;s=K({},n),s.stroke=n.outlineStroke,s.strokeWidth=u,o.bgPath==null?(o.bgPath=Qt(qo,r),a.addClass(o.bgPath,a.connectorOutlineClass),Fi(o.canvas,o.bgPath,0)):Jt(o.bgPath,r),ea(o.canvas,o.bgPath,s)}var c=o;c.path==null?(c.path=Qt(qo,r),Fi(c.canvas,c.path,n.outlineStroke?1:0)):(c.path.parentNode!==c.canvas&&Fi(c.canvas,c.path,n.outlineStroke?1:0),Jt(o.path,r)),ea(o.canvas,o.path,n)}}function bv(a,o){if(o.canvas!=null)return o.canvas;var n=Qt(Ql,{style:"",width:"0",height:"0","pointer-events":fr,position:ei});return o.canvas=n,a._appendElement(o.canvas,a.getContainer()),o.cssClass!=null&&a.addClass(n,o.cssClass),a.addClass(n,a.connectorClass),n.jtk=n.jtk||{},n.jtk.connector=o,n}var xv=function(){function a(){W(this,a)}return Q(a,null,[{key:"getEndpointElement",value:function(n){if(n.canvas!=null)return n.canvas;var i=Qt(Ql,{style:"",width:"0",height:"0","pointer-events":"all",position:ei});n.canvas=i;var e=n.classes.join(" ");n.instance.addClass(i,e);for(var t=n.endpoint.scope.split(/\s/),r=0;r<t.length;r++)n.instance.setAttribute(i,Ul+t[r],nu);return n.instance._appendElementToContainer(i),n.cssClass!=null&&n.instance.addClass(i,n.cssClass),n.instance.addClass(i,n.instance.endpointClass),i.jtk=i.jtk||{},i.jtk.endpoint=n.endpoint,i.style.display=n.endpoint.visible!==!1?Qo:fr,i}},{key:"paint",value:function(n,i,e){if(n.endpoint.deleted!==!0){this.getEndpointElement(n),bu.paint(n,n.instance,e);var t=K({},e);t.outlineStroke&&(t.stroke=t.outlineStroke),n.node==null?(n.node=i.makeNode(n,t),n.canvas.appendChild(n.node)):i.updateNode!=null&&i.updateNode(n,n.node),ea(n.canvas,n.node,t)}}}]),a}(),xo=function(){function a(o,n){W(this,a),this.connection=o,v(this,"type",void 0),v(this,"edited",!1),v(this,"stub",void 0),v(this,"sourceStub",void 0),v(this,"targetStub",void 0),v(this,"maxStub",void 0),v(this,"typeId",void 0),v(this,"gap",void 0),v(this,"sourceGap",void 0),v(this,"targetGap",void 0),v(this,"segments",[]),v(this,"totalLength",0),v(this,"segmentProportions",[]),v(this,"segmentProportionalLengths",[]),v(this,"paintInfo",null),v(this,"strokeWidth",void 0),v(this,"x",void 0),v(this,"y",void 0),v(this,"w",void 0),v(this,"h",void 0),v(this,"segment",void 0),v(this,"bounds",eo()),v(this,"cssClass",void 0),v(this,"hoverClass",void 0),v(this,"geometry",void 0),this.stub=n.stub||this.getDefaultStubs(),this.sourceStub=Array.isArray(this.stub)?this.stub[0]:this.stub,this.targetStub=Array.isArray(this.stub)?this.stub[1]:this.stub,this.gap=n.gap||0,this.sourceGap=Array.isArray(this.gap)?this.gap[0]:this.gap,this.targetGap=Array.isArray(this.gap)?this.gap[1]:this.gap,this.maxStub=Math.max(this.sourceStub,this.targetStub),this.cssClass=n.cssClass||"",this.hoverClass=n.hoverClass||""}return Q(a,[{key:"getTypeDescriptor",value:function(){return"connector"}},{key:"getIdPrefix",value:function(){return"_jsplumb_connector"}},{key:"setGeometry",value:function(n,i){this.geometry=n,this.edited=n!=null&&!i}},{key:"exportGeometry",value:function(){return this.geometry}},{key:"importGeometry",value:function(n){return this.geometry=n,!0}},{key:"resetGeometry",value:function(){this.geometry=null,this.edited=!1}},{key:"transformAnchorPlacement",value:function(n,i,e){return{x:n.x,y:n.y,ox:n.ox,oy:n.oy,curX:n.curX+i,curY:n.curY+e}}},{key:"resetBounds",value:function(){this.bounds=eo()}},{key:"findSegmentForPoint",value:function(n,i){for(var e={d:1/0,s:null,x:null,y:null,l:null,x1:null,y1:null,x2:null,y2:null,index:null,connectorLocation:null},t=0;t<this.segments.length;t++){var r=this.segments[t].findClosestPointOnPath(n,i);r.d<e.d&&(e.d=r.d,e.l=r.l,e.x=r.x,e.y=r.y,e.s=this.segments[t],e.x1=r.x1,e.x2=r.x2,e.y1=r.y1,e.y2=r.y2,e.index=t,e.connectorLocation=this.segmentProportions[t][0]+r.l*(this.segmentProportions[t][1]-this.segmentProportions[t][0]))}return e}},{key:"lineIntersection",value:function(n,i,e,t){for(var r=[],s=0;s<this.segments.length;s++)r.push.apply(r,this.segments[s].lineIntersection(n,i,e,t));return r}},{key:"boxIntersection",value:function(n,i,e,t){for(var r=[],s=0;s<this.segments.length;s++)r.push.apply(r,this.segments[s].boxIntersection(n,i,e,t));return r}},{key:"boundingBoxIntersection",value:function(n){for(var i=[],e=0;e<this.segments.length;e++)i.push.apply(i,this.segments[e].boundingBoxIntersection(n));return i}},{key:"_updateSegmentProportions",value:function(){for(var n=0,i=0;i<this.segments.length;i++){var e=this.segments[i].getLength();this.segmentProportionalLengths[i]=e/this.totalLength,this.segmentProportions[i]=[n,n+=e/this.totalLength]}}},{key:"_findSegmentForLocation",value:function(n,i){var e,t,r;if(i&&(n=n>0?n/this.totalLength:(this.totalLength+n)/this.totalLength),n===1)e=this.segments.length-1,r=1;else if(n===0)r=0,e=0;else if(n>=.5){for(e=0,r=0,t=this.segmentProportions.length-1;t>-1;t--)if(this.segmentProportions[t][1]>=n&&this.segmentProportions[t][0]<=n){e=t,r=(n-this.segmentProportions[t][0])/this.segmentProportionalLengths[t];break}}else for(e=this.segmentProportions.length-1,r=1,t=0;t<this.segmentProportions.length;t++)if(this.segmentProportions[t][1]>=n){e=t,r=(n-this.segmentProportions[t][0])/this.segmentProportionalLengths[t];break}return{segment:this.segments[e],proportion:r,index:e}}},{key:"_addSegment",value:function(n,i){if(!(i.x1===i.x2&&i.y1===i.y2)){var e=new n(i);this.segments.push(e),this.totalLength+=e.getLength(),this.updateBounds(e)}}},{key:"_clearSegments",value:function(){this.totalLength=0,this.segments.length=0,this.segmentProportions.length=0,this.segmentProportionalLengths.length=0}},{key:"getLength",value:function(){return this.totalLength}},{key:"_prepareCompute",value:function(n){this.strokeWidth=n.strokeWidth;var i=n.sourcePos.curX,e=n.targetPos.curX,t=n.sourcePos.curY,r=n.targetPos.curY,s=Ma({x:i,y:t},{x:e,y:r}),l=e<i,u=r<t,c=[n.sourcePos.ox,n.sourcePos.oy],d=[n.targetPos.ox,n.targetPos.oy],f=l?e:i,h=u?r:t,p=Math.abs(e-i),y=Math.abs(r-t),g=c[0]===0&&c[1]===0,E=d[0]===0&&d[1]===0;if(g||E){var b=p>y?0:1,x=[1,0][b],C=b===0?i:t,S=b===0?e:r;g&&(c[b]=C>S?-1:1,c[x]=0),E&&(d[b]=C>S?1:-1,d[x]=0)}var T=l?p+this.sourceGap*c[0]:this.sourceGap*c[0],_=u?y+this.sourceGap*c[1]:this.sourceGap*c[1],P=l?this.targetGap*d[0]:p+this.targetGap*d[0],O=u?this.targetGap*d[1]:y+this.targetGap*d[1],I=c[0]*d[0]+c[1]*d[1],L={sx:T,sy:_,tx:P,ty:O,xSpan:Math.abs(P-T),ySpan:Math.abs(O-_),mx:(T+P)/2,my:(_+O)/2,so:c,to:d,x:f,y:h,w:p,h:y,segment:s,startStubX:T+c[0]*this.sourceStub,startStubY:_+c[1]*this.sourceStub,endStubX:P+d[0]*this.targetStub,endStubY:O+d[1]*this.targetStub,isXGreaterThanStubTimes2:Math.abs(T-P)>this.sourceStub+this.targetStub,isYGreaterThanStubTimes2:Math.abs(_-O)>this.sourceStub+this.targetStub,opposite:I===-1,perpendicular:I===0,orthogonal:I===1,sourceAxis:c[0]===0?"y":"x",points:[f,h,p,y,T,_,P,O],stubs:[this.sourceStub,this.targetStub]};return L.anchorOrientation=L.opposite?"opposite":L.orthogonal?"orthogonal":"perpendicular",L}},{key:"updateBounds",value:function(n){var i=n.extents;this.bounds.xmin=Math.min(this.bounds.xmin,i.xmin),this.bounds.xmax=Math.max(this.bounds.xmax,i.xmax),this.bounds.ymin=Math.min(this.bounds.ymin,i.ymin),this.bounds.ymax=Math.max(this.bounds.ymax,i.ymax)}},{key:"dumpSegmentsToConsole",value:function(){We("SEGMENTS:");for(var n=0;n<this.segments.length;n++)We(this.segments[n].type,""+this.segments[n].getLength(),""+this.segmentProportions[n])}},{key:"pointOnPath",value:function(n,i){var e=this._findSegmentForLocation(n,i);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||{x:0,y:0}}},{key:"gradientAtPoint",value:function(n,i){var e=this._findSegmentForLocation(n,i);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0}},{key:"pointAlongPathFrom",value:function(n,i,e){var t=this._findSegmentForLocation(n,e);return t.segment&&t.segment.pointAlongPathFrom(t.proportion,i,!1)||{x:0,y:0}}},{key:"compute",value:function(n){this.paintInfo=this._prepareCompute(n),this._clearSegments(),this._compute(this.paintInfo,n),this.x=this.paintInfo.points[0],this.y=this.paintInfo.points[1],this.w=this.paintInfo.points[2],this.h=this.paintInfo.points[3],this.segment=this.paintInfo.segment,this._updateSegmentProportions()}},{key:"setAnchorOrientation",value:function(n,i){}}]),a}(),Cv=20,Sv=20,gr=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;return W(this,n),r=o.call(this,i,e,t),r.instance=i,r.component=e,v(m(r),"width",void 0),v(m(r),"length",void 0),v(m(r),"foldback",void 0),v(m(r),"direction",void 0),v(m(r),"location",.5),v(m(r),"paintStyle",void 0),v(m(r),"type",n.type),v(m(r),"cachedDimensions",void 0),t=t||{},r.width=t.width||Cv,r.length=t.length||Sv,r.direction=(t.direction||1)<0?-1:1,r.foldback=t.foldback||.623,r.paintStyle=t.paintStyle||{strokeWidth:1},r.location=t.location==null?r.location:Array.isArray(t.location)?t.location[0]:t.location,r}return Q(n,[{key:"draw",value:function(e,t,r){if(e instanceof xo){var s=e,l,u,c,d,f;if(this.location>1||this.location<0){var h=this.location<0?1:0;l=s.pointAlongPathFrom(h,this.location,!1),u=s.pointAlongPathFrom(h,this.location-this.direction*this.length/2,!1),c=In(l,u,this.length)}else if(this.location===1){if(l=s.pointOnPath(this.location),u=s.pointAlongPathFrom(this.location,-this.length),c=In(l,u,this.length),this.direction===-1){var p=c;c=l,l=p}}else if(this.location===0){if(c=s.pointOnPath(this.location),u=s.pointAlongPathFrom(this.location,this.length),l=In(c,u,this.length),this.direction===-1){var y=c;c=l,l=y}}else l=s.pointAlongPathFrom(this.location,this.direction*this.length/2),u=s.pointOnPath(this.location),c=In(l,u,this.length);d=rh(l,c,this.width),f=In(l,c,this.foldback*this.length);var g={hxy:l,tail:d,cxy:f},E=this.paintStyle.stroke||t.stroke,b=this.paintStyle.fill||t.stroke,x=this.paintStyle.strokeWidth||t.strokeWidth;return{component:e,d:g,"stroke-width":x,stroke:E,fill:b,xmin:Math.min(l.x,d[0].x,d[1].x),xmax:Math.max(l.x,d[0].x,d[1].x),ymin:Math.min(l.y,d[0].y,d[1].y),ymax:Math.max(l.y,d[0].y,d[1].y)}}}},{key:"updateFrom",value:function(e){}}]),n}(bo);v(gr,"type","Arrow");function oa(a){return a.type===gr.type}jn.register(gr.type,gr);var ao=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;return W(this,n),r=o.call(this,i,e,t),r.instance=i,v(m(r),"type",n.type),r.length=r.length/2,r.foldback=2,r}return n}(gr);v(ao,"type","Diamond");function aa(a){return a.type===ao.type}jn.register(ao.type,ao);var ja=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;return W(this,n),r=o.call(this,i,e,t),r.instance=i,v(m(r),"type",n.type),r.foldback=1,r}return n}(gr);v(ja,"type","PlainArrow");function sa(a){return a.type===ja.type}jn.register("PlainArrow",ja);var so=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;return W(this,n),r=o.call(this,i,e,t),r.instance=i,r.component=e,v(m(r),"create",void 0),v(m(r),"type",n.type),r.create=t.create,r}return Q(n,[{key:"updateFrom",value:function(e){}}]),n}(bo);v(so,"type","Custom");function on(a){return a.type===so.type}jn.register(so.type,so);var Pv="allowNestedGroups",Jn="paintStyle",Tv="scope",Un=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),v(m(t),"radius",void 0),v(m(t),"defaultOffset",void 0),v(m(t),"defaultInnerRadius",void 0),v(m(t),"type",n.type),e=e||{},t.radius=e.radius||5,t.defaultOffset=.5*t.radius,t.defaultInnerRadius=t.radius/3,t}return n}(Er);v(Un,"type","Dot");var Ov={type:Un.type,cls:Un,compute:function(o,n,i,e){var t=n.curX-o.radius,r=n.curY-o.radius,s=o.radius*2,l=o.radius*2;if(e&&e.stroke){var u=e.strokeWidth||1;t-=u,r-=u,s+=u*2,l+=u*2}return o.x=t,o.y=r,o.w=s,o.h=l,[t,r,s,l,o.radius]},getParams:function(o){return{radius:o.radius}}},Bo=function a(o,n){W(this,a),this.instance=o,this.el=n,v(this,"group",void 0)},_v=function(a){Ee(n,a);var o=be(n);function n(i,e,t){var r;W(this,n),r=o.call(this,i,e),r.instance=i,v(m(r),"children",[]),v(m(r),"collapsed",!1),v(m(r),"droppable",void 0),v(m(r),"enabled",void 0),v(m(r),"orphan",void 0),v(m(r),"constrain",void 0),v(m(r),"proxied",void 0),v(m(r),"ghost",void 0),v(m(r),"revert",void 0),v(m(r),"prune",void 0),v(m(r),"dropOverride",void 0),v(m(r),"anchor",void 0),v(m(r),"endpoint",void 0),v(m(r),"connections",{source:[],target:[],internal:[]}),v(m(r),"manager",void 0),v(m(r),"id",void 0),v(m(r),"elId",void 0);var s=r.el;return s._isJsPlumbGroup=!0,s._jsPlumbGroup=m(r),r.elId=i.getId(e),r.orphan=t.orphan===!0,r.revert=r.orphan===!0?!1:t.revert!==!1,r.droppable=t.droppable!==!1,r.ghost=t.ghost===!0,r.enabled=t.enabled!==!1,r.prune=r.orphan!==!0&&t.prune===!0,r.constrain=r.ghost||t.constrain===!0,r.proxied=t.proxied!==!1,r.id=t.id||Ke(),r.dropOverride=t.dropOverride===!0,r.anchor=t.anchor,r.endpoint=t.endpoint,r.anchor=t.anchor,i.setAttribute(e,Bl,""),r}return Q(n,[{key:"contentArea",get:function(){return this.instance.getGroupContentArea(this)}},{key:"overrideDrop",value:function(e,t){return this.dropOverride&&(this.revert||this.prune||this.orphan)}},{key:"getAnchor",value:function(e,t){return this.anchor||"Continuous"}},{key:"getEndpoint",value:function(e,t){return this.endpoint||{type:Un.type,options:{radius:10}}}},{key:"add",value:function(e,t){var r=this.instance.getGroupContentArea(this),s=e;if(s._jsPlumbParentGroup!=null){if(s._jsPlumbParentGroup===this)return;s._jsPlumbParentGroup.remove(e,!0,t,!1)}s._jsPlumbParentGroup=this,this.children.push(new Bo(this.instance,e)),this.instance._appendElement(s,r),this.manager._updateConnectionsForGroup(this)}},{key:"resolveNode",value:function(e){return e==null?null:Ea(this.children,function(t){return t.el===e})}},{key:"remove",value:function(e,t,r,s,l){var u=this.resolveNode(e);u!=null&&this._doRemove(u,t,r,s,l)}},{key:"_doRemove",value:function(e,t,r,s,l){var u=e.el;if(delete u._jsPlumbParentGroup,Ze(this.children,function(d){return d===e}),t)try{this.instance.getGroupContentArea(this).removeChild(u)}catch(d){We("Could not remove element from Group "+d)}if(!r){var c={group:this,el:u};l&&(c.targetGroup=l),this.instance.fire(Bd,c)}s||this.manager._updateConnectionsForGroup(this)}},{key:"removeAll",value:function(e,t){for(var r=0,s=this.children.length;r<s;r++){var l=this.children[0];this._doRemove(l,e,t,!0),this.instance.unmanage(l.el,!0)}this.children.length=0,this.manager._updateConnectionsForGroup(this)}},{key:"orphanAll",value:function(){for(var e={},t=0;t<this.children.length;t++){var r=this.manager.orphan(this.children[t].el,!1);e[r.id]=r.pos}return this.children.length=0,e}},{key:"addGroup",value:function(e){if(this.instance.allowNestedGroups&&e!==this){if(this.instance.groupManager.isAncestor(this,e))return!1;e.group!=null&&e.group.removeGroup(e);var t=this.instance.getId(e.el),r=this.instance.getManagedElements()[t];r.group=this.elId;var s=this.instance.getOffsetRelativeToRoot(e.el),l=this.collapsed?this.instance.getOffsetRelativeToRoot(this.el):this.instance.getOffsetRelativeToRoot(this.instance.getGroupContentArea(this));e.el._jsPlumbParentGroup=this,this.children.push(e),this.instance._appendElementToGroup(this,e.el),e.group=this;var u={x:s.x-l.x,y:s.y-l.y};return this.instance.setPosition(e.el,u),this.instance.fire(Vd,{parent:this,child:e}),!0}else return!1}},{key:"removeGroup",value:function(e){if(e.group===this){var t=e.el,r=this.instance.getGroupContentArea(this);r===t.parentNode&&r.removeChild(e.el);var s=this.instance.getId(e.el),l=this.instance.getManagedElements()[s];l&&delete l.group,this.children=this.children.filter(function(u){return u.id!==e.id}),delete e.group,delete t._jsPlumbParentGroup,this.instance.fire(Hd,{parent:this,child:e})}}},{key:"getGroups",value:function(){return this.children.filter(function(e){return e.constructor===n})}},{key:"getNodes",value:function(){return this.children.filter(function(e){return e.constructor===Bo})}},{key:"collapseParent",get:function(){var e=null;if(this.group==null)return null;for(var t=this.group;t!=null;)t.collapsed&&(e=t),t=t.group;return e}}]),n}(Bo),Av=function(){function a(o){var n=this;W(this,a),this.instance=o,v(this,"groupMap",{}),v(this,"_connectionSourceMap",{}),v(this,"_connectionTargetMap",{}),o.bind(Hl,function(i){var e=n.getGroupFor(i.source),t=n.getGroupFor(i.target);e!=null&&t!=null&&e===t?(n._connectionSourceMap[i.connection.id]=e,n._connectionTargetMap[i.connection.id]=e,Or(e.connections.internal,i.connection)):(e!=null&&(i.target._jsPlumbGroup===e?Or(e.connections.internal,i.connection):Or(e.connections.source,i.connection),n._connectionSourceMap[i.connection.id]=e),t!=null&&(i.source._jsPlumbGroup===t?Or(t.connections.internal,i.connection):Or(t.connections.target,i.connection),n._connectionTargetMap[i.connection.id]=t))}),o.bind(Oa,function(i){n._cleanupDetachedConnection(i.connection)}),o.bind(Ta,function(i){var e=i.originalEndpoint.element,t=n.getGroupFor(e),r=i.connection.endpoints[i.index],s=r.element,l=n.getGroupFor(s),u=i.index===0?n._connectionSourceMap:n._connectionTargetMap,c=i.index===0?n._connectionTargetMap:n._connectionSourceMap;l!=null?(u[i.connection.id]=l,i.connection.source===i.connection.target&&(c[i.connection.id]=l)):(delete u[i.connection.id],i.connection.source===i.connection.target&&delete c[i.connection.id]),t!=null&&n._updateConnectionsForGroup(t),l!=null&&n._updateConnectionsForGroup(l)})}return Q(a,[{key:"_cleanupDetachedConnection",value:function(n){n.proxies.length=0;var i=this._connectionSourceMap[n.id],e;i!=null&&(e=function(r){return r.id===n.id},Ze(i.connections.source,e),Ze(i.connections.target,e),Ze(i.connections.internal,e),delete this._connectionSourceMap[n.id]),i=this._connectionTargetMap[n.id],i!=null&&(e=function(r){return r.id===n.id},Ze(i.connections.source,e),Ze(i.connections.target,e),Ze(i.connections.internal,e),delete this._connectionTargetMap[n.id])}},{key:"addGroup",value:function(n){var i=n.el;if(this.groupMap[n.id]!=null)throw new Error("cannot create Group ["+n.id+"]; a Group with that ID exists");if(i._isJsPlumbGroup!=null)throw new Error("cannot create Group ["+n.id+"]; the given element is already a Group");var e=new _v(this.instance,n.el,n);return this.groupMap[e.id]=e,n.collapsed&&this.collapseGroup(e),this.instance.manage(e.el),this.instance.addClass(e.el,Dr),e.manager=this,this._updateConnectionsForGroup(e),this.instance.fire(Rd,{group:e}),e}},{key:"getGroup",value:function(n){var i=n;if(Ve(n)&&(i=this.groupMap[n],i==null))throw new Error("No such group ["+n+"]");return i}},{key:"getGroupFor",value:function(n){for(var i=n,e=this.instance.getContainer(),t=!1,r=null;!t;)i==null||i===e?t=!0:i._jsPlumbParentGroup?(r=i._jsPlumbParentGroup,t=!0):i=i.parentNode;return r}},{key:"getGroups",value:function(){var n=[];for(var i in this.groupMap)n.push(this.groupMap[i]);return n}},{key:"removeGroup",value:function(n,i,e,t){var r=this,s=this.getGroup(n);this.expandGroup(s,!0);var l={};return z(s.children,function(u){var c=r.instance.getManagedElements()[r.instance.getId(u.el)];c&&delete c.group}),i?(z(s.getGroups(),function(u){return r.removeGroup(u,i,e)}),s.removeAll(e,t)):(s.group&&z(s.children,function(u){return s.group.add(u.el)}),l=s.orphanAll()),s.group&&s.group.removeGroup(s),this.instance.unmanage(s.el,!0),delete this.groupMap[s.id],this.instance.fire(Ud,{group:s}),l}},{key:"removeAllGroups",value:function(n,i,e){for(var t in this.groupMap)this.removeGroup(this.groupMap[t],n,i,e)}},{key:"forEach",value:function(n){for(var i in this.groupMap)n(this.groupMap[i])}},{key:"orphan",value:function(n,i){var e=n;if(e._jsPlumbParentGroup){var t=e._jsPlumbParentGroup,r=this.instance.getId(e),s=this.instance.getOffset(n);return i!==!0&&t.group?this.instance._appendElementToGroup(t.group,n):this.instance._appendElementToContainer(n),this.instance.setPosition(n,s),delete e._jsPlumbParentGroup,{id:r,pos:s}}}},{key:"_updateConnectionsForGroup",value:function(n){var i=this;n.connections.source.length=0,n.connections.target.length=0,n.connections.internal.length=0;var e=n.children.slice().map(function(f){return f.el}),t=[];if(z(e,function(f){Array.prototype.push.apply(t,i.instance.getSelector(f,ke))}),Array.prototype.push.apply(e,t),e.length>0){var r=this.instance.getConnections({source:e,scope:wn},!0),s=this.instance.getConnections({target:e,scope:wn},!0),l={},u,c,d=function(h){for(var p=0;p<h.length;p++)l[h[p].id]||(l[h[p].id]=!0,u=i.getGroupFor(h[p].source),c=i.getGroupFor(h[p].target),h[p].source===n.el&&c===n||h[p].target===n.el&&u===n?n.connections.internal.push(h[p]):u===n?(c!==n?n.connections.source.push(h[p]):n.connections.internal.push(h[p]),i._connectionSourceMap[h[p].id]=n):c===n&&(n.connections.target.push(h[p]),i._connectionTargetMap[h[p].id]=n))};d(r),d(s)}}},{key:"_collapseConnection",value:function(n,i,e){var t=n.endpoints[i===0?1:0].element;if(t._jsPlumbParentGroup&&!t._jsPlumbParentGroup.proxied&&t._jsPlumbParentGroup.collapsed)return!1;var r=n.endpoints[0].element,s=r._jsPlumbParentGroup,l=s!=null?s.collapseParent||s:null,u=n.endpoints[1].element,c=u._jsPlumbParentGroup,d=c!=null?c.collapseParent||c:null;if(l==null||d==null||l.id!==d.id){var f=e.el;return this.instance.getId(f),this.instance.proxyConnection(n,i,f,function(h,p){return e.getEndpoint(h,p)},function(h,p){return e.getAnchor(h,p)}),!0}else return!1}},{key:"_expandConnection",value:function(n,i,e){this.instance.unproxyConnection(n,i)}},{key:"isElementDescendant",value:function(n,i){for(var e=this.instance.getContainer(),t=!1;!t;){if(n==null||n===e)return!1;if(n===i)return!0;n=n.parentNode}}},{key:"collapseGroup",value:function(n){var i=this,e=this.getGroup(n);if(!(e==null||e.collapsed)){var t=e.el;if(e.collapseParent==null){if(this.instance.setGroupVisible(e,!1),e.collapsed=!0,this.instance.removeClass(t,Dr),this.instance.addClass(t,Si),e.proxied){var r=new Set,s=function(u,c){for(var d=0;d<u.length;d++){var f=u[d];i._collapseConnection(f,c,e)===!0&&r.add(f.id)}};s(e.connections.source,0),s(e.connections.target,1),z(e.getGroups(),function(l){i.cascadeCollapse(e,l,r)})}this.instance.revalidate(t),this.repaintGroup(e),this.instance.fire(Gd,{group:e})}else e.collapsed=!0,this.instance.removeClass(t,Dr),this.instance.addClass(t,Si)}}},{key:"cascadeCollapse",value:function(n,i,e){var t=this;if(n.proxied){var r=function(l,u){for(var c=0;c<l.length;c++){var d=l[c];e.has(d.id)||t._collapseConnection(d,u,n)===!0&&e.add(d.id)}};r(i.connections.source,0),r(i.connections.target,1)}z(i.getGroups(),function(s){t.cascadeCollapse(n,s,e)})}},{key:"expandGroup",value:function(n,i){var e=this,t=this.getGroup(n);if(t!=null){var r=t.el;if(t.collapseParent==null){if(this.instance.setGroupVisible(t,!0),t.collapsed=!1,this.instance.addClass(r,Dr),this.instance.removeClass(r,Si),t.proxied){var s=function(c,d){for(var f=0;f<c.length;f++){var h=c[f];e._expandConnection(h,d,t)}};s(t.connections.source,0),s(t.connections.target,1);var l=function u(c,d){if(d||c.collapsed){var f=function(p,y){for(var g=0;g<p.length;g++){var E=p[g];e._collapseConnection(E,y,c.collapseParent||c)}};f(c.connections.source,0),f(c.connections.target,1),z(c.connections.internal,function(h){return h.setVisible(!1)}),z(c.getGroups(),function(h){return u(h,!0)})}else e.expandGroup(c,!0)};z(t.getGroups(),l)}this.instance.revalidate(r),this.repaintGroup(t),i||this.instance.fire(Fd,{group:t})}else t.collapsed=!1,this.instance.addClass(r,Dr),this.instance.removeClass(r,Si)}}},{key:"toggleGroup",value:function(n){n=this.getGroup(n),n!=null&&(n.collapsed?this.expandGroup(n):this.collapseGroup(n))}},{key:"repaintGroup",value:function(n){for(var i=this.getGroup(n),e=i.children,t=0;t<e.length;t++)this.instance.revalidate(e[t].el)}},{key:"addToGroup",value:function(n,i){var e=this,t=this.getGroup(n);if(t){for(var r=t.el,s=function(f){var h=f,p=h._isJsPlumbGroup!=null,y=h._jsPlumbGroup,g=h._jsPlumbParentGroup;if(g!==t){var E=e.instance.manage(f),b=e.instance.getOffset(f),x=t.collapsed?e.instance.getOffsetRelativeToRoot(r):e.instance.getOffset(e.instance.getGroupContentArea(t));E.group=t.elId,g!=null&&(g.remove(f,!1,i,!1,t),e._updateConnectionsForGroup(g)),p?t.addGroup(y):t.add(f,i);var C=function(P,O){var I=O===0?1:0;P.each(function(L){L.setVisible(!1),L.endpoints[I].element._jsPlumbGroup===t?(L.endpoints[I].setVisible(!1),e._expandConnection(L,I,t)):(L.endpoints[O].setVisible(!1),e._collapseConnection(L,O,t))})};t.collapsed&&(C(e.instance.select({source:f}),0),C(e.instance.select({target:f}),1)),e.instance.getId(f);var S={x:b.x-x.x,y:b.y-x.y};if(e.instance.setPosition(f,S),e._updateConnectionsForGroup(t),e.instance.revalidate(f),!i){var T={group:t,el:f,pos:S};g&&(T.sourceGroup=g),e.instance.fire(jd,T)}}},l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];z(u,s)}}},{key:"removeFromGroup",value:function(n,i){var e=this,t=this.getGroup(n);if(t){for(var r=function(d){if(t.collapsed){var f=function(y,g){for(var E=0;E<y.length;E++){var b=y[E];if(b.proxies){for(var x=0;x<b.proxies.length;x++)if(b.proxies[x]!=null){var C=b.proxies[x].originalEp.element;(C===d||e.isElementDescendant(C,d))&&e._expandConnection(b,g,t)}}}};f(t.connections.source.slice(),0),f(t.connections.target.slice(),1)}t.remove(d,null,i);var h=e.instance.getManagedElements()[e.instance.getId(d)];h&&delete h.group},s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];z(l,r)}}},{key:"getAncestors",value:function(n){for(var i=[],e=n.group;e!=null;)i.push(e),e=e.group;return i}},{key:"isAncestor",value:function(n,i){return n==null||i==null?!1:this.getAncestors(n).indexOf(i)!==-1}},{key:"getDescendants",value:function(n){var i=[],e=function t(r){var s=r.getGroups();i.push.apply(i,cr(s)),z(s,t)};return e(n),i}},{key:"isDescendant",value:function(n,i){return n==null||i==null?!1:this.getDescendants(i).indexOf(n)!==-1}},{key:"reset",value:function(){this._connectionSourceMap={},this._connectionTargetMap={},this.groupMap={}}}]),a}(),xu=function(){function a(o,n){W(this,a),this.instance=o,this.entries=n}return Q(a,[{key:"length",get:function(){return this.entries.length}},{key:"each",value:function(n){return z(this.entries,function(i){return n(i)}),this}},{key:"get",value:function(n){return this.entries[n]}},{key:"addClass",value:function(n,i){return this.each(function(e){return e.addClass(n,i)}),this}},{key:"removeClass",value:function(n,i){return this.each(function(e){return e.removeClass(n,i)}),this}},{key:"removeAllOverlays",value:function(){return this.each(function(n){return n.removeAllOverlays()}),this}},{key:"setLabel",value:function(n){return this.each(function(i){return i.setLabel(n)}),this}},{key:"clear",value:function(){return this.entries.length=0,this}},{key:"map",value:function(n){var i=[];return this.each(function(e){return i.push(n(e))}),i}},{key:"addOverlay",value:function(n){return this.each(function(i){return i.addOverlay(n)}),this}},{key:"removeOverlay",value:function(n){return this.each(function(i){return i.removeOverlay(n)}),this}},{key:"removeOverlays",value:function(){return this.each(function(n){return n.removeOverlays()}),this}},{key:"showOverlay",value:function(n){return this.each(function(i){return i.showOverlay(n)}),this}},{key:"hideOverlay",value:function(n){return this.each(function(i){return i.hideOverlay(n)}),this}},{key:"setPaintStyle",value:function(n){return this.each(function(i){return i.setPaintStyle(n)}),this}},{key:"setHoverPaintStyle",value:function(n){return this.each(function(i){return i.setHoverPaintStyle(n)}),this}},{key:"setSuspendEvents",value:function(n){return this.each(function(i){return i.setSuspendEvents(n)}),this}},{key:"setParameter",value:function(n,i){return this.each(function(e){return e.parameters[n]=i}),this}},{key:"setParameters",value:function(n){return this.each(function(i){return i.parameters=n}),this}},{key:"setVisible",value:function(n){return this.each(function(i){return i.setVisible(n)}),this}},{key:"addType",value:function(n){return this.each(function(i){return i.addType(n)}),this}},{key:"toggleType",value:function(n){return this.each(function(i){return i.toggleType(n)}),this}},{key:"removeType",value:function(n){return this.each(function(i){return i.removeType(n)}),this}},{key:"bind",value:function(n,i){return this.each(function(e){return e.bind(n,i)}),this}},{key:"unbind",value:function(n,i){return this.each(function(e){return e.unbind(n,i)}),this}},{key:"setHover",value:function(n){var i=this;return this.each(function(e){return i.instance.setHover(e,n)}),this}}]),a}(),Dv=function(a){Ee(n,a);var o=be(n);function n(){return W(this,n),o.apply(this,arguments)}return Q(n,[{key:"setEnabled",value:function(e){return this.each(function(t){return t.enabled=e}),this}},{key:"setAnchor",value:function(e){return this.each(function(t){return t.setAnchor(e)}),this}},{key:"deleteEveryConnection",value:function(){return this.each(function(e){return e.deleteEveryConnection()}),this}},{key:"deleteAll",value:function(){var e=this;return this.each(function(t){return e.instance.deleteEndpoint(t)}),this.clear(),this}}]),n}(xu),Iv=function(a){Ee(n,a);var o=be(n);function n(){return W(this,n),o.apply(this,arguments)}return Q(n,[{key:"setDetachable",value:function(e){return this.each(function(t){return t.setDetachable(e)}),this}},{key:"setReattach",value:function(e){return this.each(function(t){return t.setReattach(e)}),this}},{key:"setConnector",value:function(e){return this.each(function(t){return t._setConnector(e)}),this}},{key:"deleteAll",value:function(){var e=this;this.each(function(t){return e.instance.deleteConnection(t)}),this.clear()}},{key:"repaint",value:function(){var e=this;return this.each(function(t){return e.instance._paintConnection(t)}),this}}]),n}(xu),wv=function a(){W(this,a),v(this,"affectedElements",new Set)};function Us(){return{x:0,y:0,w:0,h:0,r:0,c:{x:0,y:0},x2:0,y2:0,t:{x:0,y:0,c:{x:0,y:0},w:0,h:0,r:0,x2:0,y2:0,cr:0,sr:0},dirty:!0}}function Mv(a,o,n,i,e){var t={x:a+n/2,y:o+i/2},r=Math.cos(e/360*Math.PI*2),s=Math.sin(e/360*Math.PI*2),l=function(x,C){return{x:t.x+Math.round((x-t.x)*r-(C-t.y)*s),y:t.y+Math.round((C-t.y)*r-(x-t.x)*s)}},u=l(a,o),c=l(a+n,o),d=l(a+n,o+i),f=l(a,o+i),h=l(a+n/2,o+i/2),p=Math.min(u.x,c.x,d.x,f.x),y=Math.max(u.x,c.x,d.x,f.x),g=Math.min(u.y,c.y,d.y,f.y),E=Math.max(u.y,c.y,d.y,f.y);return{x:p,y:g,w:y-p,h:E-g,c:h,r:e,x2:y,y2:E,cr:r,sr:s}}var lo=function(o,n){var i=0;return n[1]>o[1]?i=-1:n[1]<o[1]&&(i=1),i},Vs=function(o,n){return lo(o,n)*-1};function _i(a,o,n,i){hd([a,o],n,lo,i)}function an(a,o){var n=gn(o,function(i){return i[0]===a});n>-1&&o.splice(n,1)}var kv=function(a){Ee(n,a);var o=be(n);function n(i){var e;return W(this,n),e=o.call(this),e.instance=i,v(m(e),"_currentTransaction",null),v(m(e),"_sortedElements",{xmin:[],xmax:[],ymin:[],ymax:[]}),v(m(e),"_elementMap",new Map),v(m(e),"_transformedElementMap",new Map),v(m(e),"_bounds",{minx:0,maxx:0,miny:0,maxy:0}),e}return Q(n,[{key:"_updateBounds",value:function(e,t,r){t!=null&&(an(e,this._sortedElements.xmin),an(e,this._sortedElements.xmax),an(e,this._sortedElements.ymin),an(e,this._sortedElements.ymax),_i(e,t.t.x,this._sortedElements.xmin,!1),_i(e,t.t.x+t.t.w,this._sortedElements.xmax,!0),_i(e,t.t.y,this._sortedElements.ymin,!1),_i(e,t.t.y+t.t.h,this._sortedElements.ymax,!0),r!==!0&&this._recalculateBounds())}},{key:"_recalculateBounds",value:function(){this._bounds.minx=this._sortedElements.xmin.length>0?this._sortedElements.xmin[0][1]:0,this._bounds.maxx=this._sortedElements.xmax.length>0?this._sortedElements.xmax[0][1]:0,this._bounds.miny=this._sortedElements.ymin.length>0?this._sortedElements.ymin[0][1]:0,this._bounds.maxy=this._sortedElements.ymax.length>0?this._sortedElements.ymax[0][1]:0}},{key:"recomputeBounds",value:function(){var e=this;this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.forEach(function(t,r){e._sortedElements.xmin.push([r,t.t.x]),e._sortedElements.xmax.push([r,t.t.x+t.t.w]),e._sortedElements.ymin.push([r,t.t.y]),e._sortedElements.ymax.push([r,t.t.y+t.t.h])}),this._sortedElements.xmin.sort(lo),this._sortedElements.ymin.sort(lo),this._sortedElements.xmax.sort(Vs),this._sortedElements.ymax.sort(Vs),this._recalculateBounds()}},{key:"_finaliseUpdate",value:function(e,t,r){t.t=Mv(t.x,t.y,t.w,t.h,t.r),this._transformedElementMap.set(e,t.t),r!==!0&&this._updateBounds(e,t,r)}},{key:"shouldFireEvent",value:function(e,t,r){return!0}},{key:"startTransaction",value:function(){if(this._currentTransaction!=null)throw new Error("Viewport: cannot start transaction; a transaction is currently active.");this._currentTransaction=new wv}},{key:"endTransaction",value:function(){var e=this;this._currentTransaction!=null&&(this._currentTransaction.affectedElements.forEach(function(t){var r=e.getPosition(t);e._finaliseUpdate(t,r,!0)}),this.recomputeBounds(),this._currentTransaction=null)}},{key:"updateElements",value:function(e){var t=this;z(e,function(r){return t.updateElement(r.id,r.x,r.y,r.width,r.height,r.rotation)})}},{key:"updateElement",value:function(e,t,r,s,l,u,c){var d=as(this._elementMap,e,Us);return d.dirty=t==null&&d.x==null||r==null&&d.y==null||s==null&&d.w==null||l==null&&d.h==null,t!=null&&(d.x=t),r!=null&&(d.y=r),s!=null&&(d.w=s),l!=null&&(d.h=l),u!=null&&(d.r=u||0),d.c.x=d.x+d.w/2,d.c.y=d.y+d.h/2,d.x2=d.x+d.w,d.y2=d.y+d.h,this._currentTransaction==null?this._finaliseUpdate(e,d,c):this._currentTransaction.affectedElements.add(e),d}},{key:"refreshElement",value:function(e,t){var r=this.instance.getManagedElements(),s=r[e]?r[e].el:null;if(s!=null){var l=this.getSize(s),u=this.getOffset(s);return this.updateElement(e,u.x,u.y,l.w,l.h,null,t)}else return null}},{key:"getSize",value:function(e){return this.instance.getSize(e)}},{key:"getOffset",value:function(e){return this.instance.getOffset(e)}},{key:"registerElement",value:function(e,t){return this.updateElement(e,0,0,0,0,0,t)}},{key:"addElement",value:function(e,t,r,s,l,u){return this.updateElement(e,t,r,s,l,u)}},{key:"rotateElement",value:function(e,t){var r=as(this._elementMap,e,Us);return r.r=t||0,this._finaliseUpdate(e,r),r}},{key:"getBoundsWidth",value:function(){return this._bounds.maxx-this._bounds.minx}},{key:"getBoundsHeight",value:function(){return this._bounds.maxy-this._bounds.miny}},{key:"getX",value:function(){return this._bounds.minx}},{key:"getY",value:function(){return this._bounds.miny}},{key:"setSize",value:function(e,t,r){if(this._elementMap.has(e))return this.updateElement(e,null,null,t,r,null)}},{key:"setPosition",value:function(e,t,r){if(this._elementMap.has(e))return this.updateElement(e,t,r,null,null,null)}},{key:"reset",value:function(){this._sortedElements.xmin.length=0,this._sortedElements.xmax.length=0,this._sortedElements.ymin.length=0,this._sortedElements.ymax.length=0,this._elementMap.clear(),this._transformedElementMap.clear(),this._recalculateBounds()}},{key:"remove",value:function(e){an(e,this._sortedElements.xmin),an(e,this._sortedElements.xmax),an(e,this._sortedElements.ymin),an(e,this._sortedElements.ymax),this._elementMap.delete(e),this._transformedElementMap.delete(e),this._recalculateBounds()}},{key:"getPosition",value:function(e){return this._elementMap.get(e)}},{key:"getElements",value:function(){return this._elementMap}},{key:"isEmpty",value:function(){return this._elementMap.size===0}}]),n}(ci),Qn;function Lv(a,o,n,i,e){for(var t=n?a.w:a.h,r=n?a.h:a.w,s=[],l=t/(o.length+1),u=0;u<o.length;u++){var c=(u+1)*l,d=i*r;e&&(c=t-c);var f=n?c:d,h=a.x+f,p=f/a.w,y=n?d:c,g=a.y+y,E=y/a.h;if(a.r!==0&&a.r!=null){var b=Ji({x:h,y:g},a.c,a.r);h=b.x,g=b.y}s.push({x:h,y:g,xLoc:p,yLoc:E,c:o[u].c})}return s}function Hs(a,o){return o.theta-a.theta}function $s(a,o){var n=a.theta<0?-Math.PI-a.theta:Math.PI-a.theta,i=o.theta<0?-Math.PI-o.theta:Math.PI-o.theta;return n-i}var Nv=(Qn={},v(Qn,$e,$s),v(Qn,et,Hs),v(Qn,ct,Hs),v(Qn,st,$s),Qn);function sn(a){return a.isContinuous===!0}function Ys(a){return a.isContinuous===!0}function Rv(a){return a.locations.length>1}function Xs(a){return[a.currentLocation,a.locations[a.currentLocation]]}var Gv=function(){function a(o){var n=this;W(this,a),this.instance=o,v(this,"anchorLists",new Map),v(this,"anchorLocations",new Map),o.bind(Oa,function(i){i.sourceEndpoint._anchor.isContinuous&&n._removeEndpointFromAnchorLists(i.sourceEndpoint),i.targetEndpoint._anchor.isContinuous&&n._removeEndpointFromAnchorLists(i.targetEndpoint)}),o.bind(Yl,function(i){n._removeEndpointFromAnchorLists(i)})}return Q(a,[{key:"getAnchorOrientation",value:function(n){var i=this.anchorLocations.get(n.id);return i?[i.ox,i.oy]:[0,0]}},{key:"_distance",value:function(n,i,e,t,r,s,l){var u=t.x+n.x*r.w,c=t.y+n.y*r.h,d=t.x+r.w/2,f=t.y+r.h/2;if(s!=null&&s.length>0){var h=this.instance._applyRotations([u,c,0,0],s);u=h.x,c=h.y}return Math.sqrt(Math.pow(i-u,2)+Math.pow(e-c,2))+Math.sqrt(Math.pow(d-u,2)+Math.pow(f-c,2))}},{key:"_anchorSelector",value:function(n,i,e,t,r,s,l){for(var u=e.x+t.w/2,c=e.y+t.h/2,d=-1,f=1/0,h=0;h<l.length;h++){var p=this._distance(l[h],u,c,n,i,r,s);p<f&&(d=h+0,f=p)}return[d,l[d]]}},{key:"_floatingAnchorCompute",value:function(n,i){var e=i.xy,t={curX:e.x+n.size.w/2,curY:e.y+n.size.h/2,x:0,y:0,ox:0,oy:0};return this._setComputedPosition(n,t)}},{key:"_setComputedPosition",value:function(n,i,e){return this.anchorLocations.set(n.id,i),n.computedPosition=i,e&&(n.timestamp=e),i}},{key:"_computeSingleLocation",value:function(n,i,e,t){var r,s=t.rotation,l={curX:i.x+n.x*e.w+n.offx,curY:i.y+n.y*e.h+n.offy,x:n.x,y:n.y,ox:0,oy:0};if(s!=null&&s.length>0){var u=[n.iox,n.ioy],c={x:l.curX,y:l.curY,cr:0,sr:0};z(s,function(d){c=Ji(c,d.c,d.r);var f=[Math.round(u[0]*c.cr-u[1]*c.sr),Math.round(u[1]*c.cr+u[0]*c.sr)];u=f.slice()}),n.ox=u[0],n.oy=u[1],r={curX:c.x,curY:c.y,x:n.x,y:n.y,ox:u[0],oy:u[1]}}else n.ox=n.iox,n.oy=n.ioy,r=K({ox:n.iox,oy:n.ioy},l);return r}},{key:"_singleAnchorCompute",value:function(n,i){var e=i.xy,t=i.wh,r=i.timestamp,s=this.anchorLocations.get(n.id);if(s!=null&&r&&r===n.timestamp)return s;var l=Xs(n),u=Ri(l,2);u[0];var c=u[1];return s=this._computeSingleLocation(c,e,t,i),this._setComputedPosition(n,s,r)}},{key:"_defaultAnchorCompute",value:function(n,i){var e;if(n.locations.length===1)return this._singleAnchorCompute(n,i);var t=i.xy,r=i.wh,s=i.txy,l=i.twh,u=Xs(n),c=Ri(u,2),d=c[0],f=c[1];if(n.locked||s==null||l==null)e=this._computeSingleLocation(f,t,r,i);else{var h=this._anchorSelector(t,r,s,l,i.rotation,i.tRotation,n.locations),p=Ri(h,2),y=p[0],g=p[1];n.currentLocation=y,y!==d&&(n.cssClass=g.cls||n.cssClass,i.element._anchorLocationChanged(n)),e=this._computeSingleLocation(g,t,r,i)}return this._setComputedPosition(n,e,i.timestamp)}},{key:"_placeAnchors",value:function(n,i){var e=this,t=this.instance.viewport.getPosition(n),r=function(l,u,c,d,f,h){if(c.length>0)for(var p=c.sort(Nv[l]),y=l===et||l===$e,g=Lv(t,p,d,f,y),E=0;E<g.length;E++){var b=g[E].c,x=b.endpoints[0].elementId===n,C=x?b.endpoints[0]:b.endpoints[1];e._setComputedPosition(C._anchor,{curX:g[E].x,curY:g[E].y,x:g[E].xLoc,y:g[E].yLoc,ox:h[0],oy:h[1]})}};r(ct,t,i.bottom,!0,1,[0,1]),r($e,t,i.top,!0,0,[0,-1]),r(st,t,i.left,!1,0,[-1,0]),r(et,t,i.right,!1,1,[1,0])}},{key:"_updateAnchorList",value:function(n,i,e,t,r,s,l,u,c,d,f){var h=t.endpoints[l],p=h.id,y=[1,0][l],g={theta:i,order:e,c:t,b:r,elId:s,epId:p},E=n[c],b=h._continuousAnchorEdge?n[h._continuousAnchorEdge]:null,x;if(b){var C=gn(b,function(P){return P.epId===p});if(C!==-1){b.splice(C,1);for(var S=0;S<b.length;S++)x=b[S].c,x.placeholder!==!0&&d.add(x),f.add(b[S].c.endpoints[l]),f.add(b[S].c.endpoints[y])}}for(var T=0;T<E.length;T++)x=E[T].c,x.placeholder!==!0&&d.add(x),f.add(E[T].c.endpoints[l]),f.add(E[T].c.endpoints[y]);{var _=u?0:E.length;E.splice(_,0,g)}h._continuousAnchorEdge=c}},{key:"_removeEndpointFromAnchorLists",value:function(n){var i=this.anchorLists.get(n.elementId),e=0;(function(t,r){if(t){var s=function(u){return u.epId===r};Ze(t.top,s),Ze(t.left,s),Ze(t.bottom,s),Ze(t.right,s),e+=t.top.length,e+=t.left.length,e+=t.bottom.length,e+=t.right.length}})(i,n.id),e===0&&this.anchorLists.delete(n.elementId),this.anchorLocations.delete(n._anchor.id)}},{key:"computeAnchorLocation",value:function(n,i){var e;return sn(n)?e=this.anchorLocations.get(n.id)||{curX:0,curY:0,x:0,y:0,ox:0,oy:0}:Ys(n)?e=this._floatingAnchorCompute(n,i):e=this._defaultAnchorCompute(n,i),n.timestamp=i.timestamp,e}},{key:"computePath",value:function(n,i){var e=this.instance.viewport.getPosition(n.sourceId),t=this.instance.viewport.getPosition(n.targetId),r=n.endpoints[0],s=n.endpoints[1],l=this.getEndpointLocation(r,{xy:e,wh:e,element:r,timestamp:i,rotation:this.instance._getRotations(n.sourceId)}),u=this.getEndpointLocation(s,{xy:t,wh:t,element:s,timestamp:i,rotation:this.instance._getRotations(n.targetId)});n.connector.resetBounds(),n.connector.compute({sourcePos:l,targetPos:u,sourceEndpoint:n.endpoints[0],targetEndpoint:n.endpoints[1],strokeWidth:n.paintStyleInUse.strokeWidth,sourceInfo:e,targetInfo:t})}},{key:"getEndpointLocation",value:function(n,i){i=i||{};var e=n._anchor,t=this.anchorLocations.get(e.id);return(t==null||i.timestamp!=null&&e.timestamp!==i.timestamp)&&(t=this.computeAnchorLocation(e,i),this._setComputedPosition(e,t,i.timestamp)),t}},{key:"getEndpointOrientation",value:function(n){return n._anchor?this.getAnchorOrientation(n._anchor):[0,0]}},{key:"setAnchorOrientation",value:function(n,i){var e=this.anchorLocations.get(n.id);e!=null&&(e.ox=i[0],e.oy=i[1])}},{key:"isDynamicAnchor",value:function(n){return n._anchor?!sn(n._anchor)&&n._anchor.locations.length>1:!1}},{key:"isFloating",value:function(n){return n._anchor?Ys(n._anchor):!1}},{key:"prepareAnchor",value:function(n){return Br(n)}},{key:"redraw",value:function(n,i,e){var t=this,r=new Set,s=new Set,l=new Set;if(!this.instance._suspendDrawing){var u=this.instance.endpointsByElement[n]||[];i=i||Ke();for(var c={},d,f,h=0;h<u.length;h++)if(f=u[h],f.visible!==!1)if(s.add(f),d=f._anchor,f.connections.length===0)sn(d)&&(this.anchorLists.has(n)||this.anchorLists.set(n,{top:[],right:[],bottom:[],left:[]}),this._updateAnchorList(this.anchorLists.get(n),-Math.PI/2,0,{endpoints:[f,f],placeholder:!0},!1,n,0,!1,Rh(d),r,s),l.add(n));else for(var p=0;p<f.connections.length;p++){var y=f.connections[p],g=y.sourceId,E=y.targetId,b=sn(y.endpoints[0]._anchor),x=sn(y.endpoints[1]._anchor);if(b||x){var C=(y.endpoints[0]._anchor.faces||[]).join("-"),S=(y.endpoints[1]._anchor.faces||[]).join("-"),T=[g,C,E,S].join("-"),_=c[T],P=y.sourceId===n?1:0;b&&!this.anchorLists.has(g)&&this.anchorLists.set(g,{top:[],right:[],bottom:[],left:[]}),x&&!this.anchorLists.has(E)&&this.anchorLists.set(E,{top:[],right:[],bottom:[],left:[]});var O=this.instance.viewport.getPosition(E),I=this.instance.viewport.getPosition(g);if(E===g&&(b||x))this._updateAnchorList(this.anchorLists.get(g),-Math.PI/2,0,y,!1,E,0,!1,$e,r,s),this._updateAnchorList(this.anchorLists.get(E),-Math.PI/2,0,y,!1,g,1,!1,$e,r,s);else{var L=this.instance._getRotations(g),M=this.instance._getRotations(E);_||(_=this._calculateOrientation(g,E,I,O,y.endpoints[0]._anchor,y.endpoints[1]._anchor,L,M),c[T]=_),b&&this._updateAnchorList(this.anchorLists.get(g),_.theta,0,y,!1,E,0,!1,_.a[0],r,s),x&&this._updateAnchorList(this.anchorLists.get(E),_.theta2,-1,y,!0,g,1,!0,_.a[1],r,s)}b&&l.add(g),x&&l.add(E),r.add(y),(b&&P===0||x&&P===1)&&s.add(y.endpoints[P])}else{var N=f.connections[p].endpoints[y.sourceId===n?1:0],G=N._anchor;if(Rv(G)){this.instance._paintEndpoint(N,{elementWithPrecedence:n,timestamp:i}),r.add(f.connections[p]);for(var B=0;B<N.connections.length;B++)N.connections[B]!==f.connections[p]&&r.add(N.connections[B])}else r.add(f.connections[p])}}l.forEach(function(k){t._placeAnchors(k,t.anchorLists.get(k))}),s.forEach(function(k){var R=t.instance.viewport.getPosition(k.elementId);t.instance._paintEndpoint(k,{timestamp:i,offset:R})}),r.forEach(function(k){t.instance._paintConnection(k,{timestamp:i})})}return{c:r,e:s}}},{key:"reset",value:function(){this.anchorLocations.clear(),this.anchorLists.clear()}},{key:"setAnchor",value:function(n,i){i!=null&&(n._anchor=i)}},{key:"setConnectionAnchors",value:function(n,i){n.endpoints[0]._anchor=i[0],n.endpoints[1]._anchor=i[1]}},{key:"_calculateOrientation",value:function(n,i,e,t,r,s,l,u){var c=this,d={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"};if(n===i)return{orientation:d.IDENTITY,a:[$e,$e]};var f=Math.atan2(t.c.y-e.c.y,t.c.x-e.c.x),h=Math.atan2(e.c.y-t.c.y,e.c.x-t.c.x),p=[],y={};(function(T,_){for(var P=0;P<T.length;P++){var O;if(y[T[P]]=(O={},v(O,st,{x:_[P][0].x,y:_[P][0].c.y}),v(O,et,{x:_[P][0].x+_[P][0].w,y:_[P][0].c.y}),v(O,$e,{x:_[P][0].c.x,y:_[P][0].y}),v(O,ct,{x:_[P][0].c.x,y:_[P][0].y+_[P][0].h}),O),_[P][1]!=null&&_[P][1].length>0)for(var I in y[T[P]])y[T[P]][I]=c.instance._applyRotationsXY(y[T[P]][I],_[P][1])}})([Jo,jl],[[e,l],[t,u]]);for(var g=[$e,st,et,ct],E=0;E<g.length;E++)for(var b=0;b<g.length;b++)p.push({source:g[E],target:g[b],dist:na(y.source[g[E]],y.target[g[b]])});p.sort(function(T,_){if(T.dist<_.dist)return-1;if(_.dist<T.dist)return 1;var P,O=(P={},v(P,st,0),v(P,$e,1),v(P,et,2),v(P,ct,3),P),I=O[T.source],L=O[_.source],M=O[T.target],N=O[_.target];return I<L?-1:L<I?1:M<N?-1:N<M?1:0});for(var x=p[0].source,C=p[0].target,S=0;S<p.length&&(sn(r)&&r.locked?x=r.currentFace:!r.isContinuous||Ss(r,p[S].source)?x=p[S].source:x=null,s.isContinuous&&s.locked?C=s.currentFace:!s.isContinuous||Ss(s,p[S].target)?C=p[S].target:C=null,!(x!=null&&C!=null));S++);return r.isContinuous&&this.setCurrentFace(r,x),s.isContinuous&&this.setCurrentFace(s,C),{a:[x,C],theta:f,theta2:h}}},{key:"setCurrentFace",value:function(n,i,e){n.currentFace=i,e&&n.lockedFace!=null&&(n.lockedFace=n.currentFace)}},{key:"lock",value:function(n){n.locked=!0,sn(n)&&(n.lockedFace=n.currentFace)}},{key:"unlock",value:function(n){n.locked=!1,sn(n)&&(n.lockedFace=null)}},{key:"selectAnchorLocation",value:function(n,i){var e=gn(n.locations,function(t){return t.x===i.x&&t.y===i.y});return e!==-1?(n.currentLocation=e,!0):!1}},{key:"lockCurrentAxis",value:function(n){n.currentFace!=null&&(n.lockedAxis=n.currentFace===st||n.currentFace===et?kh:Lh)}},{key:"unlockCurrentAxis",value:function(n){n.lockedAxis=null}},{key:"anchorsEqual",value:function(n,i){if(!n||!i)return!1;var e=n.locations[n.currentLocation],t=i.locations[i.currentLocation];return e.x===t.x&&e.y===t.y&&e.offx===t.offx&&e.offy===t.offy&&e.ox===t.ox&&e.oy===t.oy}}]),a}(),Ws={},di={get:function(o,n,i){var e=Ws[n];if(e)return new e(o,i);throw{message:"jsPlumb: unknown connector type '"+n+"'"}},register:function(o,n){Ws[o]=n}},Ln=function(a){Ee(n,a);var o=be(n);function n(i){var e;return W(this,n),e=o.call(this,i),v(m(e),"length",void 0),v(m(e),"m",void 0),v(m(e),"m2",void 0),v(m(e),"type",n.segmentType),e._setCoordinates({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),e}return Q(n,[{key:"getPath",value:function(e){return(e?"M "+this.x1+" "+this.y1+" ":"")+"L "+this.x2+" "+this.y2}},{key:"_recalc",value:function(){this.length=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2)),this.m=vr({x:this.x1,y:this.y1},{x:this.x2,y:this.y2}),this.m2=-1/this.m,this.extents={xmin:Math.min(this.x1,this.x2),ymin:Math.min(this.y1,this.y2),xmax:Math.max(this.x1,this.x2),ymax:Math.max(this.y1,this.y2)}}},{key:"getLength",value:function(){return this.length}},{key:"getGradient",value:function(){return this.m}},{key:"_setCoordinates",value:function(e){this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2,this._recalc()}},{key:"pointOnPath",value:function(e,t){if(e===0&&!t)return{x:this.x1,y:this.y1};if(e===1&&!t)return{x:this.x2,y:this.y2};var r=t?e>0?e:this.length+e:e*this.length;return In({x:this.x1,y:this.y1},{x:this.x2,y:this.y2},r)}},{key:"gradientAtPoint",value:function(e,t){return this.m}},{key:"pointAlongPathFrom",value:function(e,t,r){var s=this.pointOnPath(e,r),l=t<=0?{x:this.x1,y:this.y1}:{x:this.x2,y:this.y2};return t<=0&&Math.abs(t)>1&&(t*=-1),In(s,l,t)}},{key:"within",value:function(e,t,r){return r>=Math.min(e,t)&&r<=Math.max(e,t)}},{key:"closest",value:function(e,t,r){return Math.abs(r-e)<Math.abs(r-t)?e:t}},{key:"findClosestPointOnPath",value:function(e,t){var r={d:1/0,x:null,y:null,l:null,x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};if(this.m===0)r.y=this.y1,r.x=this.within(this.x1,this.x2,e)?e:this.closest(this.x1,this.x2,e);else if(this.m===1/0||this.m===-1/0)r.x=this.x1,r.y=this.within(this.y1,this.y2,t)?t:this.closest(this.y1,this.y2,t);else{var s=this.y1-this.m*this.x1,l=t-this.m2*e,u=(l-s)/(this.m-this.m2),c=this.m*u+s;r.x=this.within(this.x1,this.x2,u)?u:this.closest(this.x1,this.x2,u),r.y=this.within(this.y1,this.y2,c)?c:this.closest(this.y1,this.y2,c)}var d=na({x:r.x,y:r.y},{x:this.x1,y:this.y1});return r.d=na({x:e,y:t},r),r.l=d/length,r}},{key:"_pointLiesBetween",value:function(e,t,r){return r>t?t<=e&&e<=r:t>=e&&e>=r}},{key:"lineIntersection",value:function(e,t,r,s){var l=Math.abs(vr({x:e,y:t},{x:r,y:s})),u=Math.abs(this.m),c=u===1/0?this.x1:this.y1-u*this.x1,d=[],f=l===1/0?e:t-l*e;if(l!==u)if(l===1/0&&u===0)this._pointLiesBetween(e,this.x1,this.x2)&&this._pointLiesBetween(this.y1,t,s)&&d.push({x:e,y:this.y1});else if(l===0&&u===1/0)this._pointLiesBetween(t,this.y1,this.y2)&&this._pointLiesBetween(this.x1,e,r)&&d.push({x:this.x1,y:t});else{var h,p;l===1/0?(h=e,this._pointLiesBetween(h,this.x1,this.x2)&&(p=u*e+c,this._pointLiesBetween(p,t,s)&&d.push({x:h,y:p}))):l===0?(p=t,this._pointLiesBetween(p,this.y1,this.y2)&&(h=(t-c)/u,this._pointLiesBetween(h,e,r)&&d.push({x:h,y:p}))):(h=(f-c)/(u-l),p=u*h+c,this._pointLiesBetween(h,this.x1,this.x2)&&this._pointLiesBetween(p,this.y1,this.y2)&&d.push({x:h,y:p}))}return d}},{key:"boxIntersection",value:function(e,t,r,s){var l=[];return l.push.apply(l,this.lineIntersection(e,t,e+r,t)),l.push.apply(l,this.lineIntersection(e+r,t,e+r,t+s)),l.push.apply(l,this.lineIntersection(e+r,t+s,e,t+s)),l.push.apply(l,this.lineIntersection(e,t+s,e,t)),l}}]),n}(Da);v(Ln,"segmentType","Straight");var uo=function(a){Ee(n,a);var o=be(n);function n(){var i;W(this,n);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i=o.call.apply(o,[this].concat(t)),v(m(i),"type",n.type),i}return Q(n,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,t){this._addSegment(Ln,{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),this._addSegment(Ln,{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),this._addSegment(Ln,{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty}),this.geometry={source:t.sourcePos,target:t.targetPos}}},{key:"transformGeometry",value:function(e,t,r){return{source:this.transformAnchorPlacement(e.source,t,r),target:this.transformAnchorPlacement(e.target,t,r)}}}]),n}(xo);v(uo,"type","Straight");function Fv(a,o){for(var n=a.scope.split(/\s/),i=o.scope.split(/\s/),e=0;e<n.length;e++)for(var t=0;t<i.length;t++)if(i[t]===n[e])return!0;return!1}function Tn(a,o,n){var i=[],e=function(s){return Ve(s)?s:a.getId(s)};if(o)if(typeof o=="string"){if(o==="*")return o;i.push(o)}else if(n)i=o;else if(o.length!=null){var t;(t=i).push.apply(t,cr(cr(o).map(e)))}else i.push(e(o));return i}function jv(a,o){a!=null&&a.endpoints.push(o)}function Bv(a,o){a!=null&&Ze(a.endpoints,function(n){return n===o})}function Ai(a,o,n){o!=null&&(o.connections.push(a),o.connections.length===1&&a.instance.addClass(a.source,a.instance.connectedClass)),n!=null&&(o==null||a.sourceId!==a.targetId)&&(n.connections.push(a),n.connections.length===1&&a.instance.addClass(a.target,a.instance.connectedClass))}function Di(a,o,n){if(o!=null){var i=o.connections.length;Ze(o.connections,function(t){return a.id===t.id}),i>0&&o.connections.length===0&&a.instance.removeClass(a.source,a.instance.connectedClass)}if(n!=null){var e=n.connections.length;(o==null||a.sourceId!==a.targetId)&&Ze(n.connections,function(t){return a.id===t.id}),e>0&&n.connections.length===0&&a.instance.removeClass(a.target,a.instance.connectedClass)}}var Uv=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this),t._instanceIndex=i,v(m(t),"defaults",void 0),v(m(t),"_initialDefaults",{}),v(m(t),"isConnectionBeingDragged",!1),v(m(t),"currentlyDragging",!1),v(m(t),"hoverSuspended",!1),v(m(t),"_suspendDrawing",!1),v(m(t),"_suspendedAt",null),v(m(t),"connectorClass",Ca),v(m(t),"connectorOutlineClass",Od),v(m(t),"connectedClass",_d),v(m(t),"endpointClass",sr),v(m(t),"endpointConnectedClass",Ad),v(m(t),"endpointFullClass",Dd),v(m(t),"endpointFloatingClass",Sa),v(m(t),"endpointDropAllowedClass",Id),v(m(t),"endpointDropForbiddenClass",wd),v(m(t),"endpointAnchorClassPrefix",Md),v(m(t),"overlayClass",Eo),v(m(t),"connections",[]),v(m(t),"endpointsByElement",{}),v(m(t),"endpointsByUUID",new Map),v(m(t),"sourceSelectors",[]),v(m(t),"targetSelectors",[]),v(m(t),"allowNestedGroups",void 0),v(m(t),"_curIdStamp",1),v(m(t),"viewport",new kv(m(t))),v(m(t),"router",void 0),v(m(t),"groupManager",void 0),v(m(t),"_connectionTypes",new Map),v(m(t),"_endpointTypes",new Map),v(m(t),"_container",void 0),v(m(t),"_managedElements",{}),v(m(t),"DEFAULT_SCOPE",void 0),v(m(t),"_zoom",1),t.defaults={anchor:Vt.Bottom,anchors:[null,null],connectionsDetachable:!0,connectionOverlays:[],connector:uo.type,container:null,endpoint:Un.type,endpointOverlays:[],endpoints:[null,null],endpointStyle:{fill:"#456"},endpointStyles:[null,null],endpointHoverStyle:null,endpointHoverStyles:[null,null],hoverPaintStyle:null,listStyle:{},maxConnections:1,paintStyle:{strokeWidth:2,stroke:"#456"},reattachConnections:!1,scope:"jsplumb_defaultscope",allowNestedGroups:!0},e&&K(t.defaults,e),K(t._initialDefaults,t.defaults),t._initialDefaults[Jn]!=null&&(t._initialDefaults[Jn].strokeWidth=t._initialDefaults[Jn].strokeWidth||2),t.DEFAULT_SCOPE=t.defaults[Tv],t.allowNestedGroups=t._initialDefaults[Pv]!==!1,t.router=new Gv(m(t)),t.groupManager=new Av(m(t)),t.setContainer(t._initialDefaults.container),t}return Q(n,[{key:"defaultScope",get:function(){return this.DEFAULT_SCOPE}},{key:"currentZoom",get:function(){return this._zoom}},{key:"areDefaultAnchorsSet",value:function(){return this.validAnchorsSpec(this.defaults.anchors)}},{key:"validAnchorsSpec",value:function(e){return e!=null&&e[0]!=null&&e[1]!=null}},{key:"getContainer",value:function(){return this._container}},{key:"setZoom",value:function(e,t){return this._zoom=e,this.fire(zl,this._zoom),t&&this.repaintEverything(),!0}},{key:"_idstamp",value:function(){return""+this._curIdStamp++}},{key:"checkCondition",value:function(e,t){var r=this.getListener(e),s=!0;if(r&&r.length>0){var l=Array.prototype.slice.call(arguments,1);try{for(var u=0,c=r.length;u<c;u++)s=s&&r[u].apply(r[u],l)}catch(d){We("cannot check condition ["+e+"]"+d)}}return s}},{key:"getId",value:function(e,t){if(e==null)return null;var r=this.getAttribute(e,cn);return(!r||r==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?r=t:(arguments.length===1||arguments.length===3&&!arguments[2])&&(r="jsplumb-"+this._instanceIndex+"-"+this._idstamp()),this.setAttribute(e,cn,r)),r}},{key:"getConnections",value:function(e,t){e?e.constructor===String&&(e={scope:e}):e={};for(var r=e.scope||this.defaultScope,s=Tn(this,r,!0),l=Tn(this,e.source),u=Tn(this,e.target),c=!t&&s.length>1?{}:[],d=function(b,x){if(!t&&s.length>1){var C=c[b];C==null&&(C=c[b]=[]),C.push(x)}else c.push(x)},f=0,h=this.connections.length;f<h;f++){var p=this.connections[f],y=p.proxies&&p.proxies[0]?p.proxies[0].originalEp.elementId:p.sourceId,g=p.proxies&&p.proxies[1]?p.proxies[1].originalEp.elementId:p.targetId;Cn(s,p.scope)&&Cn(l,y)&&Cn(u,g)&&d(p.scope,p)}return c}},{key:"select",value:function(e){return e=e||{},e.scope=e.scope||"*",new Iv(this,e.connections||this.getConnections(e,!0))}},{key:"selectEndpoints",value:function(e){e=e||{},e.scope=e.scope||wn;var t=!e.element&&!e.source&&!e.target,r=t?wn:Tn(this,e.element),s=t?wn:Tn(this,e.source),l=t?wn:Tn(this,e.target),u=Tn(this,e.scope,!0),c=[];for(var d in this.endpointsByElement){var f=Cn(r,d,!0),h=Cn(s,d,!0),p=s!=="*",y=Cn(l,d,!0),g=l!=="*";if(f||h||y)e:for(var E=0,b=this.endpointsByElement[d].length;E<b;E++){var x=this.endpointsByElement[d][E];if(Cn(u,x.scope,!0)){var C=p&&s.length>0&&!x.isSource,S=g&&l.length>0&&!x.isTarget;if(C||S)continue e;c.push(x)}}}return new Dv(this,c)}},{key:"setContainer",value:function(e){this._container=e,this.fire(Ld,this._container)}},{key:"_set",value:function(e,t,r){var s=[{el:"source",elId:"sourceId"},{el:"target",elId:"targetId"}],l,u=s[r],c=e[u.elId],d,f=e.endpoints[r],h={index:r,originalEndpoint:f,originalSourceId:r===0?c:e.sourceId,newSourceId:e.sourceId,originalTargetId:r===1?c:e.targetId,newTargetId:e.targetId,connection:e,newEndpoint:f};return t instanceof or?(l=t,l.addConnection(e)):(d=this.getId(t),d===e[u.elId]?l=null:l=e.makeEndpoint(r===0,t,d)),l!=null&&(h.newEndpoint=l,f.detachFromConnection(e),e.endpoints[r]=l,e[u.el]=l.element,e[u.elId]=l.elementId,h[r===0?"newSourceId":"newTargetId"]=l.elementId,this.fireMoveEvent(h),this._paintConnection(e)),h}},{key:"setSource",value:function(e,t){Di(e,this._managedElements[e.sourceId]);var r=this._set(e,t,0);Ai(e,this._managedElements[r.newSourceId])}},{key:"setTarget",value:function(e,t){Di(e,this._managedElements[e.targetId]);var r=this._set(e,t,1);Ai(e,this._managedElements[r.newTargetId])}},{key:"setConnectionType",value:function(e,t,r){e.setType(t,r),this._paintConnection(e)}},{key:"isHoverSuspended",value:function(){return this.hoverSuspended}},{key:"setSuspendDrawing",value:function(e,t){var r=this._suspendDrawing;return this._suspendDrawing=e,e?this._suspendedAt=""+new Date().getTime():(this._suspendedAt=null,this.viewport.recomputeBounds()),t&&this.repaintEverything(),r}},{key:"getSuspendedAt",value:function(){return this._suspendedAt}},{key:"batch",value:function(e,t){var r=this._suspendDrawing===!0;r||this.setSuspendDrawing(!0),e(),r||this.setSuspendDrawing(!1,!t)}},{key:"each",value:function(e,t){if(e!=null){if(e.length!=null)for(var r=0;r<e.length;r++)t(e[r]);else t(e);return this}}},{key:"updateOffset",value:function(e){var t=e.elId;return e.recalc?this.viewport.refreshElement(t):this.viewport.getPosition(t)}},{key:"deleteConnection",value:function(e,t){if(e!=null&&e.deleted!==!0&&(t=t||{},t.force||wl(!0,!1,[[e.endpoints[0],lr,[e]],[e.endpoints[1],lr,[e]],[e,lr,[e]],[this,Vl,[Jl,e]]]))){Di(e,this._managedElements[e.sourceId],this._managedElements[e.targetId]),this.fireDetachEvent(e,!e.pending&&t.fireEvent!==!1,t.originalEvent);var r=e.endpoints[0],s=e.endpoints[1];return r!==t.endpointToIgnore&&r.detachFromConnection(e,null,!0),s!==t.endpointToIgnore&&s.detachFromConnection(e,null,!0),Ze(this.connections,function(l){return e.id===l.id}),e.destroy(),r!==t.endpointToIgnore&&r.deleteOnEmpty&&r.connections.length===0&&this.deleteEndpoint(r),s!==t.endpointToIgnore&&s.deleteOnEmpty&&s.connections.length===0&&this.deleteEndpoint(s),!0}return!1}},{key:"deleteEveryConnection",value:function(e){var t=this;e=e||{};var r=this.connections.length,s=0;return this.batch(function(){for(var l=0;l<r;l++)s+=t.deleteConnection(t.connections[0],e)?1:0}),s}},{key:"deleteConnectionsForElement",value:function(e,t){var r=this.getId(e),s=this._managedElements[r];if(s)for(var l=s.connections.length,u=0;u<l;u++)this.deleteConnection(s.connections[0],t);return this}},{key:"fireDetachEvent",value:function(e,t,r){var s=e.id!=null,l=s?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;t&&this.fire($l,l,r),this.fire(Oa,l,r)}},{key:"fireMoveEvent",value:function(e,t){this.fire(Ta,e,t)}},{key:"manageAll",value:function(e,t){for(var r=Ve(e)?this.getSelector(this.getContainer(),e):e,s=0;s<r.length;s++)this.manage(r[s],null,t)}},{key:"manage",value:function(e,t,r){this.getAttribute(e,cn)==null&&(t=t||this.getAttribute(e,"id")||Ke(),this.setAttribute(e,cn,t));var s=this.getId(e);if(this._managedElements[s])r&&(this._managedElements[s].viewportElement=this.updateOffset({elId:s,timestamp:null,recalc:!0}));else{var l={el:e,endpoints:[],connections:[],rotation:0,data:{}};this._managedElements[s]=l,this._suspendDrawing?l.viewportElement=this.viewport.registerElement(s,!0):l.viewportElement=this.updateOffset({elId:s,recalc:!0}),this.fire(Xl,{el:e})}return this._managedElements[s]}},{key:"getManagedData",value:function(e,t,r){if(this._managedElements[e]){var s=this._managedElements[e].data[t];return s!=null?s[r]:null}}},{key:"setManagedData",value:function(e,t,r,s){this._managedElements[e]&&(this._managedElements[e].data[t]=this._managedElements[e].data[t]||{},this._managedElements[e].data[t][r]=s)}},{key:"getManagedElement",value:function(e){return this._managedElements[e]?this._managedElements[e].el:null}},{key:"unmanage",value:function(e,t){var r=this;this.removeAllEndpoints(e,!0);var s=function(u){var c=r.getId(u);r.removeAttribute(u,cn),delete r._managedElements[c],r.viewport.remove(c),r.fire(Kl,{el:u,id:c}),u&&t&&r._removeElement(u)};this._getAssociatedElements(e).map(s),s(e)}},{key:"rotate",value:function(e,t,r){var s=this.getId(e);return this._managedElements[s]&&(this._managedElements[s].rotation=t,this.viewport.rotateElement(s,t),r!==!0)?this.revalidate(e):{c:new Set,e:new Set}}},{key:"_getRotation",value:function(e){var t=this._managedElements[e];return t!=null&&t.rotation||0}},{key:"_getRotations",value:function(e){var t=this,r=[],s=this._managedElements[e],l=function u(c){if(c.group!=null){var d=t._managedElements[c.group];d!=null&&(r.push({r:d.viewportElement.r,c:d.viewportElement.c}),u(d))}};return s!=null&&(r.push({r:s.viewportElement.r||0,c:s.viewportElement.c}),l(s)),r}},{key:"_applyRotations",value:function(e,t){var r=e.slice(),s={x:r[0],y:r[1],cr:0,sr:0};return z(t,function(l){s=Ji(s,l.c,l.r)}),s}},{key:"_applyRotationsXY",value:function(e,t){return z(t,function(r){e=Ji(e,r.c,r.r)}),e}},{key:"_internal_newEndpoint",value:function(e){var t=K({},e),r=this.manage(t.element);t.elementId=this.getId(t.element),t.id="ep_"+this._idstamp();var s=new or(this,t);return jv(r,s),e.uuid&&this.endpointsByUUID.set(e.uuid,s),kl(this.endpointsByElement,s.elementId,s),this._suspendDrawing||this._paintEndpoint(s,{timestamp:this._suspendedAt}),s}},{key:"_deriveEndpointAndAnchorSpec",value:function(e,t){for(var r=((t?"":"default ")+e).split(/[\s]/),s=null,l=null,u=null,c=null,d=0;d<r.length;d++){var f=this.getConnectionType(r[d]);f&&(f.endpoints&&(s=f.endpoints),f.endpoint&&(l=f.endpoint),f.anchors&&(c=f.anchors),f.anchor&&(u=f.anchor))}return{endpoints:s||[l,l],anchors:c||[u,u]}}},{key:"revalidate",value:function(e,t){var r=this.getId(e);return this.updateOffset({elId:r,recalc:!0,timestamp:t}),this.repaint(e)}},{key:"repaintEverything",value:function(){var e=Ke(),t;for(t in this._managedElements)this.viewport.refreshElement(t,!0);this.viewport.recomputeBounds();for(t in this._managedElements)this.repaint(this._managedElements[t].el,e,!0);return this}},{key:"setElementPosition",value:function(e,t,r){var s=this.getId(e);return this.viewport.setPosition(s,t,r),this.repaint(e)}},{key:"repaint",value:function(e,t,r){var s={c:new Set,e:new Set},l=function(p){p.c.forEach(function(y){return s.c.add(y)}),p.e.forEach(function(y){return s.e.add(y)})};if(!this._suspendDrawing){var u=this.getId(e);if(e!=null){var c=this._getAssociatedElements(e);if(t==null&&(t=Ke()),!r)for(var d=0;d<c.length;d++)this.updateOffset({elId:this.getId(c[d]),recalc:!0,timestamp:t});if(l(this.router.redraw(u,t,null)),c.length>0)for(var f=0;f<c.length;f++)l(this.router.redraw(this.getId(c[f]),t,null))}}return s}},{key:"unregisterEndpoint",value:function(e){var t=e.getUuid();t&&this.endpointsByUUID.delete(t),Bv(this._managedElements[e.elementId],e);var r=this.endpointsByElement[e.elementId];r!=null&&(this.endpointsByElement[e.elementId]=r.filter(function(s){return s!==e})),this.fire(Yl,e)}},{key:"_maybePruneEndpoint",value:function(e){return e.deleteOnEmpty&&e.connections.length===0?(this.deleteEndpoint(e),!0):!1}},{key:"deleteEndpoint",value:function(e){var t=this,r=typeof e=="string"?this.endpointsByUUID.get(e):e;if(r){var s=r.proxiedBy,l=r.connections.slice();z(l,function(u){r.detachFromConnection(u,null,!0)}),this.unregisterEndpoint(r),r.destroy(),z(l,function(u){t.deleteConnection(u,{force:!0,endpointToIgnore:r})}),s!=null&&this.deleteEndpoint(s)}return this}},{key:"addEndpoint",value:function(e,t,r){r=r||{};var s=K({},r);K(s,t||{});var l=K({element:e},s);return this._internal_newEndpoint(l)}},{key:"addEndpoints",value:function(e,t,r){for(var s=[],l=0,u=t.length;l<u;l++)s.push(this.addEndpoint(e,t[l],r));return s}},{key:"reset",value:function(){var e=this;this.silently(function(){e.endpointsByElement={},e._managedElements={},e.endpointsByUUID.clear(),e.viewport.reset(),e.router.reset(),e.groupManager.reset(),e.connections.length=0})}},{key:"destroy",value:function(){this.reset(),this.unbind(),this.sourceSelectors.length=0,this.targetSelectors.length=0,this._connectionTypes.clear(),this._endpointTypes.clear()}},{key:"getEndpoints",value:function(e){return this.endpointsByElement[this.getId(e)]||[]}},{key:"getEndpoint",value:function(e){return this.endpointsByUUID.get(e)}},{key:"setEndpointUuid",value:function(e,t){e.uuid&&this.endpointsByUUID.delete(e.uuid),e.uuid=t,this.endpointsByUUID.set(t,e)}},{key:"connect",value:function(e,t){try{var r=this._prepareConnectionParams(e,t),s=this._newConnection(r);return this._finaliseConnection(s,r),s}catch(l){We(l);return}}},{key:"_prepareConnectionParams",value:function(e,t){var r=K({},e);t&&K(r,t);var s=r;if(s.source&&s.source.endpoint&&(s.sourceEndpoint=s.source),s.target&&s.target.endpoint&&(s.targetEndpoint=s.target),e.uuids&&(s.sourceEndpoint=this.getEndpoint(e.uuids[0]),s.targetEndpoint=this.getEndpoint(e.uuids[1])),s.sourceEndpoint!=null){if(s.sourceEndpoint.isFull())throw Xd;if(s.type||(s.type=s.sourceEndpoint.edgeType),s.sourceEndpoint.connectorOverlays){s.overlays=s.overlays||[];for(var l=0,u=s.sourceEndpoint.connectorOverlays.length;l<u;l++)s.overlays.push(s.sourceEndpoint.connectorOverlays[l])}s.sourceEndpoint.scope&&(s.scope=s.sourceEndpoint.scope)}else if(s.source==null)throw Kd;if(s.targetEndpoint!=null){if(s.targetEndpoint.isFull())throw Wd}else if(s.target==null)throw zd;if(s.sourceEndpoint&&s.targetEndpoint&&!Fv(s.sourceEndpoint,s.targetEndpoint))throw"Cannot establish connection: scopes do not match";return s}},{key:"_newConnection",value:function(e){e.id="con_"+this._idstamp();var t=new ri(this,e);return Ai(t,this._managedElements[t.sourceId],this._managedElements[t.targetId]),this._paintConnection(t),t}},{key:"_finaliseConnection",value:function(e,t,r){t=t||{},e.suspendedEndpoint||this.connections.push(e),e.pending=null,e.endpoints[0].isTemporarySource=!1,this.repaint(e.source);var s={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};this.fire(Hl,s,r),!t.doNotFireConnectionEvent&&t.fireEvent!==!1&&this.fire(Pa,s,r)}},{key:"removeAllEndpoints",value:function(e,t){var r=this,s=function(u){var c=r.getId(u),d=r.endpointsByElement[c],f,h;if(d)for(f=0,h=d.length;f<h;f++)r.deleteEndpoint(d[f]);delete r.endpointsByElement[c]};return t&&this._getAssociatedElements(e).map(s),s(e),this}},{key:"_createSourceDefinition",value:function(e,t){var r=K({},t);K(r,e),r.edgeType=r.edgeType||to;var s=this._deriveEndpointAndAnchorSpec(r.edgeType);r.endpoint=r.endpoint||s.endpoints[0],r.anchor=r.anchor||s.anchors[0];var l=r.maxConnections||-1,u={def:K({},r),uniqueEndpoint:r.uniqueEndpoint,maxConnections:l,enabled:!0,endpoint:null};return u}},{key:"addSourceSelector",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this._createSourceDefinition(t),l=new Is(e,s,r);return this.sourceSelectors.push(l),l}},{key:"removeSourceSelector",value:function(e){Ze(this.sourceSelectors,function(t){return t===e})}},{key:"removeTargetSelector",value:function(e){Ze(this.targetSelectors,function(t){return t===e})}},{key:"addTargetSelector",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=this._createTargetDefinition(t),l=new Is(e,s,r);return this.targetSelectors.push(l),l}},{key:"_createTargetDefinition",value:function(e,t){var r=K({},t);K(r,e),r.edgeType=r.edgeType||to;var s=r.maxConnections||-1,l={def:K({},r),uniqueEndpoint:r.uniqueEndpoint,maxConnections:s,enabled:!0,endpoint:null};return l}},{key:"show",value:function(e,t){return this._setVisible(e,Qo,t)}},{key:"hide",value:function(e,t){return this._setVisible(e,fr,t)}},{key:"_setVisible",value:function(e,t,r){var s=t===Qo,l=null;r&&(l=function(d){d.setVisible(s,!0,!0)});var u=this.getId(e);return this._operation(e,function(c){if(s&&r){var d=c.sourceId===u?1:0;c.endpoints[d].isVisible()&&c.setVisible(!0)}else c.setVisible(s)},l),this}},{key:"toggleVisible",value:function(e,t){var r=null;t&&(r=function(l){var u=l.isVisible();l.setVisible(!u)}),this._operation(e,function(s){var l=s.isVisible();s.setVisible(!l)},r)}},{key:"_operation",value:function(e,t,r){var s=this.getId(e),l=this.endpointsByElement[s];if(l&&l.length)for(var u=0,c=l.length;u<c;u++){for(var d=0,f=l[u].connections.length;d<f;d++){var h=t(l[u].connections[d]);if(h)return}r&&r(l[u])}}},{key:"registerConnectionType",value:function(e,t){if(this._connectionTypes.set(e,K({},t)),t.overlays){for(var r={},s=0;s<t.overlays.length;s++){var l=ia(t.overlays[s]);r[l.options.id]=l}this._connectionTypes.get(e).overlays=r}}},{key:"registerConnectionTypes",value:function(e){for(var t in e)this.registerConnectionType(t,e[t])}},{key:"registerEndpointType",value:function(e,t){if(this._endpointTypes.set(e,K({},t)),t.overlays){for(var r={},s=0;s<t.overlays.length;s++){var l=ia(t.overlays[s]);r[l.options.id]=l}this._endpointTypes.get(e).overlays=r}}},{key:"registerEndpointTypes",value:function(e){for(var t in e)this.registerEndpointType(t,e[t])}},{key:"getType",value:function(e,t){return t==="connection"?this.getConnectionType(e):this.getEndpointType(e)}},{key:"getConnectionType",value:function(e){return this._connectionTypes.get(e)}},{key:"getEndpointType",value:function(e){return this._endpointTypes.get(e)}},{key:"importDefaults",value:function(e){for(var t in e)this.defaults[t]=e[t];return this.defaults[Jn]!=null&&(this.defaults[Jn].strokeWidth=this.defaults[Jn].strokeWidth||2),e.container&&this.setContainer(e.container),this}},{key:"restoreDefaults",value:function(){return this.defaults=K({},this._initialDefaults),this}},{key:"getManagedElements",value:function(){return this._managedElements}},{key:"proxyConnection",value:function(e,t,r,s,l){var u=e.proxies[t]!=null,c,d=u?e.proxies[t].originalEp.elementId:e.endpoints[t].elementId,f=u?e.proxies[t].originalEp:e.endpoints[t],h=this.getId(r);e.proxies[t]?e.proxies[t].ep.elementId===h?c=e.proxies[t].ep:(e.proxies[t].ep.detachFromConnection(e,t),c=this._internal_newEndpoint({element:r,endpoint:s(e,t),anchor:l(e,t),parameters:{isProxyEndpoint:!0}})):c=this._internal_newEndpoint({element:r,endpoint:s(e,t),anchor:l(e,t),parameters:{isProxyEndpoint:!0}}),c.deleteOnEmpty=!0,e.proxies[t]={ep:c,originalEp:f},this.sourceOrTargetChanged(d,h,e,r,t),f.detachFromConnection(e,null,!0),c.connections=[e],e.endpoints[t]=c,f.proxiedBy=c,f.setVisible(!1),e.setVisible(!0),this.revalidate(r)}},{key:"unproxyConnection",value:function(e,t){if(!(e.proxies==null||e.proxies[t]==null)){var r=e.proxies[t].originalEp.element,s=e.proxies[t].originalEp.elementId,l=e.proxies[t].ep.elementId;e.endpoints[t]=e.proxies[t].originalEp,delete e.proxies[t].originalEp.proxiedBy,this.sourceOrTargetChanged(l,s,e,r,t),e.proxies[t].ep.detachFromConnection(e,null),e.proxies[t].originalEp.addConnection(e),e.isVisible()&&e.proxies[t].originalEp.setVisible(!0),e.proxies[t]=null,gn(e.proxies,function(u){return u!=null})===-1&&(e.proxies.length=0)}}},{key:"sourceOrTargetChanged",value:function(e,t,r,s,l){e!==t&&(l===0?(r.sourceId=t,r.source=s):l===1&&(r.targetId=t,r.target=s),Di(r,this._managedElements[e]),Ai(r,this._managedElements[t]))}},{key:"getGroup",value:function(e){return this.groupManager.getGroup(e)}},{key:"getGroupFor",value:function(e){return this.groupManager.getGroupFor(e)}},{key:"addGroup",value:function(e){return this.groupManager.addGroup(e)}},{key:"addToGroup",value:function(e){for(var t,r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return(t=this.groupManager).addToGroup.apply(t,[e,!1].concat(s))}},{key:"collapseGroup",value:function(e){this.groupManager.collapseGroup(e)}},{key:"expandGroup",value:function(e){this.groupManager.expandGroup(e)}},{key:"toggleGroup",value:function(e){this.groupManager.toggleGroup(e)}},{key:"removeGroup",value:function(e,t,r,s){return this.groupManager.removeGroup(e,t,r,s)}},{key:"removeAllGroups",value:function(e,t){this.groupManager.removeAllGroups(e,t,!1)}},{key:"removeFromGroup",value:function(e,t,r){this.groupManager.removeFromGroup(e,r,t),this._appendElement(t,this.getContainer()),this.updateOffset({recalc:!0,elId:this.getId(t)})}},{key:"_paintEndpoint",value:function(e,t){function r(x){var C=0;if(t.elementWithPrecedence!=null){for(var S=0;S<x.connections.length;S++)if(x.connections[S].sourceId===t.elementWithPrecedence||x.connections[S].targetId===t.elementWithPrecedence){C=S;break}}return x.connections[C]}t=t||{};var s=t.timestamp,l=t.recalc!==!1;if(!s||e.timestamp!==s){var u=this.viewport.getPosition(e.elementId),c=t.offset?{x:t.offset.x,y:t.offset.y}:{x:u.x,y:u.y};if(c!=null){var d=t.anchorLoc;if(d==null){var f={xy:c,wh:u,element:e,timestamp:s};if(l&&this.router.isDynamicAnchor(e)&&e.connections.length>0){var h=r(e),p=h.endpoints[0]===e?1:0,y=p===0?h.sourceId:h.targetId,g=this.viewport.getPosition(y);f.index=p===0?1:0,f.connection=h,f.txy=g,f.twh=g,f.tElement=h.endpoints[p],f.tRotation=this._getRotations(y)}else e.connections.length>0&&(f.connection=e.connections[0]);f.rotation=this._getRotations(e.elementId),d=this.router.computeAnchorLocation(e._anchor,f)}e.endpoint.compute(d,this.router.getEndpointOrientation(e),e.paintStyleInUse),this.renderEndpoint(e,e.paintStyleInUse),e.timestamp=s;for(var E in e.overlays)if(e.overlays.hasOwnProperty(E)){var b=e.overlays[E];b.isVisible()&&(e.overlayPlacements[E]=this.drawOverlay(b,e.endpoint,e.paintStyleInUse,e.getAbsoluteOverlayPosition(b)),this._paintOverlay(b,e.overlayPlacements[E],{xmin:0,ymin:0}))}}}}},{key:"_paintConnection",value:function(e,t){if(!this._suspendDrawing&&e.visible!==!1){t=t||{};var r=t.timestamp;if(r!=null&&r===e.lastPaintedAt)return;if(r==null||r!==e.lastPaintedAt){this.router.computePath(e,r);var s={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0};for(var l in e.overlays)if(e.overlays.hasOwnProperty(l)){var u=e.overlays[l];u.isVisible()&&(e.overlayPlacements[l]=this.drawOverlay(u,e.connector,e.paintStyleInUse,e.getAbsoluteOverlayPosition(u)),s.xmin=Math.min(s.xmin,e.overlayPlacements[l].xmin),s.xmax=Math.max(s.xmax,e.overlayPlacements[l].xmax),s.ymin=Math.min(s.ymin,e.overlayPlacements[l].ymin),s.ymax=Math.max(s.ymax,e.overlayPlacements[l].ymax))}var c=parseFloat(""+e.paintStyleInUse.strokeWidth||"1")/2,d=parseFloat(""+e.paintStyleInUse.strokeWidth||"0"),f={xmin:Math.min(e.connector.bounds.xmin-(c+d),s.xmin),ymin:Math.min(e.connector.bounds.ymin-(c+d),s.ymin),xmax:Math.max(e.connector.bounds.xmax+(c+d),s.xmax),ymax:Math.max(e.connector.bounds.ymax+(c+d),s.ymax)};this.paintConnector(e.connector,e.paintStyleInUse,f);for(var h in e.overlays)if(e.overlays.hasOwnProperty(h)){var p=e.overlays[h];p.isVisible()&&this._paintOverlay(p,e.overlayPlacements[h],f)}}e.lastPaintedAt=r}}},{key:"_refreshEndpoint",value:function(e){e._anchor.isFloating||(e.connections.length>0?this.addEndpointClass(e,this.endpointConnectedClass):this.removeEndpointClass(e,this.endpointConnectedClass),e.isFull()?this.addEndpointClass(e,this.endpointFullClass):this.removeEndpointClass(e,this.endpointFullClass))}},{key:"_makeConnector",value:function(e,t,r){return di.get(e,t,r)}},{key:"addOverlay",value:function(e,t,r){if(e.addOverlay(t),!r){var s=e instanceof or?e.element:e.source;this.revalidate(s)}}},{key:"removeOverlay",value:function(e,t){e.removeOverlay(t);var r=e instanceof or?e.element:e.source;this.revalidate(r)}},{key:"setOutlineColor",value:function(e,t){e.paintStyleInUse.outlineStroke=t,this._paintConnection(e)}},{key:"setOutlineWidth",value:function(e,t){e.paintStyleInUse.outlineWidth=t,this._paintConnection(e)}},{key:"setColor",value:function(e,t){e.paintStyleInUse.stroke=t,this._paintConnection(e)}},{key:"setLineWidth",value:function(e,t){e.paintStyleInUse.strokeWidth=t,this._paintConnection(e)}},{key:"setLineStyle",value:function(e,t){t.lineWidth!=null&&(e.paintStyleInUse.strokeWidth=t.lineWidth),t.outlineWidth!=null&&(e.paintStyleInUse.outlineWidth=t.outlineWidth),t.color!=null&&(e.paintStyleInUse.stroke=t.color),t.outlineColor!=null&&(e.paintStyleInUse.outlineStroke=t.outlineColor),this._paintConnection(e)}},{key:"getPathData",value:function(e){for(var t="",r=0;r<e.segments.length;r++)t+=e.segments[r].getPath(r===0),t+=" ";return t}}]),n}(ci),Cu={};function Ba(a,o){Cu[a]=o}function Ks(a,o,n){var i=o,e=ar(o.getBoundingClientRect)!==tu?o.getBoundingClientRect():{left:0,top:0,width:0,height:0},t=document.body,r=document.documentElement,s=window.pageYOffset||r.scrollTop||t.scrollTop,l=window.pageXOffset||r.scrollLeft||t.scrollLeft,u=r.clientTop||t.clientTop||0,c=r.clientLeft||t.clientLeft||0,d=0,f=0,h=e.top+s-u+d*n,p=e.left+l-c+f*n,y=no(a),g=e.width||i.offsetWidth*n,E=e.height||i.offsetHeight*n,b=(y.x-p)/g,x=(y.y-h)/E;return{x:b,y:x}}function qn(a){return oa(a)||aa(a)||sa(a)}function zs(a,o){a.canvas&&(a.canvas.style.display=o?"block":"none")}function Zs(a){a.canvas&&a.canvas.parentNode.removeChild(a.canvas),delete a.canvas}function kr(a){return a.canvas}function It(a){return Fa.getElement(a)}function On(a){return Fa.getElement(a,a.component,function(o){var n=a.create(o);return a.instance.addClass(n,a.instance.overlayClass),n})}function Vv(a,o,n,i){var e=a.x,t=a.y;return o._jsPlumbParentGroup&&o._jsPlumbParentGroup.constrain&&(e=Math.max(a.x,0),t=Math.max(a.y,0),e=Math.min(e,n.w-i.w),t=Math.min(t,n.h-i.h)),{x:e,y:t}}var Hv=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;if(W(this,n),t=o.call(this,i,e),t._instanceIndex=i,v(m(t),"containerType",null),v(m(t),"dragSelection",void 0),v(m(t),"dragManager",void 0),v(m(t),"_connectorClick",void 0),v(m(t),"_connectorDblClick",void 0),v(m(t),"_connectorTap",void 0),v(m(t),"_connectorDblTap",void 0),v(m(t),"_endpointClick",void 0),v(m(t),"_endpointDblClick",void 0),v(m(t),"_overlayClick",void 0),v(m(t),"_overlayDblClick",void 0),v(m(t),"_overlayTap",void 0),v(m(t),"_overlayDblTap",void 0),v(m(t),"_connectorMouseover",void 0),v(m(t),"_connectorMouseout",void 0),v(m(t),"_endpointMouseover",void 0),v(m(t),"_endpointMouseout",void 0),v(m(t),"_connectorContextmenu",void 0),v(m(t),"_connectorMousedown",void 0),v(m(t),"_connectorMouseup",void 0),v(m(t),"_endpointMousedown",void 0),v(m(t),"_endpointMouseup",void 0),v(m(t),"_overlayMouseover",void 0),v(m(t),"_overlayMouseout",void 0),v(m(t),"_elementClick",void 0),v(m(t),"_elementTap",void 0),v(m(t),"_elementDblTap",void 0),v(m(t),"_elementMouseenter",void 0),v(m(t),"_elementMouseexit",void 0),v(m(t),"_elementMousemove",void 0),v(m(t),"_elementMouseup",void 0),v(m(t),"_elementMousedown",void 0),v(m(t),"_elementContextmenu",void 0),v(m(t),"_resizeObserver",void 0),v(m(t),"eventManager",void 0),v(m(t),"draggingClass","jtk-dragging"),v(m(t),"elementDraggingClass","jtk-element-dragging"),v(m(t),"hoverClass","jtk-hover"),v(m(t),"sourceElementDraggingClass","jtk-source-element-dragging"),v(m(t),"targetElementDraggingClass","jtk-target-element-dragging"),v(m(t),"hoverSourceClass","jtk-source-hover"),v(m(t),"hoverTargetClass","jtk-target-hover"),v(m(t),"dragSelectClass","jtk-drag-select"),v(m(t),"managedElementsSelector",void 0),v(m(t),"elementsDraggable",void 0),v(m(t),"elementDragHandler",void 0),v(m(t),"groupDragOptions",void 0),v(m(t),"elementDragOptions",void 0),v(m(t),"svg",{node:function(s,l){return Qt(s,l)},attr:function(s,l){return Jt(s,l)},pos:function(s){return ql(s)}}),e=e||{},t.containerType=Zo(t.getContainer()),t.elementsDraggable=e&&e.elementsDraggable!==!1,t.managedElementsSelector=e&&e.managedElementsSelector||ke,t.eventManager=new wa,t.dragSelection=new Sh(m(t)),t.dragManager=new Dh(m(t),t.dragSelection),t.dragManager.addHandler(new Ms(m(t))),t.groupDragOptions={constrainFunction:Vv},t.dragManager.addHandler(new ks(m(t),t.dragSelection),t.groupDragOptions),t.elementDragHandler=new ra(m(t),t.dragSelection),t.elementDragOptions=e&&e.dragOptions||{},t.dragManager.addHandler(t.elementDragHandler,t.elementDragOptions),e&&e.dragOptions&&e.dragOptions.filter&&t.dragManager.addFilter(e.dragOptions.filter),t._createEventListeners(),t._attachEventDelegates(),e.resizeObserver!==!1)try{t._resizeObserver=new ResizeObserver(function(r){var s=r.filter(function(l){var u=t.getAttribute(l.target,cn);if(u!=null){var c=t.viewport._elementMap.get(u);return c?c.w!==l.contentRect.width||c.h!==l.contentRect.height:!1}else return!1});s.forEach(function(l){return t.revalidate(l.target)})})}catch{We("WARN: ResizeObserver could not be attached.")}return t}return Q(n,[{key:"fireOverlayMethod",value:function(e,t,r){var s=e.component instanceof ri?$t:Vn,l=_e(s,t);r._jsPlumbOverlay=e,e.fire(t,{e:r,overlay:e}),this.fire(l,e.component,r)}},{key:"addDragFilter",value:function(e,t){this.dragManager.addFilter(e,t)}},{key:"removeDragFilter",value:function(e){this.dragManager.removeFilter(e)}},{key:"setDragGrid",value:function(e){this.dragManager.setOption(this.elementDragHandler,{grid:e})}},{key:"setDragConstrainFunction",value:function(e){this.dragManager.setOption(this.elementDragHandler,{constrainFunction:e})}},{key:"_removeElement",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"_appendElement",value:function(e,t){t&&t.appendChild(e)}},{key:"_appendElementToGroup",value:function(e,t){this.getGroupContentArea(e).appendChild(t)}},{key:"_appendElementToContainer",value:function(e){this._appendElement(e,this.getContainer())}},{key:"_getAssociatedElements",value:function(e){var t=[];if(e.nodeType!==3&&e.nodeType!==8){var r=e.querySelectorAll(ke);Array.prototype.push.apply(t,r)}return t.filter(function(s){return s.nodeType!==3&&s.nodeType!==8})}},{key:"shouldFireEvent",value:function(e,t,r){return!0}},{key:"getClass",value:function(e){return pd(e)}},{key:"addClass",value:function(e,t){Dn(e,t)}},{key:"hasClass",value:function(e,t){return gd(e,t)}},{key:"removeClass",value:function(e,t){zo(e,t)}},{key:"toggleClass",value:function(e,t){yd(e,t)}},{key:"setAttribute",value:function(e,t,r){e.setAttribute(t,r)}},{key:"getAttribute",value:function(e,t){return e.getAttribute(t)}},{key:"setAttributes",value:function(e,t){for(var r in t)e.setAttribute(r,t[r])}},{key:"removeAttribute",value:function(e,t){e.removeAttribute&&e.removeAttribute(t)}},{key:"on",value:function(e,t,r,s){var l=this,u=function(d){s==null?l.eventManager.on(d,t,r):l.eventManager.on(d,t,r,s)};return qr(e)?z(e,function(c){return u(c)}):u(e),this}},{key:"off",value:function(e,t,r){var s=this;return qr(e)?z(e,function(l){return s.eventManager.off(l,t,r)}):this.eventManager.off(e,t,r),this}},{key:"trigger",value:function(e,t,r,s,l){this.eventManager.trigger(e,t,r,s,l)}},{key:"getOffsetRelativeToRoot",value:function(e){return nr(e)}},{key:"getOffset",value:function(e){for(var t=e,r=this.getContainer(),s=this.getPosition(t),l=e!==r&&t.offsetParent!==r?t.offsetParent:null,u=function(h){h!=null&&h!==document.body&&(h.scrollTop>0||h.scrollLeft>0)&&(s.x-=h.scrollLeft,s.y-=h.scrollTop)};l!=null;)s.x+=l.offsetLeft,s.y+=l.offsetTop,u(l),l=l.offsetParent===r?null:l.offsetParent;if(r!=null&&(r.scrollTop>0||r.scrollLeft>0)){var c=t.offsetParent!=null?this.getStyle(t.offsetParent,gs):Sd,d=this.getStyle(t,gs);d!==ei&&d!==ss&&c!==ei&&c!==ss&&(s.x-=r.scrollLeft,s.y-=r.scrollTop)}return s}},{key:"getSize",value:function(e){var t=e;if(t.offsetWidth!=null)return md(e);if(t.width&&t.width.baseVal)return Ed(t)}},{key:"getPosition",value:function(e){var t=e;if(t.offsetLeft!=null)return{x:parseFloat(t.offsetLeft),y:parseFloat(t.offsetTop)};if(t.x&&t.x.baseVal)return bd(t)}},{key:"getStyle",value:function(e,t){return ar(window.getComputedStyle)!==tu?getComputedStyle(e,null).getPropertyValue(t):e.currentStyle[t]}},{key:"getGroupContentArea",value:function(e){var t=this.getSelector(e.el,Lf);return t&&t.length>0?t[0]:e.el}},{key:"getSelector",value:function(e,t){var r=null;if(arguments.length===1){if(!Ve(e)){var s=document.createDocumentFragment();return s.appendChild(e),bi(s.childNodes)}r=bi(document.querySelectorAll(e))}else r=bi(e.querySelectorAll(t));return r}},{key:"setPosition",value:function(e,t){var r=e;r.style.left=t.x+"px",r.style.top=t.y+"px"}},{key:"setDraggable",value:function(e,t){t?this.removeAttribute(e,Gi):this.setAttribute(e,Gi,nu)}},{key:"isDraggable",value:function(e){var t=this.getAttribute(e,Gi);return t==null||t===ir}},{key:"toggleDraggable",value:function(e){var t=this.isDraggable(e);return this.setDraggable(e,!t),!t}},{key:"_createEventListeners",value:function(){var e=function(E,b){if(!b.defaultPrevented&&b._jsPlumbOverlay==null){var x=Wt(vt(b),Dt,this.getContainer(),!0);this.fire(E,x.jtk.connector.connection,b)}};this._connectorClick=e.bind(this,Pf),this._connectorDblClick=e.bind(this,Tf),this._connectorTap=e.bind(this,Mf),this._connectorDblTap=e.bind(this,Of);var t=function(E,b){var x=vt(b).parentNode;if(x.jtk&&x.jtk.connector){var C=x.jtk.connector,S=C.connection;this.setConnectorHover(C,E),E?(this.addClass(S.source,this.hoverSourceClass),this.addClass(S.target,this.hoverTargetClass)):(this.removeClass(S.source,this.hoverSourceClass),this.removeClass(S.target,this.hoverTargetClass)),this.fire(E?Af:_f,x.jtk.connector.connection,b)}};this._connectorMouseover=t.bind(this,!0),this._connectorMouseout=t.bind(this,!1);var r=function(E,b){var x=vt(b).parentNode;x.jtk&&x.jtk.connector&&this.fire(E?Df:If,x.jtk.connector.connection,b)};this._connectorMouseup=r.bind(this,!0),this._connectorMousedown=r.bind(this,!1),this._connectorContextmenu=(function(g){var E=vt(g).parentNode;E.jtk&&E.jtk.connector&&this.fire(wf,E.jtk.connector.connection,g)}).bind(this);var s=function(E,b,x){!b.defaultPrevented&&b._jsPlumbOverlay==null&&this.fire(E,x.jtk.endpoint,b)};this._endpointClick=s.bind(this,mf),this._endpointDblClick=s.bind(this,Ef);var l=function(E,b){var x=vt(b);x.jtk&&x.jtk.endpoint&&(this.setEndpointHover(x.jtk.endpoint,E),this.fire(E?xf:bf,x.jtk.endpoint,b))};this._endpointMouseover=l.bind(this,!0),this._endpointMouseout=l.bind(this,!1);var u=function(E,b){var x=vt(b);x.jtk&&x.jtk.endpoint&&this.fire(E?Cf:Sf,x.jtk.endpoint,b)};this._endpointMouseup=u.bind(this,!0),this._endpointMousedown=u.bind(this,!1);var c=(function(g,E){var b=Wt(vt(E),Xt,this.getContainer(),!0),x=b.jtk.overlay;x&&this.fireOverlayMethod(x,g,E)}).bind(this);this._overlayClick=c.bind(this,ut),this._overlayDblClick=c.bind(this,Et),this._overlayTap=c.bind(this,kt),this._overlayDblTap=c.bind(this,Mt);var d=function(E,b){var x=Wt(vt(b),Xt,this.getContainer(),!0),C=x.jtk.overlay;C&&this.setOverlayHover(C,E)};this._overlayMouseover=d.bind(this,!0),this._overlayMouseout=d.bind(this,!1);var f=function(E,b,x){b.defaultPrevented||this.fire(b.detail===1?hs:df,x,b)};this._elementClick=f.bind(this,hs);var h=function(E,b,x){b.defaultPrevented||this.fire(ps,x,b)};this._elementTap=h.bind(this,ps);var p=function(E,b,x){b.defaultPrevented||this.fire(vs,x,b)};this._elementDblTap=p.bind(this,vs);var y=function(E,b){this.fire(E?hf:ff,vt(b),b)};this._elementMouseenter=y.bind(this,!0),this._elementMouseexit=y.bind(this,!1),this._elementMousemove=(function(g){this.fire(vf,vt(g),g)}).bind(this),this._elementMouseup=(function(g){this.fire(pf,vt(g),g)}).bind(this),this._elementMousedown=(function(g){this.fire(gf,vt(g),g)}).bind(this),this._elementContextmenu=(function(g){this.fire(yf,vt(g),g)}).bind(this)}},{key:"_attachEventDelegates",value:function(){var e=this.getContainer();this.eventManager.on(e,ut,Xt,this._overlayClick),this.eventManager.on(e,Et,Xt,this._overlayDblClick),this.eventManager.on(e,kt,Xt,this._overlayTap),this.eventManager.on(e,Mt,Xt,this._overlayDblTap),this.eventManager.on(e,ut,Dt,this._connectorClick),this.eventManager.on(e,Et,Dt,this._connectorDblClick),this.eventManager.on(e,kt,Dt,this._connectorTap),this.eventManager.on(e,Mt,Dt,this._connectorDblTap),this.eventManager.on(e,ut,Sn,this._endpointClick),this.eventManager.on(e,Et,Sn,this._endpointDblClick),this.eventManager.on(e,ut,this.managedElementsSelector,this._elementClick),this.eventManager.on(e,kt,this.managedElementsSelector,this._elementTap),this.eventManager.on(e,Mt,this.managedElementsSelector,this._elementDblTap),this.eventManager.on(e,Ct,Dt,this._connectorMouseover),this.eventManager.on(e,xt,Dt,this._connectorMouseout),this.eventManager.on(e,Kt,Dt,this._connectorContextmenu),this.eventManager.on(e,de,Dt,this._connectorMouseup),this.eventManager.on(e,ce,Dt,this._connectorMousedown),this.eventManager.on(e,Ct,Sn,this._endpointMouseover),this.eventManager.on(e,xt,Sn,this._endpointMouseout),this.eventManager.on(e,de,Sn,this._endpointMouseup),this.eventManager.on(e,ce,Sn,this._endpointMousedown),this.eventManager.on(e,Ct,Xt,this._overlayMouseover),this.eventManager.on(e,xt,Xt,this._overlayMouseout),this.eventManager.on(e,Ct,ke,this._elementMouseenter),this.eventManager.on(e,xt,ke,this._elementMouseexit),this.eventManager.on(e,ze,ke,this._elementMousemove),this.eventManager.on(e,de,ke,this._elementMouseup),this.eventManager.on(e,ce,ke,this._elementMousedown),this.eventManager.on(e,Kt,ke,this._elementContextmenu)}},{key:"_detachEventDelegates",value:function(){var e=this.getContainer();e&&(this.eventManager.off(e,ut,this._connectorClick),this.eventManager.off(e,Et,this._connectorDblClick),this.eventManager.off(e,kt,this._connectorTap),this.eventManager.off(e,Mt,this._connectorDblTap),this.eventManager.off(e,ut,this._endpointClick),this.eventManager.off(e,Et,this._endpointDblClick),this.eventManager.off(e,ut,this._overlayClick),this.eventManager.off(e,Et,this._overlayDblClick),this.eventManager.off(e,kt,this._overlayTap),this.eventManager.off(e,Mt,this._overlayDblTap),this.eventManager.off(e,ut,this._elementClick),this.eventManager.off(e,kt,this._elementTap),this.eventManager.off(e,Mt,this._elementDblTap),this.eventManager.off(e,Ct,this._connectorMouseover),this.eventManager.off(e,xt,this._connectorMouseout),this.eventManager.off(e,Kt,this._connectorContextmenu),this.eventManager.off(e,de,this._connectorMouseup),this.eventManager.off(e,ce,this._connectorMousedown),this.eventManager.off(e,Ct,this._endpointMouseover),this.eventManager.off(e,xt,this._endpointMouseout),this.eventManager.off(e,de,this._endpointMouseup),this.eventManager.off(e,ce,this._endpointMousedown),this.eventManager.off(e,Ct,this._overlayMouseover),this.eventManager.off(e,xt,this._overlayMouseout),this.eventManager.off(e,_a,this._elementMouseenter),this.eventManager.off(e,Aa,this._elementMouseexit),this.eventManager.off(e,ze,this._elementMousemove),this.eventManager.off(e,de,this._elementMouseup),this.eventManager.off(e,ce,this._elementMousedown),this.eventManager.off(e,Kt,this._elementContextmenu))}},{key:"setContainer",value:function(e){var t=this;if(e===document||e===document.body)throw new Error("Cannot set document or document.body as container element");this._detachEventDelegates();var r;this.dragManager!=null&&(r=this.dragManager.reset()),this.setAttribute(e,ds,Ke().replace("-",""));var s=this.getContainer();if(s!=null){s.removeAttribute(ds);var l=bi(s.childNodes).filter(function(u){return u!=null&&(t.hasClass(u,Ca)||t.hasClass(u,sr)||t.hasClass(u,Eo)||u.getAttribute&&u.getAttribute(cn)!=null)});z(l,function(u){e.appendChild(u)})}Ue(Le(n.prototype),"setContainer",this).call(this,e),this.containerType=Zo(e),this.eventManager!=null&&this._attachEventDelegates(),this.dragManager!=null&&(this.dragManager.addHandler(new Ms(this)),this.dragManager.addHandler(new ks(this,this.dragSelection),this.groupDragOptions),this.elementDragHandler=new ra(this,this.dragSelection),this.dragManager.addHandler(this.elementDragHandler,this.elementDragOptions),r!=null&&this.dragManager.setFilters(r))}},{key:"reset",value:function(){Ue(Le(n.prototype),"reset",this).call(this),this._resizeObserver&&this._resizeObserver.disconnect();var e=this.getContainer(),t=e.querySelectorAll([ke,Sn,Dt,Xt].join(","));z(t,function(r){return r.parentNode&&r.parentNode.removeChild(r)})}},{key:"destroy",value:function(){this._detachEventDelegates(),this.dragManager!=null&&this.dragManager.reset(),this.clearDragSelection(),Ue(Le(n.prototype),"destroy",this).call(this)}},{key:"unmanage",value:function(e,t){this._resizeObserver!=null&&this._resizeObserver.unobserve(e),this.removeFromDragSelection(e),Ue(Le(n.prototype),"unmanage",this).call(this,e,t)}},{key:"addToDragSelection",value:function(){for(var e=this,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];z(r,function(l){return e.dragSelection.add(l)})}},{key:"clearDragSelection",value:function(){this.dragSelection.clear()}},{key:"removeFromDragSelection",value:function(){for(var e=this,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];z(r,function(l){return e.dragSelection.remove(l)})}},{key:"toggleDragSelection",value:function(){for(var e=this,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];z(r,function(l){return e.dragSelection.toggle(l)})}},{key:"addToDragGroup",value:function(e){for(var t,r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];(t=this.elementDragHandler).addToDragGroup.apply(t,[e].concat(s))}},{key:"removeFromDragGroup",value:function(){var e;(e=this.elementDragHandler).removeFromDragGroup.apply(e,arguments)}},{key:"setDragGroupState",value:function(e){for(var t,r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];(t=this.elementDragHandler).setDragGroupState.apply(t,[e].concat(s))}},{key:"clearDragGroup",value:function(e){this.elementDragHandler.clearDragGroup(e)}},{key:"consume",value:function(e,t){Qr(e,t)}},{key:"rotate",value:function(e,t,r){var s=this.getId(e);return this._managedElements[s]?(this._managedElements[s].el.style.transform="rotate("+t+"deg)",this._managedElements[s].el.style.transformOrigin="center center",Ue(Le(n.prototype),"rotate",this).call(this,e,t,r)):{c:new Set,e:new Set}}},{key:"addOverlayClass",value:function(e,t){if(rn(e))e.instance.addClass(It(e),t);else if(qn(e))e.instance.addClass(Vr(e),t);else if(on(e))e.instance.addClass(On(e),t);else throw"Could not add class to overlay of type ["+e.type+"]"}},{key:"removeOverlayClass",value:function(e,t){if(rn(e))e.instance.removeClass(It(e),t);else if(qn(e))e.instance.removeClass(Vr(e),t);else if(on(e))e.instance.removeClass(On(e),t);else throw"Could not remove class from overlay of type ["+e.type+"]"}},{key:"_paintOverlay",value:function(e,t,r){if(rn(e)){It(e);var s=e.component.getXY();e.canvas.style.left=s.x+t.d.minx+"px",e.canvas.style.top=s.y+t.d.miny+"px"}else if(qn(e)){var l=isNaN(t.d.cxy.x)||isNaN(t.d.cxy.y)?"M 0 0":"M"+t.d.hxy.x+","+t.d.hxy.y+" L"+t.d.tail[0].x+","+t.d.tail[0].y+" L"+t.d.cxy.x+","+t.d.cxy.y+" L"+t.d.tail[1].x+","+t.d.tail[1].y+" Z";yv(e,l,t,r)}else if(on(e)){On(e);var u=e.component.getXY();e.canvas.style.left=u.x+t.d.minx+"px",e.canvas.style.top=u.y+t.d.miny+"px"}else throw"Could not paint overlay of type ["+e.type+"]"}},{key:"setOverlayVisible",value:function(e,t){var r=t?"block":"none";function s(l){l!=null&&(l.style.display=r)}rn(e)?s(It(e)):on(e)?s(On(e)):qn(e)&&s(e.path)}},{key:"reattachOverlay",value:function(e,t){rn(e)?e.instance._appendElement(It(e),this.getContainer()):on(e)?e.instance._appendElement(On(e),this.getContainer()):qn(e)&&this._appendElement(Vr(e),t.connector.canvas)}},{key:"setOverlayHover",value:function(e,t){var r;rn(e)?r=It(e):on(e)?r=On(e):qn(e)&&(r=Vr(e)),r!=null&&(this.hoverClass!=null&&(t?this.addClass(r,this.hoverClass):this.removeClass(r,this.hoverClass)),this.setHover(e.component,t))}},{key:"destroyOverlay",value:function(e){if(rn(e)){var t=It(e);t.parentNode.removeChild(t),delete e.canvas,delete e.cachedDimensions}else if(oa(e)||aa(e)||sa(e))mv(e);else if(on(e)){var r=On(e);r.parentNode.removeChild(r),delete e.canvas,delete e.cachedDimensions}}},{key:"drawOverlay",value:function(e,t,r,s){if(rn(e)||on(e)){var l=Fa._getDimensions(e);if(l!=null&&l.w!=null&&l.h!=null){var u={x:0,y:0};if(s)u={x:s.x,y:s.y};else if(t instanceof Er){var c=Array.isArray(e.location)?e.location:[e.location,e.location];u={x:c[0]*t.w,y:c[1]*t.h}}else{var d=e.location,f=!1;(Ve(e.location)||e.location<0||e.location>1)&&(d=parseInt(""+e.location,10),f=!0),u=t.pointOnPath(d,f)}var h=u.x-l.w/2,p=u.y-l.h/2;return{component:e,d:{minx:h,miny:p,td:l,cxy:u},xmin:h,xmax:h+l.w,ymin:p,ymax:p+l.h}}else return{xmin:0,xmax:0,ymin:0,ymax:0}}else{if(oa(e)||aa(e)||sa(e))return e.draw(t,r,s);throw"Could not draw overlay of type ["+e.type+"]"}}},{key:"updateLabel",value:function(e){if(Nn(e.label)){var t=e.label(this);t!=null?It(e).innerText=t:It(e).innerText=""}else e.labelText==null&&(e.labelText=e.label,e.labelText!=null?It(e).innerText=e.labelText:It(e).innerText="")}},{key:"setHover",value:function(e,t){e._hover=t,e instanceof or&&e.endpoint!=null?this.setEndpointHover(e,t,-1):e instanceof ri&&e.connector!=null&&this.setConnectorHover(e.connector,t)}},{key:"paintConnector",value:function(e,t,r){Ev(this,e,t,r)}},{key:"setConnectorHover",value:function(e,t,r){if(t===!1||!this.currentlyDragging&&!this.isHoverSuspended()){var s=e.canvas;s!=null&&(e.hoverClass!=null&&(t?this.addClass(s,e.hoverClass):this.removeClass(s,e.hoverClass)),t?this.addClass(s,this.hoverClass):this.removeClass(s,this.hoverClass)),e.connection.hoverPaintStyle!=null&&(e.connection.paintStyleInUse=t?e.connection.hoverPaintStyle:e.connection.paintStyle,this._suspendDrawing||this._paintConnection(e.connection)),e.connection.endpoints[0]!==r&&this.setEndpointHover(e.connection.endpoints[0],t,0,!0),e.connection.endpoints[1]!==r&&this.setEndpointHover(e.connection.endpoints[1],t,1,!0)}}},{key:"destroyConnector",value:function(e){e.connector!=null&&Zs(e.connector)}},{key:"addConnectorClass",value:function(e,t){e.canvas&&this.addClass(e.canvas,t)}},{key:"removeConnectorClass",value:function(e,t){e.canvas&&this.removeClass(e.canvas,t)}},{key:"getConnectorClass",value:function(e){return e.canvas?e.canvas.className.baseVal:""}},{key:"setConnectorVisible",value:function(e,t){zs(e,t)}},{key:"applyConnectorType",value:function(e,t){if(e.canvas&&t.cssClass){var r=Array.isArray(t.cssClass)?t.cssClass:[t.cssClass];this.addClass(e.canvas,r.join(" "))}}},{key:"addEndpointClass",value:function(e,t){var r=kr(e.endpoint);r!=null&&this.addClass(r,t)}},{key:"applyEndpointType",value:function(e,t){if(t.cssClass){var r=kr(e.endpoint);if(r){var s=Array.isArray(t.cssClass)?t.cssClass:[t.cssClass];this.addClass(r,s.join(" "))}}}},{key:"destroyEndpoint",value:function(e){var t=this.endpointAnchorClassPrefix+(e.currentAnchorClass?"-"+e.currentAnchorClass:"");this.removeClass(e.element,t),Zs(e.endpoint)}},{key:"renderEndpoint",value:function(e,t){var r=Cu[e.endpoint.type];r!=null?xv.paint(e.endpoint,r,t):We("jsPlumb: no endpoint renderer found for type ["+e.endpoint.type+"]")}},{key:"removeEndpointClass",value:function(e,t){var r=kr(e.endpoint);r!=null&&this.removeClass(r,t)}},{key:"getEndpointClass",value:function(e){var t=kr(e.endpoint);return t!=null?t.className:""}},{key:"setEndpointHover",value:function(e,t,r,s){if(e!=null&&(t===!1||!this.currentlyDragging&&!this.isHoverSuspended())){var l=kr(e.endpoint);if(l!=null&&(e.hoverClass!=null&&(t?this.addClass(l,e.hoverClass):this.removeClass(l,e.hoverClass)),r===0||r===1)){var u=r===0?this.hoverSourceClass:this.hoverTargetClass;t?this.addClass(l,u):this.removeClass(l,u)}if(e.hoverPaintStyle!=null&&(e.paintStyleInUse=t?e.hoverPaintStyle:e.paintStyle,this._suspendDrawing||this.renderEndpoint(e,e.paintStyleInUse)),!s)for(var c=0;c<e.connections.length;c++)this.setConnectorHover(e.connections[c].connector,t,e)}}},{key:"setEndpointVisible",value:function(e,t){zs(e.endpoint,t)}},{key:"setGroupVisible",value:function(e,t){for(var r=e.el.querySelectorAll(ke),s=0;s<r.length;s++)t?this.show(r[s],!0):this.hide(r[s],!0)}},{key:"deleteConnection",value:function(e,t){return e!=null&&e.deleted!==!0?(e.endpoints[0].deleted!==!0&&this.setEndpointHover(e.endpoints[0],!1,0,!0),e.endpoints[1].deleted!==!0&&this.setEndpointHover(e.endpoints[1],!1,1,!0),Ue(Le(n.prototype),"deleteConnection",this).call(this,e,t)):!1}},{key:"addSourceSelector",value:function(e,t,r){return this.addDragFilter(e),Ue(Le(n.prototype),"addSourceSelector",this).call(this,e,t,r)}},{key:"removeSourceSelector",value:function(e){this.removeDragFilter(e.selector),Ue(Le(n.prototype),"removeSourceSelector",this).call(this,e)}},{key:"manage",value:function(e,t,r){if(this.containerType===Gn.SVG&&!xd(e))throw new Error("ERROR: cannot manage non-svg element when container is an SVG element.");var s=Ue(Le(n.prototype),"manage",this).call(this,e,t,r);return s!=null&&this._resizeObserver!=null&&this._resizeObserver.observe(s.el),s}}]),n}(Uv),$v="circle",Yv=function(){Ba(Un.type,{makeNode:function(n,i){return Qt($v,{cx:n.w/2,cy:n.h/2,r:n.radius})},updateNode:function(n,i){Jt(i,{cx:""+n.w/2,cy:""+n.h/2,r:""+n.radius})}})},ii=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),v(m(t),"width",void 0),v(m(t),"height",void 0),v(m(t),"type",n.type),e=e||{},t.width=e.width||10,t.height=e.height||10,t}return Q(n,null,[{key:"_getParams",value:function(e){return{width:e.width,height:e.height}}}]),n}(Er);v(ii,"type","Rectangle");var Xv={type:ii.type,cls:ii,compute:function(o,n,i,e){var t=e.width||o.width,r=e.height||o.height,s=n.curX-t/2,l=n.curY-r/2;return o.x=s,o.y=l,o.w=t,o.h=r,[s,l,t,r]},getParams:function(o){return{width:o.width,height:o.height}}},Wv="rect",Kv=function(){Ba(ii.type,{makeNode:function(n,i){return Qt(Wv,{width:n.w,height:n.h})},updateNode:function(n,i){Jt(i,{width:n.w,height:n.h})}})},co=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),v(m(t),"type",n.type),t}return n}(Er);v(co,"type","Blank");var zv={type:co.type,cls:co,compute:function(o,n,i,e){return o.x=n.curX,o.y=n.curY,o.w=10,o.h=0,[n.curX,n.curY,10,0]},getParams:function(o){return{}}},Js={width:10,height:0,fill:"transparent",stroke:"transparent"},Zv=function(){Ba(co.type,{makeNode:function(n,i){return Qt("rect",Js)},updateNode:function(n,i){Jt(i,Js)}})};Yv();Zv();Kv();var Ft;(function(a){a[a.top=0]="top",a[a.bottom=1]="bottom"})(Ft||(Ft={}));var Ua=new Map;Ua.set(Ft.top,[Vt.TopRight,Vt.TopLeft]);Ua.set(Ft.bottom,[Vt.BottomRight,Vt.BottomLeft]);var Jv={deriveAnchor:function(o,n,i,e){return Ua.get(o)[n]}},Va="jtk-scrollable-list",Qv=mo(Va),Qs="scroll";(function(){function a(o,n){var i=this;W(this,a),this.instance=o,v(this,"options",void 0),v(this,"count",void 0),v(this,"lists",void 0),this.count=0,this.lists={},this.options=n||{},this.instance.bind(Xl,function(e){for(var t=i.instance.getSelector(e.el,Qv),r=0;r<t.length;r++)i.addList(t[r])}),this.instance.bind(Kl,function(e){i.removeList(e.el)}),this.instance.bind(Pa,function(e,t){if(t==null){var r=i.findParentList(e.target);r!=null&&r.newConnection(e.connection,e.target,1);var s=i.findParentList(e.source);s!=null&&s.newConnection(e.connection,e.source,0)}}),this.instance.bind(Zl,function(e){var t=e.dropEndpoint.element,r=i.findParentList(t);return r==null||t.offsetTop>=r.domElement.scrollTop&&t.offsetTop+t.offsetHeight<=r.domElement.scrollTop+r.domElement.offsetHeight})}return Q(a,[{key:"addList",value:function(n,i){var e=K({},Jv);K(e,this.options),i=K(e,i||{});var t=[this.instance._instanceIndex,this.count++].join("_");return this.lists[t]=new qv(this.instance,n,i,t),this.lists[t]}},{key:"getList",value:function(n){var i=this.instance.getAttribute(n,Va);if(i!=null)return this.lists[i]}},{key:"removeList",value:function(n){var i=this.getList(n);i&&(i.destroy(),delete this.lists[i.id])}},{key:"findParentList",value:function(n){for(var i=n.parentNode,e=this.instance.getContainer(),t;i!=null&&i!==e&&i!==document;){if(t=this.getList(i),t!=null)return t;i=i.parentNode}}}]),a})();var qv=function(){function a(o,n,i,e){W(this,a),this.instance=o,this.el=n,this.options=i,this.id=e,v(this,"_scrollHandler",void 0),v(this,"domElement",void 0),v(this,"elId",void 0),this.domElement=n,this.elId=this.instance.getId(n),o.setAttribute(n,Va,e),this._scrollHandler=this.scrollHandler.bind(this),this.domElement._jsPlumbScrollHandler=this._scrollHandler,o.on(n,Qs,this._scrollHandler),this._scrollHandler()}return Q(a,[{key:"deriveAnchor",value:function(n,i,e,t){return this.options.anchor?this.options.anchor:this.options.deriveAnchor(n,i,e,t)}},{key:"deriveEndpoint",value:function(n,i,e,t){return this.options.deriveEndpoint?this.options.deriveEndpoint(n,i,e,t):this.options.endpoint?this.options.endpoint:e.endpoint.type}},{key:"newConnection",value:function(n,i,e){i.offsetTop<this.el.scrollTop?this._proxyConnection(i,n,e,Ft.top):i.offsetTop+i.offsetHeight>this.el.scrollTop+this.domElement.offsetHeight&&this._proxyConnection(i,n,e,Ft.bottom)}},{key:"scrollHandler",value:function(){for(var n=this,i=this.instance.getSelector(this.el,ke),e=function(s){if(i[s].offsetTop<n.el.scrollTop)i[s]._jsPlumbProxies=i[s]._jsPlumbProxies||[],n.instance.select({source:i[s]}).each(function(u){n._proxyConnection(i[s],u,0,Ft.top)}),n.instance.select({target:i[s]}).each(function(u){n._proxyConnection(i[s],u,1,Ft.top)});else if(i[s].offsetTop+i[s].offsetHeight>n.el.scrollTop+n.domElement.offsetHeight)i[s]._jsPlumbProxies=i[s]._jsPlumbProxies||[],n.instance.select({source:i[s]}).each(function(u){n._proxyConnection(i[s],u,0,Ft.bottom)}),n.instance.select({target:i[s]}).each(function(u){n._proxyConnection(i[s],u,1,Ft.bottom)});else if(i[s]._jsPlumbProxies){for(var l=0;l<i[s]._jsPlumbProxies.length;l++)n.instance.unproxyConnection(i[s]._jsPlumbProxies[l][0],i[s]._jsPlumbProxies[l][1]);delete i[s]._jsPlumbProxies}n.instance.revalidate(i[s])},t=0;t<i.length;t++)e(t)}},{key:"_proxyConnection",value:function(n,i,e,t){var r=this;this.instance.proxyConnection(i,e,this.domElement,function(s,l){return r.deriveEndpoint(t,l,i.endpoints[l],i)},function(s,l){return r.deriveAnchor(t,l,i.endpoints[l],i)}),n._jsPlumbProxies=n._jsPlumbProxies||[],n._jsPlumbProxies.push([i,e])}},{key:"destroy",value:function(){this.instance.off(this.el,Qs,this._scrollHandler),delete this.domElement._jsPlumbScrollHandler;for(var n=this.instance.getSelector(this.el,ke),i=0;i<n.length;i++)if(n[i]._jsPlumbProxies){for(var e=0;e<n[i]._jsPlumbProxies.length;e++)this.instance.unproxyConnection(n[i]._jsPlumbProxies[e][0],n[i]._jsPlumbProxies[e][1]);delete n[i]._jsPlumbProxies}}}]),a}(),qs=1e-10;function el(a){var o=Math.floor(a),n=Math.ceil(a);return a-o<qs?o:n-a<qs?n:a}var Ha=function(a){Ee(n,a);var o=be(n);function n(i){var e;W(this,n),e=o.call(this,i),v(m(e),"type",n.segmentType),v(m(e),"cx",void 0),v(m(e),"cy",void 0),v(m(e),"radius",void 0),v(m(e),"anticlockwise",void 0),v(m(e),"startAngle",void 0),v(m(e),"endAngle",void 0),v(m(e),"sweep",void 0),v(m(e),"length",void 0),v(m(e),"circumference",void 0),v(m(e),"frac",void 0),e.cx=i.cx,e.cy=i.cy,e.radius=i.r,e.anticlockwise=i.ac,i.startAngle&&i.endAngle?(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.x1=e.cx+e.radius*Math.cos(e.startAngle),e.y1=e.cy+e.radius*Math.sin(e.startAngle),e.x2=e.cx+e.radius*Math.cos(e.endAngle),e.y2=e.cy+e.radius*Math.sin(e.endAngle)):(e.startAngle=e._calcAngle(e.x1,e.y1),e.endAngle=e._calcAngle(e.x2,e.y2)),e.endAngle<0&&(e.endAngle+=Pn),e.startAngle<0&&(e.startAngle+=Pn);var t=e.endAngle<e.startAngle?e.endAngle+Pn:e.endAngle;return e.sweep=Math.abs(t-e.startAngle),e.anticlockwise&&(e.sweep=Pn-e.sweep),e.circumference=2*Math.PI*e.radius,e.frac=e.sweep/Pn,e.length=e.circumference*e.frac,e.extents={xmin:e.cx-e.radius,xmax:e.cx+e.radius,ymin:e.cy-e.radius,ymax:e.cy+e.radius},e}return Q(n,[{key:"_calcAngle",value:function(e,t){return nh({x:this.cx,y:this.cy},{x:e,y:t})}},{key:"_calcAngleForLocation",value:function(e,t){if(e.anticlockwise){var r=e.startAngle<e.endAngle?e.startAngle+Pn:e.startAngle,s=Math.abs(r-e.endAngle);return r-s*t}else{var l=e.endAngle<e.startAngle?e.endAngle+Pn:e.endAngle,u=Math.abs(l-e.startAngle);return e.startAngle+u*t}}},{key:"getPath",value:function(e){var t=this.sweep>Math.PI?1:0,r=this.anticlockwise?0:1;return(e?"M"+this.x1+" "+this.y1+" ":"")+"A "+this.radius+" "+this.radius+" 0 "+t+","+r+" "+this.x2+" "+this.y2}},{key:"getLength",value:function(){return this.length}},{key:"pointOnPath",value:function(e,t){if(e===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(e===1)return{x:this.x2,y:this.y2,theta:this.endAngle};t&&(e=e/length);var r=this._calcAngleForLocation(this,e),s=this.cx+this.radius*Math.cos(r),l=this.cy+this.radius*Math.sin(r);return{x:el(s),y:el(l),theta:r}}},{key:"gradientAtPoint",value:function(e,t){var r=this.pointOnPath(e,t),s=th({x:this.cx,y:this.cy},r);return!this.anticlockwise&&(s===1/0||s===-1/0)&&(s*=-1),s}},{key:"pointAlongPathFrom",value:function(e,t,r){var s=this.pointOnPath(e,r),l=t/this.circumference*2*Math.PI,u=this.anticlockwise?-1:1,c=s.theta+u*l,d=this.cx+this.radius*Math.cos(c),f=this.cy+this.radius*Math.sin(c);return{x:d,y:f}}}]),n}(Da);v(Ha,"segmentType","Arc");var Su=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),t.connection=i,v(m(t),"showLoopback",void 0),v(m(t),"curviness",void 0),v(m(t),"margin",void 0),v(m(t),"proximityLimit",void 0),v(m(t),"orientation",void 0),v(m(t),"loopbackRadius",void 0),v(m(t),"clockwise",void 0),v(m(t),"isLoopbackCurrently",void 0),v(m(t),"geometry",null),e=e||{},t.showLoopback=e.showLoopback!==!1,t.curviness=e.curviness||10,t.margin=e.margin||5,t.proximityLimit=e.proximityLimit||80,t.clockwise=e.orientation&&e.orientation==="clockwise",t.loopbackRadius=e.loopbackRadius||25,t.isLoopbackCurrently=!1,t}return Q(n,[{key:"getDefaultStubs",value:function(){return[0,0]}},{key:"_compute",value:function(e,t){var r=t.sourcePos,s=t.targetPos,l=Math.abs(r.curX-s.curX),u=Math.abs(r.curY-s.curY);if(!this.showLoopback||t.sourceEndpoint.elementId!==t.targetEndpoint.elementId)this.isLoopbackCurrently=!1,this._computeBezier(e,t,r,s,l,u);else{this.isLoopbackCurrently=!0;var c=t.sourcePos.curX,d=t.sourcePos.curY-this.margin,f=c,h=d-this.loopbackRadius,p=f-this.loopbackRadius,y=h-this.loopbackRadius;l=2*this.loopbackRadius,u=2*this.loopbackRadius,e.points[0]=p,e.points[1]=y,e.points[2]=l,e.points[3]=u,this._addSegment(Ha,{loopback:!0,x1:c-p+4,y1:d-y,startAngle:0,endAngle:2*Math.PI,r:this.loopbackRadius,ac:!this.clockwise,x2:c-p-4,y2:d-y,cx:f-p,cy:h-y})}}},{key:"exportGeometry",value:function(){return this.geometry==null?null:{controlPoints:[K({},this.geometry.controlPoints[0]),K({},this.geometry.controlPoints[1])],source:K({},this.geometry.source),target:K({},this.geometry.target)}}},{key:"transformGeometry",value:function(e,t,r){return{controlPoints:[{x:e.controlPoints[0].x+t,y:e.controlPoints[0].y+r},{x:e.controlPoints[1].x+t,y:e.controlPoints[1].y+r}],source:this.transformAnchorPlacement(e.source,t,r),target:this.transformAnchorPlacement(e.target,t,r)}}},{key:"importGeometry",value:function(e){return e!=null?e.controlPoints==null||e.controlPoints.length!=2?(We("jsPlumb Bezier: cannot import geometry; controlPoints missing or does not have length 2"),this.setGeometry(null,!0),!1):e.controlPoints[0].x==null||e.controlPoints[0].y==null||e.controlPoints[1].x==null||e.controlPoints[1].y==null?(We("jsPlumb Bezier: cannot import geometry; controlPoints malformed"),this.setGeometry(null,!0),!1):e.source==null||e.source.curX==null||e.source.curY==null?(We("jsPlumb Bezier: cannot import geometry; source missing or malformed"),this.setGeometry(null,!0),!1):e.target==null||e.target.curX==null||e.target.curY==null?(We("jsPlumb Bezier: cannot import geometry; target missing or malformed"),this.setGeometry(null,!0),!1):(this.setGeometry(e,!1),!0):!1}}]),n}(xo),jt={subtract:function(o,n){return{x:o.x-n.x,y:o.y-n.y}},dotProduct:function(o,n){return o.x*n.x+o.y*n.y},square:function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},scale:function(o,n){return{x:o.x*n,y:o.y*n}}},Pu=64,ep=Math.pow(2,-Pu-1);function tp(a,o){for(var n=[],i=rp(a,o),e=o.length-1,t=2*e-1,r=la(i,t,n,0),s=jt.subtract(a,o[0]),l=jt.square(s),u=0,c,d=0;d<r;d++)s=jt.subtract(a,$a(o,e,n[d],null,null)),c=jt.square(s),c<l&&(l=c,u=n[d]);return s=jt.subtract(a,o[e]),c=jt.square(s),c<l&&(l=c,u=1),{location:u,distance:l}}function np(a,o){var n=tp(a,o);return{point:$a(o,o.length-1,n.location,null,null),location:n.location}}function rp(a,o){for(var n=o.length-1,i=2*n-1,e=[],t=[],r=[],s=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=n;u++)e[u]=jt.subtract(o[u],a);for(var c=0;c<=n-1;c++)t[c]=jt.subtract(o[c+1],o[c]),t[c]=jt.scale(t[c],3);for(var d=0;d<=n-1;d++)for(var f=0;f<=n;f++)r[d]||(r[d]=[]),r[d][f]=jt.dotProduct(t[d],e[f]);for(var h=0;h<=i;h++)s[h]||(s[h]=[]),s[h].y=0,s[h].x=parseFloat(""+h)/i;for(var p=n,y=n-1,g=0;g<=p+y;g++)for(var E=Math.max(0,g-y),b=Math.min(g,p),x=E;x<=b;x++){var C=g-x;s[x+C].y+=r[C][x]*l[C][x]}return s}function la(a,o,n,i){var e=[],t=[],r,s,l=[],u=[];switch(ip(a,o)){case 0:return 0;case 1:{if(i>=Pu)return n[0]=(a[0].x+a[o].x)/2,1;if(op(a,o))return n[0]=ap(a,o),1;break}}$a(a,o,.5,e,t),r=la(e,o,l,i+1),s=la(t,o,u,i+1);for(var c=0;c<r;c++)n[c]=l[c];for(var d=0;d<s;d++)n[d+r]=u[d];return r+s}function ip(a,o){var n=0,i,e;i=e=Qi(a[0].y);for(var t=1;t<=o;t++)i=Qi(a[t].y),i!=e&&n++,e=i;return n}function op(a,o){var n,i,e,t,r,s,l,u,c,d,f,h,p,y,g,E;s=a[0].y-a[o].y,l=a[o].x-a[0].x,u=a[0].x*a[o].y-a[o].x*a[0].y;var b,x;b=x=0;for(var C=1;C<o;C++){var S=s*a[C].x+l*a[C].y+u;S>b?b=S:S<x&&(x=S)}return f=0,h=1,p=0,y=s,g=l,E=u-b,c=f*g-y*h,d=1/c,i=(h*E-g*p)*d,y=s,g=l,E=u-x,c=f*g-y*h,d=1/c,e=(h*E-g*p)*d,t=Math.min(i,e),r=Math.max(i,e),n=r-t,n<ep?1:0}function ap(a,o){var n=1,i=0,e=a[o].x-a[0].x,t=a[o].y-a[0].y,r=a[0].x-0,s=a[0].y-0,l=e*i-t*n,u=1/l,c=(e*s-t*r)*u;return 0+n*c}function $a(a,o,n,i,e){for(var t=[[]],r=0;r<=o;r++)t[0][r]=a[r];for(var s=1;s<=o;s++)for(var l=0;l<=o-s;l++)t[s]||(t[s]=[]),t[s][l]||(t[s][l]={}),t[s][l].x=(1-n)*t[s-1][l].x+n*t[s-1][l+1].x,t[s][l].y=(1-n)*t[s-1][l].y+n*t[s-1][l+1].y;if(i!=null)for(var u=0;u<=o;u++)i[u]=t[u][0];if(e!=null)for(var c=0;c<=o;c++)e[c]=t[o-c][c];return t[o][0]}function sp(a,o){var n=[];a--;for(var i=0;i<=a;i++)n.push(lp(i/a,o));return n}function lp(a,o){var n={x:0,y:0};if(a===0)return o[0];var i=o.length-1;if(a===1)return o[i];var e=o,t=1-a;if(i===0)return o[0];if(i===1)return{x:t*e[0].x+a*e[1].x,y:t*e[0].y+a*e[1].y};if(4>i){var r=t*t,s=a*a,l=0,u,c,d;return i===2?(e=[e[0],e[1],e[2],n],u=r,c=2*(t*a),d=s):i===3&&(u=r*t,c=3*(r*a),d=3*(t*s),l=a*s),{x:u*e[0].x+c*e[1].x+d*e[2].x+l*e[3].x,y:u*e[0].y+c*e[1].y+d*e[2].y+l*e[3].y}}else return n}function up(a){var o=0;if(!Ou(a))for(var n=16,i=sp(n,a),e=0;e<n-1;e++){var t=i[e],r=i[e+1];o+=Tu(t,r)}return o}var tl=new Map;function cp(a){var o=tl.get(a);if(!o){o=[];var n=function(){return function(h){return Math.pow(h,a)}},i=function(){return function(h){return Math.pow(1-h,a)}},e=function(h){return function(p){return h}},t=function(){return function(h){return h}},r=function(){return function(h){return 1-h}},s=function(h){return function(p){for(var y=1,g=0;g<h.length;g++)y=y*h[g](p);return y}};o.push(n());for(var l=1;l<a;l++){for(var u=[e(a)],c=0;c<a-l;c++)u.push(t());for(var d=0;d<l;d++)u.push(r());o.push(s(u))}o.push(i()),tl.set(a,o)}return o}function oi(a,o){for(var n=cp(a.length-1),i=0,e=0,t=0;t<a.length;t++)i=i+a[t].x*n[t](o),e=e+a[t].y*n[t](o);return{x:i,y:e}}function Tu(a,o){return Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2))}function Ou(a){return a[0].x===a[1].x&&a[0].y===a[1].y}function _u(a,o,n){if(Ou(a))return{point:a[0],location:o};for(var i=oi(a,o),e=0,t=o,r=n>0?1:-1,s=null;e<Math.abs(n);)t+=.005*r,s=oi(a,t),e+=Tu(s,i),i=s;return{point:s,location:t}}function dp(a,o,n){return _u(a,o,n).point}function fp(a,o,n){return _u(a,o,n).location}function hp(a,o){var n=oi(a,o),i=oi(a.slice(0,a.length-1),o),e=i.y-n.y,t=i.x-n.x;return e===0?1/0:Math.atan(e/t)}function vp(a,o,n,i,e){var t=i-o,r=a-n,s=a*(o-i)+o*(n-a),l=pp(e),u=[t*l[0][0]+r*l[1][0],t*l[0][1]+r*l[1][1],t*l[0][2]+r*l[1][2],t*l[0][3]+r*l[1][3]+s],c=gp.apply(null,u),d=[];if(c!=null)for(var f=0;f<3;f++){var h=c[f],p=Math.pow(h,2),y=Math.pow(h,3),g={x:l[0][0]*y+l[0][1]*p+l[0][2]*h+l[0][3],y:l[1][0]*y+l[1][1]*p+l[1][2]*h+l[1][3]},E=void 0;n-a!==0?E=(g[0]-a)/(n-a):E=(g[1]-o)/(i-o),h>=0&&h<=1&&E>=0&&E<=1&&d.push(g)}return d}function nl(a,o){return[-a[0][o]+3*a[1][o]+-3*a[2][o]+a[3][o],3*a[0][o]-6*a[1][o]+3*a[2][o],-3*a[0][o]+3*a[1][o],a[0][o]]}function pp(a){return[nl(a,"x"),nl(a,"y")]}function gp(a,o,n,i){var e=o/a,t=n/a,r=i/a,s=(3*t-Math.pow(e,2))/9,l=(9*e*t-27*r-2*Math.pow(e,3))/54,u=Math.pow(s,3)+Math.pow(l,2),c,d,f=[0,0,0];if(u>=0)c=Qi(l+Math.sqrt(u))*Math.pow(Math.abs(l+Math.sqrt(u)),1/3),d=Qi(l-Math.sqrt(u))*Math.pow(Math.abs(l-Math.sqrt(u)),1/3),f[0]=-e/3+(c+d),f[1]=-e/3-(c+d)/2,f[2]=-e/3-(c+d)/2,Math.abs(Math.sqrt(3)*(c-d)/2)!==0&&(f[1]=-1,f[2]=-1);else{var h=Math.acos(l/Math.sqrt(-Math.pow(s,3)));f[0]=2*Math.sqrt(-s)*Math.cos(h/3)-e/3,f[1]=2*Math.sqrt(-s)*Math.cos((h+2*Math.PI)/3)-e/3,f[2]=2*Math.sqrt(-s)*Math.cos((h+4*Math.PI)/3)-e/3}for(var p=0;p<3;p++)(f[p]<0||f[p]>1)&&(f[p]=-1);return f}var Ya=function(a){Ee(n,a);var o=be(n);function n(i){var e;return W(this,n),e=o.call(this,i),v(m(e),"curve",void 0),v(m(e),"cp1x",void 0),v(m(e),"cp1y",void 0),v(m(e),"cp2x",void 0),v(m(e),"cp2y",void 0),v(m(e),"length",0),v(m(e),"type",n.segmentType),e.cp1x=i.cp1x,e.cp1y=i.cp1y,e.cp2x=i.cp2x,e.cp2y=i.cp2y,e.x1=i.x1,e.x2=i.x2,e.y1=i.y1,e.y2=i.y2,e.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}],e.extents={xmin:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),ymin:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),xmax:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),ymax:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},e}return Q(n,[{key:"getPath",value:function(e){return(e?"M "+this.x2+" "+this.y2+" ":"")+"C "+this.cp2x+" "+this.cp2y+" "+this.cp1x+" "+this.cp1y+" "+this.x1+" "+this.y1}},{key:"pointOnPath",value:function(e,t){return e=n._translateLocation(this.curve,e,t),oi(this.curve,e)}},{key:"gradientAtPoint",value:function(e,t){return e=n._translateLocation(this.curve,e,t),hp(this.curve,e)}},{key:"pointAlongPathFrom",value:function(e,t,r){return e=n._translateLocation(this.curve,e,r),dp(this.curve,e,t)}},{key:"getLength",value:function(){return(this.length==null||this.length===0)&&(this.length=up(this.curve)),this.length}},{key:"findClosestPointOnPath",value:function(e,t){var r=np({x:e,y:t},this.curve);return{d:Math.sqrt(Math.pow(r.point.x-e,2)+Math.pow(r.point.y-t,2)),x:r.point.x,y:r.point.y,l:1-r.location,s:this,x1:null,y1:null,x2:null,y2:null}}},{key:"lineIntersection",value:function(e,t,r,s){return vp(e,t,r,s,this.curve)}}],[{key:"_translateLocation",value:function(e,t,r){return r&&(t=fp(e,t>0?0:1,t)),t}}]),n}(Da);v(Ya,"segmentType","Bezier");var ua=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),t.connection=i,v(m(t),"type",n.type),v(m(t),"majorAnchor",void 0),v(m(t),"minorAnchor",void 0),e=e||{},t.majorAnchor=e.curviness||150,t.minorAnchor=10,t}return Q(n,[{key:"getCurviness",value:function(){return this.majorAnchor}},{key:"_findControlPoint",value:function(e,t,r,s,l){var u=s[0]!==l[0]||s[1]===l[1],c={x:0,y:0};return u?(l[0]===0?c.x=r.curX<t.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x+this.majorAnchor*l[0],l[1]===0?c.y=r.curY<t.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*s[1]):(s[0]===0?c.x=t.curX<r.curX?e.x+this.minorAnchor:e.x-this.minorAnchor:c.x=e.x-this.majorAnchor*s[0],s[1]===0?c.y=t.curY<r.curY?e.y+this.minorAnchor:e.y-this.minorAnchor:c.y=e.y+this.majorAnchor*l[1]),c}},{key:"_computeBezier",value:function(e,t,r,s,l,u){var c,d,f=r.curX<s.curX?l:0,h=r.curY<s.curY?u:0,p=r.curX<s.curX?0:l,y=r.curY<s.curY?0:u;this.edited!==!0?(c=this._findControlPoint({x:f,y:h},r,s,e.so,e.to),d=this._findControlPoint({x:p,y},s,r,e.to,e.so)):(c=this.geometry.controlPoints[0],d=this.geometry.controlPoints[1]),this.geometry={controlPoints:[c,d],source:t.sourcePos,target:t.targetPos},this._addSegment(Ya,{x1:f,y1:h,x2:p,y2:y,cp1x:c.x,cp1y:c.y,cp2x:d.x,cp2y:d.y})}}]),n}(Su);v(ua,"type","Bezier");function yp(a,o,n,i){return a<=n&&i<=o?1:a<=n&&o<=i?2:n<=a&&i>=o?3:4}function mp(a,o,n,i,e,t,r,s,l){if(s<=l)return{x:a,y:o};if(n===1)return i.curY<=0&&e.curY>=1?{x:a+(i.x<.5?-1*t:t),y:o}:i.curX>=1&&e.curX<=0?{x:a,y:o+(i.y<.5?-1*r:r)}:{x:a+-1*t,y:o+-1*r};if(n===2)return i.curY>=1&&e.curY<=0?{x:a+(i.x<.5?-1*t:t),y:o}:i.curX>=1&&e.curX<=0?{x:a,y:o+(i.y<.5?-1*r:r)}:{x:a+t,y:o+-1*r};if(n===3)return i.curY>=1&&e.curY<=0?{x:a+(i.x<.5?-1*t:t),y:o}:i.curX<=0&&e.curX>=1?{x:a,y:o+(i.y<.5?-1*r:r)}:{x:a+-1*t,y:o+-1*r};if(n===4)return i.curY<=0&&e.curY>=1?{x:a+(i.x<.5?-1*t:t),y:o}:i.curX<=0&&e.curX>=1?{x:a,y:o+(i.y<.5?-1*r:r)}:{x:a+t,y:o+-1*r}}var ca=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),t.connection=i,v(m(t),"type",n.type),v(m(t),"_controlPoint",void 0),t.curviness=e.curviness||10,t.margin=e.margin||5,t.proximityLimit=e.proximityLimit||80,t.clockwise=e.orientation&&e.orientation==="clockwise",t}return Q(n,[{key:"_computeBezier",value:function(e,t,r,s,l,u){var c=r.curX<s.curX?0:l,d=r.curY<s.curY?0:u,f=r.curX<s.curX?l:0,h=r.curY<s.curY?u:0;if(r.x===0&&(c-=this.margin),r.x===1&&(c+=this.margin),r.y===0&&(d-=this.margin),r.y===1&&(d+=this.margin),s.x===0&&(f-=this.margin),s.x===1&&(f+=this.margin),s.y===0&&(h-=this.margin),s.y===1&&(h+=this.margin),this.edited!==!0){var p=(c+f)/2,y=(d+h)/2,g=yp(c,d,f,h),E=Math.sqrt(Math.pow(f-c,2)+Math.pow(h-d,2));this._controlPoint=mp(p,y,g,t.sourcePos,t.targetPos,this.curviness,this.curviness,E,this.proximityLimit)}else this._controlPoint=this.geometry.controlPoints[0];var b,x,C,S;b=this._controlPoint.x,x=this._controlPoint.x,C=this._controlPoint.y,S=this._controlPoint.y,this.geometry={controlPoints:[this._controlPoint,this._controlPoint],source:t.sourcePos,target:t.targetPos},this._addSegment(Ya,{x1:f,y1:h,x2:c,y2:d,cp1x:b,cp1y:C,cp2x:x,cp2y:S})}}]),n}(Su);v(ca,"type","StateMachine");di.register(ua.type,ua);di.register(ca.type,ca);function rl(a){return a<0?-1:a===0?0:1}function il(a){return[rl(a[2]-a[0]),rl(a[3]-a[1])]}function ol(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))}function al(a){var o=[];return o.push.apply(o,a),o}var da=function(a){Ee(n,a);var o=be(n);function n(i,e){var t;return W(this,n),t=o.call(this,i,e),t.connection=i,v(m(t),"type",n.type),v(m(t),"internalSegments",[]),v(m(t),"midpoint",void 0),v(m(t),"alwaysRespectStubs",void 0),v(m(t),"cornerRadius",void 0),v(m(t),"lastx",void 0),v(m(t),"lasty",void 0),v(m(t),"lastOrientation",void 0),v(m(t),"loopbackRadius",void 0),v(m(t),"isLoopbackCurrently",void 0),t.midpoint=e.midpoint==null||isNaN(e.midpoint)?.5:e.midpoint,t.cornerRadius=e.cornerRadius!=null?e.cornerRadius:0,t.alwaysRespectStubs=e.alwaysRespectStubs===!0,t.lastx=null,t.lasty=null,t.lastOrientation=null,t.loopbackRadius=e.loopbackRadius||25,t.isLoopbackCurrently=!1,t}return Q(n,[{key:"getDefaultStubs",value:function(){return[30,30]}},{key:"addASegment",value:function(e,t,r){if(!(this.lastx===e&&this.lasty===t)){var s=this.lastx==null?r.sx:this.lastx,l=this.lasty==null?r.sy:this.lasty,u=s===e?"v":"h";this.lastx=e,this.lasty=t,this.internalSegments.push([s,l,e,t,u])}}},{key:"writeSegments",value:function(e){for(var t=null,r,s,l,u=0;u<this.internalSegments.length-1;u++){if(t=t||al(this.internalSegments[u]),r=al(this.internalSegments[u+1]),s=il(t),l=il(r),this.cornerRadius>0&&t[4]!==r[4]){var c=Math.min(ol(t),ol(r)),d=Math.min(this.cornerRadius,c/2);t[2]-=s[0]*d,t[3]-=s[1]*d,r[0]+=l[0]*d,r[1]+=l[1]*d;var f=s[1]===l[0]&&l[0]===1||s[1]===l[0]&&l[0]===0&&s[0]!==l[1]||s[1]===l[0]&&l[0]===-1,h=r[1]>t[3]?1:-1,p=r[0]>t[2]?1:-1,y=h===p,g=y&&f||!y&&!f?r[0]:t[2],E=y&&f||!y&&!f?t[3]:r[1];this._addSegment(Ln,{x1:t[0],y1:t[1],x2:t[2],y2:t[3]}),this._addSegment(Ha,{r:d,x1:t[2],y1:t[3],x2:r[0],y2:r[1],cx:g,cy:E,ac:f})}else this._addSegment(Ln,{x1:t[0],y1:t[1],x2:t[2],y2:t[3]});t=r}r!=null&&this._addSegment(Ln,{x1:r[0],y1:r[1],x2:r[2],y2:r[3]})}},{key:"_compute",value:function(e,t){var r=this;this.internalSegments.length=0,this.lastx=null,this.lasty=null,this.lastOrientation=null;var s=function(_){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},l={perpendicular:s,orthogonal:s,opposite:function(_){var P=e,O=_==="x"?0:1,I={x:function(){return P.so[O]===1&&(P.startStubX>P.endStubX&&P.tx>P.startStubX||P.sx>P.endStubX&&P.tx>P.sx)||P.so[O]===-1&&(P.startStubX<P.endStubX&&P.tx<P.startStubX||P.sx<P.endStubX&&P.tx<P.sx)},y:function(){return P.so[O]===1&&(P.startStubY>P.endStubY&&P.ty>P.startStubY||P.sy>P.endStubY&&P.ty>P.sy)||P.so[O]===-1&&(P.startStubY<P.endStubY&&P.ty<P.startStubY||P.sy<P.endStubY&&P.ty<P.sy)}};return!r.alwaysRespectStubs&&I[_]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[_]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},u=l[e.anchorOrientation](e.sourceAxis),c=e.sourceAxis==="x"?0:1,d=e.sourceAxis==="x"?1:0,f=u[c],h=u[d],p=u[c+2],y=u[d+2];this.addASegment(u[0],u[1],e);var g=e.startStubX+(e.endStubX-e.startStubX)*this.midpoint,E=e.startStubY+(e.endStubY-e.startStubY)*this.midpoint,b={x:[0,1],y:[1,0]},x={perpendicular:function(_,P,O,I,L){var M=e,N={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},G={x:[[M.startStubX,M.endStubX],null,[M.endStubX,M.startStubX]],y:[[M.startStubY,M.endStubY],null,[M.endStubY,M.startStubY]]},B={x:[[g,M.startStubY],[g,M.endStubY]],y:[[M.startStubX,E],[M.endStubX,E]]},k={x:[[M.endStubX,M.startStubY]],y:[[M.startStubX,M.endStubY]]},R={x:[[M.startStubX,M.endStubY],[M.endStubX,M.endStubY]],y:[[M.endStubX,M.startStubY],[M.endStubX,M.endStubY]]},H={x:[[M.startStubX,E],[M.endStubX,E],[M.endStubX,M.endStubY]],y:[[g,M.startStubY],[g,M.endStubY],[M.endStubX,M.endStubY]]},ve={x:[M.startStubY,M.endStubY],y:[M.startStubX,M.endStubX]},De=b[_][0],ye=b[_][1],Ce=M.so[De]+1,Re=M.to[ye]+1,Ie=M.to[ye]===-1&&ve[_][1]<ve[_][0]||M.to[ye]===1&&ve[_][1]>ve[_][0],Ae=G[_][Ce][0],xe=G[_][Ce][1],pe=N[_][Ce][Re];if(M.segment===pe[3]||M.segment===pe[2]&&Ie)return B[_];if(M.segment===pe[2]&&xe<Ae)return k[_];if(M.segment===pe[2]&&xe>=Ae||M.segment===pe[1]&&!Ie)return H[_];if(M.segment===pe[0]||M.segment===pe[1]&&Ie)return R[_]},orthogonal:function(_,P,O,I,L){var M=e,N={x:M.so[0]===-1?Math.min(P,I):Math.max(P,I),y:M.so[1]===-1?Math.min(P,I):Math.max(P,I)}[_];return{x:[[N,O],[N,L],[I,L]],y:[[O,N],[L,N],[L,I]]}[_]},opposite:function(_,P,O,I,L){var M=e,N={x:"y",y:"x"}[_],G={x:"h",y:"w"}[_],B=M["is"+_.toUpperCase()+"GreaterThanStubTimes2"];if(t.sourceEndpoint.elementId===t.targetEndpoint.elementId){var k=O+(1-t.sourceEndpoint._anchor.computedPosition[N])*t.sourceInfo[G]+r.maxStub;return{x:[[P,k],[I,k]],y:[[k,P],[k,I]]}[_]}else{if(!B||M.so[c]===1&&P>I||M.so[c]===-1&&P<I)return{x:[[P,E],[I,E]],y:[[g,P],[g,I]]}[_];if(M.so[c]===1&&P<I||M.so[c]===-1&&P>I)return{x:[[g,M.sy],[g,M.ty]],y:[[M.sx,E],[M.tx,E]]}[_]}}},C=x[e.anchorOrientation](e.sourceAxis,f,h,p,y);if(C)for(var S=0;S<C.length;S++)this.addASegment(C[S][0],C[S][1],e);this.addASegment(u[2],u[3],e),this.addASegment(e.tx,e.ty,e),this.writeSegments(e)}},{key:"transformGeometry",value:function(e,t,r){return e}}]),n}(xo);v(da,"type","Flowchart");di.register(da.type,da);vn.registerHandler(Ov);vn.registerHandler(Xv);vn.registerHandler(zv);di.register(uo.type,uo);function Ep(){var a=Math.floor(Math.random()*2e3),o=Math.floor(Math.random()*2e3);return{clientX:a,clientY:o,screenX:a,screenY:o,pageX:a,pageY:o}}var er={clientX:5e4,clientY:5e4,screenX:5e4,screenY:5e4,pageX:5e4,pageY:5e4};for(var Ii=0;Ii<256;Ii++)(Ii<16?"0":"")+Ii.toString(16);var bp=1e-11;(function(){function a(o,n,i){W(this,a),this._jsPlumb=o,this.ok=n,this.equal=i,v(this,"_divs",[]),v(this,"mottle",void 0),this.mottle=new wa}return Q(a,[{key:"_t",value:function(n,i,e,t){this.mottle.trigger(n,i,{pageX:e,pageY:t,screenX:e,screenY:t,clientX:e,clientY:t})}},{key:"addDiv",value:function(n,i,e,t,r,s,l){var u=document.createElement("div");return u.style.position="absolute",u.innerHTML=n,i?i.appendChild(u):this._jsPlumb.getContainer().appendChild(u),u.setAttribute("id",n),u.style.left=(t??Math.floor(Math.random()*1e3))+"px",u.style.top=(r??Math.floor(Math.random()*1e3))+"px",e&&(u.className=e),s&&(u.style.width=s+"px"),l&&(u.style.height=l+"px"),this._divs.push(n),u}},{key:"addDivs",value:function(n,i){for(var e=0;e<n.length;e++)this.addDiv(n[e],i)}},{key:"assertEndpointCount",value:function(n,i){var e=this._jsPlumb.getEndpoints(n),t=e?e.length:0;this.equal(t,i,n.getAttribute("data-jtk-managed")+" has "+i+(i>1||i==0?" endpoints":" endpoint"))}},{key:"_assertManagedEndpointCount",value:function(n,i){var e=this._jsPlumb.getId(n),t=this._jsPlumb._managedElements[e];this.equal(t.endpoints.length,i,e+" has "+i+" endpoints in managed record")}},{key:"_assertManagedConnectionCount",value:function(n,i){var e=this._jsPlumb.getId(n),t=this._jsPlumb._managedElements[e];this.equal(t.connections.length,i,e+" has "+i+" connections in managed record")}},{key:"_registerDiv",value:function(n){this._divs.push(n)}},{key:"makeDragStartEvt",value:function(n){var i=this.makeEvent(n),e=this._jsPlumb.getContainer();return i.clientX+=e.offsetLeft,i.screenX+=e.offsetLeft,i.pageX+=e.offsetLeft,i.clientY+=e.offsetTop,i.screenY+=e.offsetTop,i.pageY+=e.offsetTop,i}},{key:"getAttribute",value:function(n,i){return n.getAttribute(i)}},{key:"dragNodeBy",value:function(n,i,e,t){t=t||{},t.before&&t.before();var r=this.makeEvent(n);this._jsPlumb.trigger(n,ce,r),t.beforeMouseMove&&t.beforeMouseMove(),this._t(document,ze,r.pageX+i,r.pageY+e),t.beforeMouseUp&&t.beforeMouseUp(),this.mottle.trigger(document,de,null),t.after&&t.after()}},{key:"dragNodeTo",value:function(n,i,e,t){t=t||{};var r=this._jsPlumb.viewport.getPosition(this._jsPlumb.getId(n));t.before&&t.before();var s=this.makeEvent(n);this._jsPlumb.trigger(n,ce,s);var l=this._jsPlumb.getContainer().getBoundingClientRect();t.beforeMouseMove&&t.beforeMouseMove(),this._t(document,ze,l.x+i+r.w/2,l.y+e+r.h/2),t.beforeMouseUp&&t.beforeMouseUp(),this.mottle.trigger(document,de,null),t.after&&t.after()}},{key:"dragToGroup",value:function(n,i,e){var t=this._jsPlumb.getGroup(i),r=this._jsPlumb.viewport.getPosition(t.elId),s=r.x+r.w/2,l=r.y+r.h/2;this.dragNodeTo(n,s,l,e)}},{key:"aSyncDragNodeBy",value:function(n,i,e,t){var r=this;t=t||{},t.before&&t.before();var s=this.makeEvent(n);this._jsPlumb.trigger(n,ce,s),t.beforeMouseMove&&t.beforeMouseMove(),setTimeout(function(){r._t(document,ze,s.pageX+i,s.pageY+e),t.beforeMouseUp&&t.beforeMouseUp(),setTimeout(function(){r.mottle.trigger(document,de,null),t.after&&t.after()},45)},45)}},{key:"dragANodeAround",value:function(n,i,e){this._jsPlumb.trigger(n,ce,this.makeEvent(n));for(var t=Math.random()*50,r=0;r<t;r++){var s=Ep();n.style.left=s.screenX+"px",n.style.top=s.screenY+"px",this._jsPlumb.trigger(document,ze,s)}i&&this.ok(i(),e||"while dragging assert"),this._jsPlumb.trigger(document,de,er)}},{key:"dragConnection",value:function(n,i,e,t){var r=this.getCanvas(n),s=this.getCanvas(i),l=this.makeEvent(r),u=this.makeEvent(s);t=t||{};var c=this._jsPlumb.select().length;return this._jsPlumb.trigger(r,ce,l),t.beforeMouseMove&&t.beforeMouseMove(),this._jsPlumb.trigger(e?s:document,ze,u),t.beforeMouseUp&&t.beforeMouseUp(),this._jsPlumb.trigger(e?s:document,de,u),this._jsPlumb.select().get(c)}},{key:"aSyncDragConnection",value:function(n,i,e){var t=this;e=e||{};var r=this.getCanvas(n),s=this.getCanvas(i),l=this.makeEvent(r),u=this.makeEvent(s),c=this._jsPlumb.select().length;this._jsPlumb.trigger(r,ce,l),setTimeout(function(){e.beforeMouseMove&&e.beforeMouseMove(),t._jsPlumb.trigger(document,ze,u),setTimeout(function(){e.beforeMouseUp&&e.beforeMouseUp(),t._jsPlumb.trigger(s,de,u),e.after&&e.after(t._jsPlumb.select().get(c))},5)},5)}},{key:"dragAndAbortConnection",value:function(n){var i=this.getCanvas(n),e=this.makeEvent(i);this._jsPlumb.trigger(i,ce,e),this._jsPlumb.trigger(document,ze,er),this._jsPlumb.trigger(document,de,er)}},{key:"detachConnection",value:function(n,i){i=i||{};var e=this.getEndpointCanvas(n),t=this.makeEvent(e);i.before&&i.before(),this._jsPlumb.trigger(e,ce,t),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(document,ze,er),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(document,de,er),i.after&&i.after()}},{key:"detachAndReattachConnection",value:function(n,i){i=i||{};var e=this.getEndpointCanvas(n),t=this.makeEvent(e);i.before&&i.before(),this._jsPlumb.trigger(e,ce,t),i.beforeMouseMove&&i.beforeMouseMove(),this._jsPlumb.trigger(document,ze,er),this._jsPlumb.trigger(document,ze,t),i.beforeMouseUp&&i.beforeMouseUp(),this._jsPlumb.trigger(document,de,t),i.after&&i.after()}},{key:"detachConnectionByTarget",value:function(n,i){this.detachConnection(n.endpoints[1],i)}},{key:"relocateTarget",value:function(n,i,e){this.relocate(n,1,i,e)}},{key:"relocate",value:function(n,i,e,t){t=t||{},e=this.getCanvas(e);var r=this.getEndpointCanvas(n.endpoints[i]),s=this.makeEvent(r),l=this.makeEvent(e);t.before&&t.before(),this._jsPlumb.trigger(r,ce,s),t.beforeMouseMove&&t.beforeMouseMove(),this._jsPlumb.trigger(document,ze,l),t.beforeMouseUp&&t.beforeMouseUp(),this._jsPlumb.trigger(e,de,l),t.after&&t.after()}},{key:"relocateSource",value:function(n,i,e){this.relocate(n,0,i,e)}},{key:"makeEvent",value:function(n){var i=n.getBoundingClientRect(),e=i.x+i.width/2,t=i.y+i.height/2;return{clientX:e,clientY:t,screenX:e,screenY:t,pageX:e,pageY:t}}},{key:"getCanvas",value:function(n){return n.endpoint?this.getEndpointCanvas(n):n}},{key:"getEndpointCanvas",value:function(n){return n.endpoint.canvas}},{key:"getConnectionCanvas",value:function(n){return n.connector.canvas}},{key:"getEndpointCanvasPosition",value:function(n){var i=this.getEndpointCanvas(n);return{x:parseInt(i.style.left,10),y:parseInt(i.style.top,10),w:i.getAttribute("width"),h:i.getAttribute("height")}}},{key:"within",value:function(n,i,e){this.ok(Math.abs(n-i)<bp,e+"[expected: "+i+" got "+n+"] [diff:"+Math.abs(n-i)+"]")}},{key:"assertManagedEndpointCount",value:function(n,i){var e=this._jsPlumb.getId(n),t=this._jsPlumb._managedElements[e];this.equal(t.endpoints.length,i,e+" has "+i+" endpoints in managed record")}},{key:"assertManagedConnectionCount",value:function(n,i){var e=this._jsPlumb.getId(n),t=this._jsPlumb._managedElements[e];this.equal(t.connections.length,i,e+" has "+i+" connections in managed record")}},{key:"fireEventOnEndpoint",value:function(n){for(var i=this.getEndpointCanvas(n),e=0;e<(arguments.length<=1?0:arguments.length-1);e++)this._jsPlumb.trigger(i,e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"fireEventOnElement",value:function(n){for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)this._jsPlumb.trigger(n,i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}},{key:"fireEventOnConnection",value:function(n){for(var i=this.getConnectionCanvas(n),e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];this.fireEventOnElement.apply(this,[i].concat(t))}},{key:"clickOnConnection",value:function(n){this.fireEventOnConnection(n,ut)}},{key:"dblClickOnConnection",value:function(n){this.fireEventOnConnection(n,Et)}},{key:"tapOnConnection",value:function(n){this.fireEventOnConnection(n,ce),this.fireEventOnConnection(n,de)}},{key:"dblTapOnConnection",value:function(n){this.fireEventOnConnection(n,ce),this.fireEventOnConnection(n,de),this.fireEventOnConnection(n,ce),this.fireEventOnConnection(n,de)}},{key:"clickOnElement",value:function(n,i){this._jsPlumb.trigger(n,ut,null,null,i??1)}},{key:"dblClickOnElement",value:function(n){this._jsPlumb.trigger(n,Et)}},{key:"tapOnElement",value:function(n){this._jsPlumb.trigger(n,ce),this._jsPlumb.trigger(n,de)}},{key:"dblTapOnElement",value:function(n){this._jsPlumb.trigger(n,ce),this._jsPlumb.trigger(n,de),this._jsPlumb.trigger(n,ce),this._jsPlumb.trigger(n,de)}},{key:"getOverlayCanvas",value:function(n){return n.canvas||n.path}},{key:"fireEventOnOverlay",value:function(n,i,e){var t=n.getOverlay(i),r=this.getOverlayCanvas(t);this._jsPlumb.trigger(r,e)}},{key:"clickOnOverlay",value:function(n,i){this.fireEventOnOverlay(n,i,ut)}},{key:"dblClickOnOverlay",value:function(n,i){this.fireEventOnOverlay(n,i,Et)}},{key:"tapOnOverlay",value:function(n,i){this.fireEventOnOverlay(n,i,ce),this.fireEventOnOverlay(n,i,de)}},{key:"dblTapOnOverlay",value:function(n,i){this.fireEventOnOverlay(n,i,ce),this.fireEventOnOverlay(n,i,de),this.fireEventOnOverlay(n,i,ce),this.fireEventOnOverlay(n,i,de)}},{key:"cleanup",value:function(){var n=this._jsPlumb.getContainer();this._jsPlumb.destroy();for(var i in this._divs){var e=document.getElementById(this._divs[i]);e&&e.parentNode.removeChild(e)}this._divs.length=0;var t=this._jsPlumb.select().length,r=this._jsPlumb.selectEndpoints().length,s=n.querySelectorAll(".jtk-endpoint").length,l=n.querySelectorAll(".jtk-connector").length;for(var u in n.__ta)for(var c in n.__ta[u])throw"Container event bindings not empty for key "+u;if(t>0)throw"there are connections in the data model!";if(r>0)throw"there are endpoints in the data model!";if(s>0)throw"there are "+s+" endpoints left in the dom!";if(l>0)throw"there are "+l+" connections left in the dom!"}},{key:"makeContent",value:function(n){var i=document.createElement("div");return i.innerHTML=n,i.firstChild}},{key:"length",value:function(n){var i=0;for(var e in n)n.hasOwnProperty(e)&&i++;return i}},{key:"head",value:function(n){for(var i in n)return n[i]}},{key:"uuid",value:function(){return Ke()}}]),a})();var sl=0;function xp(){var a=sl+1;return sl++,a}function Cp(a){return new Hv(xp(),a)}const Sp={key:1,class:"flex flex-col h-full w-full relative"},Pp={class:"flex-grow flex flex-col justify-between px-4 py-2"},Tp={class:"text-sm text-gray-500"},Op={class:"flex gap-2 items-center"},_p={key:1,class:"text-purple h-[22px] w-4"},Ap={class:"text-md"},Dp={class:"text-sm text-gray-500"},Ip={class:"absolute top-1 right-2 text-sm text-gray-500"},wp={class:"flex justify-end absolute bottom-0 right-0"},Mp=mr({__name:"LessonCard",props:{lesson:{},loading:{type:Boolean}},emits:["move","copy","edit","delete","cover","disconnect"],setup(a,{emit:o}){const n=a,i=o,e=fo(),t=ll();async function r(l){const u=l.files[0],c=new FormData;c.append("file",u),n.lesson.sourceImageUrl.length>0&&await Vi.deleteFile(n.lesson.sourceImageUrl);try{const{data:d}=await Vi.uploadFile(c,"cover");i("cover",n.lesson,d.source_url)}catch(d){console.log(d)}}const s=fa(()=>n.lesson.originalRouteId===Number(e.params.id));return(l,u)=>{const c=po,d=va,f=vl,h=ho,p=Qu;return se(),Oe("div",{class:"cursor-pointer w-[340px] h-40 bg-gray-50 rounded-lg border border-gray-200",onClick:u[6]||(u[6]=y=>re(t).push({name:"lesson-edit",params:{id:l.lesson.id}}))},[n.loading?(se(),yt(c,{key:0,class:"flex justify-center items-center w-10 h-full"})):(se(),Oe("div",Sp,[ie("div",Pp,[ie("div",Tp,St(`${n.lesson.stage}`),1),ie("div",null,[ie("div",Op,[s.value?(se(),yt(re(oc),{key:0,class:"text-blue-500 h-[20px] w-[19px] pb-[1px]"})):mt("",!0),l.lesson.accessType==="premium"?(se(),Oe("div",_p,u[7]||(u[7]=[ie("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):mt("",!0)]),ie("div",Ap,St(l.lesson.name),1),ie("div",Dp,St(n.lesson.description),1)])]),ie("div",Ip,St(n.lesson.id),1),n.lesson.sourceImageUrl?(se(),yt(d,{key:0,src:n.lesson.sourceImageUrl,alt:"Image",class:"absolute top-2 right-3 w-[120px] h-[120px]"},null,8,["src"])):mt("",!0),ie("div",{class:"absolute top-2 right-3",onClick:u[0]||(u[0]=_n(()=>{},["stop"]))},[te(f,{mode:"basic",customUpload:"",auto:"",onSelect:r,"choose-icon":"pi pi-image",class:"p-button-link p-button-secondary w-[120px] h-[120px]"})]),ie("div",wp,[s.value?Cr((se(),yt(h,{key:0,icon:"pi pi-arrow-right",size:"small",severity:"help",variant:"text",onClick:u[1]||(u[1]=_n(y=>i("move",n.lesson),["stop"]))},null,512)),[[p,"Move"]]):mt("",!0),s.value?Cr((se(),yt(h,{key:1,icon:"pi pi-clone",size:"small",severity:"warn",variant:"text",onClick:u[2]||(u[2]=_n(y=>i("copy",n.lesson),["stop"]))},null,512)),[[p,"Clone"]]):mt("",!0),s.value?Cr((se(),yt(h,{key:2,icon:"pi pi-pencil",size:"small",severity:"info",variant:"text",onClick:u[3]||(u[3]=_n(y=>i("edit",n.lesson),["stop"]))},null,512)),[[p,"Edit"]]):mt("",!0),s.value?Cr((se(),yt(h,{key:3,icon:"pi pi-trash",size:"small",severity:"danger",variant:"text",onClick:u[4]||(u[4]=_n(y=>i("delete",n.lesson),["stop"]))},null,512)),[[p,"Delete"]]):mt("",!0),s.value?mt("",!0):Cr((se(),yt(h,{key:4,icon:"pi pi-times",size:"small",severity:"danger",variant:"text",onClick:u[5]||(u[5]=_n(y=>i("disconnect",n.lesson),["stop"]))},null,512)),[[p,"Disconnect"]])])]))])}}}),kp=go(Mp,[["__scopeId","data-v-4fa7ea51"]]),Lp={class:"mb-4 flex items-center gap-2"},Np={key:0,class:"flex justify-center"},Rp={key:1,class:"flex flex-wrap gap-4"},Gp={key:0,class:"flex-grow text-center text-muted align-center"},Fp=["onClick"],jp={class:"flex gap-2 w-full h-full"},Bp={class:"flex flex-col justify-between items w-full"},Up={class:"flex flex-wrap font-semibold"},Vp={class:"flex flex-col gap-[2px] justify-center"},Hp={class:"text-overline-small"},$p={class:"flex items-center gap-2"},Yp={key:0,class:"text-purple h-[22px] w-4"},Xp={class:"text-body-large-semibold"},Wp=mr({__name:"ProjectsCatalog",props:ul({route_id:{},level_id:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=cl(a,"modelValue"),n=a,i=tc(),{projects:e,isLoading:t}=pn(i),{loadProjects:r}=i,s=gl(),{isLoading:l,routes:u}=pn(s),{loadRoutes:c}=s,d=si(),{loadRouteById:f}=d;dl(()=>{!t.value&&e.value.length==0&&r(),!l.value&&u.value.length==0&&c()});async function h(E){await Hr.connectLesson(n.route_id,n.level_id,E),await f(Number(n.route_id)),o.value=!1}const p=fe(""),y=fe([]),g=fa(()=>{const E=p.value.toLowerCase(),b=!!E,x=y.value.length>0;return e.value.filter(C=>{const S=!b||[C.name,C.description].filter(Boolean).some(_=>_.toLowerCase().includes(E)),T=!x||y.value.includes(C.routeId);return S&&T})});return(E,b)=>{const x=vo,C=ec,S=po,T=qu,_=va,P=ai;return se(),yt(P,{visible:o.value,"onUpdate:visible":b[2]||(b[2]=O=>o.value=O),modal:"",header:"Import from catalog",class:"w-full h-full max-w-[1155px]"},{default:Lt(()=>[ie("div",Lp,[te(x,{modelValue:p.value,"onUpdate:modelValue":b[0]||(b[0]=O=>p.value=O),placeholder:"Search",class:"flex-grow h-[42px]"},null,8,["modelValue"]),te(C,{class:"min-w-[220px]",options:re(u),optionLabel:"name",optionValue:"id",display:"chip",modelValue:y.value,"onUpdate:modelValue":b[1]||(b[1]=O=>y.value=O),placeholder:"Routes",loading:re(l)},null,8,["options","modelValue","loading"])]),re(t)?(se(),Oe("div",Np,[te(S)])):(se(),Oe("div",Rp,[g.value.length?mt("",!0):(se(),Oe("div",Gp," No projects found ")),(se(!0),Oe(Mn,null,Jr(g.value,O=>(se(),Oe("div",{key:O.id,class:Nu(["relative flex flex-col rounded-lg h-[160px] w-[360px] py-2 px-3 cursor-pointer bg-blue50",{"cursor-not-allowed opacity-60 pointer-events-none":O.accessStatus==="progress_restriction"}]),onClick:I=>h(O.id)},[ie("div",jp,[ie("div",Bp,[ie("div",Up,[te(T,{pt:{label:{class:"text-[10px]"}},value:O.routeName},null,8,["value"])]),ie("div",Vp,[ie("div",Hp,St(O.description),1),ie("div",$p,[O.accessStatus==="premium_restriction"?(se(),Oe("div",Yp,b[3]||(b[3]=[ie("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):mt("",!0),ie("div",Xp,St(O.name),1)])])]),O.sourceImageUrl?(se(),yt(_,{key:0,src:O.sourceImageUrl,alt:"Image",class:"min-w-[120px] min-h-[120px] w-[120px] h-[120px]"},null,8,["src"])):mt("",!0)])],10,Fp))),128))]))]),_:1},8,["visible"])}}}),Kp={key:0,class:"flex justify-center"},zp={key:1,class:"flex flex-wrap gap-4"},Zp={key:0,class:"flex-grow text-center text-muted align-center"},Jp={class:"flex flex-col gap-4 w-full"},Qp={class:"text-overline-medium"},qp={class:"flex flex-wrap gap-4"},eg=["onClick"],tg={class:"action-small-bold"},ng=mr({__name:"RoutesLevelsCatalog",props:ul({route_id:{},level_id:{},lesson_id:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const o=cl(a,"modelValue"),n=a,i=si(),{loadRouteById:e,moveLessonById:t}=i,r=gl(),{isLoading:s,routes:l}=pn(r),{loadRoutes:u}=r;dl(()=>{!s.value&&l.value.length==0&&u()});const c=fe(!1);async function d(f,h){c.value=!0,await t(n.lesson_id,{old_route_id:n.route_id,old_level_id:n.level_id,new_route_id:h,new_level_id:f}),await e(n.route_id),c.value=!1,o.value=!1}return(f,h)=>{const p=po,y=ai;return se(),yt(y,{visible:o.value,"onUpdate:visible":h[0]||(h[0]=g=>o.value=g),modal:"",header:"Select route and level",class:"h-full max-w-[1155px]"},{default:Lt(()=>[re(s)||c.value?(se(),Oe("div",Kp,[te(p)])):(se(),Oe("div",zp,[re(l).length?mt("",!0):(se(),Oe("div",Zp," No projects found ")),ie("div",Jp,[(se(!0),Oe(Mn,null,Jr(re(l),g=>(se(),Oe("div",{key:g.id,class:"flex flex-col gap-2"},[ie("div",Qp,St(g.name),1),ie("div",qp,[(se(!0),Oe(Mn,null,Jr(g.levels,E=>(se(),Oe("div",{key:E.id,class:"w-fit flex bg-neutral50 px-4 py-2 rounded-lg cursor-pointer",onClick:b=>d(E.id,g.id)},[ie("div",tg,St(E.name),1)],8,eg))),128))])]))),128))])]))]),_:1},8,["visible"])}}}),rg=["id"],ig={class:"flex gap-2"},og={class:"flex justify-end gap-2"},ag=mr({__name:"LessonsView",props:{level:{},dependenciesMode:{type:Boolean}},setup(a){const o=a,n=fo(),i=ha(),e=si(),{isLessonCreating:t,isLessonUpdating:r,isLessonDeleting:s,isOrderUpdating:l,groupedLessons:u,groupedDependencies:c,selectedRoute:d}=pn(e),{createLesson:f,updateLessonById:h,deleteLessonById:p,loadRouteById:y,updateRouteLessonsOrderById:g,createLessonDependency:E,deleteLessonDependency:b,deleteAllLessonDependencies:x,copyLessonById:C}=e,S=fe(!1),T=fe(!1),_=fe(null),P=fe(!1),O=fe(!1),I=fe(""),L=fe(""),M=fe("premium"),N=fe("learn");let G;const B=fe();fl(async()=>{await Ru(),G=Cp({container:B.value,paintStyle:{strokeWidth:1.5,stroke:"#456"},maxConnections:-1,connector:"Bezier",connectionOverlays:[{type:"Arrow",options:{location:1}}]}),o.dependenciesMode?(k(),H()):R(),G.bind(Ta,async U=>{if(U.originalSourceID.includes("jsplumb"))return;const V=U.originalSourceId.split("-")[1],Se=U.originalTargetId.split("-")[1];await b({depend_on_id:Number(V),lesson_id:Number(Se),route_id:Number(n.params.id)})}),G.bind(Pa,async U=>{if(U.sourceId.includes("jsplumb"))return;const V=U.sourceId.split("-")[1],Se=U.targetId.split("-")[1];await E({depend_on_id:Number(V),lesson_id:Number(Se),route_id:Number(n.params.id)})}),G.bind($l,async U=>{if(U.sourceId.includes("jsplumb"))return;const V=U.sourceId.split("-")[1],Se=U.targetId.split("-")[1];await b({depend_on_id:Number(V),lesson_id:Number(Se),route_id:Number(n.params.id)})})});async function k(){for(const U of Object.values(u.value[o.level.id]))for(const V of U){const Se=document.getElementById(`lesson-${V.id}`);G.addEndpoint(Se,{source:!0,anchor:"Top",endpoint:{type:Un.type}}),G.addEndpoint(Se,{target:!0,anchor:"Left",endpoint:{type:ii.type}})}}async function R(){for(const U of Object.values(u.value[o.level.id]))for(const V of U){const Se=G.getEndpoints(document.getElementById(`lesson-${V.id}`));for(const we of Se)G.deleteEndpoint(we)}}function H(){const U=c.value[o.level.id];for(const V of U)G.connect({source:document.getElementById(`lesson-${V.depend_on_id}`),target:document.getElementById(`lesson-${V.lesson_id}`),anchors:["Top","Left"]})}function ve(U){I.value="",L.value="",M.value="premium",T.value=!0,S.value=!0,N.value=U}function De(U){_.value=U,I.value=U.name,L.value=U.description,M.value=U.accessType,T.value=!1,S.value=!0}async function ye(){T.value?await f({name:I.value,description:L.value,access_type:M.value,lesson_type:N.value,level_id:o.level.id,route_id:Number(n.params.id)}):_.value&&await h(_.value.id,{name:I.value,description:L.value,access_type:M.value}),await y(Number(n.params.id)),S.value=!1}async function Ce(U,V){await h(U.id,{source_image_url:V}),await y(Number(n.params.id))}function Re(U){_.value=U,i.require({...Hi,message:"Are you sure you want to delete this lesson?",accept:async()=>{await p(U.id),await y(Number(n.params.id))}})}function Ie(U){_.value=U,i.require({...Hi,header:"Confirm disconnect",message:"Are you sure you want to disconnect lesson from this route?",accept:async()=>{await Hr.disconnectLesson(Number(n.params.id),o.level.id,U.id),await y(Number(n.params.id))}})}async function Ae(U){if(!l.value){if(U.added){const V=U.added.element.id,Se=xe(V);if(Se){const{levelId:Ye,lessonType:nt}=Se;if(Ye!=U.added.element.levelId&&await x({lesson_id:Number(V),route_id:Number(n.params.id)}),nt!=U.added.element.lessonType){await h(V,{lesson_type:nt});const en=u.value[o.level.id][nt].find(rt=>rt.id===V);en&&(en.lessonType=nt)}}const we=pe();await g(Number(n.params.id),we)}else if(U.moved){const V=pe();await g(Number(n.params.id),V)}}}function xe(U){var V;for(const[Se,we]of Object.entries(u.value))for(const Ye of Xa)if((V=we[Ye])!=null&&V.some(nt=>nt.id===U))return{levelId:Number(Se),lessonType:Ye};return null}function pe(){const U=[];for(const V in u.value){const Se=Number(V),we=u.value[Se],Ye=Object.values(we).flat();U.push({level_id:Se,lesson_ids:Ye.map(nt=>nt.id)})}return{orders:U}}const tt={learn:"success",practice:"info",module:"warn",default:"error"},Je=fa(()=>{var U;switch((U=d.value)==null?void 0:U.routeType){case"main":return Ju;case"side":case"one_kit":case"hackathon":return d.value.id==Fu?["module"]:["project"];default:return Xa}});async function Rt(U){d.value&&d.value.id&&await C(U.id,d.value.id),await y(Number(n.params.id))}const Tt=fe(!1);async function Gt(U){_.value=U,Tt.value=!0}return(U,V)=>{var rt,Ot,Yt;const Se=zu,we=ho,Ye=ai,nt=vo,en=Ku;return se(),Oe(Mn,null,[ie("div",{ref_key:"lessonsWrapperRef",ref:B,class:"relative flex flex-col gap-4"},[(se(!0),Oe(Mn,null,Jr(Je.value,Pe=>(se(),Oe(Mn,{key:Pe},[te(Se,{severity:tt[Pe]||tt.default,class:"min-w-fit pr-4",size:"small"},{default:Lt(()=>[Gu(St(Pe.charAt(0).toUpperCase()+Pe.slice(1)),1)]),_:2},1032,["severity"]),te(re(Jc),{modelValue:re(u)[U.level.id][Pe],"onUpdate:modelValue":it=>re(u)[U.level.id][Pe]=it,group:"lessons","item-key":"id","data-key":`${o.level.id}-${Pe}`,class:"flex flex-wrap gap-4 min-h-[5rem]",onChange:Ae,disabled:re(l)||U.dependenciesMode},{item:Lt(({element:it})=>{var tn;return[ie("div",{id:`lesson-${it.id}`},[te(kp,{lesson:it,loading:((tn=_.value)==null?void 0:tn.id)===it.id&&(re(r)||re(s)),onEdit:En=>De(it),onDelete:En=>Re(it),onCover:Ce,onCopy:Rt,onMove:Gt,onDisconnect:Ie},null,8,["lesson","loading","onEdit","onDelete"])],8,rg)]}),footer:Lt(()=>[te(we,{icon:"pi pi-plus",label:"Add",variant:"outlined",class:"w-[340px] h-40",onClick:V[0]||(V[0]=it=>P.value=!0)}),te(Ye,{visible:P.value,"onUpdate:visible":V[2]||(V[2]=it=>P.value=it),modal:"",header:"Add"},{default:Lt(()=>[ie("div",ig,[te(we,{icon:"pi pi-plus",label:"Create",variant:"outlined",class:"w-[140px] h-20",onClick:()=>{P.value=!1,ve(Pe)}},null,8,["onClick"]),te(we,{icon:"pi pi-link",label:"Import",variant:"outlined",severity:"info",class:"w-[140px] h-20",onClick:V[1]||(V[1]=()=>{P.value=!1,O.value=!0})})])]),_:2},1032,["visible"])]),_:2},1032,["modelValue","onUpdate:modelValue","data-key","disabled"])],64))),128))],512),te(ng,{"model-value":Tt.value,"onUpdate:modelValue":V[3]||(V[3]=Pe=>Tt.value=Pe),route_id:((rt=re(d))==null?void 0:rt.id)??-1,level_id:o.level.id,lesson_id:((Ot=_.value)==null?void 0:Ot.id)??-1},null,8,["model-value","route_id","level_id","lesson_id"]),te(Wp,{"model-value":O.value,"onUpdate:modelValue":V[4]||(V[4]=Pe=>O.value=Pe),route_id:((Yt=re(d))==null?void 0:Yt.id)??-1,level_id:o.level.id},null,8,["model-value","route_id","level_id"]),te(Ye,{visible:S.value,"onUpdate:visible":V[9]||(V[9]=Pe=>S.value=Pe),modal:"",header:T.value?"Create Lesson":"Update Lesson",style:{width:"25rem"}},{default:Lt(()=>[te(nt,{modelValue:I.value,"onUpdate:modelValue":V[5]||(V[5]=Pe=>I.value=Pe),class:"w-full mb-4",placeholder:"Name"},null,8,["modelValue"]),te(nt,{modelValue:L.value,"onUpdate:modelValue":V[6]||(V[6]=Pe=>L.value=Pe),class:"w-full mb-4",placeholder:"Description"},null,8,["modelValue"]),te(en,{modelValue:M.value,"onUpdate:modelValue":V[7]||(V[7]=Pe=>M.value=Pe),options:re(Zu),class:"w-full mb-4",placeholder:"Select access type"},null,8,["modelValue","options"]),ie("div",og,[te(we,{label:"Cancel",severity:"secondary",onClick:V[8]||(V[8]=Pe=>S.value=!1)}),te(we,{label:T.value?"Create":"Update",loading:re(t)||re(r),disabled:re(t)||re(r),onClick:ye},null,8,["label","loading","disabled"])])]),_:1},8,["visible","header"])],64)}}}),sg=go(ag,[["__scopeId","data-v-c2a8cacf"]]),lg={class:"flex flex-col gap-4"},ug={class:"flex items-center gap-2"},cg={class:"flex items-center gap-2"},dg={class:"text-xl"},fg={class:"flex gap-2 mb-4"},hg={class:"flex justify-end gap-2"},vg=mr({__name:"LevelsView",props:{levels:{}},setup(a){const o=a,n=fo(),i=ha(),e=si(),{isLevelCreating:t,isLevelUpdating:r,mode:s}=pn(e),{loadRouteById:l,createLevel:u,updateLevelById:c,deleteLevelById:d}=e,f=fe(["Order mode","Dependency mode"]),h=fe(!1),p=fe(!1),y=fe(null),g=fe(""),E=fe(0),b=fe(0);function x(){g.value="",p.value=!0,h.value=!0}function C(_){y.value=_,g.value=_.name,E.value=_.learnCount,b.value=_.practiceCount,p.value=!1,h.value=!0}async function S(){p.value?await u({name:g.value}):y.value&&await c(y.value.id,{name:g.value,learn_count:E.value,practice_count:b.value}),await l(Number(n.params.id)),h.value=!1}function T(_){i.require({...Hi,message:"Are you sure you want delete?",accept:async()=>{await d(_),await l(Number(n.params.id))}})}return hl(s,()=>l(Number(n.params.id))),(_,P)=>{const O=Wu,I=ho,L=Xu,M=vo,N=Yu,G=ai;return se(),Oe("div",lg,[te(O,{modelValue:re(s),"onUpdate:modelValue":P[0]||(P[0]=B=>ju(s)?s.value=B:null),options:f.value,size:"small",class:"self-end",allowEmpty:!1},null,8,["modelValue","options"]),(se(!0),Oe(Mn,null,Jr(o.levels,B=>(se(),Oe("div",{key:B.id,class:"flex flex-col gap-4"},[ie("div",ug,[te(L,{align:"center",type:"dotted",class:"m-0",pt:{content:{class:"bg-transparent"}}},{default:Lt(()=>[ie("div",cg,[te(I,{icon:"pi pi-pencil",size:"small",severity:"info",variant:"outlined",onClick:k=>C(B)},null,8,["onClick"]),ie("div",dg,St(B.name),1)])]),_:2},1024),te(I,{icon:"pi pi-trash",size:"small",severity:"danger",variant:"outlined",onClick:k=>T(B.id)},null,8,["onClick"])]),te(sg,{level:B,dependenciesMode:re(s)=="Dependency mode"},null,8,["level","dependenciesMode"])]))),128)),te(L,{align:"center",type:"dotted",pt:{content:{class:"bg-transparent"}}},{default:Lt(()=>[te(I,{icon:"pi pi-plus",label:"Add level",variant:"outlined",onClick:x})]),_:1}),te(G,{visible:h.value,"onUpdate:visible":P[5]||(P[5]=B=>h.value=B),modal:"",header:p.value?"Create new level":"Update level",style:{width:"25rem"}},{default:Lt(()=>[te(M,{modelValue:g.value,"onUpdate:modelValue":P[1]||(P[1]=B=>g.value=B),id:"name",class:"w-full mb-4",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),ie("div",fg,[te(N,{modelValue:E.value,"onUpdate:modelValue":P[2]||(P[2]=B=>E.value=B),placeholder:"Min Learn lessons",inputId:"minmax",min:0,max:100,fluid:""},null,8,["modelValue"]),te(N,{modelValue:b.value,"onUpdate:modelValue":P[3]||(P[3]=B=>b.value=B),placeholder:"Min Practice lessons",inputId:"minmax",min:0,max:100,fluid:""},null,8,["modelValue"])]),ie("div",hg,[te(I,{type:"button",label:"Cancel",severity:"secondary",onClick:P[4]||(P[4]=B=>h.value=!1)}),te(I,{type:"button",label:p.value?"Create":"Update",loading:re(t)||re(r),disabled:re(t)||re(r),onClick:S},null,8,["label","loading","disabled"])])]),_:1},8,["visible","header"])])}}}),pg={class:"flex flex-col items-center relative"},gg={class:"w-full max-w-[1280px] px-8 py-10"},yg={key:1,class:"flex justify-center"},mg={key:2},Eg={class:"flex items-center justify-between mb-2"},bg={class:"flex flex-col"},xg={class:"flex items-center gap-10"},Cg={class:"text-2xl"},Sg={class:"w-[120px] h-[120px] relative"},Pg={class:"text-lg text-gray-500"},Tg={class:"flex gap-2"},Og={class:"flex justify-end gap-2"},_g={class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},Ag=mr({__name:"RouteEditPage",setup(a){const o=fo(),n=ll(),i=ha(),e=pl(),{lang:t}=pn(e),r=si(),{isRouteLoading:s,isRouteUpdating:l,isRouteDeleting:u,selectedRoute:c}=pn(r),{loadRouteById:d,updateRouteById:f,deleteRouteById:h}=r;function p(){i.require({...Hi,message:"Are you sure you want delete?",accept:async()=>{await h(Number(o.params.id)),n.go(-1)}})}const y=fe(!1);async function g(){var b,x;await f(Number(o.params.id),{name:(b=c.value)==null?void 0:b.name,description:(x=c.value)==null?void 0:x.description}),y.value=!1}fl(()=>d(Number(o.params.id))),hl(t,async(b,x)=>{b!==x&&c.value&&await d(c.value.id)});async function E(b){if(c.value==null)return;const x=b.files[0],C=new FormData;C.append("file",x),c.value.sourceImage_url.length>0&&await Vi.deleteFile(c.value.sourceImage_url);try{const{data:S}=await Vi.uploadFile(C,"cover");await f(Number(o.params.id),{source_image_url:S.source_url}),await d(Number(o.params.id))}catch(S){console.log(S)}}return(b,x)=>{const C=po,S=va,T=vl,_=ho,P=vo,O=Bu,I=ai;return se(),Oe("div",pg,[te(re(Uu)),ie("div",gg,[re(s)?(se(),yt(C,{key:0,class:"flex justify-center"})):re(c)?(se(),Oe("div",mg,[ie("div",Eg,[ie("div",bg,[ie("div",xg,[ie("div",Cg,St(re(c).name),1),ie("div",Sg,[re(c).sourceImage_url?(se(),yt(S,{key:0,src:re(c).sourceImage_url,alt:"Image",class:"w-[120px] h-[120px] absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},null,8,["src"])):mt("",!0),ie("div",{onClick:x[0]||(x[0]=_n(()=>{},["stop"])),class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},[te(T,{mode:"basic",customUpload:"",auto:"",onSelect:E,"choose-icon":"pi pi-image",class:"p-button-link p-button-secondary w-[120px] h-[120px]"})])])]),ie("div",Pg,St(re(c).description),1)]),ie("div",Tg,[te(_,{label:"Edit",severity:"info",variant:"outlined",class:"w-fit",onClick:x[1]||(x[1]=L=>y.value=!0)}),te(_,{label:"Delete",severity:"danger",variant:"outlined",class:"w-fit",loading:re(u),disabled:re(u),onClick:p},null,8,["loading","disabled"]),te(I,{visible:y.value,"onUpdate:visible":x[5]||(x[5]=L=>y.value=L),modal:"",header:"Update route",style:{width:"40rem"}},{default:Lt(()=>[te(P,{modelValue:re(c).name,"onUpdate:modelValue":x[2]||(x[2]=L=>re(c).name=L),id:"name",class:"w-full mb-4",autocomplete:"off",placeholder:"Name"},null,8,["modelValue"]),te(O,{modelValue:re(c).description,"onUpdate:modelValue":x[3]||(x[3]=L=>re(c).description=L),rows:"5",id:"description",class:"w-full mb-4",autocomplete:"off",placeholder:"Description"},null,8,["modelValue"]),ie("div",Og,[te(_,{type:"button",label:"Cancel",severity:"secondary",onClick:x[4]||(x[4]=L=>y.value=!1)}),te(_,{type:"button",label:"Update",loading:re(l),disabled:re(l),onClick:g},null,8,["loading","disabled"])])]),_:1},8,["visible"])])]),te(vg,{levels:re(c).levels},null,8,["levels"])])):(se(),Oe("div",yg,"No route found"))]),ie("div",_g,[te(re(Vu))])])}}}),Oy=go(Ag,[["__scopeId","data-v-fddbf36c"]]);export{Oy as default};
