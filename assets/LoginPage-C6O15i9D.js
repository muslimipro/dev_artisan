import{h as S,o as z,s as b,a as M}from"./types-DM7f0bKm.js";import{a as N,u as P,Y as q,r as w,b as o,e as m,f as s,h as t,w as i,t as n,k as y,i as I,l as L,F as h,j as A,g as d,p as E,q as D}from"./index-BatFYxel.js";import{s as H}from"./index-CkvQtMm-.js";import{s as R}from"./index-CXWJh2Nm.js";import{s as U}from"./index-BLtEdgdJ.js";import{s as Y}from"./index-DIx-fEHn.js";import{_ as G}from"./AuthHeader.vue_vue_type_script_setup_true_lang-WdPrnt4R.js";import{a as J}from"./http-Djzp07-Y.js";import{_ as K}from"./LocaleSelect.vue_vue_type_script_setup_true_lang-Cewgfyv7.js";import"./index-C_mupEx_.js";import"./index-Db6KP036.js";import"./logo-D1-3uCnC.js";import"./index-OBIkAJCT.js";const O={class:"card flex flex-col items-center pt-4"},Q={class:"flex flex-1 items-center justify-center mt-4"},W={class:"text-4xl font-semibold px-2"},X={class:"flex flex-col gap-1"},Z={for:"email"},ee={class:"flex flex-col gap-1"},se={for:"password"},ae={class:"flex justify-between"},te={class:"my-0 flex flex-col gap-1"},oe={key:1},be=N({__name:"LoginPage",setup(le){const k=P(),c=E(),u=q(),l=w(!1),$=w({email:"",password:""}),V=S(z({email:b().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:b().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),T=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:a}=await J.login(e.states.email.value,e.states.password.value);u.setToken(a),u.setUser(a),c.push({name:"projects"})}catch(a){k.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return(e,a)=>{const j=Y,f=U,_=R,B=H,p=D,C=M;return o(),m(h,null,[s(G),t("div",O,[s(C,{initialValues:$.value,resolver:d(V),onSubmit:T,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(r=>{var v,g;return[t("div",Q,[t("p",W,n(e.$t("logIn")),1)]),s(K,{class:"self-center"}),t("div",X,[s(f,{variant:"on"},{default:i(()=>[s(j,{id:"email",name:"email",type:"text",fluid:""}),t("label",Z,n(e.$t("email")),1)]),_:1}),(v=r.email)!=null&&v.invalid?(o(),y(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[I(n(r.email.error.message),1)]),_:2},1024)):L("",!0)]),t("div",ee,[s(f,{variant:"on"},{default:i(()=>[s(B,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",se,n(e.$t("password")),1)]),_:1}),t("div",ae,[(g=r.password)!=null&&g.invalid?(o(),y(_,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[t("ul",te,[(o(!0),m(h,null,A(r.password.errors,(x,F)=>(o(),m("li",{key:F},n(x.message),1))),128))])]),_:2},1024)):(o(),m("div",oe)),s(p,{label:e.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:a[0]||(a[0]=x=>d(c).push({name:"forgot-password"}))},null,8,["label"])])]),s(p,{type:"submit",label:e.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),s(p,{variant:"link",label:e.$t("dontHaveAnAccount"),onClick:a[1]||(a[1]=r=>d(c).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{be as default};
