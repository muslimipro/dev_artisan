import{o as s,c as a,a as t,d as pe,u as me,r as M,b as j,U as he,e as A,f as H,g as J,s as U,h as e,i as L,t as v,j as P,k as r,w as I,l as q,m as te,n as se,p as xe,F as E,q as O,v as F,x as fe,y as V,T as X,z as ge,A as ve,B as Y,C as Z,D as _e,E as we}from"./index-RQaPKU3q.js";import{_ as ye}from"./MainHeader.vue_vue_type_script_setup_true_lang-BuW7JKj1.js";import"./index-zUgF_fUw.js";import{s as k,u as oe,_ as Q,a as be,g as ke,b as N}from"./StepIndicator.vue_vue_type_script_setup_true_lang-BzOcPTGf.js";import{s as ee}from"./index-ZflZKAdM.js";import{s as $e}from"./index-DYe12pIs.js";import{I as Ce,_ as Se}from"./UserMenu.vue_vue_type_script_setup_true_lang-3l-gndQ6.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as Le}from"./index-i87uic1r.js";import"./index-C1N2nWcC.js";import"./routeApi-D5A-EIDQ.js";import"./index-DnxWnOWO.js";import"./index-BEGyIpqi.js";import"./lessonApi-CDtd4rn4.js";import"./logo-D1-3uCnC.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-DOQWPUhj.js";import"./index-CmgTJnJ7.js";import"./index-DoQeMzHI.js";import"./index-BQlFFWCz.js";import"./index-DZ_1xp5G.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D5A7GxOk.js";import"./index-csPL02fk.js";import"./language-DYQF8nnT.js";import"./index-5bJt7VTk.js";const Ie="/assets/premium-rocket-rX_dPq1P.webp",Te="/assets/premium-station-COZloHei.webp",je={},Me={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Pe(T,m){return s(),a("svg",Me,m[0]||(m[0]=[t("path",{d:"M6 4.49994C5.7071 4.20705 5.23223 4.20705 4.93934 4.49994C4.64644 4.79284 4.64644 5.26771 4.93934 5.5606L10.9393 12L4.93934 18.4393C4.64644 18.7322 4.64644 19.207 4.93934 19.4999C5.23223 19.7928 5.7071 19.7928 6 19.4999L12 13.0606L18 19.4999C18.2929 19.7928 18.7678 19.7928 19.0607 19.4999C19.3535 19.2071 19.3535 18.7322 19.0607 18.4393L13.0606 12L19.0607 5.5606C19.3535 5.26771 19.3535 4.79284 19.0607 4.49994C18.7678 4.20705 18.2929 4.20705 18 4.49994L12 10.9393L6 4.49994Z",fill:"currentColor"},null,-1)]))}const ne=De(je,[["render",Pe]]),ae=pe("home-store",()=>{const T=me(),m=M({}),o=M(0),y=M(!1);async function l(){try{y.value=!0;const{data:c}=await he.getUserProgress();o.value=c.xp,m.value=c.attempts.reduce((i,w)=>(i[w.date]={date:w.date,count:w.count,success:w.success},i),{})}catch(c){T.add({severity:"error",summary:c,life:2e3})}finally{y.value=!1}}const b=j(()=>Object.values(m.value).map(c=>({date:c.date,level:x(c),count:c.count,success:c.success})));function x(c){return c.count===0?0:c.count<10?1:c.count<15?2:3}return{isProgressLoading:y,loadProgress:l,xp:o,contributionData:b}}),ze={key:1,class:"text-heading-2-bold text-neutral900",style:{"font-size":"clamp(24px, 4vw, 34px)"}},Fe=A({__name:"GreetingSection",setup(T){const{t:m}=H(),o=J(),{userInfo:y,isUserInfoLoading:l}=U(o),b=j(()=>{const x=new Date().getHours();return x<12?m("goodMorning"):x<18?m("goodAfternoon"):m("goodEvening")});return(x,c)=>{var i;return s(),a("section",null,[e(l)?(s(),L(e(k),{key:0,class:"w-full",height:"41px"})):(s(),a("h1",ze,v(b.value)+", "+v((i=e(y))==null?void 0:i.name)+"!",1))])}}}),Ee={class:"flex flex-col gap-8 bg-white rounded-2xl p-8 overflow-visible"},Ue={class:"flex flex-col sm:flex-row justify-between gap-8 min-w-0"},Ae={class:"flex flex-col xs:flex-row gap-8 xs:gap-4 sm:min-h-[96px] min-w-0 flex-1"},Re={key:1,class:"shrink-0 mx-auto xs:mx-0"},Be={class:"flex flex-col gap-6 justify-between min-w-0 flex-1 overflow-hidden"},Ne={key:1,class:"text-heading-3-semibold text-neutral900 overflow-hidden text-ellipsis whitespace-nowrap !leading-normal"},Oe={class:"flex flex-col sm:flex-row gap-4 min-w-0 overflow-hidden"},He={class:"flex flex-col gap-1 min-w-0 overflow-hidden max-w-[300px]"},We={key:1,class:"text-overline-large-regular text-neutral uppercase overflow-hidden text-ellipsis whitespace-nowrap"},Ve={key:3,class:"text-heading-5-semibold text-neutral800 overflow-hidden text-ellipsis whitespace-nowrap"},Ge={class:"flex flex-col gap-1 min-w-0 overflow-hidden max-w-[300px]"},Ke={key:1,class:"text-overline-large-regular text-neutral uppercase overflow-hidden text-ellipsis whitespace-nowrap"},Xe={key:3,class:"text-heading-5-semibold text-neutral800 overflow-hidden text-ellipsis whitespace-nowrap"},Ye={class:"flex flex-row-reverse sm:flex-col items-center sm:items-end justify-between"},Je={class:"hidden xxs:inline text-nowrap"},qe={key:1,class:"flex items-end justify-end gap-1"},Ze={class:"text-heading-2-semibold text-neutral900",style:{"font-size":"clamp(24px, 4vw, 34px)"}},Qe=A({__name:"ProfileSection",setup(T){const m=se(),{t:o}=H(),y=J(),{userInfo:l,userLabel:b,isUserInfoLoading:x}=U(y),c=ae(),{xp:i,isProgressLoading:w}=U(c);return(f,$)=>{var D,z,C,g;return s(),a("section",Ee,[t("div",Ue,[t("div",Ae,[e(x)?(s(),L(e(k),{key:0,shape:"circle",class:"w-36 h-36 sm:w-24 sm:h-24 shrink-0 mx-auto xs:mx-0"})):e(l)?(s(),a("div",Re,[e(l).small_avatar_url?(s(),L(e(ee),{key:0,image:e(l).small_avatar_url,shape:"circle",class:"w-36 h-36 sm:w-24 sm:h-24"},null,8,["image"])):(s(),L(e(ee),{key:1,label:e(b),shape:"circle",class:"w-36 h-36 sm:w-24 sm:h-24 text-2xl"},null,8,["label"]))])):P("",!0),t("div",Be,[e(x)?(s(),L(e(k),{key:0,width:"192px",height:"32px"})):(s(),a("h2",Ne,v((D=e(l))==null?void 0:D.name)+" "+v((z=e(l))==null?void 0:z.surname),1)),t("div",Oe,[t("div",He,[e(x)?(s(),L(e(k),{key:0,width:"128px",height:"16px"})):(s(),a("span",We,v(f.$t("school")),1)),e(x)?(s(),L(e(k),{key:2,width:"160px",height:"20px"})):(s(),a("span",Ve,v(((C=e(l))==null?void 0:C.school_name)||e(o)("noSchoolFound")),1))]),t("div",Ge,[e(x)?(s(),L(e(k),{key:0,width:"64px",height:"16px"})):(s(),a("span",Ke,v(f.$t("class")),1)),e(x)?(s(),L(e(k),{key:2,width:"48px",height:"20px"})):(s(),a("span",Xe,v(((g=e(l))==null?void 0:g.class_name)||e(o)("noClassFound")),1))])])])]),r(e($e),{class:"w-full sm:w-0 sm:h-0",style:{"--p-divider-border-color":"var(--p-neutral-200)"}}),t("div",Ye,[r(e(q),{variant:"outlined",class:"h-[32px] rounded action-small-regular w-[32px] p-0 flex items-center justify-center xxs:w-auto xxs:px-3 xxs:py-2",onClick:$[0]||($[0]=R=>e(m).push({name:"settings-personal-info"}))},{default:I(()=>[r(e(Ce),{class:"w-4 h-4 text-primary xxs:hidden"}),t("span",Je,v(e(o)("pages.home.settings")),1)]),_:1}),e(w)?(s(),L(e(k),{key:0,width:"112px",height:"48px"})):(s(),a("div",qe,[t("span",Ze,v(e(i)||0),1),$[1]||($[1]=t("span",{class:"text-heading-3-regular text-neutral"},"XP",-1))]))])]),te(f.$slots,"default")])}}}),et={class:"w-full flex flex-col gap-2 bg-white border border-primary300 rounded-lg py-3 sm:py-4"},tt={key:0,class:"flex flex-col gap-3 px-4 sm:px-6"},st={class:"flex justify-between items-center"},ot={class:"grid grid-cols-[repeat(auto-fit,16px)] gap-0.5 justify-center"},nt={class:"flex justify-end items-center gap-2"},at={class:"grid grid-flow-col grid-cols-[auto] grid-rows-[auto_repeat(7,16px)] auto-cols-[16px] gap-0.5 w-max m-auto px-4 sm:px-6 overflow-x-auto"},lt=["onClick","onKeydown"],rt={key:2,class:"flex items-center justify-end self-end gap-2 mr-4"},it={class:"text-overline-small-bold text-neutral"},ct={class:"flex gap-1"},dt=["title"],ut=["title"],pt=["title"],mt=["title"],ht={class:"text-overline-small-bold text-neutral"},xt={class:"bg-white border-2 border-primary300 rounded-2xl shadow-small p-4 sm:p-5 pointer-events-auto w-[280px] sm:w-[320px] max-w-[calc(100vw-32px)]"},ft={class:"flex items-start justify-between gap-2 sm:gap-3 mb-3 sm:mb-4"},gt={class:"flex-1 min-w-0"},vt={class:"text-overline-large-bold text-neutral uppercase mb-2 truncate"},_t={class:"text-heading-4-semibold text-neutral900 truncate"},wt={class:"flex flex-col gap-2 sm:gap-3"},yt={class:"flex items-center gap-2 sm:gap-3 p-2.5 sm:p-3 bg-neutral50 rounded-lg"},bt={class:"text-body-medium-semibold text-neutral800 truncate"},kt={class:"flex items-center justify-between gap-2 px-2.5 sm:px-3 py-2 bg-primary50 rounded-lg"},$t={class:"text-body-medium-regular text-neutral700 truncate"},Ct={class:"text-heading-5-bold text-primary whitespace-nowrap"},St=A({__name:"ContributionGraph",props:{contributions:{default:()=>[]},isLoading:{type:Boolean,default:!1}},setup(T){const m=T,{t:o}=H(),y=M(null),l=M({date:new Date,level:0,visible:!1,x:0,y:0});xe(async()=>{!m.isLoading&&y.value&&(await ve(),y.value.scrollLeft=y.value.scrollWidth)});const b=(h,p)=>{const u=h.target.getBoundingClientRect();l.value={date:p.date,level:p.level,visible:!0,x:u.left+u.width/2,y:u.top-8}},x=h=>{const p=h.getFullYear(),u=String(h.getMonth()+1).padStart(2,"0"),d=String(h.getDate()).padStart(2,"0"),n=`${p}-${u}-${d}`,_=m.contributions.find(S=>S.date===n);return(_==null?void 0:_.count)||0},c=j(()=>{if(typeof window>"u")return{left:"50%",top:"50%",transform:"translate(-50%, -50%)"};if(window.innerWidth<640)return{left:"50%",top:"50%",transform:"translate(-50%, -50%)"};const p=320,u=200,d=10,n=16;let _=l.value.x,S=l.value.y,B="translate(-50%, -100%)";return _+p/2>window.innerWidth-n&&(_=window.innerWidth-n-p/2),_-p/2<n&&(_=n+p/2),S-u-d<n&&(S=l.value.y+20,B="translate(-50%, 0)"),{left:`${_}px`,top:`${S}px`,transform:B}}),i=()=>{l.value.visible=!1},w=j(()=>[o("weekdaySun"),o("weekdayMon"),o("weekdayTue"),o("weekdayWed"),o("weekdayThu"),o("weekdayFri"),o("weekdaySat")]),f=h=>w.value[h.getDay()],$=h=>{const p=h.getDate(),u=D.value[h.getMonth()];return`${p} ${u}`},D=j(()=>[o("monthJan"),o("monthFeb"),o("monthMar"),o("monthApr"),o("monthMay"),o("monthJun"),o("monthJul"),o("monthAug"),o("monthSep"),o("monthOct"),o("monthNov"),o("monthDec")]),z=j(()=>[{label:o("weekdayMon"),row:2},{label:"",row:3},{label:o("weekdayWed"),row:4},{label:"",row:5},{label:o("weekdayFri"),row:6},{label:"",row:7},{label:"",row:8}]),C=h=>{const p={0:"var(--color-neutral100)",1:"var(--color-primary100)",2:"var(--color-primary300)",3:"var(--color-primary)"};return p[h]||p[0]},g=h=>{const p=`contributionLevel${h}`;return o(p)},R=j(()=>{const h=new Date;h.setHours(0,0,0,0);const p=365,u=new Date(h);u.setDate(h.getDate()-(p-1));const d=[],n=new Date(u);let _=2;for(let S=0;S<p;S++){const B=n.getDay()===0?7:n.getDay(),le=n.getDate()===1,re=n.getFullYear(),ie=String(n.getMonth()+1).padStart(2,"0"),ce=String(n.getDate()).padStart(2,"0"),de=`${re}-${ie}-${ce}`,G=m.contributions.find(ue=>ue.date===de);d.push({date:new Date(n),level:(G==null?void 0:G.level)||0,weekday:B,columnIndex:_,isFirstDayOfMonth:le,monthName:D.value[n.getMonth()]}),B===7&&_++,n.setDate(n.getDate()+1)}return d}),W=j(()=>{const h=new Map;return R.value.forEach(p=>{p.isFirstDayOfMonth&&!h.has(p.columnIndex)&&h.set(p.columnIndex,p.monthName)}),Array.from(h.entries()).map(([p,u])=>({columnIndex:p,monthName:u}))});return(h,p)=>(s(),a("div",et,[h.isLoading?(s(),a("div",tt,[t("div",st,[r(e(k),{width:"40px",height:"12px"}),r(e(k),{width:"40px",height:"12px"}),r(e(k),{width:"40px",height:"12px"}),r(e(k),{width:"40px",height:"12px"})]),t("div",ot,[(s(),a(E,null,O(371,u=>r(e(k),{key:`skeleton-${u}`,width:"16px",height:"16px",class:"rounded-sm"})),64))]),t("div",nt,[r(e(k),{width:"40px",height:"12px"}),r(e(k),{width:"60px",height:"12px"}),r(e(k),{width:"40px",height:"12px"})])])):(s(),a("div",{key:1,ref_key:"scrollContainer",ref:y,class:"overflow-x-auto pb-2"},[t("div",at,[(s(!0),a(E,null,O(z.value,(u,d)=>(s(),a("div",{key:`day-label-${d}`,class:"text-overline-small-bold text-neutral600 whitespace-nowrap self-center select-none bg-white pr-1 z-[2]",style:F({gridColumn:1,gridRow:u.row})},v(u.label),5))),128)),(s(!0),a(E,null,O(W.value,u=>(s(),a("div",{key:`month-${u.columnIndex}`,class:"text-overline-small-bold text-neutral600 whitespace-nowrap self-end bg-white pb-1 z-[2]",style:F({gridRow:1,gridColumn:u.columnIndex})},v(u.monthName),5))),128)),(s(!0),a(E,null,O(R.value,(u,d)=>(s(),a("div",{key:`cell-${d}`,role:"button",tabindex:"0",class:"w-4 h-4 rounded-sm cursor-pointer focus:outline-none",style:F({backgroundColor:C(u.level),gridRow:u.weekday+1,gridColumn:u.columnIndex}),onClick:n=>b(n,u),onKeydown:fe(n=>b(n,u),["enter"])},null,44,lt))),128))])],512)),h.isLoading?P("",!0):(s(),a("div",rt,[t("span",it,v(e(o)("less").toUpperCase()),1),t("div",ct,[t("div",{class:"w-3 h-3 rounded-sm",style:F({backgroundColor:C(0)}),title:g(0)},null,12,dt),t("div",{class:"w-3 h-3 rounded-sm",style:F({backgroundColor:C(1)}),title:g(1)},null,12,ut),t("div",{class:"w-3 h-3 rounded-sm",style:F({backgroundColor:C(2)}),title:g(2)},null,12,pt),t("div",{class:"w-3 h-3 rounded-sm",style:F({backgroundColor:C(3)}),title:g(3)},null,12,mt)]),t("span",ht,v(e(o)("more").toUpperCase()),1)])),(s(),L(ge,{to:"body"},[r(X,{"enter-active-class":"transition-all duration-200 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:I(()=>[l.value.visible?(s(),a("div",{key:0,class:"fixed z-50 pointer-events-none",style:F({left:c.value.left,top:c.value.top,transform:c.value.transform})},[t("div",xt,[t("div",ft,[t("div",gt,[t("div",vt,v(f(l.value.date)),1),t("div",_t,v($(l.value.date)),1)]),t("button",{onClick:i,class:"text-neutral400 hover:text-neutral900 transition-colors w-6 h-6 flex items-center justify-center rounded-full hover:bg-neutral50 flex-shrink-0"},[r(e(ne),{class:"w-4 h-4"})])]),t("div",wt,[t("div",yt,[t("div",{class:V(["w-4 h-4 rounded flex-shrink-0",{"bg-neutral100":l.value.level===0||l.value.level===1,"bg-primary100":l.value.level===2,"bg-primary300":l.value.level===3}])},null,2),t("span",bt,v(g(l.value.level)),1)]),t("div",kt,[t("span",$t,v(e(o)("activity")),1),t("span",Ct,v(x(l.value.date))+" "+v(e(o)("attempts")),1)])]),p[0]||(p[0]=t("div",{class:"hidden sm:block absolute left-1/2 bottom-0 -translate-x-1/2 translate-y-full w-0 h-0 border-l-[10px] border-r-[10px] border-t-[10px] border-l-transparent border-r-transparent border-t-primary300"},null,-1))])],4)):P("",!0)]),_:1}),r(X,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[l.value.visible?(s(),a("div",{key:0,class:"fixed inset-0 z-40 bg-neutral900/10 backdrop-blur-[2px]",onClick:i})):P("",!0)]),_:1})]))]))}}),Dt={key:0,class:"banner-wrapper"},Lt={class:"flex flex-col-reverse sm:flex-row justify-between items-center w-full bg-purple100 rounded-2xl p-6 relative overflow-visible gap-4"},It={class:"flex flex-col items-center sm:items-start gap-4 z-30"},Tt={class:"flex flex-col items-center sm:items-start gap-2"},jt={class:"text-heading-3-semibold text-neutral900",style:{"font-size":"clamp(18px, 3vw, 24px)"}},Mt={class:"text-body-large-regular text-neutral600 text-center sm:text-left",style:{"font-size":"clamp(14px, 2vw, 16px)"}},Pt={class:"flex items-center justify-center"},zt={key:1,class:"relative w-[141px] h-[141px] flex items-center justify-center"},Ft={key:2,class:"relative w-[141px] h-[141px] flex items-center justify-center text-6xl"},K="premium-banner-hidden-date",Et=A({__name:"PremiumBannerSection",setup(T,{expose:m}){const{t:o}=H(),y=J(),{isUserInfoLoading:l,userInfo:b}=U(y),x=M(!1),c=M(!1),i=M(!1),w=M(!1),f=j(()=>b.value?b.value.access_type!=="premium":!1),$={getItem(d){try{return localStorage.getItem(d)}catch(n){return console.warn("Failed to read from localStorage:",n),null}},setItem(d,n){try{localStorage.setItem(d,n)}catch(_){console.warn("Failed to write to localStorage:",_)}},removeItem(d){try{localStorage.removeItem(d)}catch(n){console.warn("Failed to remove from localStorage:",n)}}},D=(d=new Date)=>{const n=new Date(d);return n.setHours(0,0,0,0),n},z=()=>{const d=$.getItem(K);if(!d)return!0;try{const n=new Date(d);if(isNaN(n.getTime()))return console.warn("Invalid date in localStorage, clearing cache"),$.removeItem(K),!0;const _=D(),S=D(n);return _.getTime()>S.getTime()}catch(n){return console.warn("Error parsing date from localStorage:",n),!0}},C=()=>{if(l.value)return;z()&&b.value&&f.value&&!x.value&&(x.value=!0)};let g=null;const R=()=>{if(g&&(clearTimeout(g),g=null),!i.value||!f.value)return;const d=new Date,n=new Date(d);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const _=n.getTime()-d.getTime();if(_<=0||_>2147483647){console.warn("Invalid timeout value, skipping scheduling");return}g=setTimeout(()=>{i.value&&f.value&&(C(),R())},_)},W=()=>{!document.hidden&&i.value&&C()};Y(()=>{var d;return(d=b.value)==null?void 0:d.access_type},d=>{d==="premium"&&(x.value=!1,g&&(clearTimeout(g),g=null))},{flush:"post"}),Y(x,()=>{w.value=!1},{immediate:!1}),Z(()=>{i.value=!0,C(),R(),document.addEventListener("visibilitychange",W)}),_e(()=>{document.removeEventListener("visibilitychange",W),g&&(clearTimeout(g),g=null),i.value=!1});const h=()=>{c.value=!0},p=()=>{x.value=!1;{const d=D();$.setItem(K,d.toISOString())}},u=()=>{w.value=!0,console.warn("Failed to load premium banner images")};return m({isVisible:x}),(d,n)=>{const _=Le;return s(),a(E,null,[r(X,{name:"banner-fold"},{default:I(()=>[x.value?(s(),a("section",Dt,[t("div",Lt,[e(l)?P("",!0):(s(),a("button",{key:0,type:"button",onClick:p,class:"close-button flex items-center justify-center w-6 h-6 text-purple300"},[r(e(ne),{class:"w-4 h-4"})])),t("div",It,[t("div",Tt,[t("h3",jt,v(e(o)("upgradeToPremium"))+" ðŸš€",1),t("p",Mt,v(e(o)("goPremiumToUnlock")),1)]),r(e(q),{severity:"help",label:e(o)("upgradeToPremium"),class:"rounded-md text-action-medium-semibold w-60 h-12 px-4 py-3",onClick:h},null,8,["label"])]),t("div",Pt,[e(l)?(s(),L(e(k),{key:0,height:"141px",width:"141px",shape:"circle"})):w.value?(s(),a("div",Ft,"ðŸš€")):(s(),a("div",zt,[r(_,{src:e(Te),width:"141",height:"141",class:"absolute bottom-0 z-10",alt:"Premium station illustration",loading:"lazy",onError:u},null,8,["src"]),r(_,{src:e(Ie),width:"121",height:"121",class:"absolute top-[-10px] z-20 animate-rocket-hover",alt:"Premium rocket illustration",loading:"lazy",onError:u},null,8,["src"])]))])])])):P("",!0)]),_:1}),r(e(Se),{"model-value":c.value,"onUpdate:modelValue":n[0]||(n[0]=S=>c.value=S)},null,8,["model-value"])],64)}}}),Ut={class:"@container max-w-[724px] h-[604px] bg-white rounded-2xl p-6"},At={class:"flex items-center justify-between mt-2 mb-6 ml-2"},Rt={class:"text-heading-4-semibold text-neutral900"},Bt={key:0,class:"flex justify-center py-8"},Nt={key:2,class:"text-center py-8 text-neutral500"},Ot=A({__name:"RoadmapSection",setup(T){const m=se(),o=oe(),{lessons:y,isLoading:l}=U(o);Z(()=>{o.loadRoadmap()});const{locale:b}=H();Y(b,async()=>{await o.loadRoadmap()});function x(){m.push({name:"roadmap"})}return(c,i)=>(s(),a("section",Ut,[t("div",At,[t("h2",Rt,v(c.$t("roadmap")),1),r(e(q),{label:c.$t("seeRoadmap"),variant:"link",size:"small",class:"!p-0 action-small-bold text-primary",onClick:x},null,8,["label"])]),e(l)?(s(),a("div",Bt,i[0]||(i[0]=[t("i",{class:"pi pi-spin pi-spinner text-2xl text-primary"},null,-1)]))):e(y).length>0?te(c.$slots,"default",{key:1}):(s(),a("div",Nt,v(c.$t("noLessonsAvailable")),1))]))}}),Ht={class:"relative"},Wt={class:"flex justify-end items-center min-w-0"},Vt={class:"step-wrapper relative z-10 flex items-center justify-center w-[54px] h-[54px]"},Gt={class:"flex justify-start items-center min-w-0"},Kt=A({__name:"HomeTimeline",props:{lessons:{}},setup(T){const m=T,o=j(()=>{const i=m.lessons.findIndex(w=>!w.completed&&w.student_progress<100);return i===-1?m.lessons.length-1:i}),y=j(()=>{const i=o.value,w=Math.max(0,i-1),f=Math.min(m.lessons.length,w+3),$=Math.max(0,f-3);return m.lessons.slice($,f).map((D,z)=>{const C=$+z,g=ke(D,C,m.lessons);return{lesson:D,originalIndex:C,status:g.status,isCurrent:g.isCurrent,isLocked:g.isLocked,lessonType:g.lessonType}})});function l(i){return i%2===0?"left":"right"}function b(i){return!i.isLocked&&!!i.lesson.completed}const x={learn:"bg-primary100",practice:"bg-purple100",module:"bg-warning100",project:"bg-blue-100"};function c(i){return i.isLocked?"bg-neutral50":i.lessonType?x[i.lessonType]:"bg-neutral50"}return(i,w)=>(s(),a("div",Ht,[w[0]||(w[0]=t("div",{class:"absolute left-1/2 -translate-x-1/2 w-[20px] h-[128px] top-[-75px] z-0 rounded-sm",style:{background:"linear-gradient(180deg, #fff 0%, #28ca9e 100%)"}},null,-1)),(s(!0),a(E,null,O(y.value,(f,$)=>(s(),a("div",{key:f.lesson.id,class:"relative items-center grid grid-cols-[1fr_54px_1fr]"},[$<y.value.length-1?(s(),a("div",{key:0,class:V(["timeline-line absolute left-1/2 -translate-x-1/2 w-[20px] h-full top-1/2 z-0 rounded-sm overflow-hidden",b(f)?"bg-primary":"bg-neutral50"])},null,2)):P("",!0),t("div",Wt,[l(f.originalIndex)==="left"?(s(),a(E,{key:0},[r(e(Q),{lesson:f.lesson,"is-locked":f.isLocked,"is-current":f.isCurrent,variant:"compact"},null,8,["lesson","is-locked","is-current"]),t("div",{class:V(["w-[26px] h-[20px] -mr-1 flex-shrink-0",c(f)])},null,2)],64)):P("",!0)]),t("div",Vt,[r(e(be),{status:f.status,"lesson-type":f.lessonType,variant:"compact"},null,8,["status","lesson-type"])]),t("div",Gt,[l(f.originalIndex)==="right"?(s(),a(E,{key:0},[t("div",{class:V(["w-[24px] h-[20px] -ml-1 flex-shrink-0",c(f)])},null,2),r(e(Q),{lesson:f.lesson,"is-locked":f.isLocked,"is-current":f.isCurrent,variant:"compact"},null,8,["lesson","is-locked","is-current"])],64)):P("",!0)])]))),128)),w[1]||(w[1]=t("div",{class:"absolute left-1/2 -translate-x-1/2 w-[20px] h-[128px] bottom-[-75px] z-0 rounded-sm",style:{background:"linear-gradient(180deg, #e6faf4 0%, #fff 100%)"}},null,-1))]))}}),Xt={class:"flex flex-col items-center"},Yt={class:"w-full max-w-[1280px] px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-10"},ws=A({__name:"HomePage",setup(T){const m=ae(),{loadProgress:o}=m,{contributionData:y}=U(m),l=oe(),{lessons:b}=U(l);return Z(()=>{o()}),(x,c)=>(s(),a("div",Xt,[r(e(N),null,{default:I(()=>[r(e(ye))]),_:1}),t("div",Yt,[r(we,{name:"home-list",tag:"div",class:"flex flex-col gap-6 sm:gap-8"},{default:I(()=>[r(e(N),{key:"greeting"},{default:I(()=>[r(Fe)]),_:1}),r(e(N),{key:"profile"},{default:I(()=>[r(Qe,null,{default:I(()=>[r(St,{contributions:e(y),"is-loading":e(m).isProgressLoading},null,8,["contributions","is-loading"])]),_:1})]),_:1}),r(e(N),{key:"premium"},{default:I(()=>[r(Et)]),_:1}),r(e(N),{key:"roadmap"},{default:I(()=>[r(Ot,null,{default:I(()=>[r(Kt,{lessons:e(b)},null,8,["lessons"])]),_:1})]),_:1})]),_:1})])]))}});export{ws as default};
