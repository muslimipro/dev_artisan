import{z as T,a as c,s as A}from"./index-D4dt5PqA.js";import{d as R,u as U,a as E,r as $,o as t,c as m,b as a,e as s,w as l,t as i,f as _,g as L,h as v,F as g,i as S,j as V,k as q,s as D}from"./index-OVkfNIy2.js";import{s as H}from"./index-Cpzr3Wch.js";import{s as I}from"./index-CMY5HSop.js";import{s as Z}from"./index-DZygPNFy.js";import{s as G}from"./index-DLzLFWqc.js";import{_ as J}from"./AuthHeader.vue_vue_type_script_setup_true_lang-DWJzxIeT.js";import{a as B}from"./index-d-7mnu5l.js";import"./logo-BijXTbgP.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-CwS1Kfjb.js";import"./index-BxfnHzua.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-1 items-center justify-center my-4"},Q={class:"text-4xl font-semibold px-2 mr-4"},W={class:"flex flex-col gap-1"},X={for:"email"},Y={class:"flex flex-col gap-1"},ee={for:"password"},se={class:"my-0 flex flex-col gap-1"},ae={class:"flex flex-col gap-1"},te={for:"confirm_password"},re={class:"my-0 flex flex-col gap-1"},ge=R({__name:"RegisterPage",setup(oe){const w=U(),x=q(),y=E(),n=$(!1),F=$({email:"",password:""}),j=T(c.object({email:c.string().email().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:c.string().min(8,{message:"Minimum 8 characters."}).max(100,{message:"Maximum 100 characters."}).refine(e=>/[a-z]/.test(e),{message:"Must have a lowercase letter."}).refine(e=>/[A-Z]/.test(e),{message:"Must have an uppercase letter."}).refine(e=>/[0-9]/.test(e),{message:"Must have a number."}),confirm_password:c.string()}).refine(e=>e.password===e.confirm_password,{message:"Passwords must match",path:["confirm_password"]})),C=async e=>{if(!n.value&&e.valid){n.value=!0;try{await B.signUp(e.states.email.value,e.states.password.value);const{data:r}=await B.login(e.states.email.value,e.states.password.value);y.setToken(r),y.setUser(r),x.replace({name:"projects"}),w.add({severity:"success",summary:"Success",life:3e3})}catch(r){w.add({severity:"error",summary:r.toString(),life:3e3})}finally{n.value=!1}}};return(e,r)=>{const N=G,d=Z,p=I,h=H,b=D,P=A;return t(),m(g,null,[a(J),s("div",K,[a(P,{initialValues:F.value,resolver:V(j),onSubmit:C,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:l(o=>{var k,M,z;return[s("div",O,[s("p",Q,i(e.$t("registration")),1)]),s("div",W,[a(d,{variant:"on"},{default:l(()=>[a(N,{id:"email",name:"email",type:"text",fluid:""}),s("label",X,i(e.$t("email")),1)]),_:1}),(k=o.email)!=null&&k.invalid?(t(),_(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[L(i(o.email.error.message),1)]),_:2},1024)):v("",!0)]),s("div",Y,[a(d,{variant:"on"},{default:l(()=>[a(h,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),s("label",ee,i(e.$t("password")),1)]),_:1}),(M=o.password)!=null&&M.invalid?(t(),_(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[s("ul",se,[(t(!0),m(g,null,S(o.password.errors,(u,f)=>(t(),m("li",{key:f},i(u.message),1))),128))])]),_:2},1024)):v("",!0)]),s("div",ae,[a(d,{variant:"on"},{default:l(()=>[a(h,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),s("label",te,i(e.$t("confirmPassword")),1)]),_:1}),(z=o.confirm_password)!=null&&z.invalid?(t(),_(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[s("ul",re,[(t(!0),m(g,null,S(o.confirm_password.errors,(u,f)=>(t(),m("li",{key:f},i(u.message),1))),128))])]),_:2},1024)):v("",!0)]),a(b,{type:"submit",label:e.$t("signUp"),loading:n.value,disabled:n.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),a(b,{variant:"link",label:e.$t("alreadyHaveAnAccount"),onClick:r[0]||(r[0]=o=>V(x).push({name:"login"})),size:"small"},null,8,["label"])])],64)}}});export{ge as default};
