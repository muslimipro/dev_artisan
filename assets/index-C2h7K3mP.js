import{B as W,m as T,o as c,q as k,w as S,a2 as ae,O as E,k as w,S as N,a4 as qe,v as U,a3 as Je,p as J,s as te,a5 as We,a6 as Te,a7 as Ye,R as Qe,a8 as Xe,a9 as Le,N as ue,c as m,F as q,n as Z,i as u,t as ee,z as K,e as B,aa as Ie,ab as we,r as y,b as he,h as Y,D as j,y as z,ac as _e,j as x,C as Q,d as Ze,u as et,f as H,ad as tt,I as $e,_ as xe,x as Ve,$ as nt,a0 as ot,l as ge,A as at}from"./index-DVuzLZBb.js";import{_ as it}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-BXKU9yhQ.js";import{u as ke}from"./useLocaleStore-l6pQT-PD.js";import{L as Ue}from"./lessonApi-cXkZnenT.js";import{m as lt}from"./mapLessonFromDto-DxMZVnwf.js";import{U as X}from"./unitApi-B32ETPAu.js";import{s as st}from"./index-BEnlkQZt.js";import{s as De}from"./index-BNEY6X_c.js";import{s as rt}from"./index-BPuvHf5m.js";import{d as ct}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{s as dt}from"./index-sMfZNOlb.js";import{_ as pe,T as Fe}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-R8PwxR3u.js";import{s as ze,a as Re}from"./index-CrUjLgA5.js";import{s as ut}from"./index-B3AqpkBX.js";import{s as ve}from"./index-I5bymBvs.js";import{s as Ne}from"./index-BtCsDXCJ.js";import{C as pt}from"./cloudStorageApi-BoR44h72.js";import{_ as vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as ht}from"./index-TmksFvjH.js";import{s as gt}from"./index-BNc1adrL.js";import{s as Ee}from"./index-OYgziI97.js";import{A as ie}from"./language-DYQF8nnT.js";import{u as ft}from"./index-DTo78pMF.js";import{s as mt}from"./index-BVeSRz21.js";import{s as bt}from"./index-gHKmS7ze.js";import{T as yt}from"./index-DZF1iNJm.js";import{s as wt}from"./index-Bb6nNx8E.js";import"./mapUnitFromDto-BRBO9875.js";import"./transformUnitDtosToPages-CGD_PO48.js";import"./index-owj02RpV.js";import"./index-C0pCLmp8.js";import"./index-UQ_p2D6R.js";var _t={root:"p-accordioncontent",content:"p-accordioncontent-content"},$t=W.extend({name:"accordioncontent",classes:_t}),xt={name:"BaseAccordionContent",extends:te,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:$t,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Ae={name:"AccordionContent",extends:xt,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return T(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function kt(t,n,e,i,l,o){return t.asChild?N(t.$slots,"default",{key:1,class:J(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs}):(c(),k(Je,T({key:0,name:"p-toggleable-content"},t.ptm("transition",o.ptParams)),{default:S(function(){return[!o.$pcAccordion.lazy||o.$pcAccordionPanel.active?ae((c(),k(E(t.as),T({key:0,class:t.cx("root")},o.attrs),{default:S(function(){return[w("div",T({class:t.cx("content")},t.ptm("content",o.ptParams)),[N(t.$slots,"default")],16)]}),_:3},16,["class"])),[[qe,o.$pcAccordion.lazy?!0:o.$pcAccordionPanel.active]]):U("",!0)]}),_:3},16))}Ae.render=kt;var At={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},Ct=W.extend({name:"accordionheader",classes:At}),Pt={name:"BaseAccordionHeader",extends:te,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:Ct,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Ce={name:"AccordionHeader",extends:Pt,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(n){switch(n.code){case"ArrowDown":this.onArrowDownKey(n);break;case"ArrowUp":this.onArrowUpKey(n);break;case"Home":this.onHomeKey(n);break;case"End":this.onEndKey(n);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(n);break}},onArrowDownKey:function(n){var e=this.findNextPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onHomeKey(n),n.preventDefault()},onArrowUpKey:function(n){var e=this.findPrevPanel(this.findPanel(n.currentTarget));e?this.changeFocusedPanel(n,e):this.onEndKey(n),n.preventDefault()},onHomeKey:function(n){var e=this.findFirstPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEndKey:function(n){var e=this.findLastPanel();this.changeFocusedPanel(n,e),n.preventDefault()},onEnterKey:function(n){this.changeActiveValue(),n.preventDefault()},findPanel:function(n){return n==null?void 0:n.closest('[data-pc-name="accordionpanel"]')},findHeader:function(n){return We(n,'[data-pc-name="accordionheader"]')},findNextPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.nextElementSibling;return i?Te(i,"data-p-disabled")?this.findNextPanel(i):this.findHeader(i):null},findPrevPanel:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e?n:n.previousElementSibling;return i?Te(i,"data-p-disabled")?this.findPrevPanel(i):this.findHeader(i):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(n,e){Ye(this.findHeader(e))}},computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return T(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}},components:{ChevronUpIcon:De,ChevronDownIcon:rt},directives:{ripple:Qe}};function St(t,n,e,i,l,o){var a=Xe("ripple");return t.asChild?N(t.$slots,"default",{key:1,class:J(t.cx("root")),active:o.$pcAccordionPanel.active,a11yAttrs:o.a11yAttrs,onClick:o.onClick}):ae((c(),k(E(t.as),T({key:0,class:t.cx("root"),onClick:o.onClick},o.attrs),{default:S(function(){return[N(t.$slots,"default",{active:o.$pcAccordionPanel.active}),N(t.$slots,"toggleicon",{active:o.$pcAccordionPanel.active,class:J(t.cx("toggleicon"))},function(){return[o.$pcAccordionPanel.active?(c(),k(E(o.$pcAccordion.$slots.collapseicon?o.$pcAccordion.$slots.collapseicon:o.$pcAccordion.collapseIcon?"span":"ChevronDownIcon"),T({key:0,class:[o.$pcAccordion.collapseIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"])):(c(),k(E(o.$pcAccordion.$slots.expandicon?o.$pcAccordion.$slots.expandicon:o.$pcAccordion.expandIcon?"span":"ChevronUpIcon"),T({key:1,class:[o.$pcAccordion.expandIcon,t.cx("toggleicon")],"aria-hidden":"true"},t.ptm("toggleicon",o.ptParams)),null,16,["class"]))]})]}),_:3},16,["class","onClick"])),[[a]])}Ce.render=St;var Tt={root:function(n){var e=n.instance,i=n.props;return["p-accordionpanel",{"p-accordionpanel-active":e.active,"p-disabled":i.disabled}]}},Lt=W.extend({name:"accordionpanel",classes:Tt}),It={name:"BaseAccordionPanel",extends:te,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Lt,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Pe={name:"AccordionPanel",extends:It,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return T(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Ut(t,n,e,i,l,o){return t.asChild?N(t.$slots,"default",{key:1,class:J(t.cx("root")),active:o.active,a11yAttrs:o.a11yAttrs}):(c(),k(E(t.as),T({key:0,class:t.cx("root")},o.attrs),{default:S(function(){return[N(t.$slots,"default")]}),_:3},16,["class"]))}Pe.render=Ut;var Bt=function(n){var e=n.dt;return`
.p-accordionpanel {
    display: flex;
    flex-direction: column;
    border-style: solid;
    border-width: `.concat(e("accordion.panel.border.width"),`;
    border-color: `).concat(e("accordion.panel.border.color"),`;
}

.p-accordionheader {
    all: unset;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(e("accordion.header.padding"),`;
    color: `).concat(e("accordion.header.color"),`;
    background: `).concat(e("accordion.header.background"),`;
    border-style: solid;
    border-width: `).concat(e("accordion.header.border.width"),`;
    border-color: `).concat(e("accordion.header.border.color"),`;
    font-weight: `).concat(e("accordion.header.font.weight"),`;
    border-radius: `).concat(e("accordion.header.border.radius"),`;
    transition: background `).concat(e("accordion.transition.duration"),"; color ").concat(e("accordion.transition.duration"),"color ").concat(e("accordion.transition.duration"),", outline-color ").concat(e("accordion.transition.duration"),", box-shadow ").concat(e("accordion.transition.duration"),`;
    outline-color: transparent;
}

.p-accordionpanel:first-child > .p-accordionheader {
    border-width: `).concat(e("accordion.header.first.border.width"),`;
    border-start-start-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
    border-start-end-radius: `).concat(e("accordion.header.first.top.border.radius"),`;
}

.p-accordionpanel:last-child > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.bottom.border.radius"),`;
}

.p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
    border-end-start-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
    border-end-end-radius: `).concat(e("accordion.header.last.active.bottom.border.radius"),`;
}

.p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.color"),`;
}

.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
    box-shadow: `).concat(e("accordion.header.focus.ring.shadow"),`;
    outline: `).concat(e("accordion.header.focus.ring.width")," ").concat(e("accordion.header.focus.ring.style")," ").concat(e("accordion.header.focus.ring.color"),`;
    outline-offset: `).concat(e("accordion.header.focus.ring.offset"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.hover.background"),`;
    color: `).concat(e("accordion.header.hover.color"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
    background: `).concat(e("accordion.header.active.background"),`;
    color: `).concat(e("accordion.header.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
    background: `).concat(e("accordion.header.active.hover.background"),`;
    color: `).concat(e("accordion.header.active.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(e("accordion.header.toggle.icon.active.hover.color"),`;
}

.p-accordioncontent-content {
    border-style: solid;
    border-width: `).concat(e("accordion.content.border.width"),`;
    border-color: `).concat(e("accordion.content.border.color"),`;
    background-color: `).concat(e("accordion.content.background"),`;
    color: `).concat(e("accordion.content.color"),`;
    padding: `).concat(e("accordion.content.padding"),`;
}
`)},Vt={root:"p-accordion p-component"},Dt=W.extend({name:"accordion",theme:Bt,classes:Vt}),Ft={name:"BaseAccordion",extends:te,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:Dt,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},je={name:"Accordion",extends:Ft,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(n){this.id=n||Le()},value:function(n){this.d_value=n},activeIndex:{immediate:!0,handler:function(n){this.hasAccordionTab&&(this.d_value=this.multiple?n==null?void 0:n.map(String):n==null?void 0:n.toString())}}},mounted:function(){this.id=this.id||Le()},methods:{isItemActive:function(n){var e;return this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.includes(n):this.d_value===n},updateValue:function(n){var e,i=this.isItemActive(n);this.multiple?i?this.d_value=this.d_value.filter(function(l){return l!==n}):this.d_value?this.d_value.push(n):this.d_value=[n]:this.d_value=i?null:n,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(e=this.d_value)===null||e===void 0?void 0:e.map(Number):Number(this.d_value)),this.$emit(i?"tab-close":"tab-open",{originalEvent:void 0,index:Number(n)})},isAccordionTab:function(n){return n.type.name==="AccordionTab"},getTabProp:function(n,e){return n.props?n.props[e]:void 0},getKey:function(n,e){return this.getTabProp(n,"header")||e},getHeaderPT:function(n,e){var i=this;return{root:T({onClick:function(o){return i.onTabClick(o,e)}},this.getTabProp(n,"headerProps"),this.getTabPT(n,"header",e)),toggleicon:T(this.getTabProp(n,"headeractionprops"),this.getTabPT(n,"headeraction",e))}},getContentPT:function(n,e){return{root:T(this.getTabProp(n,"contentProps"),this.getTabPT(n,"toggleablecontent",e)),transition:this.getTabPT(n,"transition",e),content:this.getTabPT(n,"content",e)}},getTabPT:function(n,e,i){var l=this.tabs.length,o={props:n.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:i,count:l,first:i===0,last:i===l-1,active:this.isItemActive("".concat(i))}};return T(this.ptm("accordiontab.".concat(e),o),this.ptmo(this.getTabProp(n,"pt"),e,o))},onTabClick:function(n,e){this.$emit("tab-click",{originalEvent:n,index:e})}},computed:{tabs:function(){var n=this;return this.$slots.default().reduce(function(e,i){return n.isAccordionTab(i)?e.push(i):i.children&&i.children instanceof Array&&i.children.forEach(function(l){n.isAccordionTab(l)&&e.push(l)}),e},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Pe,AccordionHeader:Ce,AccordionContent:Ae,ChevronUpIcon:De,ChevronRightIcon:st}};function zt(t,n,e,i,l,o){var a=ue("AccordionHeader"),s=ue("AccordionContent"),h=ue("AccordionPanel");return c(),m("div",T({class:t.cx("root")},t.ptmi("root")),[o.hasAccordionTab?(c(!0),m(q,{key:0},Z(o.tabs,function(r,d){return c(),k(h,{key:o.getKey(r,d),value:"".concat(d),pt:{root:o.getTabPT(r,"root",d)},disabled:o.getTabProp(r,"disabled")},{default:S(function(){return[u(a,{class:J(o.getTabProp(r,"headerClass")),pt:o.getHeaderPT(r,d)},{toggleicon:S(function(f){return[f.active?(c(),k(E(t.$slots.collapseicon?t.$slots.collapseicon:t.collapseIcon?"span":"ChevronDownIcon"),T({key:0,class:[t.collapseIcon,f.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(r,"headericon",d)),null,16,["class"])):(c(),k(E(t.$slots.expandicon?t.$slots.expandicon:t.expandIcon?"span":"ChevronUpIcon"),T({key:1,class:[t.expandIcon,f.class],"aria-hidden":"true",ref_for:!0},o.getTabPT(r,"headericon",d)),null,16,["class"]))]}),default:S(function(){return[r.children&&r.children.headericon?(c(),k(E(r.children.headericon),{key:0,isTabActive:o.isItemActive("".concat(d)),active:o.isItemActive("".concat(d)),index:d},null,8,["isTabActive","active","index"])):U("",!0),r.props&&r.props.header?(c(),m("span",T({key:1,ref_for:!0},o.getTabPT(r,"headertitle",d)),ee(r.props.header),17)):U("",!0),r.children&&r.children.header?(c(),k(E(r.children.header),{key:2})):U("",!0)]}),_:2},1032,["class","pt"]),u(s,{pt:o.getContentPT(r,d)},{default:S(function(){return[(c(),k(E(r)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):N(t.$slots,"default",{key:1})],16)}je.render=zt;var Rt=function(n){var e=n.dt;return`
.p-inputgroup,
.p-inputgroup .p-iconfield,
.p-inputgroup .p-floatlabel,
.p-inputgroup .p-iftalabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: `.concat(e("inputgroup.addon.padding"),`;
    background: `).concat(e("inputgroup.addon.background"),`;
    color: `).concat(e("inputgroup.addon.color"),`;
    border-block-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    border-block-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
    min-width: `).concat(e("inputgroup.addon.min.width"),`;
}

.p-inputgroupaddon:first-child,
.p-inputgroupaddon + .p-inputgroupaddon {
    border-inline-start: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:last-child {
    border-inline-end: 1px solid `).concat(e("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:has(.p-button) {
    padding: 0;
    overflow: hidden;
}

.p-inputgroupaddon .p-button {
    border-radius: 0;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iconfield > .p-component,
.p-inputgroup > .p-floatlabel > .p-component,
.p-inputgroup > .p-floatlabel > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel > .p-component,
.p-inputgroup > .p-iftalabel > .p-inputwrapper > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroupaddon:first-child,
.p-inputgroup > .p-component:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-component,
.p-inputgroup > .p-iconfield:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-inputwrapper > .p-component {
    border-start-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-start-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup > .p-component:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-component,
.p-inputgroup > .p-iconfield:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-inputwrapper > .p-component {
    border-start-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
    border-end-end-radius: `).concat(e("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-component:focus,
.p-inputgroup .p-component.p-focus,
.p-inputgroup .p-inputwrapper-focus,
.p-inputgroup .p-component:focus ~ label,
.p-inputgroup .p-component.p-focus ~ label,
.p-inputgroup .p-inputwrapper-focus ~ label {
    z-index: 1;
}

.p-inputgroup > .p-button:not(.p-button-icon-only) {
    width: auto;
}

.p-inputgroup .p-iconfield + .p-iconfield .p-inputtext {
    border-inline-start: 0;
}
`)},Nt={root:"p-inputgroup"},Et=W.extend({name:"inputgroup",theme:Rt,classes:Nt}),jt={name:"BaseInputGroup",extends:te,style:Et,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},He={name:"InputGroup",extends:jt,inheritAttrs:!1};function Ht(t,n,e,i,l,o){return c(),m("div",T({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}He.render=Ht;var Ot={root:"p-inputgroupaddon"},Mt=W.extend({name:"inputgroupaddon",classes:Ot}),Kt={name:"BaseInputGroupAddon",extends:te,style:Mt,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},Oe={name:"InputGroupAddon",extends:Kt,inheritAttrs:!1};function Gt(t,n,e,i,l,o){return c(),m("div",T({class:t.cx("root")},t.ptmi("root")),[N(t.$slots,"default")],16)}Oe.render=Gt;var qt=function(n){var e=n.dt;return`
.p-toggleswitch {
    display: inline-block;
    width: `.concat(e("toggleswitch.width"),`;
    height: `).concat(e("toggleswitch.height"),`;
}

.p-toggleswitch-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
}

.p-toggleswitch-slider {
    display: inline-block;
    cursor: pointer;
    width: 100%;
    height: 100%;
    border-width: `).concat(e("toggleswitch.border.width"),`;
    border-style: solid;
    border-color: `).concat(e("toggleswitch.border.color"),`;
    background: `).concat(e("toggleswitch.background"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", border-color ").concat(e("toggleswitch.transition.duration"),", outline-color ").concat(e("toggleswitch.transition.duration"),", box-shadow ").concat(e("toggleswitch.transition.duration"),`;
    border-radius: `).concat(e("toggleswitch.border.radius"),`;
    outline-color: transparent;
    box-shadow: `).concat(e("toggleswitch.shadow"),`;
}

.p-toggleswitch-handle {
    position: absolute;
    top: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: `).concat(e("toggleswitch.handle.background"),`;
    color: `).concat(e("toggleswitch.handle.color"),`;
    width: `).concat(e("toggleswitch.handle.size"),`;
    height: `).concat(e("toggleswitch.handle.size"),`;
    inset-inline-start: `).concat(e("toggleswitch.gap"),`;
    margin-block-start: calc(-1 * calc(`).concat(e("toggleswitch.handle.size"),` / 2));
    border-radius: `).concat(e("toggleswitch.handle.border.radius"),`;
    transition: background `).concat(e("toggleswitch.transition.duration"),", color ").concat(e("toggleswitch.transition.duration"),", inset-inline-start ").concat(e("toggleswitch.slide.duration"),", box-shadow ").concat(e("toggleswitch.slide.duration"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.background"),`;
    border-color: `).concat(e("toggleswitch.checked.border.color"),`;
}

.p-toggleswitch.p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.color"),`;
    inset-inline-start: calc(`).concat(e("toggleswitch.width")," - calc(").concat(e("toggleswitch.handle.size")," + ").concat(e("toggleswitch.gap"),`));
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.hover.background"),`;
    border-color: `).concat(e("toggleswitch.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.checked.hover.background"),`;
    border-color: `).concat(e("toggleswitch.checked.hover.border.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.checked.hover.background"),`;
    color: `).concat(e("toggleswitch.handle.checked.hover.color"),`;
}

.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-slider {
    box-shadow: `).concat(e("toggleswitch.focus.ring.shadow"),`;
    outline: `).concat(e("toggleswitch.focus.ring.width")," ").concat(e("toggleswitch.focus.ring.style")," ").concat(e("toggleswitch.focus.ring.color"),`;
    outline-offset: `).concat(e("toggleswitch.focus.ring.offset"),`;
}

.p-toggleswitch.p-invalid > .p-toggleswitch-slider {
    border-color: `).concat(e("toggleswitch.invalid.border.color"),`;
}

.p-toggleswitch.p-disabled {
    opacity: 1;
}

.p-toggleswitch.p-disabled .p-toggleswitch-slider {
    background: `).concat(e("toggleswitch.disabled.background"),`;
}

.p-toggleswitch.p-disabled .p-toggleswitch-handle {
    background: `).concat(e("toggleswitch.handle.disabled.background"),`;
}
`)},Jt={root:{position:"relative"}},Wt={root:function(n){var e=n.instance,i=n.props;return["p-toggleswitch p-component",{"p-toggleswitch-checked":e.checked,"p-disabled":i.disabled,"p-invalid":e.$invalid}]},input:"p-toggleswitch-input",slider:"p-toggleswitch-slider",handle:"p-toggleswitch-handle"},Yt=W.extend({name:"toggleswitch",theme:qt,classes:Wt,inlineStyles:Jt}),Qt={name:"BaseToggleSwitch",extends:gt,props:{trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Yt,provide:function(){return{$pcToggleSwitch:this,$parentInstance:this}}},Me={name:"ToggleSwitch",extends:Qt,inheritAttrs:!1,emits:["change","focus","blur"],methods:{getPTOptions:function(n){var e=n==="root"?this.ptmi:this.ptm;return e(n,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(n){if(!this.disabled&&!this.readonly){var e=this.checked?this.falseValue:this.trueValue;this.writeValue(e,n),this.$emit("change",n)}},onFocus:function(n){this.$emit("focus",n)},onBlur:function(n){var e,i;this.$emit("blur",n),(e=(i=this.formField).onBlur)===null||e===void 0||e.call(i,n)}},computed:{checked:function(){return this.d_value===this.trueValue}}},Xt=["data-p-checked","data-p-disabled"],Zt=["id","checked","tabindex","disabled","readonly","aria-checked","aria-labelledby","aria-label","aria-invalid"];function en(t,n,e,i,l,o){return c(),m("div",T({class:t.cx("root"),style:t.sx("root")},o.getPTOptions("root"),{"data-p-checked":o.checked,"data-p-disabled":t.disabled}),[w("input",T({id:t.inputId,type:"checkbox",role:"switch",class:[t.cx("input"),t.inputClass],style:t.inputStyle,checked:o.checked,tabindex:t.tabindex,disabled:t.disabled,readonly:t.readonly,"aria-checked":o.checked,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,"aria-invalid":t.invalid||void 0,onFocus:n[0]||(n[0]=function(){return o.onFocus&&o.onFocus.apply(o,arguments)}),onBlur:n[1]||(n[1]=function(){return o.onBlur&&o.onBlur.apply(o,arguments)}),onChange:n[2]||(n[2]=function(){return o.onChange&&o.onChange.apply(o,arguments)})},o.getPTOptions("input")),null,16,Zt),w("div",T({class:t.cx("slider")},o.getPTOptions("slider")),[w("div",T({class:t.cx("handle")},o.getPTOptions("handle")),[N(t.$slots,"handle",{checked:o.checked})],16)],16)],16,Xt)}Me.render=en;const M={hideLesson:tn,modifyLesson:nn,publishLesson:on,sendLessonForReview:an,cancelLessonReview:ln,startLessonReview:sn,acceptLesson:rn,rejectLesson:cn,editLesson:dn};async function tn(t){return await K.patch(`v2/lesson/${t}/hide`)}async function nn(t){return await K.patch(`v2/lesson/${t}/modify`)}async function on(t){return await K.patch(`v2/lesson/${t}/publish`)}async function an(t){return await K.patch(`v2/lesson/${t}/review/send`)}async function ln(t){return await K.patch(`v2/lesson/${t}/review/cancel`)}async function sn(t){return await K.patch(`v2/lesson/${t}/review/start`)}async function rn(t){return await K.patch(`v2/lesson/${t}/review/accept`)}async function cn(t){return await K.patch(`v2/lesson/${t}/review/reject`)}async function dn(t){return await K.patch(`v2/lesson/${t}/review/edit`)}const D=[];for(let t=0;t<256;++t)D.push((t+256).toString(16).slice(1));function un(t,n=0){return(D[t[n+0]]+D[t[n+1]]+D[t[n+2]]+D[t[n+3]]+"-"+D[t[n+4]]+D[t[n+5]]+"-"+D[t[n+6]]+D[t[n+7]]+"-"+D[t[n+8]]+D[t[n+9]]+"-"+D[t[n+10]]+D[t[n+11]]+D[t[n+12]]+D[t[n+13]]+D[t[n+14]]+D[t[n+15]]).toLowerCase()}let fe;const pn=new Uint8Array(16);function vn(){if(!fe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fe=crypto.getRandomValues.bind(crypto)}return fe(pn)}const hn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Be={randomUUID:hn};function Ke(t,n,e){var l;if(Be.randomUUID&&!n&&!t)return Be.randomUUID();t=t||{};const i=t.random??((l=t.rng)==null?void 0:l.call(t))??vn();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,un(i)}const gn={class:"flex items-center"},fn={class:"flex items-center mr-2"},mn=B({__name:"HighlightEditor",props:Ie({index:{},usedSlots:{}},{highlight:{},highlightModifiers:{}}),emits:Ie(["remove","save"],["update:highlight"]),setup(t,{emit:n}){const e=t,i=we(t,"highlight"),l=y(""),o=y(null),a=y(null),s=y(!1),h=he(()=>o.value!=null&&a.value!=null),r=n,d=()=>{r("remove",e.index)};Y(()=>{i.value&&(l.value=i.value.id,o.value=i.value.module,a.value=i.value.slot,s.value=i.value.autoPut)}),j([o,a,s],()=>{o.value!=null&&r("save",e.index,l.value,o.value,a.value,s.value)}),j(h,L=>{L||(s.value=!1)});const f=y(["A","B","C","D","E","F"]),A=y(["8","9"]),b=y(["LED","switch","push-button","light-sensor","touch-sensor","potentiometer","encoder","motion-detector","microphone","climate-sensor","gyro-accel","buzzer","color-sensor","joystick","distance-sensor","servo","led-tower"]),g=he(()=>{if(o.value){if(o.value==="servo"||o.value==="led-tower"){const $=A.value.filter(P=>!(e.usedSlots??[]).includes(P));return a.value&&!$.includes(a.value)&&$.unshift(a.value),[null,...$]}const p=f.value.filter(v=>!(e.usedSlots??[]).includes(v));return a.value&&!p.includes(a.value)&&p.unshift(a.value),[null,...p]}const _=[...f.value,...A.value].filter(I=>!(e.usedSlots??[]).includes(I));return a.value&&!_.includes(a.value)&&_.unshift(a.value),[null,..._]}),C=he(()=>a.value?a.value==="8"||a.value==="9"?["servo","led-tower"]:b.value.filter(L=>L!=="servo"&&L!=="led-tower"):b.value);return(L,_)=>{const I=Ne,p=ve,v=Oe,$=He,P=z;return c(),m("div",gn,[w("div",fn,[u(I,{modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=V=>s.value=V),binary:"","input-id":"autoput",disabled:!h.value},null,8,["modelValue","disabled"]),_[3]||(_[3]=w("label",{for:"autoput",class:"ml-1 text-sm"},"auto",-1))]),u($,null,{default:S(()=>[u(p,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=V=>o.value=V),options:C.value,placeholder:"Select module",class:"place-content-center",size:"small"},null,8,["modelValue","options"]),u(v,{class:"h-[35px]"},{default:S(()=>_[4]||(_[4]=[w("div",null,"=>",-1)])),_:1}),u(p,{modelValue:a.value,"onUpdate:modelValue":_[2]||(_[2]=V=>a.value=V),options:g.value,placeholder:"Select slot",size:"small"},{option:S(({option:V})=>[w("span",{class:J(V===null?"text-gray-400":"")},ee(V===null?"[null]":V),3)]),value:S(({value:V})=>[w("span",{class:J(V===null?"text-gray-400":"")},ee(V===null?"[null]":V),3)]),_:1},8,["modelValue","options"])]),_:1}),u(P,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:d,class:"ml-2"})])}}}),bn={class:"flex flex-col gap-2"},yn=B({__name:"HighlightPanel",props:{neededModules:{default:[]},neededModulesModifiers:{}},emits:["update:neededModules"],setup(t){const n=we(t,"neededModules");function e(){n.value=[...n.value,{autoPut:!1,module:null,slot:null,id:Ke()}]}function i(o){n.value.splice(o,1)}function l(o,a,s,h,r){n.value[o].id=a,n.value[o].module=s,n.value[o].slot=h,n.value[o].autoPut=r}return(o,a)=>{const s=z,h=ut;return c(),k(h,{header:"Highlight slots & modules"},{default:S(()=>[w("div",bn,[(c(!0),m(q,null,Z(n.value,(r,d)=>(c(),m("div",{key:r.id},[u(mn,{highlight:n.value[d],"onUpdate:highlight":f=>n.value[d]=f,index:d,usedSlots:n.value.filter((f,A)=>{var b;return A!==d&&((b=n.value[A])==null?void 0:b.slot)!=null}).map(f=>f.slot),onRemove:i,onSave:l},null,8,["highlight","onUpdate:highlight","index","usedSlots"])]))),128))]),u(s,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:e})]),_:1})}}}),wn={class:"flex"},_n={class:"h-[500px] flex flex-col w-full relative"},$n={class:"absolute right-2 bottom-2"},me=!1,xn=B({__name:"PibodyEditor",props:{id:{},content:{},data:{}},emits:["save-content","show-tester"],setup(t,{emit:n}){const e=Q(),i=t,l=n,o=y(""),a=y(""),s=y([]);let h=!0;_e(()=>{o.value=i.content.starting,a.value=i.content.answer,s.value=i.data.neededModules??[]}),j([o,a,s],()=>{if(h){h=!1;return}l("save-content",{starting:o.value,answer:a.value,hashed_answer:""},{neededModules:s.value.filter(d=>d.module!=null),tests:i.data.tests,includedCommandsForTests:i.data.includedCommandsForTests})},{deep:!0});function r(){l("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(d,f)=>{const A=ze,b=Re,g=z;return c(),m(q,null,[w("div",wn,[w("div",_n,[u(b,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:S(()=>[u(A,{size:50,minSize:20},{default:S(()=>[u(pe,{code:o.value,"onUpdate:code":f[0]||(f[0]=C=>o.value=C),runbuttons:!1,connectbuttons:me,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),u(A,{size:50,minSize:20},{default:S(()=>[u(pe,{code:a.value,"onUpdate:code":f[1]||(f[1]=C=>a.value=C),connectbuttons:me,"onUpdate:connectbuttons":f[2]||(f[2]=C=>me=C),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),w("div",$n,[u(g,{label:"Tests",icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:r})]),u(x(Fe),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])]),u(yn,{neededModules:s.value,"onUpdate:neededModules":f[3]||(f[3]=C=>s.value=C),class:"mb-2",style:{borderTopLeftRadius:"0px",borderTopRightRadius:"0px"}},null,8,["neededModules"])],64)}}}),kn={class:"flex"},An={class:"h-[500px] flex flex-col w-full relative"},Cn={class:"absolute right-2 bottom-2"},be=!1,Pn=B({__name:"CodeEditor",props:{id:{},code:{}},emits:["save-content","show-tester"],setup(t,{emit:n}){const e=Q(),i=t,l=n,o=y(""),a=y("");let s=!0;_e(()=>{o.value=i.code.starting,a.value=i.code.answer}),j([o,a],()=>{if(s){s=!1;return}l("save-content",{starting:o.value,answer:a.value,hashed_answer:""})});function h(){l("show-tester",{lesson_id:e.params.id,unit_id:i.id.split("-")[1]})}return(r,d)=>{const f=ze,A=Re,b=z;return c(),m("div",kn,[w("div",An,[u(A,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:S(()=>[u(f,{size:50,minSize:20},{default:S(()=>[u(pe,{code:o.value,"onUpdate:code":d[0]||(d[0]=g=>o.value=g),runbuttons:!1,connectbuttons:be,id:i.id+"_",class:"h-full"},null,8,["code","id"])]),_:1}),u(f,{size:50,minSize:20},{default:S(()=>[u(pe,{code:a.value,"onUpdate:code":d[1]||(d[1]=g=>a.value=g),connectbuttons:be,"onUpdate:connectbuttons":d[2]||(d[2]=g=>be=g),id:i.id,class:"h-full"},null,8,["code","id"])]),_:1})]),_:1}),w("div",Cn,[u(b,{label:"Tests",icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:h})]),u(x(Fe),{id:i.id,class:"flex-grow max-h-40"},null,8,["id"])])])}}}),Sn=["article","options","open","video","code","pibody"],O=Ze("lesson-edit-store",()=>{const t=et(),n=ke(),{lang:e}=H(n),i=y(null),l=y(!1),o=y(!1),a=y(!1),s=y(!1),h=y(!1),r=y(!1);function d(p){a.value=p}async function f(p){try{l.value=!0;const{data:v}=await Ue.getLessonById(p,void 0,e.value);i.value=lt(v)}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{l.value=!1}}async function A(p,v){try{o.value=!0;const{data:$}=await X.getUnitByIdandLessonId(p,v,e.value);return $}catch($){t.add({severity:"error",summary:$.response.data.error,life:2e3})}finally{o.value=!1}}async function b(p){try{s.value=!0;const{data:v}=await X.createUnitByLessonId(i.value.id,p);t.add({severity:"success",summary:v.message,life:2e3})}catch(v){t.add({severity:"error",summary:v.response.data.error,life:2e3})}finally{s.value=!1}}async function g(p,v,$){try{h.value=!0;const{data:P}=await X.updateUnitByIdandLessonId(p,v,$,e.value);return P.unit_id}catch(P){t.add({severity:"error",summary:P.response.data.error,life:2e3})}finally{h.value=!1}}async function C(p,v){try{r.value=!0;const{data:$}=await X.deleteUnitByIdandLessonId(p,v);t.add({severity:"success",summary:$.message,life:2e3})}catch($){t.add({severity:"error",summary:$.response.data.error,life:2e3})}finally{r.value=!1}}async function L(p,v){try{l.value=!0;const{data:$}=await Ue.translateLesson(p,e.value,v,"chatgpt");t.add({severity:"success",summary:$.message,life:2e3})}catch($){t.add({severity:"error",summary:$.response.data.error,life:2e3})}finally{l.value=!1}}async function _(p,v,$){try{h.value=!0;const{data:P}=await X.translateUnit(p,v,$,"chatgpt");t.add({severity:"success",summary:P.message,life:2e3})}catch(P){t.add({severity:"error",summary:P.response.data.error,life:2e3})}finally{h.value=!1}}async function I(p,v,$){try{h.value=!0;const{data:P}=await X.copyUnitContent(i.value.id,p,v,$);t.add({severity:"success",summary:P.message,life:2e3})}catch(P){t.add({severity:"error",summary:P.response.data.error,life:2e3})}finally{h.value=!1}}return{selectedLesson:i,isLessonLoading:l,isLessonSaving:a,isUnitLoading:o,isUnitCreating:s,isUnitUpdating:h,isUnitDeleting:r,setLessonSaving:d,loadLessonById:f,loadUnitByIdandLessonId:A,createUnit:b,updateUnitByIdandLessonId:g,deleteUnitByIdandLessonId:C,translateLessonToLang:L,translateUnitContent:_,copyUnitContent:I}}),Tn={class:"flex items-start"},Ln=B({__name:"MdEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=we(t,"modelValue"),e=tt({title:{title:"Title",icon:"v-md-icon-tip",action(l){l.insert(o=>{const a="# <center>",s="</center>",r=o||"Title";return{text:`${a}${r}${s}`,selected:r}})}},icons:{title:"icons",icon:"v-md-icon-tip",menus:[{name:"Attention",text:"Attention",action(l){l.insert(()=>{const o='<span style="font-size: 20px">',a="</span>",s="⚠️";return{text:`${o}${s}${a}`,selected:s}})}},{name:"PiBody",text:"PiBody",action(l){l.insert(()=>{const o="<b>",a="</b>",s='<span style="color: #FF3F85"> Pi</span>Body';return{text:`${o}${s}${a}`,selected:s}})}},{name:"Run",text:"Run",action(l){l.insert(()=>({text:'<img src="https://static.artisan.education/lessons/image__c9041f3cc90b4dc188f9c2277f57f5a0..png" alt="Run" style="height: 1em;vertical-align: -0.2em;display:inline;">'}))}}]},style:{title:"Style",icon:"v-md-icon-tip",action(l){l.insert(o=>{const a='<span style="">',s="</span>",r=o||"placeholder";return{text:`${a}${r}${s}`,selected:r}})}},underline:{title:"Underline",icon:"v-md-icon-under-line",action(l){l.insert(o=>{const a='<span style="text-decoration: underline">',s="</span>",r=o||"placeholder";return{text:`${a}${r}${s}`,selected:r}})}},tip:{title:"Tip",icon:"v-md-icon-tip",action(l){l.insert(o=>{const a='<div style="background-color:#F3F5F7; padding: 20px; border-left: solid 8px #42B983">',s="</div>",r=o||"placeholder";return{text:`${a}${r}${s}`,selected:r}})}},note:{title:"Note",icon:"v-md-icon-tip",action(l){l.insert(o=>{const a='<div style="background-color:#F3F5F7; padding: 15px; border-left: solid 8px #FFCD6B; margin-bottom: 15px">',s="</div>",r=o||"placeholder";return{text:`${a}${r}${s}`,selected:r}})}}});async function i(l,o,a){const s=a[0],h=new FormData;h.append("file",s);try{const{data:r}=await pt.uploadFile(h,"image_"),d=r.source_url;o({url:d,desc:"desc",width:"auto",height:"auto"})}catch(r){console.log(r)}}return(l,o)=>{const a=ue("v-md-editor");return c(),m("div",Tn,[u(a,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=s=>n.value=s),mode:"edit",onChange:o[1]||(o[1]=s=>n.value=s),"left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note","right-toolbar":"",toolbar:e,"disabled-menus":[],onUploadImage:i},null,8,["modelValue","toolbar"])])}}}),Ge=vt(Ln,[["__scopeId","data-v-a01c761e"]]),In=B({__name:"ArticleEditor",props:{article:{}},emits:["save-content"],setup(t,{emit:n}){const e=t,i=n,l=y("");let o=!0;return Y(()=>{var a;l.value=((a=e.article)==null?void 0:a.text)??""}),j(l,()=>{if(o){o=!1;return}i("save-content",{text:l.value})},{flush:"post"}),(a,s)=>(c(),k(Ge,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=h=>l.value=h)},null,8,["modelValue"]))}}),Un={class:"flex flex-col gap-2"},Bn={class:"flex gap-1 text-gray-500"},Vn={class:"flex flex-col gap-1"},Dn=B({__name:"OptionsEditor",props:{optionsData:{}},emits:["save-content"],setup(t,{emit:n}){const e=t,i=n,l=y(!1),o=y(!1),a=y(!1),s=y([]),h=y([]),r=y();let d=!0;Y(()=>{var b,g,C,L,_,I;l.value=((b=e.optionsData)==null?void 0:b.shuffle)??!1,o.value=((g=e.optionsData)==null?void 0:g.feedback)??!1,a.value=((C=e.optionsData)==null?void 0:C.single)??!1,s.value=((L=e.optionsData)==null?void 0:L.options)??[],h.value=((_=e.optionsData)==null?void 0:_.answer)??[],r.value=e.optionsData&&e.optionsData.answer&&e.optionsData.answer.length>0?(I=e.optionsData)==null?void 0:I.answer[0]:void 0}),j([l,o,a,s,h,r],()=>{if(d){d=!1;return}i("save-content",{shuffle:l.value,feedback:o.value,single:a.value,options:s.value,answer:a.value?r.value?[r.value]:[]:h.value,hashed_answer:[]})},{deep:!0});function f(){s.value.push({id:Ke(),text:""})}function A(b){s.value=s.value.filter(g=>g.id!==b),h.value=h.value.filter(g=>g!==b),r.value==b&&(r.value=void 0)}return(b,g)=>{const C=Me,L=ht,_=Ne,I=z;return c(),m("div",Un,[w("div",Bn,[g[5]||(g[5]=w("div",null,"shuffle:",-1)),u(C,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=p=>l.value=p),class:"mr-2"},null,8,["modelValue"]),g[6]||(g[6]=w("div",null,"feedback:",-1)),u(C,{modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=p=>o.value=p),class:"mr-2"},null,8,["modelValue"]),g[7]||(g[7]=w("div",null,"single:",-1)),u(C,{modelValue:a.value,"onUpdate:modelValue":g[2]||(g[2]=p=>a.value=p)},null,8,["modelValue"])]),w("div",Vn,[(c(!0),m(q,null,Z(s.value,p=>(c(),m("div",{key:p.id,class:"flex gap-2 items-center"},[a.value?(c(),k(L,{key:0,modelValue:r.value,"onUpdate:modelValue":g[3]||(g[3]=v=>r.value=v),value:p.id},null,8,["modelValue","value"])):(c(),k(_,{key:1,modelValue:h.value,"onUpdate:modelValue":g[4]||(g[4]=v=>h.value=v),value:p.id},null,8,["modelValue","value"])),u(Ge,{modelValue:p.text,"onUpdate:modelValue":v=>p.text=v,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),u(I,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:v=>A(p.id)},null,8,["onClick"])]))),128))]),u(I,{icon:"pi pi-plus",label:"Add option",variant:"text",size:"small",onClick:f,class:"self-center"})])}}}),Fn=B({__name:"OpenEditor",props:{open:{}},emits:["save-content"],setup(t,{emit:n}){const e=t,i=n,l=y("");let o=!0;return Y(()=>{var a;l.value=((a=e.open)==null?void 0:a.answer)??""}),j(l,()=>{if(o){o=!1;return}i("save-content",{answer:l.value,hashed_answer:""})}),(a,s)=>{const h=Ee;return c(),k(h,{type:"text",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),zn=B({__name:"VideoEditor",props:{video:{}},emits:["save-content"],setup(t,{emit:n}){const e=t,i=n,l=y("");let o=!0;return Y(()=>{var a;l.value=((a=e.video)==null?void 0:a.url)??""}),j(l,()=>{if(o){o=!1;return}i("save-content",{url:l.value})}),(a,s)=>{const h=Ee;return c(),k(h,{type:"text",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),Rn={class:"flex flex-col gap-4"},Nn={class:"flex justify-end gap-2 mt-4"},En=B({__name:"UnitTranslateSelector",props:{unit:{}},setup(t){const n=O(),{translateUnitContent:e}=n,i=t,l=y(!1),o=y(null),a=y(null),s=y(!1);async function h(){if(!(!a.value||!i.unit.id)){s.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(r){console.error("❌ Translation error:",r)}finally{s.value=!1,l.value=!1}}}return(r,d)=>{const f=z,A=ve,b=$e;return c(),m("div",null,[u(f,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:d[0]||(d[0]=g=>l.value=!0)}),u(b,{visible:l.value,"onUpdate:visible":d[4]||(d[4]=g=>l.value=g),modal:"",header:`Translate unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:S(()=>[w("div",Rn,[d[5]||(d[5]=w("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),u(A,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=g=>o.value=g),options:x(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),d[6]||(d[6]=w("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),u(A,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=g=>a.value=g),options:x(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),w("div",Nn,[u(f,{label:"Close",text:"",disabled:s.value,onClick:d[3]||(d[3]=g=>l.value=!1)},null,8,["disabled"]),u(f,{label:"Translate",disabled:!o.value||!a.value||s.value,loading:s.value,onClick:h},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),jn={class:"flex flex-col gap-4"},Hn={class:"flex justify-end gap-2 mt-4"},On=B({__name:"UnitCopySelector",props:{unit:{}},setup(t){const n=O(),{copyUnitContent:e}=n,i=t,l=y(!1),o=y(null),a=y(null),s=y(!1);async function h(){if(!(!a.value||!i.unit.id)){s.value=!0;try{await e(i.unit.id,o.value,a.value)}catch(r){console.error("❌ Copy error:",r)}finally{s.value=!1,l.value=!1}}}return(r,d)=>{const f=z,A=ve,b=$e;return c(),m("div",null,[u(f,{icon:"pi pi-copy",variant:"text",severity:"contrast",onClick:d[0]||(d[0]=g=>l.value=!0)}),u(b,{visible:l.value,"onUpdate:visible":d[4]||(d[4]=g=>l.value=g),modal:"",header:`Copy unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:S(()=>[w("div",jn,[d[5]||(d[5]=w("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),u(A,{id:"sourceLang",modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=g=>o.value=g),options:x(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),d[6]||(d[6]=w("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),u(A,{id:"targetLang",modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=g=>a.value=g),options:x(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),w("div",Hn,[u(f,{label:"Close",text:"",disabled:s.value,onClick:d[3]||(d[3]=g=>l.value=!1)},null,8,["disabled"]),u(f,{label:"Copy",disabled:!o.value||!a.value||s.value,loading:s.value,onClick:h},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),Mn={class:"bg-white rounded-lg border border-gray-200"},Kn={key:1,class:"flex flex-col h-full w-full"},Gn={class:"flex items-center gap-2 px-4 pt-2"},qn={class:"text-sm"},Jn={class:"text-sm text-gray-500"},Wn={key:1,class:"flex-grow px-4 py-2"},Yn={class:"flex justify-end"},Qn=B({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},emits:["delete","update"],setup(t,{emit:n}){const e=ke(),{lang:i}=H(e),l=t,o=n,a=Q(),s=Ve(),h=O(),{updateUnitByIdandLessonId:r,setLessonSaving:d,loadUnitByIdandLessonId:f}=h,A=y(!1),b=y(null),g=y(null);_e(async()=>{A.value=!0;const p=await f(l.unit.id,Number(a.params.id));p&&(b.value=p.content,g.value=p.data),A.value=!1});function C(p,v){d(!0),_(p,v)}function L(p){s.push({name:"tester2",params:{lesson_id:p.lesson_id,unit_id:p.unit_id}})}const _=ft((p,v)=>{I(p,v)},1e3,{maxWait:5e3});async function I(p,v){const $=await r(l.unit.id,Number(a.params.id),{content:p,data:v});$&&o("update",l.unit,$),d(!1)}return(p,v)=>{const $=dt,P=z;return c(),m("div",Mn,[p.loading?(c(),k($,{key:0,class:"flex justify-center items-center w-10 h-full"})):(c(),m("div",Kn,[w("div",Gn,[w("div",qn,ee(p.unit.id),1),w("div",Jn,ee(`${p.unit.unitType}`),1)]),A.value?(c(),k($,{key:0,class:"flex justify-center items-center w-10 h-full"})):(c(),m("div",Wn,[p.unit.unitType=="article"?(c(),k(In,{key:0,article:b.value,onSaveContent:C},null,8,["article"])):p.unit.unitType=="options"?(c(),k(Dn,{key:1,"options-data":b.value,onSaveContent:C},null,8,["options-data"])):p.unit.unitType=="open"?(c(),k(Fn,{key:2,open:b.value,onSaveContent:C},null,8,["open"])):p.unit.unitType=="video"?(c(),k(zn,{key:3,video:b.value,onSaveContent:C},null,8,["video"])):l.unit.unitType=="code"?(c(),k(x(Pn),{key:4,id:`code-${l.unit.id}-${x(i)}`,code:b.value,onSaveContent:C,onShowTester:L},null,8,["id","code"])):l.unit.unitType=="pibody"?(c(),k(x(xn),{key:5,id:`pibody-${l.unit.id}-${x(i)}`,content:b.value,data:g.value,onSaveContent:C,onShowTester:L},null,8,["id","content","data"])):U("",!0)])),w("div",Yn,[u(On,{unit:l.unit},null,8,["unit"]),u(En,{unit:l.unit},null,8,["unit"]),u(P,{icon:"pi pi-trash",size:"small",severity:"danger",variant:"text",onClick:v[0]||(v[0]=xe(V=>o("delete",l.unit),["stop"]))})])]))])}}}),Xn={class:"group w-full relative"},Zn={class:"flex"},ye=B({__name:"AddUnitButton",props:{unitId:{},showAddGroup:{type:Boolean},hided:{type:Boolean}},emits:["add-group-divider"],setup(t,{emit:n}){const e=t,i=n,l=Q(),o=O(),{loadLessonById:a,createUnit:s}=o,h=y(),r=y(Sn.map(f=>({label:f,command:async()=>{await s({unit_type:f,prev_unit_id:e.unitId??void 0}),await a(Number(l.params.id))}}))),d=f=>{h.value.toggle(f)};return(f,A)=>{const b=bt,g=z,C=mt;return c(),m(q,null,[w("div",Xn,[A[1]||(A[1]=w("div",{class:"h-3"},null,-1)),w("div",{class:J(["absolute left-1/2 -translate-x-1/2 -top-5 group-hover:block mt-[9px] w-full",f.hided?"hidden":""])},[w("div",Zn,[u(b,{class:"w-7",type:"dashed"}),u(b,{class:"flex-grow",type:"dashed"}),u(g,{icon:"pi pi-plus",class:"flex self-end shadow-xl h-7",size:"small",onClick:d}),u(b,{class:"flex-grow",type:"dashed"}),f.showAddGroup?(c(),k(g,{key:0,icon:"pi pi-arrow-up-right-and-arrow-down-left-from-center",class:"flex self-end h-7",size:"small",variant:"text",onClick:A[0]||(A[0]=L=>i("add-group-divider"))})):(c(),k(b,{key:1,class:"w-7",type:"dashed"}))])],2)]),u(C,{ref_key:"menu",ref:h,model:r.value,popup:!0},null,8,["model"])],64)}}}),eo=B({__name:"RemoveGroupButton",emits:["remove-group-divider"],setup(t,{emit:n}){const e=n;return(i,l)=>{const o=z;return c(),k(o,{icon:"pi pi-arrow-down-left-and-arrow-up-right-to-center",severity:"danger",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:l[0]||(l[0]=xe(a=>e("remove-group-divider"),["stop"]))})}}}),to={class:"flex flex-col gap-2"},no={class:"w-full flex justify-between gap-2 mr-4"},oo={class:"flex flex-row"},ao={class:"flex flex-col p-2 rounded-lg bg-slate-50"},io=B({__name:"UnitsView",props:{pages:{}},setup(t){const n=t,e=Q(),i=nt(),l=O(),{isUnitDeleting:o}=H(l),{loadLessonById:a,createUnit:s,deleteUnitByIdandLessonId:h}=l,r=y(null);async function d(v){await s({unit_type:"group-divider",prev_unit_id:v.id}),await a(Number(e.params.id))}async function f(){await s({unit_type:"page-divider"}),await a(Number(e.params.id))}async function A(v){await s({unit_type:"page-divider",prev_unit_id:v}),await h(v,Number(e.params.id)),await a(Number(e.params.id))}async function b(v){await h(v,Number(e.params.id)),await a(Number(e.params.id))}function g(v){r.value=v,i.require({...ct,message:"Are you sure you want to delete this lesson?",accept:async()=>{await h(v.id,Number(e.params.id)),await a(Number(e.params.id))}})}function C(v,$){$>v.id&&(v.id=$)}const L=Number(e.params.id),_=`openedPanels-${L}`,I=y({});Y(async()=>{const v=localStorage.getItem(_);v&&(I.value=JSON.parse(v)),await ot(),setTimeout(()=>{const $=localStorage.getItem(`lastOpenedGroup-${L}`);if($){const P=document.getElementById(`group-${$}`);if(P){P.scrollIntoView({behavior:"smooth"});return}}},1e3)}),j(I,v=>{localStorage.setItem(_,JSON.stringify(v))},{deep:!0});function p(v,$){I.value[$]=v,I.value[$].length>0&&localStorage.setItem(`lastOpenedGroup-${L}`,v[v.length-1])}return(v,$)=>{const P=z,V=Ce,le=Ae,se=Pe,re=je;return c(),m("div",to,[(c(!0),m(q,null,Z(n.pages,G=>(c(),k(re,{value:I.value[G.id]||[],"onUpdate:value":F=>p(F,G.id),multiple:"",key:G.id,class:"flex flex-col gap-2 bg-white p-4 rounded-lg shadow-lg"},{default:S(()=>[(c(!0),m(q,null,Z(G.groups,(F,ne)=>(c(),k(se,{key:F.id,value:F.id,id:`group-${F.id}`},{default:S(()=>[u(V,null,{default:S(()=>[w("div",no,[w("div",null,"Step: "+ee(ne),1),w("div",oo,[ne!=0?(c(),k(P,{key:0,icon:"pi pi-file-plus",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:xe(R=>A(F.id),["stop"])},null,8,["onClick"])):U("",!0),F.id!=-1?(c(),k(eo,{key:1,onRemoveGroupDivider:R=>b(F.id)},null,8,["onRemoveGroupDivider"])):U("",!0)])])]),_:2},1024),u(le,{class:"flex flex-col"},{default:S(()=>[w("div",ao,[(c(!0),m(q,null,Z(F.units,(R,ce)=>{var oe;return c(),m("div",{key:R.id},[ce==0?(c(),k(ye,{key:0,hided:!0,"unit-id":F.id,"show-add-group":!1},null,8,["unit-id"])):U("",!0),u(Qn,{unit:R,loading:((oe=r.value)==null?void 0:oe.id)===R.id&&x(o),onDelete:de=>g(R),onUpdate:C},null,8,["unit","loading","onDelete"]),u(ye,{hided:!0,"unit-id":R.id,"show-add-group":!0,onAddGroupDivider:de=>d(R)},null,8,["unit-id","onAddGroupDivider"])])}),128)),F.units.length==0?(c(),k(ye,{key:0,hided:!1,"unit-id":F.id,"show-add-group":!1},null,8,["unit-id"])):U("",!0)])]),_:2},1024)]),_:2},1032,["value","id"]))),128))]),_:2},1032,["value","onUpdate:value"]))),128)),u(P,{id:"newpage",icon:"pi pi-plus",label:"New page",variant:"text",size:"small",class:"flex self-center",onClick:$[0]||($[0]=G=>f())})])}}}),lo={class:"w-[24px] h-[24px]"},so={key:0,class:"flex items-center"},ro={key:0,class:"material-icons text-gray-500"},co={key:1,class:"material-icons text-gray-500"},uo={key:1},po={class:"material-icons text-gray-500"},vo=B({__name:"AutoSaveCloud",setup(t){const n=O(),{selectedLesson:e,isLessonSaving:i}=H(n);return(l,o)=>{var s;const a=yt;return c(),m("div",lo,[(s=x(e))!=null&&s.editable?(c(),m("div",so,[x(i)?ae((c(),m("span",co,o[1]||(o[1]=[ge("cloud_sync")]))),[[a,"Saving...",void 0,{bottom:!0}]]):ae((c(),m("span",ro,o[0]||(o[0]=[ge("cloud_done")]))),[[a,"Saved",void 0,{bottom:!0}]])])):(c(),m("div",uo,[ae((c(),m("span",po,o[2]||(o[2]=[ge("cloud_off")]))),[[a,"Save not allowed",void 0,{bottom:!0}]])]))])}}}),ho={key:0},go={key:0},fo={key:1},mo={key:0},bo={key:1},yo={key:2},wo={key:0,class:"flex gap-1"},_o={key:3},$o={key:0},xo={key:4},ko={key:0,class:"flex gap-1"},Ao={key:5},Co={key:0,class:"flex gap-1"},Po={key:6},So={key:0,class:"flex gap-1"},To=B({__name:"StageButtons",setup(t){const n=Q(),e=at(),{user:i}=H(e),l=O(),{selectedLesson:o}=H(l),a=y(!1),s=y(!1);async function h(){a.value=!0;try{await M.sendLessonForReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function r(){a.value=!0;try{await M.cancelLessonReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function d(){a.value=!0;try{await M.startLessonReview(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function f(){a.value=!0;try{await M.acceptLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function A(){s.value=!0;try{await M.rejectLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{s.value=!1}}async function b(){a.value=!0;try{await M.editLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function g(){a.value=!0;try{await M.publishLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}async function C(){s.value=!0;try{await M.hideLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{s.value=!1}}async function L(){a.value=!0;try{await M.modifyLesson(n.params.id.toString()),window.location.reload()}catch(_){console.log(_)}finally{a.value=!1}}return(_,I)=>{var v,$,P,V,le,se,re,G,F,ne,R,ce,oe,de,Se;const p=z;return((v=x(o))==null?void 0:v.stage)=="prepare_for_submission"?(c(),m("div",ho,[(($=x(i))==null?void 0:$.user_type)=="contributor"?(c(),m("div",go,[u(p,{label:"Send for review",severity:"info",size:"small",onClick:h,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((P=x(o))==null?void 0:P.stage)=="waiting_for_review"?(c(),m("div",fo,[((V=x(i))==null?void 0:V.user_type)=="contributor"?(c(),m("div",mo,[u(p,{label:"Cancel submission",severity:"danger",size:"small",onClick:r,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):((le=x(i))==null?void 0:le.user_type)=="editor"?(c(),m("div",bo,[u(p,{label:"Start review",severity:"info",size:"small",onClick:d,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((se=x(o))==null?void 0:se.stage)=="in_review"?(c(),m("div",yo,[((re=x(i))==null?void 0:re.user_type)=="editor"?(c(),m("div",wo,[u(p,{label:"Reject",severity:"danger",size:"small",onClick:A,disabled:a.value||s.value,loading:s.value},null,8,["disabled","loading"]),u(p,{label:"Accept",size:"small",onClick:f,disabled:a.value||s.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((G=x(o))==null?void 0:G.stage)=="rejected"?(c(),m("div",_o,[((F=x(i))==null?void 0:F.user_type)=="contributor"?(c(),m("div",$o,[u(p,{label:"Edit submission",severity:"info",size:"small",onClick:b,disabled:a.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((ne=x(o))==null?void 0:ne.stage)=="ready_for_publish"?(c(),m("div",xo,[((R=x(i))==null?void 0:R.user_type)=="editor"?(c(),m("div",ko,[x(o).createdBy!=Number(x(i).user_id)?(c(),k(p,{key:0,label:"Reject",severity:"danger",size:"small",onClick:A,disabled:a.value||s.value,loading:s.value},null,8,["disabled","loading"])):U("",!0),u(p,{label:"Publish",size:"small",onClick:g,disabled:a.value||s.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((ce=x(o))==null?void 0:ce.stage)=="published"?(c(),m("div",Ao,[((oe=x(i))==null?void 0:oe.user_type)=="editor"?(c(),m("div",Co,[u(p,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||s.value,loading:s.value},null,8,["disabled","loading"]),u(p,{label:"Modify",size:"small",onClick:L,disabled:a.value||s.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):((de=x(o))==null?void 0:de.stage)=="in_modify"?(c(),m("div",Po,[((Se=x(i))==null?void 0:Se.user_type)=="editor"?(c(),m("div",So,[u(p,{label:"Hide",severity:"danger",size:"small",onClick:C,disabled:a.value||s.value,loading:s.value},null,8,["disabled","loading"]),u(p,{label:"Publish",size:"small",onClick:g,disabled:a.value||s.value,loading:a.value},null,8,["disabled","loading"])])):U("",!0)])):U("",!0)}}}),Lo={key:0},Io=B({__name:"StageStatus",setup(t){const n=O(),{selectedLesson:e}=H(n);return(i,l)=>{const o=wt;return x(e)?(c(),m("div",Lo,[["prepare_for_submission","waiting_for_review","in_review","in_modify"].includes(x(e).stage)?(c(),k(o,{key:0,label:x(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-clock",pt:{icon:{class:"text-yellow-500"}},class:"h-8 bg-yellow-50 w-fit"},null,8,["label"])):["ready_for_publish","published"].includes(x(e).stage)?(c(),k(o,{key:1,label:x(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-check-circle",pt:{icon:{class:"text-green-500"}},class:"h-8 bg-green-50 w-fit"},null,8,["label"])):["rejected"].includes(x(e).stage)?(c(),k(o,{key:2,label:x(e).stage.replace(/_/g," ").replace(/^./,a=>a.toUpperCase()),icon:"pi pi-times-circle",pt:{icon:{class:"text-red-500"}},class:"h-8 bg-red-50 w-fit"},null,8,["label"])):U("",!0)])):U("",!0)}}}),Uo={class:"flex flex-col gap-4"},Bo={class:"flex justify-end gap-2 mt-4"},Vo=B({__name:"LessonTranslateSelector",setup(t){const n=O(),{translateLessonToLang:e}=n,{selectedLesson:i}=H(n),l=y(!1),o=y(null),a=y(!1);async function s(){var h;if(!(!o.value||!((h=i.value)!=null&&h.id))){a.value=!0;try{console.log("▶️ Translating lesson",i.value.id,"→",o.value),await e(i.value.id,o.value),console.log("✅ Translation complete")}catch(r){console.error("❌ Translation error:",r)}finally{a.value=!1,l.value=!1}}}return(h,r)=>{const d=z,f=ve,A=$e;return c(),m("div",null,[u(d,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=b=>l.value=!0)}),u(A,{visible:l.value,"onUpdate:visible":r[3]||(r[3]=b=>l.value=b),modal:"",header:"Translate lesson",style:{width:"400px"}},{default:S(()=>[w("div",Uo,[r[4]||(r[4]=w("label",{for:"targetLang",class:"font-semibold"}," Choose language to translate to: ",-1)),u(f,{id:"targetLang",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=b=>o.value=b),options:x(ie),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),w("div",Bo,[u(d,{label:"Cancel",text:"",onClick:r[2]||(r[2]=b=>l.value=!1)}),u(d,{label:"Translate",disabled:!o.value,loading:a.value,onClick:s},null,8,["disabled","loading"])])])]),_:1},8,["visible"])])}}}),Do={class:"flex flex-col items-center"},Fo={class:"flex justify-between items-center w-full min-h-16 border-b border-gray-200 px-8 shadow-md gap-8"},zo={class:"flex items-center gap-4"},Ro={class:"flex items-center gap-4"},No={class:"w-full h-full max-w-screen-lg px-4 md:px-28 py-8"},Eo={class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},ya=B({__name:"LessonEditPage",setup(t){const n=Q(),e=Ve(),i=ke(),{lang:l}=H(i),o=O(),{selectedLesson:a}=H(o),{loadLessonById:s}=o;Y(()=>s(Number(n.params.id))),j(l,async(d,f)=>{d!==f&&a.value&&await s(a.value.id)});const h=()=>{let d="#";n.path.endsWith("/edit")&&a.value&&(a.value.lessonType==="project"?d=n.path.replace("/lesson/","/project/").replace(/\/edit$/,""):d=n.path.replace(/\/edit$/,"")),window.open(d,"_blank")};function r(){window.history.length>2?e.go(-1):e.push("/v2/routes")}return(d,f)=>{var b;const A=z;return c(),m("div",Do,[w("div",Fo,[w("div",zo,[u(A,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:r}),u(Io)]),w("div",Ro,[u(To)])]),w("div",No,[(c(),k(io,{key:x(l),pages:(b=x(a))==null?void 0:b.pages},null,8,["pages"]))]),w("div",Eo,[u(vo),u(x(it)),u(A,{icon:"pi pi-eye",variant:"text",severity:"contrast",onClick:h}),u(Vo)])])}}});export{ya as default};
