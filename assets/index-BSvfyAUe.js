import{_ as Fe,a as We,b as He,c as Ne,s as qe}from"./VideoViewer.vue_vue_type_script_setup_true_lang-CA3vT2r0.js";import{s as xe}from"./index-DFWfzdRC.js";import{s as Oe}from"./index-CTnVs-KJ.js";import{d as Ke,u as Ye,r as p,A as ke,f as ae,b as R,e as ie,o as n,c as f,q as z,j as t,v as U,C as Ae,D as oe,k as g,F as le,n as Ce,h as Be,a1 as Je,a2 as Qe,w as G,i as w,G as be,a0 as Xe,y as Se,l as ye,t as ne,a3 as _e,a as Ze,$ as et,E as tt,H as te,K as st,x as nt}from"./index-Cbwgae5u.js";import{d as at}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{u as Ee,c as ot,a as lt}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-CgHm8ahs.js";import{S as it}from"./SimulationView-D9aQezce.js";import{_ as rt}from"./CodeViewer.vue_vue_type_script_setup_true_lang-CB0QvMcu.js";import{_ as ut}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-7SVczhaz.js";import{u as Ie}from"./useLocaleStore-C9PztpBS.js";import{L as ct}from"./lessonApi-oHm6E77M.js";import{m as dt}from"./mapLessonFromDto-DxMZVnwf.js";import{m as vt}from"./mapUnitFromDto-BRBO9875.js";import{U as se}from"./unitApi-8iWihNf0.js";import{T as pt}from"./index-DBgGNCpw.js";import{u as Pe}from"./index-BPo3e8u7.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DIARyXqH.js";import"./index-CM3TZ9_P.js";import"./index-BBoBU2ol.js";import"./index-BF8Y-Var.js";import"./index-BuezxK1O.js";import"./index-DLMIPxoC.js";import"./index-BQVVrzOs.js";import"./index-DIv7dOZR.js";import"./index-xacXSQBs.js";import"./language-DYQF8nnT.js";import"./transformUnitDtosToPages-CGD_PO48.js";async function we(A){const r=new TextEncoder().encode(A),v=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(v)).map(S=>S.toString(16).padStart(2,"0")).join("")}function gt(A){let s="",r=!1;for(let v=0;v<A.length;v++){const l=A[v];if(l==="#"&&(r=!0),r)if(l===`
`)r=!1;else continue;l!==" "&&l!=="	"&&l!==`
`&&l!=="\r"&&(s+=l)}return s}function ht(A,s){if(A.length!==s.length)return!1;const r=[...A].sort(),v=[...s].sort();return r.every((l,C)=>l===v[C])}const de=Ke("lesson-store",()=>{const A=Ye(),s=p(null),r=p(!1),v=p(!1),l=p(!1),C=p(!1),S=p(!1),P=p(0),y=p(0),a=p([]),h=p(0),$=p(new Map),x=p(new Map),c=p([]),i=p("continue"),L=p(!1),m=p(!1),_=p(!1),D=p(!0),T=p(""),Y=p(0),W=p(null),H=p(null),J=p([]),Q=p([]),ve=ke(),pe=Ie(),{lang:fe}=ae(pe),V=p(void 0),re=R(()=>{var e;return _.value&&(((e=W.value)==null?void 0:e.modulesWerePut)??!0)&&D.value});async function ge(e,d){try{r.value=!0,$.value.clear(),x.value.clear(),V.value=ve.userRole==="editor"?fe.value:void 0;const{data:u}=await ct.getLessonById(e,d,V.value);s.value=dt(u),s.value.stage=="published"&&M()}catch(u){A.add({severity:"error",summary:u.response.data.error,life:2e3})}finally{r.value=!1}}async function M(){if(s.value)try{S.value=!0,P.value=0,$.value.clear();const e=[];s.value.pages.forEach(b=>{b.groups.forEach(k=>{k.units.forEach(ee=>{e.push({id:ee.id,lessonId:s.value.id})})})});const d=e.length,u=5;for(let b=0;b<e.length;b+=u){const ee=e.slice(b,b+u).map(async({id:he,lessonId:Me})=>{try{const{data:me}=await se.getUnitByIdandLessonId(he,Me,V.value);$.value.set(he,me)}catch(me){console.warn(`Failed to preload unit ${he}:`,me)}});await Promise.all(ee),P.value=Math.round(Math.min(b+u,d)/d*100)}}catch(e){console.error("Error preloading units:",e)}finally{S.value=!1}}async function F(e,d){if($.value.has(e))return $.value.get(e);try{v.value=!0;const{data:u}=await se.getUnitByIdandLessonId(e,d,V.value);return $.value.set(e,u),u}catch(u){A.add({severity:"error",summary:u.response.data.error,life:2e3})}finally{v.value=!1}}async function N(){if(s.value!=null){l.value=!0,a.value=[],y.value=0,h.value=0,c.value=[],T.value="",Q.value=[],m.value=!1;for(let e=0;e<s.value.pages.length;e++)c.value.push(0);i.value="continue",q(),a.value.push(s.value.pages[y.value].groups[h.value]),await X(s.value.id),l.value=!1}}function ue(e,d){var b;Y.value=d.id;let u="";if(T.value==""||d.content.starting!=""){u=`emulator-${d.id}`;const k=d.content.starting;H.value=Ee(u),H.value.setCode(k)}T.value=u??T.value,e=="pibody"&&(W.value=lt(T.value),(b=W.value)==null||b.clearSlots(),J.value=d.data.neededModules,W.value.addNeededModules(J.value),u!=""&&(Q.value=[]))}async function X(e){_.value=!1,L.value=!1;for(let d=0;d<a.value[h.value].units.length;d++){const u=a.value[h.value].units[d];["options","open","code","pibody"].includes(u.unitType)&&(i.value="check",L.value=!0);const b=await F(u.id,e);if(b){const k=vt(b);a.value[h.value].units[d].content=k==null?void 0:k.content,a.value[h.value].units[d].data=k==null?void 0:k.data,a.value[h.value].units[d].studentState=k==null?void 0:k.studentState,["code","pibody"].includes(u.unitType)&&(_.value=!0,k.content.answer==""&&k.data.tests.lenght==0||(D.value=!1),ue(u.unitType,k))}}i.value=="continue"&&await B()}async function B(){if(s.value!=null)try{C.value=!0,m.value=!1;for(const e of a.value[a.value.length-1].units){if(x.value.set(e.id,e.studentState.answer),["code","pibody"].includes(e.unitType)){const d=Ee(T.value).code.value;if(e.data.tests.length>0){const u=await ot(T.value,d,e.data.tests,e.data.includedCommands);m.value=u.correct}else if(!e.content.hashed_answer)m.value=!0;else{const u=gt(d),b=await we(u);m.value=e.content.hashed_answer===b}}else if(e.unitType=="open"){const u=String(e.studentState.answer.open??"").replace(/ /g,"").toLowerCase(),b=await we(u);m.value=e.content.hashed_answer===b}else if(e.unitType=="options"){const d=e.studentState.answer.options,u=[];for(const b of d)u.push(await we(b));m.value=ht(e.content.hashed_answer,u)}else m.value=!0;if(m.value==!1)break}a.value[a.value.length-1].units.length||(m.value=!0),m.value?(c.value[y.value]++,h.value>=s.value.pages[y.value].groups.length-1?y.value<s.value.pages.length-1?i.value="continue":i.value="finish":i.value="continue"):i.value="try-again"}finally{C.value=!1}}async function o(){if(s.value!=null){if(h.value>=s.value.pages[y.value].groups.length-1){await Le(),$e();return}l.value=!0,h.value++,a.value.push(s.value.pages[y.value].groups[h.value]),await X(s.value.id),l.value=!1}}async function I(e){const d=a.value[a.value.length-1].id;i.value="continue",c.value[y.value]--,h.value--,a.value.pop(),d==e?y.value==0&&a.value.length==0?await N():await o():await I(e)}function q(){if(!s.value)return;let e=0;for(const d of s.value.pages)if(d.groups.every(b=>b.units.every(k=>k.studentStatus==="completed")))e!=s.value.pages.length-1&&(c.value[e]=d.groups.length,e++);else break;y.value=e}function O(){y.value!=0&&(c.value[y.value]=0,c.value[y.value-1]=0,y.value-=2,$e())}function Z(e,d){if(s.value!=null){for(const[u,b]of a.value.entries())for(const[k,ee]of b.units.entries())if(ee.id==e){a.value[u].units[k].studentState.answer=d;break}}}async function E(){s.value!=null&&(i.value="check")}async function ce(){s.value!=null&&(await Le(),i.value="completed")}function Ue(){$.value.clear(),P.value=0,S.value=!1}async function $e(){s.value!=null&&(l.value=!0,y.value++,a.value=[],h.value=0,i.value="continue",a.value.push(s.value.pages[y.value].groups[h.value]),await X(s.value.id),l.value=!1)}function ze(e){_.value=e}function De(){D.value=!0}async function Te(e){T.value!=""&&(e.code=H.value.code,Z(Y.value,e),await se.saveUnitByIdandLessonId(Y.value,s.value.id,{answer:e}))}async function Le(){if(l.value=!0,s.value==null)return;const e=Array.from(x.value.entries()).map(([u,b])=>({id:u,student_answer:b})),{data:d}=await se.submitUnitsByLessonId(s.value.id,e);m.value=d.correct,x.value=new Map,l.value=!1}const j=R(()=>s.value?s.value.pages[y.value]??null:null),K=R(()=>j.value?j.value.groups[h.value]??null:null),Ge=R({get:()=>{var e;return((e=K.value)==null?void 0:e.pibodyDrawerVisible)??!1},set:e=>{K.value&&(K.value.pibodyDrawerVisible=e)}}),je=R({get:()=>{var e;return((e=K.value)==null?void 0:e.codeDrawerVisible)??!1},set:e=>{K.value&&(K.value.codeDrawerVisible=e)}}),Re=R({get:()=>{var e;return((e=j.value)==null?void 0:e.showPibody)??!1},set:e=>{j.value&&(j.value.showPibody=e)}}),Ve=R({get:()=>{var e;return((e=j.value)==null?void 0:e.showCode)??!1},set:e=>{j.value&&(j.value.showCode=e)}});return{selectedLesson:s,isLessonLoading:r,isUnitLoading:v,groups:a,groupIndex:h,isGroupLoading:l,isSubmitLoading:C,isPreloadingUnits:S,preloadingProgress:P,groupStatus:i,submitExist:L,correct:m,submitEnabled:re,pageProgress:c,emulatorID:T,neededModules:J,slots:Q,pibodyDrawerVisible:Ge,codeDrawerVisible:je,showPibody:Re,showCode:Ve,setSubmitable:ze,loadLessonById:ge,loadUnitByIdandLessonId:F,preloadAllUnits:M,clearUnitsCache:Ue,loadInitialGroup:N,submitGroup:B,nextGroup:o,saveAnswer:Z,tryAgain:E,finishLesson:ce,runCodePressed:De,saveStudentIdeState:Te,resetGroup:I,pageBack:O}}),mt={key:1,class:"flex-grow px-4 py-2"},yt=ie({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},setup(A){const s=A,r=Ae(),v=de(),{saveAnswer:l,setSubmitable:C}=v;function S(a){s.unit.unitType=="options"?C(a.options.length>0):s.unit.unitType=="open"&&C(a.open.length>0),l(s.unit.id,a),P(a)}const P=Pe(a=>{y(a)},1e3,{maxWait:5e3});async function y(a){await se.saveUnitByIdandLessonId(s.unit.id,Number(r.params.id),{answer:a})}return(a,h)=>{const $=xe;return n(),f("div",null,[a.loading?(n(),z($,{key:0,class:"flex justify-center items-center w-10 h-full"})):(n(),f("div",mt,[s.unit.unitType=="article"?(n(),z(t(Fe),{key:0,article:s.unit.content},null,8,["article"])):s.unit.unitType=="options"?(n(),z(t(We),{key:1,"options-data":s.unit.content,state:s.unit.studentState,onSaveAnswer:S},null,8,["options-data","state"])):s.unit.unitType=="open"?(n(),z(t(He),{key:2,state:s.unit.studentState,onSaveAnswer:S},null,8,["state"])):s.unit.unitType=="video"?(n(),z(t(Ne),{key:3,video:s.unit.content},null,8,["video"])):U("",!0)]))])}}}),wt={key:1,class:"flex flex-col h-full w-full"},bt={class:"flex-grow flex flex-col gap-4 px-4 py-2"},_t=ie({__name:"GroupCard",props:{group:{},loading:{type:Boolean}},setup(A){const s=A,r=p(null);return oe(()=>s.loading,v=>{v===!1&&r.value&&requestAnimationFrame(()=>{var l;(l=r.value)==null||l.scrollIntoView({behavior:"smooth",block:"start"})})}),(v,l)=>{const C=xe;return n(),f("div",{ref_key:"groupRef",ref:r},[v.loading?(n(),z(C,{key:0,class:"flex justify-center items-center w-10 h-full"})):(n(),f("div",wt,[g("div",bt,[(n(!0),f(le,null,Ce(v.group.units,S=>(n(),z(yt,{key:S.id,unit:S},null,8,["unit"]))),128))])]))],512)}}}),xt={key:0,class:"absolute right-0"},kt=ie({__name:"UnitsView",props:{pages:{}},setup(A){const s=de(),{groups:r,isGroupLoading:v}=ae(s),{loadInitialGroup:l,resetGroup:C}=s,S=ke(),P=p(null),y=p(null),a=p(0);function h(c){let i=c;for(;i&&i.parentElement;){const L=i.parentElement,_=getComputedStyle(L).overflowY;if(_==="auto"||_==="scroll")return L;i=L}return null}async function $(){await Xe();const c=h(P.value),i=y.value;if(!c||!i){a.value=0;return}const L=c.clientHeight,m=i.getBoundingClientRect().height,_=Math.max(0,L-m-16);a.value=_}function x(c,i){var _;const L=(_=r.value[r.value.length-1])==null?void 0:_.id;let m=null;c&&(c instanceof Element?m=c:c.$el instanceof Element&&(m=c.$el)),y.value=i.id===L?m:null}return Be(()=>{l(),$(),window.addEventListener("resize",$)}),Je(()=>{window.removeEventListener("resize",$)}),oe(()=>r.value.length,async()=>{await $()}),oe(()=>v.value,async(c,i)=>{i===!0&&c===!1&&await $()}),(c,i)=>{const L=Se,m=pt;return n(),f("div",{ref_key:"rootEl",ref:P,class:"flex flex-col gap-2 pt-2"},[(n(!0),f(le,null,Ce(t(r),_=>(n(),f("div",{key:_.id,ref_for:!0,ref:D=>x(D,_),class:"relative"},[!t(v)&&t(S).userRole=="editor"?(n(),f("div",xt,[Qe((n(),z(L,{type:"button",class:"w-9 h-9 mr-8 mt-2",rounded:"",severity:"secondary",variant:"text",onClick:D=>t(C)(_.id)},{default:G(()=>i[0]||(i[0]=[g("span",{class:"material-icons"},"restart_alt",-1)])),_:2},1032,["onClick"])),[[m,"Reset step",void 0,{left:!0}]])])):U("",!0),w(_t,{group:_,loading:t(v)&&_.id==t(r)[t(r).length-1].id},null,8,["group","loading"])]))),128)),g("div",{style:be({height:a.value+"px"})},null,4)],512)}}}),Ct={key:0,class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},St={key:1},$t={key:"correct",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-green-100"},Lt={class:"text-lg font-bold flex items-center gap-2"},Et={key:"incorrect",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-red-100"},At={key:"no-submit",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},Bt={key:"try-again",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-gray-50"},It={class:"text-lg font-bold flex items-center gap-2"},Pt={key:2},Ut={key:"correct",class:"flex justify-center items-center w-full min-h-24 px-8 gap-8 bg-green-100"},zt={class:"text-lg font-bold flex items-center gap-2"},Dt={key:1,class:"flex justify-center items-center w-full min-h-24 px-8 gap-8"},Tt=ie({__name:"NavigationBar",setup(A){const s=de(),{isSubmitLoading:r,groupStatus:v,isGroupLoading:l,submitExist:C,correct:S,submitEnabled:P}=ae(s),{submitGroup:y,nextGroup:a,tryAgain:h,finishLesson:$}=s;return(x,c)=>{const i=Se;return n(),f(le,null,[t(v)=="check"?(n(),f("div",Ct,[w(i,{label:x.$t("check").toUpperCase(),icon:"pi pi-check","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:t(y),loading:t(r),disabled:t(r)||!t(P)},null,8,["label","onClick","loading","disabled"])])):U("",!0),t(v)=="continue"?(n(),f("div",St,[w(_e,{name:"pop",appear:"",mode:"out-in"},{default:G(()=>[t(C)&&t(S)?(n(),f("div",$t,[g("div",Lt,[c[0]||(c[0]=g("span",{class:"text-3xl"},"üéâ",-1)),ye(" "+ne(x.$t("correct"))+"! ",1)]),w(i,{label:x.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:t(a),loading:t(l),disabled:t(l)},null,8,["label","onClick","loading","disabled"])])):t(C)&&!t(S)?(n(),f("div",Et,[w(i,{label:x.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:t(a),loading:t(l),disabled:t(l)},null,8,["label","onClick","loading","disabled"])])):(n(),f("div",At,[w(i,{label:x.$t("continue").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:t(a),loading:t(l),disabled:t(l)},null,8,["label","onClick","loading","disabled"])]))]),_:1})])):U("",!0),w(_e,{name:"shake",appear:""},{default:G(()=>[t(v)=="try-again"?(n(),f("div",Bt,[g("div",It,[c[1]||(c[1]=g("span",{class:"text-3xl"},"‚ö†Ô∏è",-1)),ye(" "+ne(x.$t("incorrect"))+"! ",1)]),w(i,{label:x.$t("tryAgain").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",severity:"contrast",class:"w-56 rounded-3xl",onClick:t(h)},null,8,["label","onClick"])])):U("",!0)]),_:1}),t(v)=="finish"?(n(),f("div",Pt,[t(C)&&t(S)?(n(),f("div",Ut,[g("div",zt,[c[2]||(c[2]=g("span",{class:"text-3xl"},"üéâ",-1)),ye(" "+ne(x.$t("correct"))+"!",1)]),w(i,{label:x.$t("finish").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:t($),loading:t(l),disabled:t(l)},null,8,["label","onClick","loading","disabled"])])):(n(),f("div",Dt,[w(i,{label:x.$t("finish").toUpperCase(),icon:"pi pi-arrow-right","icon-pos":"right",size:"large",class:"w-56 rounded-3xl",onClick:t($)},null,8,["label","onClick"])]))])):U("",!0)],64)}}}),Gt=ft(Tt,[["__scopeId","data-v-4f5f4e6c"]]),jt={key:0,class:"h-screen bg-white flex flex-col items-center overflow-hidden relative"},Rt={class:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 max-w-[1920px] mx-auto"},Vt={class:"flex justify-between items-center w-full min-h-16 px-8 gap-8"},Mt={class:"flex items-center gap-4"},Ft={key:0,class:"flex flex-grow max-w-screen-lg items-center gap-4"},Wt={class:"flex-1 overflow-y-auto mt-16 mb-24 w-full"},Ht={key:1,class:"flex justify-center"},Nt={key:2},qt={key:3,class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},Ot={key:4,class:"fixed top-20 right-4 bg-white rounded-lg shadow-md z-50 border border-gray-200 p-4 min-w-64"},Kt={class:"flex items-center gap-3 mb-2"},Yt={class:"fixed bottom-0 left-0 right-0 z-50 bg-transparent shadow-md max-w-[1920px] mx-auto"},Jt={key:0,class:"absolute left-0 top-1/2 -translate-y-1/2"},Qt={class:"relative h-full"},Xt={class:"absolute -right-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},Zt={key:1,class:"absolute right-0 top-1/2 -translate-y-1/2"},es={class:"relative h-full"},ts={class:"absolute -left-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},ss={key:0,class:"h-screen flex flex-col items-center justify-center overflow-hidden gap-10"},ns={class:"flex flex-col items-center"},as={class:"text-4xl font-bold mb-8"},os={class:"text-md text-gray-500"},zs=ie({__name:"LessonPage",setup(A){const{t:s}=Ze(),r=Ae(),v=nt(),l=et(),C=ke(),S=Ie(),{lang:P}=ae(S);oe(P,async(B,o)=>{B!==o&&h.value&&await H(Number(r.params.id),(r.query.route_id??"").toString())});const y=de(),{isLessonLoading:a,selectedLesson:h,pageProgress:$,groupStatus:x,emulatorID:c,neededModules:i,slots:L,pibodyDrawerVisible:m,codeDrawerVisible:_,showPibody:D,showCode:T,isPreloadingUnits:Y,preloadingProgress:W}=ae(y),{loadLessonById:H,runCodePressed:J,saveStudentIdeState:Q,pageBack:ve}=y;function pe(){l.require({...at,header:s("closeLesson"),message:s("progressWillBeLost"),acceptProps:{label:s("close"),severity:"danger"},rejectProps:{label:s("pages.settings.cancel"),severity:"secondary",outlined:!0},accept:()=>V()})}function fe(B){var I;const o=((I=h.value)==null?void 0:I.pages.reduce((q,O)=>q+O.groups.length,0))||1;return B/o*100}function V(){r.query.route_id&&r.query.route_id!=""?v.push("/v2/route/"+r.query.route_id):C.userRole=="editor"?v.push("/v2/routes"):v.push("/v2/home")}oe(L,()=>{re({slots:L.value})});const re=Pe(B=>{Q(B)},1e3,{maxWait:5e3});function ge(B){re({slots:L.value})}const M=p(window.innerWidth),F=p(16);function N(){if(M.value=window.innerWidth,M.value<=1300){F.value=16;return}const o=452-(M.value-1024)/2;F.value=o>16?o:16}Be(async()=>{var B;if(x.value="continue",N(),await H(Number(r.params.id),(r.query.route_id??"").toString()),((B=h.value)==null?void 0:B.lessonType)=="project"){const o=r.path.replace("/lesson/","/project/");v.push(o)}window.addEventListener("resize",N)}),tt(()=>{window.removeEventListener("resize",N)});const ue=R(()=>M.value<=1920?{}:"calc((-100vw + 1920px) / 2)"),X=()=>{v.push(`${r.path}/edit`)};return(B,o)=>{const I=Se,q=Oe,O=xe,Z=qe;return n(),f(le,null,[t(x)!="completed"?(n(),f("div",jt,[g("div",Rt,[g("div",Vt,[g("div",Mt,[w(I,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:pe})]),t(h)?(n(),f("div",Ft,[(n(!0),f(le,null,Ce(t(h).pages,(E,ce)=>(n(),f("div",{key:ce,class:"h-full",style:be({width:fe(E.groups.length)+"%"})},[w(q,{value:t($)[ce]/E.groups.length*100,"show-value":!1,class:"w-full rounded-full h-3"},null,8,["value"])],4))),128))])):U("",!0),o[9]||(o[9]=g("div",{class:"w-10"},null,-1))])]),g("div",Wt,[g("div",{class:"w-full h-full max-w-screen-lg mx-auto",style:be({paddingLeft:F.value+"px",paddingRight:F.value+"px"})},[t(a)?(n(),z(O,{key:0,class:"flex justify-center"})):t(h)?(n(),f("div",Nt,[w(kt,{pages:t(h).pages},null,8,["pages"])])):(n(),f("div",Ht,"No lesson found")),t(C).userRole=="editor"?(n(),f("div",qt,[w(t(ut)),w(I,{icon:"pi pi-pencil",variant:"text",severity:"contrast",onClick:X}),w(I,{variant:"text",severity:"contrast",onClick:t(ve)},{default:G(()=>o[10]||(o[10]=[g("span",{class:"material-icons"},"swipe_left_alt",-1)])),_:1},8,["onClick"])])):U("",!0),t(Y)?(n(),f("div",Ot,[g("div",Kt,[w(O,{style:{width:"20px",height:"20px"}}),o[11]||(o[11]=g("span",{class:"text-sm font-medium"},"Preloading units...",-1))]),w(q,{value:t(W),"show-value":!0,class:"h-2"},null,8,["value"])])):U("",!0)],4)]),g("div",Yt,[w(Gt)]),t(D)?(n(),f("div",Jt,[w(I,{icon:"pi pi-microchip",severity:"secondary",onClick:o[0]||(o[0]=E=>m.value=!0),class:"w-8 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg mt-16"}),w(Z,{visible:t(m),"onUpdate:visible":o[4]||(o[4]=E=>te(m)?m.value=E:null),modal:!1,dismissable:!1,closeOnEscape:!1,class:"h-[calc(100vh-64px)] w-fit mt-16",pt:{root:{style:`right: ${ue.value}`}}},{header:G(()=>o[12]||(o[12]=[g("div",null,null,-1)])),container:G(()=>[g("div",Qt,[g("div",Xt,[w(I,{icon:"pi pi-chevron-left",severity:"secondary",onClick:o[1]||(o[1]=E=>m.value=!1),class:"w-5 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none"})]),(n(),z(t(it),{id:t(c),key:t(c),slots:t(L),"onUpdate:slots":o[2]||(o[2]=E=>te(L)?L.value=E:null),neededModules:t(i),"onUpdate:neededModules":o[3]||(o[3]=E=>te(i)?i.value=E:null),class:"w-full",horizontal:!1,autoPut:!0},null,8,["id","slots","neededModules"]))])]),_:1},8,["visible","pt"])])):U("",!0),t(T)?(n(),f("div",Zt,[w(I,{icon:"pi pi-code",severity:"secondary",onClick:o[5]||(o[5]=E=>_.value=!0),class:"w-8 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none mt-16"}),w(Z,{visible:t(_),"onUpdate:visible":o[8]||(o[8]=E=>te(_)?_.value=E:null),header:"Drawer",modal:!1,dismissable:!1,closeOnEscape:!1,position:"right",class:"h-[calc(100vh-64px)] w-[452px] mt-16",pt:{root:{style:`left: ${ue.value}`}}},{header:G(()=>o[13]||(o[13]=[g("div",null,null,-1)])),container:G(()=>[g("div",es,[g("div",ts,[w(I,{icon:"pi pi-chevron-right",severity:"secondary",onClick:o[6]||(o[6]=E=>_.value=!1),class:"w-5 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg"})]),(n(),z(st,null,[(n(),z(t(rt),{id:t(c),key:t(c),connectbuttons:t(D),"onUpdate:connectbuttons":o[7]||(o[7]=E=>te(D)?D.value=E:null),onRun:t(J),onSaveAnswer:ge},null,8,["id","connectbuttons","onRun"]))],1024))])]),_:1},8,["visible","pt"])])):U("",!0)])):U("",!0),w(_e,{"enter-active-class":"transition duration-500 ease-out","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-300 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:G(()=>[t(x)=="completed"?(n(),f("div",ss,[o[14]||(o[14]=g("div",{class:"text-5xl"},"‚ö°Ô∏è",-1)),g("div",ns,[g("div",as,ne(B.$t("goodWork")),1),g("div",os,ne(B.$t("keepLearning")),1)]),g("div",null,[w(I,{label:B.$t("continue"),class:"rounded-full w-56 text-xl",onClick:V},null,8,["label"])])])):U("",!0)]),_:1})],64)}}});export{zs as default};
