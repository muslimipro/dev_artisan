import{d as T,_ as q,a as A,b as F,c as W,s as O}from"./VideoViewer.vue_vue_type_script_setup_true_lang-CA3vT2r0.js";import{s as R}from"./index-DFWfzdRC.js";import{s as K}from"./index-CTnVs-KJ.js";import{e as k,o as t,c as u,k as o,i as p,b as V,F as P,n as z,q as a,w as $,l as M,t as U,d as Y,u as G,r as f,j as i,v as C,f as H,h as J,E as Q,G as X,H as Z,K as ee,C as te,x as se,y as oe}from"./index-Cbwgae5u.js";import{u as ne,a as le}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-CgHm8ahs.js";import{S as ie}from"./SimulationView-D9aQezce.js";import{_ as re}from"./CodeViewer.vue_vue_type_script_setup_true_lang-CB0QvMcu.js";import{L as ae}from"./lessonApi-oHm6E77M.js";import{m as ue}from"./mapLessonFromDto-DxMZVnwf.js";import{m as de}from"./mapUnitFromDto-BRBO9875.js";import{U as ce}from"./unitApi-8iWihNf0.js";import{s as pe}from"./index-D2FtQ88L.js";import"./index-DIARyXqH.js";import"./index-CM3TZ9_P.js";import"./index-BBoBU2ol.js";import"./index-BF8Y-Var.js";import"./index-BuezxK1O.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BPo3e8u7.js";import"./index-DLMIPxoC.js";import"./index-DBgGNCpw.js";import"./index-BQVVrzOs.js";import"./transformUnitDtosToPages-CGD_PO48.js";const fe={class:"rounded-2xl p-6 max-w-2xl mx-auto border border-slate-100 gap-2 flex flex-col"},me={class:"rounded-xl overflow-clip"},ve=k({__name:"CodeReviseViewer",props:{state:{}},setup(m){const e=m;return(r,n)=>(t(),u("div",fe,[n[0]||(n[0]=o("div",{class:"text-overline-small text-neutral600"},"Your answer",-1)),o("div",me,[p(T,{text:` \`\`\`python
${e.state.answer.code}
\`\`\` `},null,8,["text"])])]))}}),_e={class:"rounded-2xl p-6 max-w-2xl mx-auto border border-slate-100 gap-2 flex flex-col"},ye={class:"space-y-1"},xe={class:"flex flex-wrap items-center gap-2 text-slate-800 bg-slate-50 rounded-xl px-3 py-2"},we={class:"text-slate-800"},he={class:"rounded-xl overflow-clip"},ge=k({__name:"PibodyReviseViewer",props:{state:{}},setup(m){const e=m,r=["A","B","C","D","E","F","8","9"],n=V(()=>e.state.answer.slots.map((d,v)=>({slot:d,index:v})).filter(d=>d.slot!==""));return(d,v)=>{const y=pe;return t(),u("div",_e,[v[0]||(v[0]=o("div",{class:"text-overline-small text-neutral600"},"Your answer",-1)),o("div",ye,[o("div",xe,[(t(!0),u(P,null,z(n.value,c=>(t(),a(y,{key:c.index,class:"font-medium text-slate-500"},{default:$(()=>[M(" Slot "+U(r[c.index])+": ",1),o("span",we,U(c.slot),1)]),_:2},1024))),128))])]),o("div",he,[p(T,{text:` \`\`\`python
${e.state.answer.code}
\`\`\` `},null,8,["text"])])])}}}),be=Y("lesson-revise-store",()=>{const m=G(),e=f(null),r=f(!1),n=f([]),d=f(null),v=f(null),y=f(!1),c=f(!1);async function S(x,w){try{r.value=!0;const{data:l}=await ae.getLessonById(x,w);e.value=ue(l),await E()}catch(l){m.add({severity:"error",summary:l.response.data.error,life:2e3})}finally{r.value=!1}}async function E(){if(e.value)try{n.value=[];const x=[];e.value.pages.forEach(l=>{l.groups.forEach(h=>{h.units.forEach(g=>{x.push(g.id)})})});const{data:w}=await ce.getUnitsByIdsandLessonId(x,e.value.id);for(const l of w)n.value.push(de(l)),(l.unit_type=="code"||l.unit_type=="pibody")&&(y.value=!0,v.value=ne("emulatorID"),v.value.setCode("")),l.unit_type=="pibody"&&(c.value=!0,d.value=le("emulatorID"),d.value.addNeededModules([]))}catch(x){console.error("Error loading units:",x)}finally{}}return{selectedLesson:e,isLessonLoading:r,units:n,showPibody:c,showCode:y,loadLessonById:S}}),$e={key:1,class:"flex-grow px-4 py-2"},ke=k({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},setup(m){const e=m;return(r,n)=>{const d=R;return t(),u("div",null,[r.loading?(t(),a(d,{key:0,class:"flex justify-center items-center w-10 h-full"})):(t(),u("div",$e,[e.unit.unitType=="article"?(t(),a(i(q),{key:0,article:e.unit.content},null,8,["article"])):e.unit.unitType=="options"?(t(),a(i(A),{key:1,"options-data":e.unit.content,state:e.unit.studentState},null,8,["options-data","state"])):e.unit.unitType=="open"?(t(),a(i(F),{key:2,state:e.unit.studentState},null,8,["state"])):e.unit.unitType=="video"?(t(),a(i(W),{key:3,video:e.unit.content},null,8,["video"])):e.unit.unitType=="code"?(t(),a(i(ve),{key:4,state:e.unit.studentState},null,8,["state"])):e.unit.unitType=="pibody"?(t(),a(i(ge),{key:5,state:e.unit.studentState},null,8,["state"])):C("",!0)]))])}}}),Le={ref:"rootEl",class:"flex flex-col gap-8"},Ce=k({__name:"UnitsView",props:{units:{}},setup(m){return(e,r)=>(t(),u("div",Le,[(t(!0),u(P,null,z(e.units,n=>(t(),a(ke,{key:n.id,unit:n},null,8,["unit"]))),128))],512))}}),Se={class:"h-screen flex flex-col items-center overflow-hidden relative bg-white"},Ee={class:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 max-w-[1920px] mx-auto"},De={class:"flex justify-between items-center w-full min-h-16 px-8 gap-8"},Be={class:"flex items-center gap-4"},Ie={key:0,class:"flex flex-grow max-w-screen-lg items-center gap-4"},Ue={class:"flex-1 overflow-y-auto mt-16 mb-0 w-full"},Te={key:1,class:"flex justify-center"},Re={key:2},Ve={key:0,class:"absolute left-0 top-1/2 -translate-y-1/2"},Pe={class:"relative h-full"},ze={class:"absolute -right-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},Ne={key:1,class:"absolute right-0 top-1/2 -translate-y-1/2"},je={class:"relative h-full"},qe={class:"absolute -left-0 top-1/2 -translate-y-1/2 w-5 h-10 z-10"},dt=k({__name:"LessonRevisePage",setup(m){const e=te(),r=se(),n=be(),{units:d,isLessonLoading:v,selectedLesson:y,showPibody:c,showCode:S}=H(n),{loadLessonById:E}=n;function x(){var L;((L=y.value)==null?void 0:L.lessonType)=="module"?r.push("/v2/docs"):e.query.route_id&&e.query.route_id!=""?r.push("/v2/route/"+e.query.route_id):r.push("/v2/home")}const w=f(window.innerWidth),l=f(16),h=f(!0),g=f(!0);function D(){if(w.value=window.innerWidth,w.value<=1300){l.value=16;return}const s=452-(w.value-1024)/2;l.value=s>16?s:16}J(()=>{D(),E(Number(e.params.id),(e.query.route_id??"").toString()),window.addEventListener("resize",D)}),Q(()=>{window.removeEventListener("resize",D)});const B=V(()=>w.value<=1920?{}:"calc((-100vw + 1920px) / 2)");return(L,s)=>{const b=oe,N=K,j=R,I=O;return t(),u("div",Se,[o("div",Ee,[o("div",De,[o("div",Be,[p(b,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:x})]),i(y)?(t(),u("div",Ie,[p(N,{value:100,"show-value":!1,class:"w-full rounded-full h-3"})])):C("",!0),s[7]||(s[7]=o("div",{class:"w-10"},null,-1))])]),o("div",Ue,[o("div",{class:"w-full h-full max-w-screen-lg mx-auto py-8",style:X({paddingLeft:l.value+"px",paddingRight:l.value+"px"})},[i(v)?(t(),a(j,{key:0,class:"flex justify-center"})):i(y)?(t(),u("div",Re,[p(Ce,{units:i(d)},null,8,["units"])])):(t(),u("div",Te,"No lesson found"))],4)]),i(c)?(t(),u("div",Ve,[p(b,{icon:"pi pi-microchip",severity:"secondary",onClick:s[0]||(s[0]=_=>h.value=!0),class:"w-8 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg mt-16"}),p(I,{visible:h.value,"onUpdate:visible":s[2]||(s[2]=_=>h.value=_),modal:!1,dismissable:!1,closeOnEscape:!1,class:"h-[calc(100vh-64px)] w-fit mt-16",pt:{root:{style:`right: ${B.value}`}}},{header:$(()=>s[8]||(s[8]=[o("div",null,null,-1)])),container:$(()=>[o("div",Pe,[o("div",ze,[p(b,{icon:"pi pi-chevron-left",severity:"secondary",onClick:s[1]||(s[1]=_=>h.value=!1),class:"w-5 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none"})]),(t(),a(i(ie),{id:"emulatorID",key:"emulatorID",class:"w-full",horizontal:!1,autoPut:!0}))])]),_:1},8,["visible","pt"])])):C("",!0),i(S)?(t(),u("div",Ne,[p(b,{icon:"pi pi-code",severity:"secondary",onClick:s[3]||(s[3]=_=>g.value=!0),class:"w-8 rounded-tl-lg rounded-bl-lg rounded-tr-none rounded-br-none mt-16"}),p(I,{visible:g.value,"onUpdate:visible":s[6]||(s[6]=_=>g.value=_),header:"Drawer",modal:!1,dismissable:!1,closeOnEscape:!1,position:"right",class:"h-[calc(100vh-64px)] w-[452px] mt-16",pt:{root:{style:`left: ${B.value}`}}},{header:$(()=>s[9]||(s[9]=[o("div",null,null,-1)])),container:$(()=>[o("div",je,[o("div",qe,[p(b,{icon:"pi pi-chevron-right",severity:"secondary",onClick:s[4]||(s[4]=_=>g.value=!1),class:"w-5 rounded-tl-none rounded-bl-none rounded-tr-lg rounded-br-lg"})]),(t(),a(ee,null,[(t(),a(i(re),{id:"emulatorID",key:"emulatorID",connectbuttons:i(c),"onUpdate:connectbuttons":s[5]||(s[5]=_=>Z(c)?c.value=_:null)},null,8,["connectbuttons"]))],1024))])]),_:1},8,["visible","pt"])])):C("",!0)])}}});export{dt as default};
