import{V as ie,X as N,o as u,i as C,w as V,H as ne,Q as q,a as h,m as Y,a9 as Ze,j as F,T as et,y as O,W as re,aa as tt,ab as Be,ac as nt,ad as ot,ae as at,af as Ee,ag as ve,c as w,F as J,q as oe,k as p,t as ae,$ as Q,e as R,a4 as Fe,P as de,r as g,b as me,C as Z,B as H,l as j,a5 as ue,h as A,K as te,ah as je,I as ge,v as st,s as G,ai as lt,L as _e,d as it,u as rt,aj as dt,G as fe,n as Ae,R as Ce,ak as ct,x as Re,A as He,a6 as ut,J as pt}from"./index-8eYd0-Co.js";import{u as xe,w as vt}from"./xlsx-DjuO7_Ju.js";import{_ as mt}from"./EditLocaleSelector.vue_vue_type_script_setup_true_lang-BkFfrpR3.js";import{u as Se}from"./useLocaleStore-CGKTShgd.js";import{L as we}from"./lessonApi-B_VTKClk.js";import{P as ft}from"./projectApi-BIOtx7Rp.js";import{m as ht}from"./mapLessonFromDto-C9SLSKbW.js";import{U as le}from"./unitApi-COQDlsTX.js";import{s as gt}from"./index-Drl6JR_B.js";import{s as Ke}from"./index-VaRh2XWh.js";import{s as yt}from"./index-VgJXLjdG.js";import{d as bt}from"./defaultConfirmDeleteOptions-BHu3VNzp.js";import{s as _t}from"./index-DQafit8Y.js";import{a as xt,b as wt}from"./store-DJ783GSL.js";import{u as $t,a as kt,e as Ne}from"./IdeButtons.vue_vue_type_script_setup_true_lang-BjZTJ3Qu.js";import{_ as he,a as Ge}from"./CodeEditorView.vue_vue_type_script_setup_true_lang-Cltxh41k.js";import{s as Oe,a as Xe}from"./index-CFEJNvZt.js";import{s as At}from"./index-CvjYr3FY.js";import{s as ye}from"./index-DRGFISwW.js";import{s as qe}from"./index-C5W94n6N.js";import{u as Ct,B as St}from"./CodeViewModal.vue_vue_type_style_index_0_scoped_818a8834_lang-L7cf9myE.js";import{s as Ye}from"./index-H-9SRDzX.js";import{_ as Je}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ze}from"./cloudStorageApi-bDCOPLaA.js";import{s as Tt}from"./index-RzkPAChU.js";import{s as be}from"./index-B3NttIqY.js";import{s as Pt}from"./index-DZEPUsZQ.js";import{s as Ut}from"./index-DSx-p37b.js";import{A as ce}from"./language-DYQF8nnT.js";import{s as It}from"./index-Ck89Hfr2.js";import{s as Lt}from"./index-c_rbGUP2.js";import{T as Vt}from"./index-CID063JX.js";import{s as Dt}from"./index-CrUX9qwQ.js";import"./mapUnitFromDto-C-vlLM9s.js";import"./index-CH_iu5NA.js";import"./index-eKsVto-V.js";import"./index-ahqnJA0E.js";import"./index-fKBIE13H.js";import"./index-CQCkvxda.js";import"./index-CsjCzc3Q.js";import"./index-19jCyGXe.js";import"./index-CfMinl4z.js";var Bt={root:"p-accordioncontent",content:"p-accordioncontent-content"},Et=ie.extend({name:"accordioncontent",classes:Bt}),Ft={name:"BaseAccordionContent",extends:re,props:{as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Et,provide:function(){return{$pcAccordionContent:this,$parentInstance:this}}},Te={name:"AccordionContent",extends:Ft,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},ariaLabelledby:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},attrs:function(){return N(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{id:this.id,role:"region","aria-labelledby":this.ariaLabelledby,"data-pc-name":"accordioncontent","data-p-active":this.$pcAccordionPanel.active}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}}};function Rt(e,a,t,i,s,n){return e.asChild?Y(e.$slots,"default",{key:1,class:O(e.cx("root")),active:n.$pcAccordionPanel.active,a11yAttrs:n.a11yAttrs}):(u(),C(et,N({key:0,name:"p-toggleable-content"},e.ptm("transition",n.ptParams)),{default:V(function(){return[!n.$pcAccordion.lazy||n.$pcAccordionPanel.active?ne((u(),C(q(e.as),N({key:0,class:e.cx("root")},n.attrs),{default:V(function(){return[h("div",N({class:e.cx("content")},e.ptm("content",n.ptParams)),[Y(e.$slots,"default")],16)]}),_:3},16,["class"])),[[Ze,n.$pcAccordion.lazy?!0:n.$pcAccordionPanel.active]]):F("",!0)]}),_:3},16))}Te.render=Rt;var Nt={root:"p-accordionheader",toggleicon:"p-accordionheader-toggle-icon"},zt=ie.extend({name:"accordionheader",classes:Nt}),Mt={name:"BaseAccordionHeader",extends:re,props:{as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1}},style:zt,provide:function(){return{$pcAccordionHeader:this,$parentInstance:this}}},Pe={name:"AccordionHeader",extends:Mt,inheritAttrs:!1,inject:["$pcAccordion","$pcAccordionPanel"],methods:{onFocus:function(){this.$pcAccordion.selectOnFocus&&this.changeActiveValue()},onClick:function(){this.changeActiveValue()},onKeydown:function(a){switch(a.code){case"ArrowDown":this.onArrowDownKey(a);break;case"ArrowUp":this.onArrowUpKey(a);break;case"Home":this.onHomeKey(a);break;case"End":this.onEndKey(a);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(a);break}},onArrowDownKey:function(a){var t=this.findNextPanel(this.findPanel(a.currentTarget));t?this.changeFocusedPanel(a,t):this.onHomeKey(a),a.preventDefault()},onArrowUpKey:function(a){var t=this.findPrevPanel(this.findPanel(a.currentTarget));t?this.changeFocusedPanel(a,t):this.onEndKey(a),a.preventDefault()},onHomeKey:function(a){var t=this.findFirstPanel();this.changeFocusedPanel(a,t),a.preventDefault()},onEndKey:function(a){var t=this.findLastPanel();this.changeFocusedPanel(a,t),a.preventDefault()},onEnterKey:function(a){this.changeActiveValue(),a.preventDefault()},findPanel:function(a){return a==null?void 0:a.closest('[data-pc-name="accordionpanel"]')},findHeader:function(a){return tt(a,'[data-pc-name="accordionheader"]')},findNextPanel:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t?a:a.nextElementSibling;return i?Be(i,"data-p-disabled")?this.findNextPanel(i):this.findHeader(i):null},findPrevPanel:function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t?a:a.previousElementSibling;return i?Be(i,"data-p-disabled")?this.findPrevPanel(i):this.findHeader(i):null},findFirstPanel:function(){return this.findNextPanel(this.$pcAccordion.$el.firstElementChild,!0)},findLastPanel:function(){return this.findPrevPanel(this.$pcAccordion.$el.lastElementChild,!0)},changeActiveValue:function(){this.$pcAccordion.updateValue(this.$pcAccordionPanel.value)},changeFocusedPanel:function(a,t){nt(this.findHeader(t))}},computed:{id:function(){return"".concat(this.$pcAccordion.id,"_accordionheader_").concat(this.$pcAccordionPanel.value)},ariaControls:function(){return"".concat(this.$pcAccordion.id,"_accordioncontent_").concat(this.$pcAccordionPanel.value)},attrs:function(){return N(this.asAttrs,this.a11yAttrs,this.ptmi("root",this.ptParams))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.$pcAccordionPanel.disabled}:void 0},a11yAttrs:function(){return{id:this.id,tabindex:this.$pcAccordion.tabindex,"aria-expanded":this.$pcAccordionPanel.active,"aria-controls":this.ariaControls,"data-pc-name":"accordionheader","data-p-disabled":this.$pcAccordionPanel.disabled,"data-p-active":this.$pcAccordionPanel.active,onFocus:this.onFocus,onKeydown:this.onKeydown}},ptParams:function(){return{context:{active:this.$pcAccordionPanel.active}}}},components:{ChevronUpIcon:Ke,ChevronDownIcon:yt},directives:{ripple:ot}};function jt(e,a,t,i,s,n){var o=at("ripple");return e.asChild?Y(e.$slots,"default",{key:1,class:O(e.cx("root")),active:n.$pcAccordionPanel.active,a11yAttrs:n.a11yAttrs,onClick:n.onClick}):ne((u(),C(q(e.as),N({key:0,class:e.cx("root"),onClick:n.onClick},n.attrs),{default:V(function(){return[Y(e.$slots,"default",{active:n.$pcAccordionPanel.active}),Y(e.$slots,"toggleicon",{active:n.$pcAccordionPanel.active,class:O(e.cx("toggleicon"))},function(){return[n.$pcAccordionPanel.active?(u(),C(q(n.$pcAccordion.$slots.collapseicon?n.$pcAccordion.$slots.collapseicon:n.$pcAccordion.collapseIcon?"span":"ChevronDownIcon"),N({key:0,class:[n.$pcAccordion.collapseIcon,e.cx("toggleicon")],"aria-hidden":"true"},e.ptm("toggleicon",n.ptParams)),null,16,["class"])):(u(),C(q(n.$pcAccordion.$slots.expandicon?n.$pcAccordion.$slots.expandicon:n.$pcAccordion.expandIcon?"span":"ChevronUpIcon"),N({key:1,class:[n.$pcAccordion.expandIcon,e.cx("toggleicon")],"aria-hidden":"true"},e.ptm("toggleicon",n.ptParams)),null,16,["class"]))]})]}),_:3},16,["class","onClick"])),[[o]])}Pe.render=jt;var Ht={root:function(a){var t=a.instance,i=a.props;return["p-accordionpanel",{"p-accordionpanel-active":t.active,"p-disabled":i.disabled}]}},Kt=ie.extend({name:"accordionpanel",classes:Ht}),Gt={name:"BaseAccordionPanel",extends:re,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"},asChild:{type:Boolean,default:!1}},style:Kt,provide:function(){return{$pcAccordionPanel:this,$parentInstance:this}}},Ue={name:"AccordionPanel",extends:Gt,inheritAttrs:!1,inject:["$pcAccordion"],computed:{active:function(){return this.$pcAccordion.isItemActive(this.value)},attrs:function(){return N(this.a11yAttrs,this.ptmi("root",this.ptParams))},a11yAttrs:function(){return{"data-pc-name":"accordionpanel","data-p-disabled":this.disabled,"data-p-active":this.active}},ptParams:function(){return{context:{active:this.active}}}}};function Ot(e,a,t,i,s,n){return e.asChild?Y(e.$slots,"default",{key:1,class:O(e.cx("root")),active:n.active,a11yAttrs:n.a11yAttrs}):(u(),C(q(e.as),N({key:0,class:e.cx("root")},n.attrs),{default:V(function(){return[Y(e.$slots,"default")]}),_:3},16,["class"]))}Ue.render=Ot;var Xt=function(a){var t=a.dt;return`
.p-accordionpanel {
    display: flex;
    flex-direction: column;
    border-style: solid;
    border-width: `.concat(t("accordion.panel.border.width"),`;
    border-color: `).concat(t("accordion.panel.border.color"),`;
}

.p-accordionheader {
    all: unset;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: `).concat(t("accordion.header.padding"),`;
    color: `).concat(t("accordion.header.color"),`;
    background: `).concat(t("accordion.header.background"),`;
    border-style: solid;
    border-width: `).concat(t("accordion.header.border.width"),`;
    border-color: `).concat(t("accordion.header.border.color"),`;
    font-weight: `).concat(t("accordion.header.font.weight"),`;
    border-radius: `).concat(t("accordion.header.border.radius"),`;
    transition: background `).concat(t("accordion.transition.duration"),"; color ").concat(t("accordion.transition.duration"),"color ").concat(t("accordion.transition.duration"),", outline-color ").concat(t("accordion.transition.duration"),", box-shadow ").concat(t("accordion.transition.duration"),`;
    outline-color: transparent;
}

.p-accordionpanel:first-child > .p-accordionheader {
    border-width: `).concat(t("accordion.header.first.border.width"),`;
    border-start-start-radius: `).concat(t("accordion.header.first.top.border.radius"),`;
    border-start-end-radius: `).concat(t("accordion.header.first.top.border.radius"),`;
}

.p-accordionpanel:last-child > .p-accordionheader {
    border-end-start-radius: `).concat(t("accordion.header.last.bottom.border.radius"),`;
    border-end-end-radius: `).concat(t("accordion.header.last.bottom.border.radius"),`;
}

.p-accordionpanel:last-child.p-accordionpanel-active > .p-accordionheader {
    border-end-start-radius: `).concat(t("accordion.header.last.active.bottom.border.radius"),`;
    border-end-end-radius: `).concat(t("accordion.header.last.active.bottom.border.radius"),`;
}

.p-accordionheader-toggle-icon {
    color: `).concat(t("accordion.header.toggle.icon.color"),`;
}

.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {
    box-shadow: `).concat(t("accordion.header.focus.ring.shadow"),`;
    outline: `).concat(t("accordion.header.focus.ring.width")," ").concat(t("accordion.header.focus.ring.style")," ").concat(t("accordion.header.focus.ring.color"),`;
    outline-offset: `).concat(t("accordion.header.focus.ring.offset"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) > .p-accordionheader:hover {
    background: `).concat(t("accordion.header.hover.background"),`;
    color: `).concat(t("accordion.header.hover.color"),`;
}

.p-accordionpanel:not(.p-accordionpanel-active):not(.p-disabled) .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(t("accordion.header.toggle.icon.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader {
    background: `).concat(t("accordion.header.active.background"),`;
    color: `).concat(t("accordion.header.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader .p-accordionheader-toggle-icon {
    color: `).concat(t("accordion.header.toggle.icon.active.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover {
    background: `).concat(t("accordion.header.active.hover.background"),`;
    color: `).concat(t("accordion.header.active.hover.color"),`;
}

.p-accordionpanel:not(.p-disabled).p-accordionpanel-active > .p-accordionheader:hover .p-accordionheader-toggle-icon {
    color: `).concat(t("accordion.header.toggle.icon.active.hover.color"),`;
}

.p-accordioncontent-content {
    border-style: solid;
    border-width: `).concat(t("accordion.content.border.width"),`;
    border-color: `).concat(t("accordion.content.border.color"),`;
    background-color: `).concat(t("accordion.content.background"),`;
    color: `).concat(t("accordion.content.color"),`;
    padding: `).concat(t("accordion.content.padding"),`;
}
`)},qt={root:"p-accordion p-component"},Yt=ie.extend({name:"accordion",theme:Xt,classes:qt}),Jt={name:"BaseAccordion",extends:re,props:{value:{type:[String,Number,Array],default:void 0},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},expandIcon:{type:String,default:void 0},collapseIcon:{type:String,default:void 0},activeIndex:{type:[Number,Array],default:null}},style:Yt,provide:function(){return{$pcAccordion:this,$parentInstance:this}}},We={name:"Accordion",extends:Jt,inheritAttrs:!1,emits:["update:value","update:activeIndex","tab-open","tab-close","tab-click"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(a){this.id=a||Ee()},value:function(a){this.d_value=a},activeIndex:{immediate:!0,handler:function(a){this.hasAccordionTab&&(this.d_value=this.multiple?a==null?void 0:a.map(String):a==null?void 0:a.toString())}}},mounted:function(){this.id=this.id||Ee()},methods:{isItemActive:function(a){var t;return this.multiple?(t=this.d_value)===null||t===void 0?void 0:t.includes(a):this.d_value===a},updateValue:function(a){var t,i=this.isItemActive(a);this.multiple?i?this.d_value=this.d_value.filter(function(s){return s!==a}):this.d_value?this.d_value.push(a):this.d_value=[a]:this.d_value=i?null:a,this.$emit("update:value",this.d_value),this.$emit("update:activeIndex",this.multiple?(t=this.d_value)===null||t===void 0?void 0:t.map(Number):Number(this.d_value)),this.$emit(i?"tab-close":"tab-open",{originalEvent:void 0,index:Number(a)})},isAccordionTab:function(a){return a.type.name==="AccordionTab"},getTabProp:function(a,t){return a.props?a.props[t]:void 0},getKey:function(a,t){return this.getTabProp(a,"header")||t},getHeaderPT:function(a,t){var i=this;return{root:N({onClick:function(n){return i.onTabClick(n,t)}},this.getTabProp(a,"headerProps"),this.getTabPT(a,"header",t)),toggleicon:N(this.getTabProp(a,"headeractionprops"),this.getTabPT(a,"headeraction",t))}},getContentPT:function(a,t){return{root:N(this.getTabProp(a,"contentProps"),this.getTabPT(a,"toggleablecontent",t)),transition:this.getTabPT(a,"transition",t),content:this.getTabPT(a,"content",t)}},getTabPT:function(a,t,i){var s=this.tabs.length,n={props:a.props||{},parent:{instance:this,props:this.$props,state:this.$data},context:{index:i,count:s,first:i===0,last:i===s-1,active:this.isItemActive("".concat(i))}};return N(this.ptm("accordiontab.".concat(t),n),this.ptmo(this.getTabProp(a,"pt"),t,n))},onTabClick:function(a,t){this.$emit("tab-click",{originalEvent:a,index:t})}},computed:{tabs:function(){var a=this;return this.$slots.default().reduce(function(t,i){return a.isAccordionTab(i)?t.push(i):i.children&&i.children instanceof Array&&i.children.forEach(function(s){a.isAccordionTab(s)&&t.push(s)}),t},[])},hasAccordionTab:function(){return this.tabs.length}},components:{AccordionPanel:Ue,AccordionHeader:Pe,AccordionContent:Te,ChevronUpIcon:Ke,ChevronRightIcon:gt}};function Wt(e,a,t,i,s,n){var o=ve("AccordionHeader"),l=ve("AccordionContent"),c=ve("AccordionPanel");return u(),w("div",N({class:e.cx("root")},e.ptmi("root")),[n.hasAccordionTab?(u(!0),w(J,{key:0},oe(n.tabs,function(r,d){return u(),C(c,{key:n.getKey(r,d),value:"".concat(d),pt:{root:n.getTabPT(r,"root",d)},disabled:n.getTabProp(r,"disabled")},{default:V(function(){return[p(o,{class:O(n.getTabProp(r,"headerClass")),pt:n.getHeaderPT(r,d)},{toggleicon:V(function(b){return[b.active?(u(),C(q(e.$slots.collapseicon?e.$slots.collapseicon:e.collapseIcon?"span":"ChevronDownIcon"),N({key:0,class:[e.collapseIcon,b.class],"aria-hidden":"true",ref_for:!0},n.getTabPT(r,"headericon",d)),null,16,["class"])):(u(),C(q(e.$slots.expandicon?e.$slots.expandicon:e.expandIcon?"span":"ChevronUpIcon"),N({key:1,class:[e.expandIcon,b.class],"aria-hidden":"true",ref_for:!0},n.getTabPT(r,"headericon",d)),null,16,["class"]))]}),default:V(function(){return[r.children&&r.children.headericon?(u(),C(q(r.children.headericon),{key:0,isTabActive:n.isItemActive("".concat(d)),active:n.isItemActive("".concat(d)),index:d},null,8,["isTabActive","active","index"])):F("",!0),r.props&&r.props.header?(u(),w("span",N({key:1,ref_for:!0},n.getTabPT(r,"headertitle",d)),ae(r.props.header),17)):F("",!0),r.children&&r.children.header?(u(),C(q(r.children.header),{key:2})):F("",!0)]}),_:2},1032,["class","pt"]),p(l,{pt:n.getContentPT(r,d)},{default:V(function(){return[(u(),C(q(r)))]}),_:2},1032,["pt"])]}),_:2},1032,["value","pt","disabled"])}),128)):Y(e.$slots,"default",{key:1})],16)}We.render=Wt;var Qt=function(a){var t=a.dt;return`
.p-inputgroup,
.p-inputgroup .p-iconfield,
.p-inputgroup .p-floatlabel,
.p-inputgroup .p-iftalabel {
    display: flex;
    align-items: stretch;
    width: 100%;
}

.p-inputgroup .p-inputtext,
.p-inputgroup .p-inputwrapper {
    flex: 1 1 auto;
    width: 1%;
}

.p-inputgroupaddon {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: `.concat(t("inputgroup.addon.padding"),`;
    background: `).concat(t("inputgroup.addon.background"),`;
    color: `).concat(t("inputgroup.addon.color"),`;
    border-block-start: 1px solid `).concat(t("inputgroup.addon.border.color"),`;
    border-block-end: 1px solid `).concat(t("inputgroup.addon.border.color"),`;
    min-width: `).concat(t("inputgroup.addon.min.width"),`;
}

.p-inputgroupaddon:first-child,
.p-inputgroupaddon + .p-inputgroupaddon {
    border-inline-start: 1px solid `).concat(t("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:last-child {
    border-inline-end: 1px solid `).concat(t("inputgroup.addon.border.color"),`;
}

.p-inputgroupaddon:has(.p-button) {
    padding: 0;
    overflow: hidden;
}

.p-inputgroupaddon .p-button {
    border-radius: 0;
}

.p-inputgroup > .p-component,
.p-inputgroup > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iconfield > .p-component,
.p-inputgroup > .p-floatlabel > .p-component,
.p-inputgroup > .p-floatlabel > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel > .p-component,
.p-inputgroup > .p-iftalabel > .p-inputwrapper > .p-component {
    border-radius: 0;
    margin: 0;
}

.p-inputgroupaddon:first-child,
.p-inputgroup > .p-component:first-child,
.p-inputgroup > .p-inputwrapper:first-child > .p-component,
.p-inputgroup > .p-iconfield:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-component,
.p-inputgroup > .p-floatlabel:first-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-component,
.p-inputgroup > .p-iftalabel:first-child > .p-inputwrapper > .p-component {
    border-start-start-radius: `).concat(t("inputgroup.addon.border.radius"),`;
    border-end-start-radius: `).concat(t("inputgroup.addon.border.radius"),`;
}

.p-inputgroupaddon:last-child,
.p-inputgroup > .p-component:last-child,
.p-inputgroup > .p-inputwrapper:last-child > .p-component,
.p-inputgroup > .p-iconfield:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-component,
.p-inputgroup > .p-floatlabel:last-child > .p-inputwrapper > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-component,
.p-inputgroup > .p-iftalabel:last-child > .p-inputwrapper > .p-component {
    border-start-end-radius: `).concat(t("inputgroup.addon.border.radius"),`;
    border-end-end-radius: `).concat(t("inputgroup.addon.border.radius"),`;
}

.p-inputgroup .p-component:focus,
.p-inputgroup .p-component.p-focus,
.p-inputgroup .p-inputwrapper-focus,
.p-inputgroup .p-component:focus ~ label,
.p-inputgroup .p-component.p-focus ~ label,
.p-inputgroup .p-inputwrapper-focus ~ label {
    z-index: 1;
}

.p-inputgroup > .p-button:not(.p-button-icon-only) {
    width: auto;
}

.p-inputgroup .p-iconfield + .p-iconfield .p-inputtext {
    border-inline-start: 0;
}
`)},Zt={root:"p-inputgroup"},en=ie.extend({name:"inputgroup",theme:Qt,classes:Zt}),tn={name:"BaseInputGroup",extends:re,style:en,provide:function(){return{$pcInputGroup:this,$parentInstance:this}}},Ie={name:"InputGroup",extends:tn,inheritAttrs:!1};function nn(e,a,t,i,s,n){return u(),w("div",N({class:e.cx("root")},e.ptmi("root")),[Y(e.$slots,"default")],16)}Ie.render=nn;var on={root:"p-inputgroupaddon"},an=ie.extend({name:"inputgroupaddon",classes:on}),sn={name:"BaseInputGroupAddon",extends:re,style:an,provide:function(){return{$pcInputGroupAddon:this,$parentInstance:this}}},Le={name:"InputGroupAddon",extends:sn,inheritAttrs:!1};function ln(e,a,t,i,s,n){return u(),w("div",N({class:e.cx("root")},e.ptmi("root")),[Y(e.$slots,"default")],16)}Le.render=ln;const ee={hideLesson:rn,modifyLesson:dn,publishLesson:cn,acceptLesson:un,cancelLessonReview:pn,editLesson:vn,rejectLesson:mn,sendLessonForReview:fn,startLessonReview:hn};async function rn(e){return await Q.patch(`v2/lesson/${e}/hide`)}async function dn(e){return await Q.patch(`v2/lesson/${e}/modify`)}async function cn(e){return await Q.patch(`v2/lesson/${e}/publish`)}async function un(e){return await Q.patch(`v2/lesson/${e}/review/accept`)}async function pn(e){return await Q.patch(`v2/lesson/${e}/review/cancel`)}async function vn(e){return await Q.patch(`v2/lesson/${e}/review/edit`)}async function mn(e){return await Q.patch(`v2/lesson/${e}/review/reject`)}async function fn(e){return await Q.patch(`v2/lesson/${e}/review/send`)}async function hn(e){return await Q.patch(`v2/lesson/${e}/review/start`)}const M=[];for(let e=0;e<256;++e)M.push((e+256).toString(16).slice(1));function gn(e,a=0){return(M[e[a+0]]+M[e[a+1]]+M[e[a+2]]+M[e[a+3]]+"-"+M[e[a+4]]+M[e[a+5]]+"-"+M[e[a+6]]+M[e[a+7]]+"-"+M[e[a+8]]+M[e[a+9]]+"-"+M[e[a+10]]+M[e[a+11]]+M[e[a+12]]+M[e[a+13]]+M[e[a+14]]+M[e[a+15]]).toLowerCase()}let $e;const yn=new Uint8Array(16);function bn(){if(!$e){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$e=crypto.getRandomValues.bind(crypto)}return $e(yn)}const _n=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Me={randomUUID:_n};function Ve(e,a,t){var s;if(Me.randomUUID&&!a&&!e)return Me.randomUUID();e=e||{};const i=e.random??((s=e.rng)==null?void 0:s.call(e))??bn();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,gn(i)}const xn={class:"flex items-center"},wn={class:"flex items-center mr-2"},$n=R({__name:"HighlightEditor",props:Fe({index:{},usedSlots:{}},{highlight:{},highlightModifiers:{}}),emits:Fe(["remove","save"],["update:highlight"]),setup(e,{emit:a}){const t=e,i=de(e,"highlight"),s=g(""),n=g(null),o=g(null),l=g(!1),c=me(()=>n.value!=null&&o.value!=null),r=a,d=()=>{r("remove",t.index)};Z(()=>{i.value&&(s.value=i.value.id,n.value=i.value.module,o.value=i.value.slot,l.value=i.value.autoPut)}),H([n,o,l],()=>{n.value!=null&&r("save",t.index,s.value,n.value,o.value,l.value)}),H(c,v=>{v||(l.value=!1)});const b=g(["A","B","C","D","E","F"]),_=g(["G","H"]),$=g(["8","9"]),m=g(["LED","switch","push-button","light-sensor","touch-sensor","potentiometer","encoder","motion-detector","microphone","climate-sensor","gyro-accel","buzzer","color-sensor","joystick","distance-sensor","servo","led-tower"]),P=me(()=>{if(n.value){if(n.value==="servo"){const I=$.value.filter(S=>!(t.usedSlots??[]).includes(S));return o.value&&!I.includes(o.value)&&I.unshift(o.value),[null,...I]}else if(n.value==="led-tower"){const I=[..._.value,$.value[0]].filter(S=>!(t.usedSlots??[]).includes(S));return o.value&&!I.includes(o.value)&&I.unshift(o.value),[null,...I]}const y=b.value.filter(L=>!(t.usedSlots??[]).includes(L));return o.value&&!y.includes(o.value)&&y.unshift(o.value),[null,...y]}const x=[...b.value,..._.value,...$.value].filter(U=>!(t.usedSlots??[]).includes(U));return o.value&&!x.includes(o.value)&&x.unshift(o.value),[null,...x]}),f=me(()=>o.value?o.value==="8"?["servo","led-tower"]:o.value==="9"?["servo"]:o.value==="G"||o.value==="H"?["led-tower"]:m.value.filter(v=>v!=="servo"&&v!=="led-tower"):m.value);return(v,x)=>{const U=qe,y=ye,L=Le,I=Ie,S=j;return u(),w("div",xn,[h("div",wn,[p(U,{modelValue:l.value,"onUpdate:modelValue":x[0]||(x[0]=T=>l.value=T),binary:"","input-id":"autoput",disabled:!c.value},null,8,["modelValue","disabled"]),x[3]||(x[3]=h("label",{for:"autoput",class:"ml-1 text-sm"},"auto",-1))]),p(I,null,{default:V(()=>[p(y,{modelValue:n.value,"onUpdate:modelValue":x[1]||(x[1]=T=>n.value=T),options:f.value,placeholder:"Select module",class:"place-content-center",size:"small"},null,8,["modelValue","options"]),p(L,{class:"h-[35px]"},{default:V(()=>x[4]||(x[4]=[h("div",null,"=>",-1)])),_:1}),p(y,{modelValue:o.value,"onUpdate:modelValue":x[2]||(x[2]=T=>o.value=T),options:P.value,placeholder:"Select slot",size:"small"},{option:V(({option:T})=>[h("span",{class:O(T===null?"text-gray-400":"")},ae(T===null?"[null]":T),3)]),value:V(({value:T})=>[h("span",{class:O(T===null?"text-gray-400":"")},ae(T===null?"[null]":T),3)]),_:1},8,["modelValue","options"])]),_:1}),p(S,{icon:"pi pi-trash",variant:"text",severity:"danger","aria-label":"Remove",onClick:d,class:"ml-2"})])}}}),kn={class:"flex flex-col gap-2"},Qe=R({__name:"HighlightPanel",props:{neededModules:{default:[]},neededModulesModifiers:{}},emits:["update:neededModules"],setup(e){const a=de(e,"neededModules");function t(){a.value=[...a.value,{autoPut:!1,module:null,slot:null,id:Ve()}]}function i(n){a.value.splice(n,1)}function s(n,o,l,c,r){a.value[n].id=o,a.value[n].module=l,a.value[n].slot=c,a.value[n].autoPut=r}return(n,o)=>{const l=j,c=At;return u(),C(c,{header:"Highlight slots & modules"},{default:V(()=>[h("div",kn,[(u(!0),w(J,null,oe(a.value,(r,d)=>(u(),w("div",{key:r.id},[p($n,{highlight:a.value[d],"onUpdate:highlight":b=>a.value[d]=b,index:d,usedSlots:a.value.filter((b,_)=>{var $;return _!==d&&(($=a.value[_])==null?void 0:$.slot)!=null}).map(b=>b.slot),onRemove:i,onSave:s},null,8,["highlight","onUpdate:highlight","index","usedSlots"])]))),128))]),p(l,{icon:"pi pi-plus",variant:"text","aria-label":"Add",class:"self-center mt-2",onClick:t})]),_:1})}}}),An={class:"flex"},Cn={class:"h-[500px] flex flex-col w-full relative"},Sn={class:"absolute right-2 bottom-2"},Tn=R({__name:"PibodyEditor",props:{id:{},content:{},data:{}},emits:["save-content-data","show-tester"],setup(e,{emit:a}){const t=te(),i=g(!1),s=e,n=a,o=g(""),l=g(""),c=g([]);let r=!0;ue(()=>{o.value=s.content.starting,l.value=s.content.answer,c.value=s.data.neededModules??[]}),H([o,l,c],()=>{if(r){r=!1;return}n("save-content-data",{starting:o.value,answer:l.value,hashed_answer:""},{neededModules:c.value.filter(b=>b.module!=null),tests:s.data.tests,includedCommandsForTests:s.data.includedCommandsForTests})},{deep:!0});function d(){n("show-tester",{lesson_id:t.params.id,unit_id:s.id.split("-")[1]})}return(b,_)=>{var f,v;const $=Oe,m=Xe,P=j;return u(),w(J,null,[h("div",An,[h("div",Cn,[p(m,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:V(()=>[p($,{size:50,minSize:20},{default:V(()=>[p(he,{code:o.value,"onUpdate:code":_[0]||(_[0]=x=>o.value=x),runbuttons:!1,connectbuttons:i.value,id:s.id+"_",class:"h-full"},null,8,["code","connectbuttons","id"])]),_:1}),p($,{size:50,minSize:20},{default:V(()=>[p(he,{code:l.value,"onUpdate:code":_[1]||(_[1]=x=>l.value=x),connectbuttons:i.value,"onUpdate:connectbuttons":_[2]||(_[2]=x=>i.value=x),id:s.id,class:"h-full"},null,8,["code","connectbuttons","id"])]),_:1})]),_:1}),h("div",Sn,[p(P,{label:`Tests (${((v=(f=s.data)==null?void 0:f.tests)==null?void 0:v.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:d},null,8,["label"])]),p(A(Ge),{id:s.id,class:"flex-grow max-h-40"},null,8,["id"])])]),p(Qe,{neededModules:c.value,"onUpdate:neededModules":_[3]||(_[3]=x=>c.value=x),class:"mb-2",style:{borderTopLeftRadius:"0px",borderTopRightRadius:"0px"}},null,8,["neededModules"])],64)}}}),Pn={class:"flex"},Un={class:"h-[500px] flex flex-col w-full relative"},In={class:"absolute right-2 bottom-2"},Ln=R({__name:"CodeEditor",props:{id:{},code:{},data:{}},emits:["save-content-data","show-tester"],setup(e,{emit:a}){const t=te(),i=g(!1),s=e,n=a,o=g(""),l=g("");let c=!0;ue(()=>{o.value=s.code.starting,l.value=s.code.answer}),H([o,l],()=>{if(c){c=!1;return}n("save-content-data",{starting:o.value,answer:l.value,hashed_answer:""})});function r(){n("show-tester",{lesson_id:t.params.id,unit_id:s.id.split("-")[1]})}return(d,b)=>{var P,f;const _=Oe,$=Xe,m=j;return u(),w("div",Pn,[h("div",Un,[p($,{style:{height:"100%",border:"0.1px solid #808080",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",overflow:"hidden"}},{default:V(()=>[p(_,{size:50,minSize:20},{default:V(()=>[p(he,{code:o.value,"onUpdate:code":b[0]||(b[0]=v=>o.value=v),runbuttons:!1,connectbuttons:i.value,id:s.id+"_",class:"h-full"},null,8,["code","connectbuttons","id"])]),_:1}),p(_,{size:50,minSize:20},{default:V(()=>[p(he,{code:l.value,"onUpdate:code":b[1]||(b[1]=v=>l.value=v),connectbuttons:i.value,"onUpdate:connectbuttons":b[2]||(b[2]=v=>i.value=v),id:s.id,class:"h-full"},null,8,["code","connectbuttons","id"])]),_:1})]),_:1}),h("div",In,[p(m,{label:`Tests (${((f=(P=s.data)==null?void 0:P.tests)==null?void 0:f.length)??0})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:r},null,8,["label"])]),p(A(Ge),{id:s.id,class:"flex-grow max-h-40"},null,8,["id"])])])}}}),Vn={class:"flex justify-end h-6"},Dn={id:"code",class:"codeview-content"},Bn=["innerHTML"],En=R({__name:"CodeViewModal",props:{code:{required:!0},codeModifiers:{},visible:{type:Boolean,required:!0},visibleModifiers:{}},emits:["update:code","update:visible"],setup(e){const a=de(e,"code"),t=de(e,"visible"),i=je({x:130,y:130});H(t,n=>{n&&(i.x=130,i.y=130)});const s=n=>{const o=n.clientX-i.x,l=n.clientY-i.y,c=d=>{i.x=d.clientX-o,i.y=d.clientY-l},r=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",r)};return(n,o)=>t.value?(u(),w("div",{key:0,class:"codeview-modal",style:st({left:i.x+"px",top:i.y+"px"}),onMousedown:s},[h("div",Vn,[h("button",{class:"codeview-close-btn",onClick:o[0]||(o[0]=ge(l=>t.value=!1,["stop"]))},o[1]||(o[1]=[h("span",{class:"material-icons"},"close",-1)]))]),h("div",Dn,[h("pre",{innerHTML:a.value},null,8,Bn)])],36)):F("",!0)}}),Fn=Je(En,[["__scopeId","data-v-818a8834"]]),Rn={class:"relative min-w-[220px] min-h-[220px] flex flex-col"},Nn={class:"absolute bottom-9 right-24 z-10"},zn={class:"flex gap-1"},Mn={class:"absolute flex flex-row top-4 right-4 z-10"},jn=R({__name:"BlocklyEditor",props:{id:{},content:{},data:{},emulatorRun:{type:Boolean}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=Ct(),{selectedKitType:n}=G(s),{setKitType:o}=s,l=g(""),c=$t(t.id),r=g([]);let d=g(!1),b=null;const _=g(!1);if(t.emulatorRun){const f=xt(t.id),v=kt(t.id);Ne.registerSimulation(t.id,{terminal:c,display:v,pibody:f}),b=Ne.getSharedEmulator(),d=lt(b).isConnected,d.value||b.connect()}const $=g(),m=g();let P=!0;return ue(()=>{o(t.data.blocksType??"pibody"),m.value=t.content.state,l.value=t.content.answer,r.value=t.data.neededModules??[]}),H([m,l,n,r],()=>{if(P){P=!1;return}i("save-content-data",{state:m.value,answer:l.value,hashed_answer:""},{blocksType:n.value,neededModules:r.value.filter(f=>f.module!=null)})},{deep:!0}),(f,v)=>{const x=Ye,U=j;return u(),w(J,null,[h("div",Rn,[(u(),C(St,{ref_key:"blocklyComp",ref:$,class:"h-[500px] flex-grow",id:t.id,key:t.id,state:m.value,"onUpdate:state":v[0]||(v[0]=y=>m.value=y),code:l.value,"onUpdate:code":v[1]||(v[1]=y=>l.value=y),type:A(n),"onUpdate:type":v[2]||(v[2]=y=>_e(n)?n.value=y:null),"auto-close":!0},null,8,["id","state","code","type"])),h("div",Nn,[h("div",zn,[h("div",{class:O(["flex border rounded-lg px-3 py-1 items-center gap-2 cursor-pointer",A(n)==="pibody"?"border-primary bg-white":"border-transparent bg-neutral50"]),onClick:v[4]||(v[4]=y=>n.value="pibody")},[v[11]||(v[11]=h("div",{class:"text-heading-5-semibold"},"Pibody",-1)),p(x,{modelValue:A(n),"onUpdate:modelValue":v[3]||(v[3]=y=>_e(n)?n.value=y:null),name:"Pibody",value:"pibody"},null,8,["modelValue"])],2),h("div",{class:O(["flex border rounded-lg px-3 py-1 items-center gap-2 cursor-pointer",A(n)==="atlas"?"border-primary bg-white":"border-transparent bg-neutral50"]),onClick:v[6]||(v[6]=y=>n.value="atlas")},[v[12]||(v[12]=h("div",{class:"text-heading-5-semibold"},"Atlas",-1)),p(x,{modelValue:A(n),"onUpdate:modelValue":v[5]||(v[5]=y=>_e(n)?n.value=y:null),name:"Atlas",value:"atlas"},null,8,["modelValue"])],2)])]),h("div",Mn,[p(U,{type:"button",class:"w-9 h-9 mr-1 bg-gray-400",rounded:"",onClick:v[7]||(v[7]=y=>_.value=!_.value)},{default:V(()=>v[13]||(v[13]=[h("span",{class:"material-icons"},"code",-1)])),_:1})])]),A(n)=="pibody"?(u(),C(Qe,{key:0,neededModules:r.value,"onUpdate:neededModules":v[8]||(v[8]=y=>r.value=y),class:"mb-2",style:{borderTopLeftRadius:"0px",borderTopRightRadius:"0px"}},null,8,["neededModules"])):F("",!0),p(Fn,{code:l.value,"onUpdate:code":v[9]||(v[9]=y=>l.value=y),visible:_.value,"onUpdate:visible":v[10]||(v[10]=y=>_.value=y)},null,8,["code","visible"])],64)}}}),Hn=["article","options","open","video","code","pibody","checklist","tinkercad","submit-image","blockly","used-modules"],Kn=["options","open","code","pibody","checklist","tinkercad","submit-image","blockly"],X=it("lesson-edit-store",()=>{const e=rt(),a=Se(),{lang:t}=G(a),i=g(null),s=g(!1),n=g(!1),o=g(!1),l=g(!1),c=g(!1),r=g(!1),d=g([]),b=g(!1);function _(S){o.value=S}async function $(S){try{s.value=!0;const{data:T}=await we.getLessonById(S,void 0,t.value);i.value=ht(T)}catch(T){e.add({severity:"error",summary:T.response.data.error,life:2e3})}finally{s.value=!1}}async function m(S,T){try{n.value=!0;const{data:B}=await le.getUnitByIdandLessonId(S,T,t.value);return B}catch(B){e.add({severity:"error",summary:B.response.data.error,life:2e3})}finally{n.value=!1}}async function P(S){try{l.value=!0;const{data:T}=await le.createUnitByLessonId(i.value.id,S);e.add({severity:"success",summary:T.message,life:2e3})}catch(T){e.add({severity:"error",summary:T.response.data.error,life:2e3})}finally{l.value=!1}}async function f(S,T,B){try{c.value=!0;const{data:D}=await le.updateUnitByIdandLessonId(S,T,B,t.value);return D.unit_id}catch(D){e.add({severity:"error",summary:D.response.data.error,life:2e3})}finally{c.value=!1}}async function v(S,T){try{r.value=!0;const{data:B}=await le.deleteUnitByIdandLessonId(S,T);e.add({severity:"success",summary:B.message,life:2e3})}catch(B){e.add({severity:"error",summary:B.response.data.error,life:2e3})}finally{r.value=!1}}async function x(S,T){try{s.value=!0;const{data:B}=await we.translateLesson(S,t.value,T,"chatgpt");e.add({severity:"success",summary:B.message,life:2e3})}catch(B){e.add({severity:"error",summary:B.response.data.error,life:2e3})}finally{s.value=!1}}async function U(S,T,B){try{c.value=!0;const{data:D}=await le.translateUnit(S,T,B,"chatgpt");e.add({severity:"success",summary:D.message,life:2e3})}catch(D){e.add({severity:"error",summary:D.response.data.error,life:2e3})}finally{c.value=!1}}async function y(S,T,B){try{c.value=!0;const{data:D}=await le.copyUnitContent(i.value.id,S,T,B);e.add({severity:"success",summary:D.message,life:2e3})}catch(D){e.add({severity:"error",summary:D.response.data.error,life:2e3})}finally{c.value=!1}}async function L(){try{b.value=!0;const{data:S}=await we.getDocs();d.value=S}catch(S){e.add({severity:"error",summary:S.response.data.error,life:2e3})}finally{b.value=!1}}async function I(S){var T,B;try{const{data:D}=await ft.getAiSubmissions(S);if(!D||D.length===0)throw new Error("No AI submissions found");return D}catch(D){const K=((B=(T=D==null?void 0:D.response)==null?void 0:T.data)==null?void 0:B.error)??(D==null?void 0:D.message)??"Failed to fetch AI submissions";e.add({severity:"error",summary:K,life:2e3})}}return{selectedLesson:i,isLessonLoading:s,isLessonSaving:o,isUnitLoading:n,isUnitCreating:l,isUnitUpdating:c,isUnitDeleting:r,docs:d,isDocsLoading:b,setLessonSaving:_,loadLessonById:$,loadUnitByIdandLessonId:m,createUnit:P,updateUnitByIdandLessonId:f,deleteUnitByIdandLessonId:v,translateLessonToLang:x,translateUnitContent:U,copyUnitContent:y,loadDocs:L,getAiSubmissions:I}}),Gn={class:"flex items-start"},On=R({__name:"MdEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const a=de(e,"modelValue"),t=je({title:{title:"Title",icon:"v-md-icon-tip",action(n){n.insert(o=>{const l="# <center>",c="</center>",d=o||"Title";return{text:`${l}${d}${c}`,selected:d}})}},icons:{title:"Icons",icon:"v-md-icon-tip",menus:[{name:"Attention",text:"Attention",action(n){n.insert(()=>{const o='<span style="font-size: 20px">',l="</span>",c="⚠️";return{text:`${o}${c}${l}`,selected:c}})}},{name:"PiBody",text:"PiBody",action(n){n.insert(()=>{const o="<b>",l="</b>",c='<span style="color: #FF3F85"> Pi</span>Body';return{text:`${o}${c}${l}`,selected:c}})}},{name:"Run",text:"Run",action(n){n.insert(()=>({text:'<img src="https://static.artisan.education/lessons/image__c9041f3cc90b4dc188f9c2277f57f5a0..png" alt="Run" style="height: 1em;vertical-align: -0.2em;display:inline;">'}))}}]},style:{title:"Style",icon:"v-md-icon-tip",action(n){n.insert(o=>{const l='<span style="">',c="</span>",d=o||"placeholder";return{text:`${l}${d}${c}`,selected:d}})}},underline:{title:"Underline",icon:"v-md-icon-under-line",action(n){n.insert(o=>{const l='<span style="text-decoration: underline">',c="</span>",d=o||"placeholder";return{text:`${l}${d}${c}`,selected:d}})}},tip:{title:"Tip",icon:"v-md-icon-tip",action(n){n.insert(o=>{const l='<div style="background-color:#F3F5F7; padding: 20px; border-left: solid 8px #42B983">',c="</div>",d=o||"placeholder";return{text:`${l}${d}${c}`,selected:d}})}},note:{title:"Note",icon:"v-md-icon-tip",action(n){n.insert(o=>{const l='<div style="background-color:#F3F5F7; padding: 15px; border-left: solid 8px #FFCD6B; margin-bottom: 15px">',c="</div>",d=o||"placeholder";return{text:`${l}${d}${c}`,selected:d}})}},uploadfile:{title:"Upload File",icon:"v-md-icon-tip",action(n){const o=document.createElement("input");o.type="file",o.onchange=l=>{var r;const c=(r=l.target.files)==null?void 0:r[0];c&&s(c,n)},o.click()}}});async function i(n,o,l){const c=l[0],r=new FormData;r.append("file",c);try{const{data:d}=await ze.uploadFile(r,"image"),b=d.source_url;o({url:b,desc:"desc",width:"auto",height:"auto"})}catch(d){console.log(d)}}async function s(n,o){const l=new FormData;l.append("file",n);try{const{data:c}=await ze.uploadFile(l,"file"),r=c.source_url;o.insert(d=>({text:`[${d}](${r})`,selected:d}))}catch(c){console.error(c)}}return(n,o)=>{const l=ve("v-md-editor");return u(),w("div",Gn,[p(l,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=c=>a.value=c),mode:"edit",onChange:o[1]||(o[1]=c=>a.value=c),"left-toolbar":"undo redo clear | tip emoji todo-list | h bold italic strikethrough quote ul ol table hr link code image | title icons style underline tip note uploadfile","right-toolbar":"",toolbar:t,"disabled-menus":[],onUploadImage:i},null,8,["modelValue","toolbar"])])}}}),De=Je(On,[["__scopeId","data-v-98b09236"]]),Xn=R({__name:"ArticleEditor",props:{article:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=g("");let n=!0;return Z(()=>{var o;s.value=((o=t.article)==null?void 0:o.text)??""}),H(s,()=>{if(n){n=!1;return}i("save-content-data",{text:s.value})},{flush:"post"}),(o,l)=>(u(),C(De,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c)},null,8,["modelValue"]))}}),qn={class:"flex flex-col gap-2"},Yn={class:"flex gap-1 text-gray-500"},Jn={class:"flex flex-col gap-1"},Wn=R({__name:"OptionsEditor",props:{optionsData:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=g(!1),n=g(!1),o=g(!1),l=g([]),c=g([]),r=g();let d=!0;Z(()=>{var $,m,P,f,v,x;s.value=(($=t.optionsData)==null?void 0:$.shuffle)??!1,n.value=((m=t.optionsData)==null?void 0:m.feedback)??!1,o.value=((P=t.optionsData)==null?void 0:P.single)??!1,l.value=((f=t.optionsData)==null?void 0:f.options)??[],c.value=((v=t.optionsData)==null?void 0:v.answer)??[],r.value=t.optionsData&&t.optionsData.answer&&t.optionsData.answer.length>0?(x=t.optionsData)==null?void 0:x.answer[0]:void 0}),H([s,n,o,l,c,r],()=>{if(d){d=!1;return}i("save-content-data",{shuffle:s.value,feedback:n.value,single:o.value,options:l.value,answer:o.value?r.value?[r.value]:[]:c.value,hashed_answer:[]})},{deep:!0});function b(){l.value.push({id:Ve(),text:""})}function _($){l.value=l.value.filter(m=>m.id!==$),c.value=c.value.filter(m=>m!==$),r.value==$&&(r.value=void 0)}return($,m)=>{const P=Tt,f=Ye,v=qe,x=j;return u(),w("div",qn,[h("div",Yn,[m[5]||(m[5]=h("div",null,"shuffle:",-1)),p(P,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=U=>s.value=U),class:"mr-2"},null,8,["modelValue"]),m[6]||(m[6]=h("div",null,"feedback:",-1)),p(P,{modelValue:n.value,"onUpdate:modelValue":m[1]||(m[1]=U=>n.value=U),class:"mr-2"},null,8,["modelValue"]),m[7]||(m[7]=h("div",null,"single:",-1)),p(P,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=U=>o.value=U)},null,8,["modelValue"])]),h("div",Jn,[(u(!0),w(J,null,oe(l.value,U=>(u(),w("div",{key:U.id,class:"flex gap-2 items-center"},[o.value?(u(),C(f,{key:0,modelValue:r.value,"onUpdate:modelValue":m[3]||(m[3]=y=>r.value=y),value:U.id},null,8,["modelValue","value"])):(u(),C(v,{key:1,modelValue:c.value,"onUpdate:modelValue":m[4]||(m[4]=y=>c.value=y),value:U.id},null,8,["modelValue","value"])),p(De,{modelValue:U.text,"onUpdate:modelValue":y=>U.text=y,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),p(x,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:y=>_(U.id)},null,8,["onClick"])]))),128))]),p(x,{icon:"pi pi-plus",label:"Add option",variant:"text",size:"small",onClick:b,class:"self-center"})])}}}),Qn=R({__name:"OpenEditor",props:{open:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=g("");let n=!0;return Z(()=>{var o;s.value=((o=t.open)==null?void 0:o.answer)??""}),H(s,()=>{if(n){n=!1;return}i("save-content-data",{answer:s.value,hashed_answer:""})}),(o,l)=>{const c=be;return u(),C(c,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),Zn=R({__name:"VideoEditor",props:{video:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=g("");let n=!0;return Z(()=>{var o;s.value=((o=t.video)==null?void 0:o.url)??""}),H(s,()=>{if(n){n=!1;return}i("save-content-data",{url:s.value})}),(o,l)=>{const c=be;return u(),C(c,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),eo={class:"flex flex-col gap-2"},to={class:"flex flex-col gap-1"},no={class:"flex flex-row gap-2 items-center"},oo={class:"flex flex-col items-center gap-2"},ao={key:0},so=R({__name:"ChecklistEditor",props:{id:{},checklist:{},data:{}},emits:["save-content-data","update-xp"],setup(e,{emit:a}){const t=Ae(),i=te(),s=e,n=a,o=g([]),l=g([]),c=g(""),r=g(!1);let d=!0;Z(()=>{o.value=s.checklist.options??[],l.value=s.data.checks??[],c.value=s.data.extraPrompt??"",r.value=s.data.aiCheck??!1;for(const f of l.value)o.value.some(v=>v.id===f.id)||o.value.push({id:f.id,text:""});o.value=o.value.filter(f=>l.value.some(v=>v.id===f.id))}),H([l,o,c,r],()=>{if(d){d=!1;return}n("save-content-data",{options:o.value},{checks:l.value,extraPrompt:c.value,aiCheck:r.value})},{deep:!0});function b(){const f=Ve();l.value.push({id:f,solution:"",tests:[],xp:0}),o.value.push({id:f,text:""})}function _(f){o.value=o.value.filter(v=>v.id!==f),l.value=l.value.filter(v=>v.id!==f)}function $(f,v){const x=Number(v);f.xp=Number.isNaN(x)?0:x,m()}function m(){let f=0;for(const v of l.value)f+=Number(v.xp)||0;n("update-xp",f)}function P(f){const v=t.resolve({name:"tester2",params:{lesson_id:i.params.id,unit_id:s.id},query:{check_id:f}}).href;window.open(v,"_blank")}return(f,v)=>{const x=Le,U=be,y=Ie,L=j;return u(),w("div",eo,[h("div",to,[h("div",no,[ne(h("input",{type:"checkbox",id:"checkbox","onUpdate:modelValue":v[0]||(v[0]=I=>r.value=I)},null,512),[[dt,r.value]]),v[2]||(v[2]=h("span",null,"ai checking",-1))]),(u(!0),w(J,null,oe(l.value,I=>(u(),w("div",{key:I.id,class:"flex gap-2 items-center"},[p(De,{modelValue:(o.value.find(S=>S.id===I.id)||{}).text,"onUpdate:modelValue":S=>(o.value.find(T=>T.id===I.id)||{}).text=S,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),h("div",oo,[p(y,null,{default:V(()=>[p(x,null,{default:V(()=>v[3]||(v[3]=[fe(" XP ")])),_:1}),p(U,{style:{width:"6ch","text-align":"center"},maxlength:"2",value:String(I.xp),onInput:S=>$(I,S.target.value)},null,8,["value","onInput"])]),_:2},1024),r.value?F("",!0):(u(),C(L,{key:0,label:`Tests (${I.tests.length})`,icon:"pi pi-pen-to-square",class:"w-fit",severity:"info",onClick:()=>P(I.id)},null,8,["label","onClick"]))]),p(L,{icon:"pi pi-trash",variant:"text",severity:"danger",size:"small",onClick:S=>_(I.id)},null,8,["onClick"])]))),128))]),p(L,{icon:"pi pi-plus",label:"Add todo",variant:"text",size:"small",onClick:b,class:"self-center"}),r.value?(u(),w("div",ao,[v[4]||(v[4]=h("span",null,"Extra prompt",-1)),p(U,{type:"text",modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=I=>c.value=I??""),class:"w-full",size:"small"},null,8,["modelValue"])])):F("",!0)])}}}),lo=R({__name:"TinkercadEditor",props:{tinkercad:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=g("");let n=!0;return Z(()=>{var o;s.value=((o=t.tinkercad)==null?void 0:o.url)??""}),H(s,()=>{if(n){n=!1;return}i("save-content-data",{url:s.value})}),(o,l)=>{const c=be;return u(),C(c,{type:"text",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=r=>s.value=r??""),class:"w-full",size:"small"},null,8,["modelValue"])}}}),io={class:"flex flex-wrap justify-between items-center flex-1 gap-4"},ro={class:"flex gap-2"},co=R({__name:"SubmitImageEditor",setup(e){const a=t=>{t()};return(t,i)=>{const s=j,n=Pt;return u(),C(n,{name:"submit-image",mode:"advanced",multiple:!1,accept:"image/*",maxFileSize:1e6,disabled:!0},{header:V(({chooseCallback:o,uploadCallback:l,clearCallback:c,files:r})=>[h("div",io,[h("div",ro,[p(s,{onClick:d=>o(),icon:"pi pi-images",rounded:"",variant:"outlined",severity:"success",disabled:!0},null,8,["onClick"]),p(s,{onClick:d=>a(l),icon:"pi pi-cloud-upload",rounded:"",variant:"outlined",severity:"success",disabled:!r||r.length===0},null,8,["onClick","disabled"]),p(s,{onClick:d=>c(),icon:"pi pi-times",rounded:"",variant:"outlined",severity:"danger",disabled:!r||r.length===0},null,8,["onClick","disabled"])])])]),empty:V(()=>i[0]||(i[0]=[h("div",{class:"flex items-center justify-center flex-col"},[h("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"}),h("p",{class:"mt-6 mb-0"},"Students will upload file here to submit.")],-1)])),_:1})}}}),uo=R({__name:"UsedModulesEditor",props:{data:{}},emits:["save-content-data"],setup(e,{emit:a}){const t=e,i=a,s=X(),{docs:n,isDocsLoading:o}=G(s),{loadDocs:l}=s,c=g([]);let r=!0;return ue(async()=>{await l();const d=t.data.ids??[];c.value=n.value.filter(b=>d.includes(b.lesson_id))}),H(c,()=>{if(r){r=!1;return}i("save-content-data",{},{ids:c.value.map(d=>d.lesson_id)})},{deep:!0}),(d,b)=>{const _=Ut;return u(),C(_,{modelValue:c.value,"onUpdate:modelValue":b[0]||(b[0]=$=>c.value=$),display:"chip",options:A(n),optionLabel:"lesson_name",filter:"",class:"w-full",showClear:"",placeholder:"Select Modules",loading:A(o)},null,8,["modelValue","options","loading"])}}}),po={class:"flex flex-col gap-4"},vo={class:"flex justify-end gap-2 mt-4"},mo=R({__name:"UnitTranslateSelector",props:{unit:{}},setup(e){const a=X(),{translateUnitContent:t}=a,i=e,s=g(!1),n=g(null),o=g(null),l=g(!1);async function c(){if(!(!o.value||!i.unit.id)){l.value=!0;try{await t(i.unit.id,n.value,o.value)}catch(r){console.error("❌ Translation error:",r)}finally{l.value=!1,s.value=!1}}}return(r,d)=>{const b=j,_=ye,$=Ce;return u(),w("div",null,[p(b,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:d[0]||(d[0]=m=>s.value=!0)}),p($,{visible:s.value,"onUpdate:visible":d[4]||(d[4]=m=>s.value=m),modal:"",header:`Translate unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:V(()=>[h("div",po,[d[5]||(d[5]=h("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(_,{id:"sourceLang",modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=m=>n.value=m),options:A(ce),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),d[6]||(d[6]=h("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(_,{id:"targetLang",modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=m=>o.value=m),options:A(ce),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),h("div",vo,[p(b,{label:"Close",text:"",disabled:l.value,onClick:d[3]||(d[3]=m=>s.value=!1)},null,8,["disabled"]),p(b,{label:"Translate",disabled:!n.value||!o.value||l.value,loading:l.value,onClick:c},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),fo={class:"flex flex-col gap-4"},ho={class:"flex justify-end gap-2 mt-4"},go=R({__name:"UnitCopySelector",props:{unit:{}},setup(e){const a=X(),{copyUnitContent:t}=a,i=e,s=g(!1),n=g(null),o=g(null),l=g(!1);async function c(){if(!(!o.value||!i.unit.id)){l.value=!0;try{await t(i.unit.id,n.value,o.value)}catch(r){console.error("❌ Copy error:",r)}finally{l.value=!1,s.value=!1}}}return(r,d)=>{const b=j,_=ye,$=Ce;return u(),w("div",null,[p(b,{icon:"pi pi-copy",variant:"text",severity:"contrast",onClick:d[0]||(d[0]=m=>s.value=!0)}),p($,{visible:s.value,"onUpdate:visible":d[4]||(d[4]=m=>s.value=m),modal:"",header:`Copy unit content (${i.unit.id}-${i.unit.unitType})`,style:{width:"400px"}},{default:V(()=>[h("div",fo,[d[5]||(d[5]=h("label",{for:"sourceLang",class:"font-semibold"}," From language: ",-1)),p(_,{id:"sourceLang",modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=m=>n.value=m),options:A(ce),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),d[6]||(d[6]=h("label",{for:"targetLang",class:"font-semibold"}," To language: ",-1)),p(_,{id:"targetLang",modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=m=>o.value=m),options:A(ce),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),h("div",ho,[p(b,{label:"Close",text:"",disabled:l.value,onClick:d[3]||(d[3]=m=>s.value=!1)},null,8,["disabled"]),p(b,{label:"Copy",disabled:!n.value||!o.value||l.value,loading:l.value,onClick:c},null,8,["disabled","loading"])])])]),_:1},8,["visible","header"])])}}}),yo={class:"bg-white rounded-lg border border-gray-200"},bo={key:1,class:"flex flex-col h-full w-full"},_o={class:"flex items-center gap-2 px-4 pt-2"},xo={class:"text-sm"},wo={class:"text-sm text-gray-500"},$o={key:0},ko={key:1,class:"flex-grow px-4 py-2"},Ao={class:"flex justify-end"},Co=R({__name:"UnitCard",props:{unit:{},loading:{type:Boolean}},emits:["delete","update"],setup(e,{emit:a}){const t=Se(),{lang:i}=G(t),s=e,n=a,o=te(),l=Ae(),c=X(),{updateUnitByIdandLessonId:r,setLessonSaving:d,loadUnitByIdandLessonId:b}=c,_=g(!1),$=g(!1),m=g(null),P=g(null),f=g(null),v=g(s.unit.xp),x=me(()=>s.unit.unitType!=="checklist");ue(async()=>{_.value=!0;const k=await b(s.unit.id,Number(o.params.id));k&&(P.value=k.content,f.value=k.data),_.value=!1});function U(k,E){d(!0),L(k,E)}function y(k){const E=l.resolve({name:"tester2",params:{lesson_id:k.lesson_id,unit_id:k.unit_id}}).href;window.open(E,"_blank")}const L=wt((k,E)=>{I(k,E)},1e3,{maxWait:5e3});async function I(k,E){const z=await r(s.unit.id,Number(o.params.id),{content:k,data:E});z&&n("update",s.unit,z),d(!1)}const S=()=>{x.value&&($.value=!0,He(()=>{var k;(k=m.value)==null||k.focus()}))};function T(k){const E=k.target;E.value=E.value.replace(/\D/g,""),v.value=Number(E.value)}async function B(k){d(!0);const E=await r(s.unit.id,Number(o.params.id),{xp:k});E&&n("update",s.unit,E),v.value=k,s.unit.xp=k,d(!1)}const D=async()=>{if($.value=!1,v.value==s.unit.xp)return;const k=Number(v.value);await B(k)},K=async()=>{$.value=!1,v.value=s.unit.xp};return(k,E)=>{const z=_t,se=j;return u(),w("div",yo,[k.loading?(u(),C(z,{key:0,class:"flex justify-center items-center w-10 h-full"})):(u(),w("div",bo,[h("div",_o,[h("div",xo,ae(k.unit.id),1),h("div",wo,ae(`${k.unit.unitType}`),1),A(Kn).includes(k.unit.unitType)?(u(),w("div",$o,[$.value?ne((u(),w("input",{key:0,ref_key:"editInputRef",ref:m,"onUpdate:modelValue":E[0]||(E[0]=W=>v.value=W),type:"text",inputmode:"numeric",size:2,onInput:T,onKeydown:[Re(D,["enter"]),Re(K,["esc"])],onBlur:K,class:"text-sm xp-field text-center"},null,544)),[[ct,v.value]]):(u(),w("div",{key:1,onDblclick:E[1]||(E[1]=W=>S()),class:O(["text-sm px-2 pb-0.5",x.value?"border rounded border-transparent hover:border-gray-300 cursor-text":"cursor-not-allowed text-gray-400"])},ae(k.unit.xp)+"xp ",35))])):F("",!0)]),_.value?(u(),C(z,{key:0,class:"flex justify-center items-center w-10 h-full"})):(u(),w("div",ko,[k.unit.unitType=="article"?(u(),C(Xn,{key:0,article:P.value,onSaveContentData:U},null,8,["article"])):k.unit.unitType=="options"?(u(),C(Wn,{key:1,"options-data":P.value,onSaveContentData:U},null,8,["options-data"])):k.unit.unitType=="open"?(u(),C(Qn,{key:2,open:P.value,onSaveContentData:U},null,8,["open"])):k.unit.unitType=="video"?(u(),C(Zn,{key:3,video:P.value,onSaveContentData:U},null,8,["video"])):k.unit.unitType=="tinkercad"?(u(),C(lo,{key:4,tinkercad:P.value,onSaveContentData:U},null,8,["tinkercad"])):k.unit.unitType=="checklist"?(u(),C(so,{key:5,id:`${s.unit.id}`,checklist:P.value,data:f.value,onSaveContentData:U,onUpdateXp:B},null,8,["id","checklist","data"])):s.unit.unitType=="code"?(u(),C(A(Ln),{key:6,id:`code-${s.unit.id}-${A(i)}`,code:P.value,data:f.value,onSaveContentData:U,onShowTester:y},null,8,["id","code","data"])):s.unit.unitType=="pibody"?(u(),C(A(Tn),{key:7,id:`pibody-${s.unit.id}-${A(i)}`,content:P.value,data:f.value,onSaveContentData:U,onShowTester:y},null,8,["id","content","data"])):k.unit.unitType=="submit-image"?(u(),C(co,{key:8})):k.unit.unitType=="blockly"?(u(),C(A(jn),{key:9,id:`blockly-${s.unit.id}-${A(i)}`,content:P.value,data:f.value,onSaveContentData:U},null,8,["id","content","data"])):k.unit.unitType=="used-modules"?(u(),C(uo,{key:10,data:f.value,onSaveContentData:U},null,8,["data"])):F("",!0)])),h("div",Ao,[p(go,{unit:s.unit},null,8,["unit"]),p(mo,{unit:s.unit},null,8,["unit"]),p(se,{icon:"pi pi-trash",size:"small",severity:"danger",variant:"text",onClick:E[2]||(E[2]=ge(W=>n("delete",s.unit),["stop"]))})])]))])}}}),So={class:"group w-full relative"},To={class:"flex"},ke=R({__name:"AddUnitButton",props:{unitId:{},showAddGroup:{type:Boolean},hided:{type:Boolean}},emits:["add-group-divider"],setup(e,{emit:a}){const t=e,i=a,s=te(),n=X(),{loadLessonById:o,createUnit:l}=n,c=g(),r=g(Hn.map(b=>({label:b,command:async()=>{await l({unit_type:b,prev_unit_id:t.unitId??void 0}),await o(Number(s.params.id))}}))),d=b=>{c.value.toggle(b)};return(b,_)=>{const $=Lt,m=j,P=It;return u(),w(J,null,[h("div",So,[_[1]||(_[1]=h("div",{class:"h-3"},null,-1)),h("div",{class:O(["absolute left-1/2 -translate-x-1/2 -top-5 group-hover:block mt-[9px] w-full",b.hided?"hidden":""])},[h("div",To,[p($,{class:"w-7",type:"dashed"}),p($,{class:"flex-grow",type:"dashed"}),p(m,{icon:"pi pi-plus",class:"flex self-end shadow-xl h-7",size:"small",onClick:d}),p($,{class:"flex-grow",type:"dashed"}),b.showAddGroup?(u(),C(m,{key:0,icon:"pi pi-arrow-up-right-and-arrow-down-left-from-center",class:"flex self-end h-7",size:"small",variant:"text",onClick:_[0]||(_[0]=f=>i("add-group-divider"))})):(u(),C($,{key:1,class:"w-7",type:"dashed"}))])],2)]),p(P,{ref_key:"menu",ref:c,model:r.value,popup:!0},null,8,["model"])],64)}}}),Po=R({__name:"RemoveGroupButton",emits:["remove-group-divider"],setup(e,{emit:a}){const t=a;return(i,s)=>{const n=j;return u(),C(n,{icon:"pi pi-arrow-down-left-and-arrow-up-right-to-center",severity:"danger",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:s[0]||(s[0]=ge(o=>t("remove-group-divider"),["stop"]))})}}}),Uo={class:"flex flex-col gap-2"},Io={class:"w-full flex justify-between gap-2 mr-4"},Lo={class:"flex flex-row"},Vo={class:"flex flex-col p-2 rounded-lg bg-slate-50"},Do=R({__name:"UnitsView",props:{pages:{}},setup(e){const a=e,t=te(),i=ut(),s=X(),{isUnitDeleting:n}=G(s),{loadLessonById:o,createUnit:l,deleteUnitByIdandLessonId:c}=s,r=g(null);async function d(y){await l({unit_type:"group-divider",prev_unit_id:y.id}),await o(Number(t.params.id))}async function b(){await l({unit_type:"page-divider"}),await o(Number(t.params.id))}async function _(y){await l({unit_type:"page-divider",prev_unit_id:y}),await c(y,Number(t.params.id)),await o(Number(t.params.id))}async function $(y){await c(y,Number(t.params.id)),await o(Number(t.params.id))}function m(y){r.value=y,i.require({...bt,message:"Are you sure you want to delete this lesson?",accept:async()=>{await c(y.id,Number(t.params.id)),await o(Number(t.params.id))}})}function P(y,L){L>y.id&&(y.id=L)}const f=Number(t.params.id),v=`openedPanels-${f}`,x=g({});Z(async()=>{const y=localStorage.getItem(v);y&&(x.value=JSON.parse(y)),await He(),setTimeout(()=>{const L=localStorage.getItem(`lastOpenedGroup-${f}`);if(L){const I=document.getElementById(`group-${L}`);if(I){I.scrollIntoView({behavior:"smooth"});return}}},1e3)}),H(x,y=>{localStorage.setItem(v,JSON.stringify(y))},{deep:!0});function U(y,L){x.value[L]=y,x.value[L].length>0&&localStorage.setItem(`lastOpenedGroup-${f}`,y[y.length-1])}return(y,L)=>{const I=j,S=Pe,T=Te,B=Ue,D=We;return u(),w("div",Uo,[(u(!0),w(J,null,oe(a.pages,K=>(u(),C(D,{value:x.value[K.id]||[],"onUpdate:value":k=>U(k,K.id),multiple:"",key:K.id,class:"flex flex-col gap-2 bg-white p-4 rounded-lg shadow-lg"},{default:V(()=>[(u(!0),w(J,null,oe(K.groups,(k,E)=>(u(),C(B,{key:k.id,value:k.id,id:`group-${k.id}`},{default:V(()=>[p(S,null,{default:V(()=>[h("div",Io,[h("div",null,"Step: "+ae(E),1),h("div",Lo,[E!=0?(u(),C(I,{key:0,icon:"pi pi-file-plus",class:"flex self-end h-7 w-7",size:"small",variant:"text",onClick:ge(z=>_(k.id),["stop"])},null,8,["onClick"])):F("",!0),k.id!=-1?(u(),C(Po,{key:1,onRemoveGroupDivider:z=>$(k.id)},null,8,["onRemoveGroupDivider"])):F("",!0)])])]),_:2},1024),p(T,{class:"flex flex-col"},{default:V(()=>[h("div",Vo,[(u(!0),w(J,null,oe(k.units,(z,se)=>{var W;return u(),w("div",{key:z.id},[se==0?(u(),C(ke,{key:0,hided:!0,"unit-id":k.id,"show-add-group":!1},null,8,["unit-id"])):F("",!0),p(Co,{unit:z,loading:((W=r.value)==null?void 0:W.id)===z.id&&A(n),onDelete:pe=>m(z),onUpdate:P},null,8,["unit","loading","onDelete"]),p(ke,{hided:!0,"unit-id":z.id,"show-add-group":!0,onAddGroupDivider:pe=>d(z)},null,8,["unit-id","onAddGroupDivider"])])}),128)),k.units.length==0?(u(),C(ke,{key:0,hided:!1,"unit-id":k.id,"show-add-group":!1},null,8,["unit-id"])):F("",!0)])]),_:2},1024)]),_:2},1032,["value","id"]))),128))]),_:2},1032,["value","onUpdate:value"]))),128)),p(I,{id:"newpage",icon:"pi pi-plus",label:"New page",variant:"text",size:"small",class:"flex self-center",onClick:L[0]||(L[0]=K=>b())})])}}}),Bo={class:"w-[24px] h-[24px]"},Eo={key:0,class:"flex items-center"},Fo={key:0,class:"material-icons text-gray-500"},Ro={key:1,class:"material-icons text-gray-500"},No={key:1},zo={class:"material-icons text-gray-500"},Mo=R({__name:"AutoSaveCloud",setup(e){const a=X(),{selectedLesson:t,isLessonSaving:i}=G(a);return(s,n)=>{var l;const o=Vt;return u(),w("div",Bo,[(l=A(t))!=null&&l.editable?(u(),w("div",Eo,[A(i)?ne((u(),w("span",Ro,n[1]||(n[1]=[fe("cloud_sync")]))),[[o,"Saving...",void 0,{bottom:!0}]]):ne((u(),w("span",Fo,n[0]||(n[0]=[fe("cloud_done")]))),[[o,"Saved",void 0,{bottom:!0}]])])):(u(),w("div",No,[ne((u(),w("span",zo,n[2]||(n[2]=[fe("cloud_off")]))),[[o,"Save not allowed",void 0,{bottom:!0}]])]))])}}}),jo={key:0},Ho={key:0},Ko={key:1},Go={key:0},Oo={key:1},Xo={key:2},qo={key:0,class:"flex gap-1"},Yo={key:3},Jo={key:0},Wo={key:4},Qo={key:0,class:"flex gap-1"},Zo={key:5},ea={key:0,class:"flex gap-1"},ta={key:6},na={key:0,class:"flex gap-1"},oa=R({__name:"StageButtons",setup(e){const a=te(),t=pt(),{user:i}=G(t),s=X(),{selectedLesson:n}=G(s),o=g(!1),l=g(!1);async function c(){o.value=!0;try{await ee.sendLessonForReview(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function r(){o.value=!0;try{await ee.cancelLessonReview(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function d(){o.value=!0;try{await ee.startLessonReview(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function b(){o.value=!0;try{await ee.acceptLesson(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function _(){l.value=!0;try{await ee.rejectLesson(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{l.value=!1}}async function $(){o.value=!0;try{await ee.editLesson(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function m(){o.value=!0;try{await ee.publishLesson(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{o.value=!1}}async function P(){l.value=!0;try{await ee.hideLesson(a.params.id.toString()),window.location.reload()}catch(f){console.log(f)}finally{l.value=!1}}return(f,v)=>{var U,y,L,I,S,T,B,D,K,k,E,z,se,W,pe;const x=j;return((U=A(n))==null?void 0:U.stage)=="prepare_for_submission"?(u(),w("div",jo,[((y=A(i))==null?void 0:y.user_type)=="contributor"?(u(),w("div",Ho,[p(x,{label:"Send for review",severity:"info",size:"small",onClick:c,disabled:o.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):((L=A(n))==null?void 0:L.stage)=="waiting_for_review"?(u(),w("div",Ko,[((I=A(i))==null?void 0:I.user_type)=="contributor"?(u(),w("div",Go,[p(x,{label:"Cancel submission",severity:"danger",size:"small",onClick:r,disabled:o.value,loading:o.value},null,8,["disabled","loading"])])):((S=A(i))==null?void 0:S.user_type)=="editor"?(u(),w("div",Oo,[p(x,{label:"Start review",severity:"info",size:"small",onClick:d,disabled:o.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):((T=A(n))==null?void 0:T.stage)=="in_review"?(u(),w("div",Xo,[((B=A(i))==null?void 0:B.user_type)=="editor"?(u(),w("div",qo,[p(x,{label:"Reject",severity:"danger",size:"small",onClick:_,disabled:o.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(x,{label:"Accept",size:"small",onClick:b,disabled:o.value||l.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):((D=A(n))==null?void 0:D.stage)=="rejected"?(u(),w("div",Yo,[((K=A(i))==null?void 0:K.user_type)=="contributor"?(u(),w("div",Jo,[p(x,{label:"Edit submission",severity:"info",size:"small",onClick:$,disabled:o.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):((k=A(n))==null?void 0:k.stage)=="ready_for_publish"?(u(),w("div",Wo,[((E=A(i))==null?void 0:E.user_type)=="editor"?(u(),w("div",Qo,[A(n).createdBy!=Number(A(i).user_id)?(u(),C(x,{key:0,label:"Reject",severity:"danger",size:"small",onClick:_,disabled:o.value||l.value,loading:l.value},null,8,["disabled","loading"])):F("",!0),p(x,{label:"Publish",size:"small",onClick:m,disabled:o.value||l.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):((z=A(n))==null?void 0:z.stage)=="published"?(u(),w("div",Zo,[((se=A(i))==null?void 0:se.user_type)=="editor"?(u(),w("div",ea,[p(x,{label:"Hide",severity:"danger",size:"small",onClick:P,disabled:o.value||l.value,loading:l.value},null,8,["disabled","loading"])])):F("",!0)])):((W=A(n))==null?void 0:W.stage)=="in_modify"?(u(),w("div",ta,[((pe=A(i))==null?void 0:pe.user_type)=="editor"?(u(),w("div",na,[p(x,{label:"Hide",severity:"danger",size:"small",onClick:P,disabled:o.value||l.value,loading:l.value},null,8,["disabled","loading"]),p(x,{label:"Publish",size:"small",onClick:m,disabled:o.value||l.value,loading:o.value},null,8,["disabled","loading"])])):F("",!0)])):F("",!0)}}}),aa={key:0},sa=R({__name:"StageStatus",setup(e){const a=X(),{selectedLesson:t}=G(a);return(i,s)=>{const n=Dt;return A(t)?(u(),w("div",aa,[["prepare_for_submission","waiting_for_review","in_review","in_modify"].includes(A(t).stage)?(u(),C(n,{key:0,label:A(t).stage.replace(/_/g," ").replace(/^./,o=>o.toUpperCase()),icon:"pi pi-clock",pt:{icon:{class:"text-yellow-500"}},class:"h-8 bg-yellow-50 w-fit"},null,8,["label"])):["ready_for_publish","published"].includes(A(t).stage)?(u(),C(n,{key:1,label:A(t).stage.replace(/_/g," ").replace(/^./,o=>o.toUpperCase()),icon:"pi pi-check-circle",pt:{icon:{class:"text-green-500"}},class:"h-8 bg-green-50 w-fit"},null,8,["label"])):["rejected"].includes(A(t).stage)?(u(),C(n,{key:2,label:A(t).stage.replace(/_/g," ").replace(/^./,o=>o.toUpperCase()),icon:"pi pi-times-circle",pt:{icon:{class:"text-red-500"}},class:"h-8 bg-red-50 w-fit"},null,8,["label"])):F("",!0)])):F("",!0)}}}),la={class:"flex flex-col gap-4"},ia={class:"flex justify-end gap-2 mt-4"},ra=R({__name:"LessonTranslateSelector",setup(e){const a=X(),{translateLessonToLang:t}=a,{selectedLesson:i}=G(a),s=g(!1),n=g(null),o=g(!1);async function l(){var c;if(!(!n.value||!((c=i.value)!=null&&c.id))){o.value=!0;try{console.log("▶️ Translating lesson",i.value.id,"→",n.value),await t(i.value.id,n.value),console.log("✅ Translation complete")}catch(r){console.error("❌ Translation error:",r)}finally{o.value=!1,s.value=!1}}}return(c,r)=>{const d=j,b=ye,_=Ce;return u(),w("div",null,[p(d,{icon:"pi pi-language",variant:"text",severity:"contrast",onClick:r[0]||(r[0]=$=>s.value=!0)}),p(_,{visible:s.value,"onUpdate:visible":r[3]||(r[3]=$=>s.value=$),modal:"",header:"Translate lesson",style:{width:"400px"}},{default:V(()=>[h("div",la,[r[4]||(r[4]=h("label",{for:"targetLang",class:"font-semibold"}," Choose language to translate to: ",-1)),p(b,{id:"targetLang",modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=$=>n.value=$),options:A(ce),optionLabel:"label",optionValue:"locale",placeholder:"Choose",class:"w-full"},null,8,["modelValue","options"]),h("div",ia,[p(d,{label:"Cancel",text:"",onClick:r[2]||(r[2]=$=>s.value=!1)}),p(d,{label:"Translate",disabled:!n.value,loading:o.value,onClick:l},null,8,["disabled","loading"])])])]),_:1},8,["visible"])])}}}),da={class:"flex flex-col items-center"},ca={class:"fixed top-0 left-0 right-0 z-50 flex justify-between items-center w-full min-h-12 bg-white border-b border-gray-200 px-8 shadow-md gap-8"},ua={class:"flex items-center gap-4"},pa={class:"flex items-center gap-4"},va={class:"w-full h-full max-w-screen-lg px-4 md:px-28 py-4 mt-12"},ma={class:"fixed top-32 right-0 pl-2 pr-4 py-2 bg-white rounded-tl-lg rounded-bl-lg shadow-md z-[1000] border border-gray-200 flex flex-col items-center gap-4"},os=R({__name:"LessonEditPage",setup(e){const a=te(),t=Ae(),i=Se(),{lang:s}=G(i),n=X(),{selectedLesson:o}=G(n),{loadLessonById:l,getAiSubmissions:c}=n;Z(()=>{l(Number(a.params.id))}),H(s,async(_,$)=>{_!==$&&o.value&&await l(o.value.id)});const r=()=>{let _="#";a.path.endsWith("/edit")&&o.value&&(o.value.lessonType==="project"?_=a.path.replace("/lesson/","/project/").replace(/\/edit$/,""):_=a.path.replace(/\/edit$/,"")),window.open(_,"_blank")};function d(){window.history.length>2?t.go(-1):t.push("/v2/routes")}async function b(){const _=await c(Number(a.params.id)),$=_[0].result.split(",").length,m=Array.from({length:$},(L,I)=>I.toString()),P=[_[0].project_id.toString(),...m],f=_.map(L=>{const I=L.result.split(",").map(S=>S.split(".")[1]);return[L.user_code,...I]}),v=[P,...f],x=xe.aoa_to_sheet(v),U=xe.book_new();xe.book_append_sheet(U,x,"AI Submissions");const y=`AI_Submissions_Project_${_[0].project_id}_${new Date().toISOString().split("T")[0]}.xlsx`;vt(U,y)}return(_,$)=>{var P,f;const m=j;return u(),w("div",da,[h("div",ca,[h("div",ua,[p(m,{icon:"pi pi-times",variant:"text",severity:"contrast",onClick:d}),p(sa)]),h("div",pa,[p(oa)])]),h("div",va,[(u(),C(Do,{key:A(s),pages:(P=A(o))==null?void 0:P.pages},null,8,["pages"]))]),h("div",ma,[p(Mo),p(A(mt)),p(m,{icon:"pi pi-eye",variant:"text",severity:"contrast",title:"View lesson",onClick:r}),p(ra,{title:"AI Translate"}),((f=A(o))==null?void 0:f.lessonType)=="project"?(u(),C(m,{key:0,icon:"pi pi-upload",variant:"text",severity:"contrast",title:"Export AI submissions",onClick:b})):F("",!0)])])}}});export{os as default};
