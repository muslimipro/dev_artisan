import{z,a as v,s as R}from"./index-DkOlpifc.js";import{s as C}from"./index-BBoKg6kX.js";import{s as N}from"./index-BSYBl58h.js";import{s as T}from"./index-Dknz9p_q.js";import{d as j,m as P,u as q,r as m,n as E,o as c,c as L,b as a,e as t,j as x,w as r,t as _,f as y,g,h as b,F as M,k as A,s as D}from"./index-D-EZhA5_.js";import{_ as U}from"./AuthHeader.vue_vue_type_script_setup_true_lang-Dnbp8k7t.js";import{a as W}from"./index-Dtx9JcMJ.js";import"./logo-BAnqdCyc.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-aUOpbhzU.js";import"./index-Bayqa3ID.js";const G={class:"card flex flex-col items-center pt-4"},H={class:"flex flex-col gap-1"},J={for:"email"},le=j({__name:"ForgotPassword",setup(K){const{locale:w}=P(),u=q(),k=A(),o=m(!1),s=m(0);let i;const h=()=>{s.value=60,i=setInterval(()=>{s.value>0?s.value--:clearInterval(i)},1e3)},F=m({email:""}),I=z(v.object({email:v.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."})})),V=async l=>{if(!o.value&&l.valid){o.value=!0;try{const{data:e}=await W.requestPasswordReset(l.states.email.value,w.value);console.log(e),u.add({severity:"success",summary:"Success",life:3e3}),h()}catch(e){u.add({severity:"error",summary:e.toString(),life:3e3})}finally{o.value=!1}}};return E(()=>{clearInterval(i)}),(l,e)=>{const d=D,$=T,B=N,p=C,S=R;return c(),L(M,null,[a(U),t("div",G,[a(d,{label:"Back to Login",variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:e[0]||(e[0]=n=>x(k).replace({name:"login"}))}),a(S,{initialValues:F.value,resolver:x(I),onSubmit:V,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:r(n=>{var f;return[e[2]||(e[2]=t("div",{class:"flex flex-col flex-1 items-center justify-center my-4"},[t("p",{class:"text-4xl font-semibold px-2 mr-4"},"Forget password"),t("p",{class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},"Provide your account's email for which you want to reset your password!")],-1)),t("div",H,[a(B,{variant:"on"},{default:r(()=>[a($,{id:"email",name:"email",type:"text",fluid:""}),t("label",J,_(l.$t("email")),1)]),_:1}),(f=n.email)!=null&&f.invalid?(c(),y(p,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[g(_(n.email.error.message),1)]),_:2},1024)):b("",!0)]),s.value>0?(c(),y(p,{key:0,severity:"success"},{default:r(()=>e[1]||(e[1]=[g("We have sent you a link to reset your password via email. If you do not receive the email, check spam.")])),_:1})):b("",!0),a(d,{type:"submit",label:s.value>0?`Resend in ${s.value}s`:"Send",loading:o.value,disabled:o.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{le as default};
