import{h as N,z as f,s as j}from"./index-DkBeW8WF.js";import{s as H}from"./index-BbHqUexW.js";import{s as R}from"./index-Cw_c_zNU.js";import{s as S}from"./index-D-areDIF.js";import{e as q,f as A,u as O,r as k,o,c as n,k as a,a as e,h as $,w as c,t as m,i as P,F as u,q as V,j as z,K as T,n as D,l as E}from"./index-BXslawiU.js";import{O as I}from"./otherApi-mbQmFMOk.js";import{_ as K}from"./AuthHeader.vue_vue_type_script_setup_true_lang-B__47yXd.js";import"./index-C3n_x_8f.js";import"./index-D-Li2oDx.js";import"./index-CG2VAMzt.js";import"./index-D5RqcZfo.js";import"./logo-D1-3uCnC.js";const U={class:"card flex flex-col items-center pt-4"},Z={class:"flex flex-1 items-center justify-center my-4"},G={class:"text-4xl font-semibold px-2 mr-4"},J={class:"flex flex-col gap-1"},Q={for:"password"},W={class:"my-0 flex flex-col gap-1"},X={class:"flex flex-col gap-1"},Y={for:"confirm_password"},ss={class:"my-0 flex flex-col gap-1"},us=q({__name:"ResetPassword",setup(es){const{t}=A(),g=O(),B=T(),_=D(),l=k(!1),F=k({password:""}),M=N(f.object({password:f.string().min(8,{message:t("pages.login.min8chars")}).max(100,{message:t("pages.login.max100chars")}).refine(s=>/[a-z]/.test(s),{message:t("pages.login.mustHaveLowercase")}).refine(s=>/[A-Z]/.test(s),{message:t("pages.login.mustHaveUppercase")}).refine(s=>/[0-9]/.test(s),{message:t("pages.login.mustHaveNumber")}),confirm_password:f.string()}).refine(s=>s.password===s.confirm_password,{message:t("pages.login.passMustMatch"),path:["confirm_password"]})),C=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:r}=await I.resetPassword(B.query.token,s.states.password.value);_.replace({name:"login"}),g.add({severity:"success",summary:r.message,life:3e3})}catch(r){g.add({severity:"error",summary:r.response.data.error,life:3e3})}finally{l.value=!1}}};return(s,r)=>{const w=E,v=S,y=R,x=H,L=j;return o(),n(u,null,[a(K),e("div",U,[a(w,{label:s.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:r[0]||(r[0]=i=>$(_).replace({name:"login"}))},null,8,["label"]),a(L,{initialValues:F.value,resolver:$(M),onSubmit:C,class:"flex flex-col gap-4 w-full sm:w-80 sm:px-0 px-8"},{default:c(i=>{var b,h;return[e("div",Z,[e("p",G,m(s.$t("pages.login.newPassword")),1)]),e("div",J,[a(y,{variant:"on"},{default:c(()=>[a(v,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),e("label",Q,m(s.$t("pages.login.newPassword")),1)]),_:1}),(b=i.password)!=null&&b.invalid?(o(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[e("ul",W,[(o(!0),n(u,null,V(i.password.errors,(p,d)=>(o(),n("li",{key:d},m(p.message),1))),128))])]),_:2},1024)):z("",!0)]),e("div",X,[a(y,{variant:"on"},{default:c(()=>[a(v,{id:"confirm_password",name:"confirm_password",feedback:!1,toggleMask:"",fluid:""}),e("label",Y,m(s.$t("pages.login.confirmPassword")),1)]),_:1}),(h=i.confirm_password)!=null&&h.invalid?(o(),P(x,{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[e("ul",ss,[(o(!0),n(u,null,V(i.confirm_password.errors,(p,d)=>(o(),n("li",{key:d},m(p.message),1))),128))])]),_:2},1024)):z("",!0)]),a(w,{type:"submit",label:s.$t("pages.login.save"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{us as default};
