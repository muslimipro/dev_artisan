import{s as D}from"./index-B45JFP4L.js";import{d as B,u as C,r as h,e as y,o,c as r,a as e,H as L,i as x,I,j as g,t as c,y as S,k as _,h as m,F as w,n as V,l as j,s as N,b as P,C as T,f as q,B as F,q as M}from"./index-BXslawiU.js";import{_ as R}from"./MainHeader.vue_vue_type_script_setup_true_lang-Dz4LHxHn.js";import"./index-DkBeW8WF.js";import{L as k}from"./lessonApi-B6FvAxav.js";import{T as z}from"./index-De9rL6wl.js";import{s as A}from"./index-CeAgpK5A.js";import{s as E}from"./index-D5RqcZfo.js";import{_ as H}from"./UserMenu.vue_vue_type_script_setup_true_lang-DWoBqxEk.js";import"./index-C6ro9I84.js";import"./index-UVfE29m3.js";import"./index-C3n_x_8f.js";import"./logo-D1-3uCnC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-Bm8m_4kh.js";import"./index-BbHqUexW.js";import"./index-D-Li2oDx.js";import"./otherApi-mbQmFMOk.js";import"./index-peSoFaWK.js";import"./index-CG2VAMzt.js";import"./index-BB79oU2T.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-DKeSLIQg.js";import"./index-CSI4_wiQ.js";import"./language-DYQF8nnT.js";const O=B("docs-store",()=>{const d=C(),s=h([]),a=h(!1);async function n(){try{a.value=!0;const{data:l}=await k.getDocs();s.value=l}catch(l){d.add({severity:"error",summary:l.response.data.error,life:2e3})}finally{a.value=!1}}return{docs:s,isLoading:a,loadDocs:n}}),U={class:"absolute top-0 left-0"},G={class:"flex gap-2 w-full h-full items-end"},J={class:"flex-grow flex flex-col gap-[2px]"},K={class:"flex items-center gap-2"},Q={key:0,class:"text-purple h-[22px] w-4"},W={class:"text-body-large-semibold"},X={class:"pt-[10px] flex flex-col gap-1"},Y={key:0},Z={key:1},ss={key:2},es=y({__name:"ModuleCard",props:{doc:{}},setup(d){const s=d,a=V(),n=h(!1),l=()=>{if(s.doc.access_status!=="available"){s.doc.access_status=="premium_restriction"&&(n.value=!0);return}a.push({name:s.doc.student_progress==100?"lesson-revise":"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})};async function f(){if(s.doc.access_status!=="available"){s.doc.access_status=="premium_restriction"&&(n.value=!0);return}await k.resetLessonById(s.doc.lesson_id),a.push({name:"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})}return(t,i)=>{const u=j,v=E,p=A,$=z;return o(),r(w,null,[e("div",{class:"relative flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer bg-neutral50",onClick:l},[e("div",U,[t.doc.student_progress>0?L((o(),x(u,{key:0,icon:"pi pi-refresh",variant:"link",onClick:I(f,["stop","prevent"]),class:"text-warning400"},null,512)),[[$,t.$t("startOver"),void 0,{top:!0}]]):g("",!0)]),e("div",G,[e("div",J,[e("div",K,[s.doc.access_status==="premium_restriction"?(o(),r("div",Q,i[1]||(i[1]=[e("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):g("",!0),e("div",W,c(s.doc.lesson_name),1)])]),t.doc.source_image_url?(o(),x(v,{key:0,src:s.doc.source_image_url,alt:"Image",class:"w-[120px] h-[120px]"},null,8,["src"])):g("",!0)]),e("div",X,[e("div",{class:S(["action-small-bold","text-warning400"])},[t.doc.student_progress==100||t.doc.completed?(o(),r("span",Y,c(t.$t("done")),1)):t.doc.student_progress==0?(o(),r("span",Z,c(t.$t("start")),1)):(o(),r("span",ss,c(t.$t("inProgress")),1))]),_(p,{value:t.doc.student_progress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-warning400)"},background:"var(--color-warning50)"}},null,8,["value"])])]),_(m(H),{"model-value":n.value,"onUpdate:modelValue":i[0]||(i[0]=b=>n.value=b)},null,8,["model-value"])],64)}}}),os={class:"flex flex-col items-center"},ts={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},rs={class:"text-heading-2-bold text-neutral900"},as={class:"w-full max-w-[1280px] px-8 pb-10"},is={key:1,class:"flex justify-center"},ns={key:2,class:"flex flex-col gap-8"},ls={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},Ns=y({__name:"DocsPage",setup(d){const s=O(),{docs:a,isLoading:n}=N(s),{loadDocs:l}=s,f=P(()=>{var i;return(i=a.value)==null?void 0:i.filter(u=>u.stage==="published")});T(()=>l());const{locale:t}=q();return F(t,async()=>{await l()}),(i,u)=>{const v=D;return o(),r("div",os,[_(m(R)),e("div",ts,[e("div",rs,c(i.$t("modules")),1)]),e("div",as,[m(n)?(o(),x(v,{key:0,class:"flex justify-center"})):m(a)?(o(),r("div",ns,[e("div",ls,[(o(!0),r(w,null,M(f.value,p=>(o(),r("div",{key:p.lesson_id},[_(es,{doc:p},null,8,["doc"])]))),128))])])):(o(),r("div",is,"No docs yet"))])])}}});export{Ns as default};
