import{s as B}from"./index-Dj2HcMJw.js";import{d as C,r as u,m as E,o as t,c,b as V,e as v,f as a,w as l,g as i,h as f,j as w,F as N,n as S,k as $,a as b,s as G}from"./index-CD-RZOao.js";import{s as T}from"./index-DBBDKR6P.js";import{_ as F}from"./AuthHeader.vue_vue_type_script_setup_true_lang-P5xN10hT.js";import{a as y}from"./index-DBceM-0I.js";import"./logo-DmpzTU2D.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-g5WItcu9.js";import"./index-7N8pAeDB.js";import"./index-Ljzkmy5v.js";const H={class:"card flex flex-col items-center pt-4 gap-4"},M={key:0},P={key:1},K=C({__name:"VerifyEmail",setup(R){const g=S(),m=$(),o=u(!1),r=u(!1),n=u(null);async function k(){o.value=!0;try{const{data:s}=await y.verifyEmail(g.query.token);n.value=!0,console.log(s.message)}catch(s){n.value=!1,console.log(s),o.value=!1}finally{o.value=!1}}async function _(){r.value=!0;try{const s=b(),{data:e}=await y.refresh();s.setToken(e),s.setUser(e),m.replace("/")}catch(s){console.log(s)}finally{r.value=!1}}return E(()=>{k()}),(s,e)=>{const d=T,p=G,x=B;return t(),c(N,null,[V(F),v("div",H,[e[5]||(e[5]=v("div",{class:"text-2xl"},"Email verfication",-1)),o.value?f("",!0):(t(),c("div",M,[n.value==!0?(t(),a(d,{key:0,severity:"success"},{default:l(()=>e[1]||(e[1]=[i("Email successfully verified")])),_:1})):(t(),a(d,{key:1,severity:"error"},{default:l(()=>e[2]||(e[2]=[i("Token is invalid. Please try again!")])),_:1}))])),o.value?f("",!0):(t(),c("div",P,[n.value==!0?(t(),a(p,{key:0,onClick:_,loading:r.value,disabled:r.value},{default:l(()=>e[3]||(e[3]=[i(" Go to Home ")])),_:1},8,["loading","disabled"])):(t(),a(p,{key:1,onClick:e[0]||(e[0]=j=>w(m).replace("/settings/change-email"))},{default:l(()=>e[4]||(e[4]=[i("Go to Settings")])),_:1}))])),o.value?(t(),a(x,{key:2})):f("",!0)])],64)}}});export{K as default};
