import{h as j,z as f,s as A}from"./index-zUgF_fUw.js";import{e as N,f as T,u as q,J as L,r as w,o,c,k as e,a as t,w as r,t as n,h as p,i as y,G as P,j as R,F as k,q as M,n as D,b3 as E,l as G}from"./index-RQaPKU3q.js";import{s as H}from"./index-C2CcSqwg.js";import{s as J}from"./index-CmgTJnJ7.js";import{s as U}from"./index-CgidCdRP.js";import{s as K}from"./index-DoQeMzHI.js";import{_ as O}from"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D5A7GxOk.js";import{_ as Q}from"./AuthHeader.vue_vue_type_script_setup_true_lang-BRj_8NYb.js";import"./index-5bJt7VTk.js";import"./index-DZ_1xp5G.js";import"./index-csPL02fk.js";import"./language-DYQF8nnT.js";import"./index-i87uic1r.js";import"./logo-D1-3uCnC.js";const W={class:"card flex flex-col items-center pt-4"},X={class:"flex flex-1 items-center justify-center mt-4"},Y={class:"text-4xl font-semibold px-2"},Z={class:"flex flex-col gap-1"},ss={for:"email"},es={class:"flex flex-col gap-1"},as={for:"password"},ts={class:"flex justify-between"},os={class:"my-0 flex flex-col gap-1"},ls={key:1},ws=N({__name:"LoginPage",setup(is){const{t:m}=T(),$=q(),d=D(),_=L(),l=w(!1),V=w({email:"",password:""}),I=j(f.object({email:f.string().min(1,{message:m("pages.login.emailIsRequired")}).max(100,{message:m("pages.login.max100chars")}),password:f.string().min(1,{message:m("pages.login.passIsRequired")}).max(100,{message:m("pages.login.max100chars")})})),z=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:a}=await E.login(s.states.email.value,s.states.password.value);_.setToken(a),_.setUser(a),d.push({name:"home2"})}catch(a){$.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return(s,a)=>{const B=K,g=U,v=J,C=H,u=G,F=A;return o(),c(k,null,[e(Q),t("div",W,[e(F,{initialValues:V.value,resolver:p(I),onSubmit:z,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:r(i=>{var x,b;return[t("div",X,[t("p",Y,n(s.$t("logIn")),1)]),e(p(O),{class:"self-center"}),t("div",Z,[e(g,{variant:"on"},{default:r(()=>[e(B,{id:"email",name:"email",type:"text",fluid:""}),t("label",ss,n(s.$t("email")),1)]),_:1}),(x=i.email)!=null&&x.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[P(n(i.email.error.message),1)]),_:2},1024)):R("",!0)]),t("div",es,[e(g,{variant:"on"},{default:r(()=>[e(C,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",as,n(s.$t("password")),1)]),_:1}),t("div",ts,[(b=i.password)!=null&&b.invalid?(o(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:r(()=>[t("ul",os,[(o(!0),c(k,null,M(i.password.errors,(h,S)=>(o(),c("li",{key:S},n(h.message),1))),128))])]),_:2},1024)):(o(),c("div",ls)),e(u,{label:s.$t("pages.login.forgotPassword"),variant:"link",size:"small",class:"p-0",onClick:a[0]||(a[0]=h=>p(d).push({name:"forgot-password"}))},null,8,["label"])])]),e(u,{type:"submit",label:s.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),e(u,{variant:"link",label:s.$t("dontHaveAnAccount"),onClick:a[1]||(a[1]=i=>p(d).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{ws as default};
