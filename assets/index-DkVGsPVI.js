var $e=Object.defineProperty;var Ve=(n,t,e)=>t in n?$e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ke=(n,t,e)=>Ve(n,typeof t!="symbol"?t+"":t,e);import{V as Re,aw as Ue,ax as ze,ay as Me,W as Ae,ab as pe,aa as xe,az as we,aA as We,ad as He,ag as j,ae as qe,o as f,c as k,a as g,H as ie,X as K,F as z,i as N,y as F,Q as $,w as D,j as M,I as Q,G as Je,t as Z,q as Oe,m as X,k as C,e as be,h as _,n as _e,l as ve,r as I,B as W,C as Ge,ak as Qe,x as Ce,aB as Xe,A as Ze,R as Ee,g as Ye,s as Se,a5 as et,a9 as Ke,K as tt,aC as nt}from"./index-RQaPKU3q.js";import{s as ot}from"./index-csPL02fk.js";import"./index-zUgF_fUw.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as lt,b as it,c as rt}from"./UserMenu.vue_vue_type_script_setup_true_lang-3l-gndQ6.js";import{a as at,u as st}from"./store-qJ2iV4r-.js";import{S as ct}from"./SimulationView-BfUuedT5.js";import"./IdeButtons.vue_vue_type_script_setup_true_lang-BoC8OHM6.js";import"./CodeEditorView.vue_vue_type_script_setup_true_lang-C1HaOUBK.js";import{_ as dt}from"./CodeViewer.vue_vue_type_script_setup_true_lang-odlhIG4g.js";import{u as ut}from"./CodeViewModal.vue_vue_type_style_index_0_scoped_818a8834_lang-DdBmjDfA.js";import{B as ft}from"./BlocklyViewer-k55kP__6.js";import{a as ht,s as pt}from"./index-BctX0Pow.js";import{s as yt,a as gt}from"./index-CBvRvFRr.js";import{s as mt}from"./index-DoQeMzHI.js";import{s as bt}from"./index-vGkf9gTg.js";import{s as vt}from"./index-CY8HVpGr.js";import{s as kt}from"./index-6V6lXQ4K.js";import"./index-i87uic1r.js";import"./index-5bJt7VTk.js";import"./logo-D1-3uCnC.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-DOQWPUhj.js";import"./index-CmgTJnJ7.js";import"./index-BQlFFWCz.js";import"./index-DZ_1xp5G.js";import"./index-DYe12pIs.js";import"./index-ZflZKAdM.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D5A7GxOk.js";import"./language-DYQF8nnT.js";import"./index-CH_iu5NA.js";import"./index-DnxWnOWO.js";import"./index-BQKo0YUX.js";import"./index-3r_oBTLo.js";var xt=function(t){var e=t.dt;return`
.p-tree {
    background: `.concat(e("tree.background"),`;
    color: `).concat(e("tree.color"),`;
    padding: `).concat(e("tree.padding"),`;
}

.p-tree-root-children,
.p-tree-node-children {
    display: flex;
    list-style-type: none;
    flex-direction: column;
    margin: 0;
    gap: `).concat(e("tree.gap"),`;
}

.p-tree-root-children {
    padding: 0;
    padding-block-start: `).concat(e("tree.gap"),`;
}

.p-tree-node-children {
    padding: 0;
    padding-block-start: `).concat(e("tree.gap"),`;
    padding-inline-start: `).concat(e("tree.indent"),`;
}

.p-tree-node {
    padding: 0;
    outline: 0 none;
}

.p-tree-node-content {
    border-radius: `).concat(e("tree.node.border.radius"),`;
    padding: `).concat(e("tree.node.padding"),`;
    display: flex;
    align-items: center;
    outline-color: transparent;
    color: `).concat(e("tree.node.color"),`;
    gap: `).concat(e("tree.node.gap"),`;
    transition: background `).concat(e("tree.transition.duration"),", color ").concat(e("tree.transition.duration"),", outline-color ").concat(e("tree.transition.duration"),", box-shadow ").concat(e("tree.transition.duration"),`;
}

.p-tree-node:focus-visible > .p-tree-node-content {
    box-shadow: `).concat(e("tree.node.focus.ring.shadow"),`;
    outline: `).concat(e("tree.node.focus.ring.width")," ").concat(e("tree.node.focus.ring.style")," ").concat(e("tree.node.focus.ring.color"),`;
    outline-offset: `).concat(e("tree.node.focus.ring.offset"),`;
}

.p-tree-node-content.p-tree-node-selectable:not(.p-tree-node-selected):hover {
    background: `).concat(e("tree.node.hover.background"),`;
    color: `).concat(e("tree.node.hover.color"),`;
}

.p-tree-node-content.p-tree-node-selectable:not(.p-tree-node-selected):hover .p-tree-node-icon {
    color: `).concat(e("tree.node.icon.hover.color"),`;
}

.p-tree-node-content.p-tree-node-selected {
    background: `).concat(e("tree.node.selected.background"),`;
    color: `).concat(e("tree.node.selected.color"),`;
}

.p-tree-node-content.p-tree-node-selected .p-tree-node-toggle-button {
    color: inherit;
}

.p-tree-node-toggle-button {
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    flex-shrink: 0;
    width: `).concat(e("tree.node.toggle.button.size"),`;
    height: `).concat(e("tree.node.toggle.button.size"),`;
    color: `).concat(e("tree.node.toggle.button.color"),`;
    border: 0 none;
    background: transparent;
    border-radius: `).concat(e("tree.node.toggle.button.border.radius"),`;
    transition: background `).concat(e("tree.transition.duration"),", color ").concat(e("tree.transition.duration"),", border-color ").concat(e("tree.transition.duration"),", outline-color ").concat(e("tree.transition.duration"),", box-shadow ").concat(e("tree.transition.duration"),`;
    outline-color: transparent;
    padding: 0;
}

.p-tree-node-toggle-button:enabled:hover {
    background: `).concat(e("tree.node.toggle.button.hover.background"),`;
    color: `).concat(e("tree.node.toggle.button.hover.color"),`;
}

.p-tree-node-content.p-tree-node-selected .p-tree-node-toggle-button:hover {
    background: `).concat(e("tree.node.toggle.button.selected.hover.background"),`;
    color: `).concat(e("tree.node.toggle.button.selected.hover.color"),`;
}

.p-tree-root {
    overflow: auto;
}

.p-tree-node-selectable {
    cursor: pointer;
    user-select: none;
}

.p-tree-node-leaf > .p-tree-node-content .p-tree-node-toggle-button {
    visibility: hidden;
}

.p-tree-node-icon {
    color: `).concat(e("tree.node.icon.color"),`;
    transition: color `).concat(e("tree.transition.duration"),`;
}

.p-tree-node-content.p-tree-node-selected .p-tree-node-icon {
    color: `).concat(e("tree.node.icon.selected.color"),`;
}

.p-tree-filter {
    margin: `).concat(e("tree.filter.margin"),`;
}

.p-tree-filter-input {
    width: 100%;
}

.p-tree-loading {
    position: relative;
    height: 100%;
}

.p-tree-loading-icon {
    font-size: `).concat(e("tree.loading.icon.size"),`;
    width: `).concat(e("tree.loading.icon.size"),`;
    height: `).concat(e("tree.loading.icon.size"),`;
}

.p-tree .p-tree-mask {
    position: absolute;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-tree-flex-scrollable {
    display: flex;
    flex: 1;
    height: 100%;
    flex-direction: column;
}

.p-tree-flex-scrollable .p-tree-root {
    flex: 1;
}
`)},wt={root:function(t){var e=t.props;return["p-tree p-component",{"p-tree-selectable":e.selectionMode!=null,"p-tree-loading":e.loading,"p-tree-flex-scrollable":e.scrollHeight==="flex"}]},mask:"p-tree-mask p-overlay-mask",loadingIcon:"p-tree-loading-icon",pcFilter:"p-tree-filter",pcFilterInput:"p-tree-filter-input",wrapper:"p-tree-root",rootChildren:"p-tree-root-children",node:function(t){var e=t.instance;return["p-tree-node",{"p-tree-node-leaf":e.leaf}]},nodeContent:function(t){var e=t.instance;return["p-tree-node-content",e.node.styleClass,{"p-tree-node-selectable":e.selectable,"p-tree-node-selected":e.checkboxMode&&e.$parentInstance.highlightOnSelect?e.checked:e.selected}]},nodeToggleButton:"p-tree-node-toggle-button",nodeToggleIcon:"p-tree-node-toggle-icon",nodeCheckbox:"p-tree-node-checkbox",nodeIcon:"p-tree-node-icon",nodeLabel:"p-tree-node-label",nodeChildren:"p-tree-node-children"},Ct=Re.extend({name:"tree",theme:xt,classes:wt}),St={name:"BaseTree",extends:Ae,props:{value:{type:null,default:null},expandedKeys:{type:null,default:null},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},metaKeySelection:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},loadingMode:{type:String,default:"mask"},filter:{type:Boolean,default:!1},filterBy:{type:[String,Function],default:"label"},filterMode:{type:String,default:"lenient"},filterPlaceholder:{type:String,default:null},filterLocale:{type:String,default:void 0},highlightOnSelect:{type:Boolean,default:!1},scrollHeight:{type:String,default:null},level:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Ct,provide:function(){return{$pcTree:this,$parentInstance:this}}};function Y(n){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(n)}function Te(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=De(n))||t){e&&(n=e);var o=0,i=function(){};return{s:i,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,c=!0,u=!1;return{s:function(){e=e.call(n)},n:function(){var p=e.next();return c=p.done,p},e:function(p){u=!0,l=p},f:function(){try{c||e.return==null||e.return()}finally{if(u)throw l}}}}function Ie(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,o)}return e}function Ne(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ie(Object(e),!0).forEach(function(o){Kt(n,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ie(Object(e)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}return n}function Kt(n,t,e){return(t=Tt(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Tt(n){var t=It(n,"string");return Y(t)=="symbol"?t:t+""}function It(n,t){if(Y(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var o=e.call(n,t||"default");if(Y(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function J(n){return Mt(n)||Ft(n)||De(n)||Nt()}function Nt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function De(n,t){if(n){if(typeof n=="string")return ge(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ge(n,t):void 0}}function Ft(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mt(n){if(Array.isArray(n))return ge(n)}function ge(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,o=Array(t);e<t;e++)o[e]=n[e];return o}var Le={name:"TreeNode",hostName:"Tree",extends:Ae,emits:["node-toggle","node-click","checkbox-change"],props:{node:{type:null,default:null},expandedKeys:{type:null,default:null},loadingMode:{type:String,default:"mask"},selectionKeys:{type:null,default:null},selectionMode:{type:String,default:null},templates:{type:null,default:null},level:{type:Number,default:null},index:null},nodeTouched:!1,toggleClicked:!1,mounted:function(){this.setAllNodesTabIndexes()},methods:{toggle:function(){this.$emit("node-toggle",this.node),this.toggleClicked=!0},label:function(t){return typeof t.label=="function"?t.label():t.label},onChildNodeToggle:function(t){this.$emit("node-toggle",t)},getPTOptions:function(t){return this.ptm(t,{context:{node:this.node,index:this.index,expanded:this.expanded,selected:this.selected,checked:this.checked,partialChecked:this.partialChecked,leaf:this.leaf}})},onClick:function(t){if(this.toggleClicked||pe(t.target,'[data-pc-section="nodetogglebutton"]')||pe(t.target.parentElement,'[data-pc-section="nodetogglebutton"]')){this.toggleClicked=!1;return}this.isCheckboxSelectionMode()?this.node.selectable!=!1&&this.toggleCheckbox():this.$emit("node-click",{originalEvent:t,nodeTouched:this.nodeTouched,node:this.node}),this.nodeTouched=!1},onChildNodeClick:function(t){this.$emit("node-click",t)},onTouchEnd:function(){this.nodeTouched=!0},onKeyDown:function(t){if(this.isSameNode(t))switch(t.code){case"Tab":this.onTabKey(t);break;case"ArrowDown":this.onArrowDown(t);break;case"ArrowUp":this.onArrowUp(t);break;case"ArrowRight":this.onArrowRight(t);break;case"ArrowLeft":this.onArrowLeft(t);break;case"Enter":case"NumpadEnter":case"Space":this.onEnterKey(t);break}},onArrowDown:function(t){var e=t.target.getAttribute("data-pc-section")==="nodetogglebutton"?t.target.closest('[role="treeitem"]'):t.target,o=e.children[1];if(o)this.focusRowChange(e,o.children[0]);else if(e.nextElementSibling)this.focusRowChange(e,e.nextElementSibling);else{var i=this.findNextSiblingOfAncestor(e);i&&this.focusRowChange(e,i)}t.preventDefault()},onArrowUp:function(t){var e=t.target;if(e.previousElementSibling)this.focusRowChange(e,e.previousElementSibling,this.findLastVisibleDescendant(e.previousElementSibling));else{var o=this.getParentNodeElement(e);o&&this.focusRowChange(e,o)}t.preventDefault()},onArrowRight:function(t){var e=this;this.leaf||this.expanded||(t.currentTarget.tabIndex=-1,this.$emit("node-toggle",this.node),this.$nextTick(function(){e.onArrowDown(t)}))},onArrowLeft:function(t){var e=xe(t.currentTarget,'[data-pc-section="nodetogglebutton"]');if(this.level===0&&!this.expanded)return!1;if(this.expanded&&!this.leaf)return e.click(),!1;var o=this.findBeforeClickableNode(t.currentTarget);o&&this.focusRowChange(t.currentTarget,o)},onEnterKey:function(t){this.setTabIndexForSelectionMode(t,this.nodeTouched),this.onClick(t),t.preventDefault()},onTabKey:function(){this.setAllNodesTabIndexes()},setAllNodesTabIndexes:function(){var t=we(this.$refs.currentNode.closest('[data-pc-section="rootchildren"]'),'[role="treeitem"]'),e=J(t).some(function(i){return i.getAttribute("aria-selected")==="true"||i.getAttribute("aria-checked")==="true"});if(J(t).forEach(function(i){i.tabIndex=-1}),e){var o=J(t).filter(function(i){return i.getAttribute("aria-selected")==="true"||i.getAttribute("aria-checked")==="true"});o[0].tabIndex=0;return}J(t)[0].tabIndex=0},setTabIndexForSelectionMode:function(t,e){if(this.selectionMode!==null){var o=J(we(this.$refs.currentNode.parentElement,'[role="treeitem"]'));t.currentTarget.tabIndex=e===!1?-1:0,o.every(function(i){return i.tabIndex===-1})&&(o[0].tabIndex=0)}},focusRowChange:function(t,e,o){t.tabIndex="-1",e.tabIndex="0",this.focusNode(o||e)},findBeforeClickableNode:function(t){var e=t.closest("ul").closest("li");if(e){var o=xe(e,"button");return o&&o.style.visibility!=="hidden"?e:this.findBeforeClickableNode(t.previousElementSibling)}return null},toggleCheckbox:function(){var t=this.selectionKeys?Ne({},this.selectionKeys):{},e=!this.checked;this.propagateDown(this.node,e,t),this.$emit("checkbox-change",{node:this.node,check:e,selectionKeys:t})},propagateDown:function(t,e,o){if(e&&t.selectable!=!1?o[t.key]={checked:!0,partialChecked:!1}:delete o[t.key],t.children&&t.children.length){var i=Te(t.children),l;try{for(i.s();!(l=i.n()).done;){var c=l.value;this.propagateDown(c,e,o)}}catch(u){i.e(u)}finally{i.f()}}},propagateUp:function(t){var e=t.check,o=Ne({},t.selectionKeys),i=0,l=!1,c=Te(this.node.children),u;try{for(c.s();!(u=c.n()).done;){var a=u.value;o[a.key]&&o[a.key].checked?i++:o[a.key]&&o[a.key].partialChecked&&(l=!0)}}catch(p){c.e(p)}finally{c.f()}e&&i===this.node.children.length?o[this.node.key]={checked:!0,partialChecked:!1}:(e||delete o[this.node.key],l||i>0&&i!==this.node.children.length?o[this.node.key]={checked:!1,partialChecked:!0}:delete o[this.node.key]),this.$emit("checkbox-change",{node:t.node,check:t.check,selectionKeys:o})},onChildCheckboxChange:function(t){this.$emit("checkbox-change",t)},findNextSiblingOfAncestor:function(t){var e=this.getParentNodeElement(t);return e?e.nextElementSibling?e.nextElementSibling:this.findNextSiblingOfAncestor(e):null},findLastVisibleDescendant:function(t){var e=t.children[1];if(e){var o=e.children[e.children.length-1];return this.findLastVisibleDescendant(o)}else return t},getParentNodeElement:function(t){var e=t.parentElement.parentElement;return pe(e,"role")==="treeitem"?e:null},focusNode:function(t){t.focus()},isCheckboxSelectionMode:function(){return this.selectionMode==="checkbox"},isSameNode:function(t){return t.currentTarget&&(t.currentTarget.isSameNode(t.target)||t.currentTarget.isSameNode(t.target.closest('[role="treeitem"]')))}},computed:{hasChildren:function(){return this.node.children&&this.node.children.length>0},expanded:function(){return this.expandedKeys&&this.expandedKeys[this.node.key]===!0},leaf:function(){return this.node.leaf===!1?!1:!(this.node.children&&this.node.children.length)},selectable:function(){return this.node.selectable===!1?!1:this.selectionMode!=null},selected:function(){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.node.key]===!0:!1},checkboxMode:function(){return this.selectionMode==="checkbox"&&this.node.selectable!==!1},checked:function(){return this.selectionKeys?this.selectionKeys[this.node.key]&&this.selectionKeys[this.node.key].checked:!1},partialChecked:function(){return this.selectionKeys?this.selectionKeys[this.node.key]&&this.selectionKeys[this.node.key].partialChecked:!1},ariaChecked:function(){return this.selectionMode==="single"||this.selectionMode==="multiple"?this.selected:void 0},ariaSelected:function(){return this.checkboxMode?this.checked:void 0}},components:{Checkbox:kt,ChevronDownIcon:pt,ChevronRightIcon:bt,CheckIcon:We,MinusIcon:vt,SpinnerIcon:Me},directives:{ripple:He}},At=["aria-label","aria-selected","aria-expanded","aria-setsize","aria-posinset","aria-level","aria-checked","tabindex"],Ot=["data-p-selected","data-p-selectable"];function _t(n,t,e,o,i,l){var c=j("SpinnerIcon"),u=j("Checkbox"),a=j("TreeNode",!0),p=qe("ripple");return f(),k("li",K({ref:"currentNode",class:n.cx("node"),role:"treeitem","aria-label":l.label(e.node),"aria-selected":l.ariaSelected,"aria-expanded":l.expanded,"aria-setsize":e.node.children?e.node.children.length:0,"aria-posinset":e.index+1,"aria-level":e.level,"aria-checked":l.ariaChecked,tabindex:e.index===0?0:-1,onKeydown:t[4]||(t[4]=function(){return l.onKeyDown&&l.onKeyDown.apply(l,arguments)})},e.level===1?l.getPTOptions("node"):n.ptm("nodeChildren")),[g("div",K({class:n.cx("nodeContent"),onClick:t[2]||(t[2]=function(){return l.onClick&&l.onClick.apply(l,arguments)}),onTouchend:t[3]||(t[3]=function(){return l.onTouchEnd&&l.onTouchEnd.apply(l,arguments)}),style:e.node.style},l.getPTOptions("nodeContent"),{"data-p-selected":l.checkboxMode?l.checked:l.selected,"data-p-selectable":l.selectable}),[ie((f(),k("button",K({type:"button",class:n.cx("nodeToggleButton"),onClick:t[0]||(t[0]=function(){return l.toggle&&l.toggle.apply(l,arguments)}),tabindex:"-1"},l.getPTOptions("nodeToggleButton")),[e.node.loading&&e.loadingMode==="icon"?(f(),k(z,{key:0},[e.templates.nodetoggleicon||e.templates.nodetogglericon?(f(),N($(e.templates.nodetoggleicon||e.templates.nodetogglericon),{key:0,node:e.node,expanded:l.expanded,class:F(n.cx("nodeToggleIcon"))},null,8,["node","expanded","class"])):(f(),N(c,K({key:1,spin:"",class:n.cx("nodeToggleIcon")},l.getPTOptions("nodeToggleIcon")),null,16,["class"]))],64)):(f(),k(z,{key:1},[e.templates.nodetoggleicon||e.templates.togglericon?(f(),N($(e.templates.nodetoggleicon||e.templates.togglericon),{key:0,node:e.node,expanded:l.expanded,class:F(n.cx("nodeToggleIcon"))},null,8,["node","expanded","class"])):l.expanded?(f(),N($(e.node.expandedIcon?"span":"ChevronDownIcon"),K({key:1,class:n.cx("nodeToggleIcon")},l.getPTOptions("nodeToggleIcon")),null,16,["class"])):(f(),N($(e.node.collapsedIcon?"span":"ChevronRightIcon"),K({key:2,class:n.cx("nodeToggleIcon")},l.getPTOptions("nodeToggleIcon")),null,16,["class"]))],64))],16)),[[p]]),l.checkboxMode?(f(),N(u,{key:0,defaultValue:l.checked,binary:!0,indeterminate:l.partialChecked,class:F(n.cx("nodeCheckbox")),tabindex:-1,unstyled:n.unstyled,pt:l.getPTOptions("pcNodeCheckbox"),"data-p-partialchecked":l.partialChecked},{icon:D(function(b){return[e.templates.checkboxicon?(f(),N($(e.templates.checkboxicon),{key:0,checked:b.checked,partialChecked:l.partialChecked,class:F(b.class)},null,8,["checked","partialChecked","class"])):M("",!0)]}),_:1},8,["defaultValue","indeterminate","class","unstyled","pt","data-p-partialchecked"])):M("",!0),e.templates.nodeicon?(f(),N($(e.templates.nodeicon),K({key:1,node:e.node,class:[n.cx("nodeIcon")]},l.getPTOptions("nodeIcon")),null,16,["node","class"])):(f(),k("span",K({key:2,class:[n.cx("nodeIcon"),e.node.icon]},l.getPTOptions("nodeIcon")),null,16)),g("span",K({class:n.cx("nodeLabel")},l.getPTOptions("nodeLabel"),{onKeydown:t[1]||(t[1]=Q(function(){},["stop"]))}),[e.templates[e.node.type]||e.templates.default?(f(),N($(e.templates[e.node.type]||e.templates.default),{key:0,node:e.node,expanded:l.expanded,selected:l.checkboxMode?l.checked:l.selected},null,8,["node","expanded","selected"])):(f(),k(z,{key:1},[Je(Z(l.label(e.node)),1)],64))],16)],16,Ot),l.hasChildren&&l.expanded?(f(),k("ul",K({key:0,class:n.cx("nodeChildren"),role:"group"},n.ptm("nodeChildren")),[(f(!0),k(z,null,Oe(e.node.children,function(b){return f(),N(a,{key:b.key,node:b,templates:e.templates,level:e.level+1,loadingMode:e.loadingMode,expandedKeys:e.expandedKeys,onNodeToggle:l.onChildNodeToggle,onNodeClick:l.onChildNodeClick,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onCheckboxChange:l.propagateUp,unstyled:n.unstyled,pt:n.pt},null,8,["node","templates","level","loadingMode","expandedKeys","onNodeToggle","onNodeClick","selectionMode","selectionKeys","onCheckboxChange","unstyled","pt"])}),128))],16)):M("",!0)],16,At)}Le.render=_t;function ee(n){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ee(n)}function ye(n,t){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Pe(n))||t){e&&(n=e);var o=0,i=function(){};return{s:i,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,c=!0,u=!1;return{s:function(){e=e.call(n)},n:function(){var p=e.next();return c=p.done,p},e:function(p){u=!0,l=p},f:function(){try{c||e.return==null||e.return()}finally{if(u)throw l}}}}function Et(n){return Lt(n)||Dt(n)||Pe(n)||jt()}function jt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pe(n,t){if(n){if(typeof n=="string")return me(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?me(n,t):void 0}}function Dt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Lt(n){if(Array.isArray(n))return me(n)}function me(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,o=Array(t);e<t;e++)o[e]=n[e];return o}function Fe(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,o)}return e}function V(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Fe(Object(e),!0).forEach(function(o){Pt(n,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Fe(Object(e)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(e,o))})}return n}function Pt(n,t,e){return(t=Bt(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Bt(n){var t=$t(n,"string");return ee(t)=="symbol"?t:t+""}function $t(n,t){if(ee(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var o=e.call(n,t||"default");if(ee(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}var Be={name:"Tree",extends:St,inheritAttrs:!1,emits:["node-expand","node-collapse","update:expandedKeys","update:selectionKeys","node-select","node-unselect","filter"],data:function(){return{d_expandedKeys:this.expandedKeys||{},filterValue:null}},watch:{expandedKeys:function(t){this.d_expandedKeys=t}},methods:{onNodeToggle:function(t){var e=t.key;this.d_expandedKeys[e]?(delete this.d_expandedKeys[e],this.$emit("node-collapse",t)):(this.d_expandedKeys[e]=!0,this.$emit("node-expand",t)),this.d_expandedKeys=V({},this.d_expandedKeys),this.$emit("update:expandedKeys",this.d_expandedKeys)},onNodeClick:function(t){if(this.selectionMode!=null&&t.node.selectable!==!1){var e=t.nodeTouched?!1:this.metaKeySelection,o=e?this.handleSelectionWithMetaKey(t):this.handleSelectionWithoutMetaKey(t);this.$emit("update:selectionKeys",o)}},onCheckboxChange:function(t){this.$emit("update:selectionKeys",t.selectionKeys),t.check?this.$emit("node-select",t.node):this.$emit("node-unselect",t.node)},handleSelectionWithMetaKey:function(t){var e=t.originalEvent,o=t.node,i=e.metaKey||e.ctrlKey,l=this.isNodeSelected(o),c;return l&&i?(this.isSingleSelectionMode()?c={}:(c=V({},this.selectionKeys),delete c[o.key]),this.$emit("node-unselect",o)):(this.isSingleSelectionMode()?c={}:this.isMultipleSelectionMode()&&(c=i?this.selectionKeys?V({},this.selectionKeys):{}:{}),c[o.key]=!0,this.$emit("node-select",o)),c},handleSelectionWithoutMetaKey:function(t){var e=t.node,o=this.isNodeSelected(e),i;return this.isSingleSelectionMode()?o?(i={},this.$emit("node-unselect",e)):(i={},i[e.key]=!0,this.$emit("node-select",e)):o?(i=V({},this.selectionKeys),delete i[e.key],this.$emit("node-unselect",e)):(i=this.selectionKeys?V({},this.selectionKeys):{},i[e.key]=!0,this.$emit("node-select",e)),i},isSingleSelectionMode:function(){return this.selectionMode==="single"},isMultipleSelectionMode:function(){return this.selectionMode==="multiple"},isNodeSelected:function(t){return this.selectionMode&&this.selectionKeys?this.selectionKeys[t.key]===!0:!1},isChecked:function(t){return this.selectionKeys?this.selectionKeys[t.key]&&this.selectionKeys[t.key].checked:!1},isNodeLeaf:function(t){return t.leaf===!1?!1:!(t.children&&t.children.length)},onFilterKeydown:function(t){(t.code==="Enter"||t.code==="NumpadEnter")&&t.preventDefault(),this.$emit("filter",{originalEvent:t,value:t.target.value})},findFilteredNodes:function(t,e){if(t){var o=!1;if(t.children){var i=Et(t.children);t.children=[];var l=ye(i),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,a=V({},u);this.isFilterMatched(a,e)&&(o=!0,t.children.push(a))}}catch(p){l.e(p)}finally{l.f()}}if(o)return!0}},isFilterMatched:function(t,e){var o=e.searchFields,i=e.filterText,l=e.strict,c=!1,u=ye(o),a;try{for(u.s();!(a=u.n()).done;){var p=a.value,b=String(Ue(t,p)).toLocaleLowerCase(this.filterLocale);b.indexOf(i)>-1&&(c=!0)}}catch(A){u.e(A)}finally{u.f()}return(!c||l&&!this.isNodeLeaf(t))&&(c=this.findFilteredNodes(t,{searchFields:o,filterText:i,strict:l})||c),c}},computed:{filteredValue:function(){var t=[],e=ze(this.filterBy)?[this.filterBy]:this.filterBy.split(","),o=this.filterValue.trim().toLocaleLowerCase(this.filterLocale),i=this.filterMode==="strict",l=ye(this.value),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,a=V({},u),p={searchFields:e,filterText:o,strict:i};(i&&(this.findFilteredNodes(a,p)||this.isFilterMatched(a,p))||!i&&(this.isFilterMatched(a,p)||this.findFilteredNodes(a,p)))&&t.push(a)}}catch(b){l.e(b)}finally{l.f()}return t},valueToRender:function(){return this.filterValue&&this.filterValue.trim().length>0?this.filteredValue:this.value}},components:{TreeNode:Le,InputText:mt,InputIcon:yt,IconField:gt,SearchIcon:ht,SpinnerIcon:Me}},Vt=["aria-labelledby","aria-label"];function Rt(n,t,e,o,i,l){var c=j("SpinnerIcon"),u=j("InputText"),a=j("SearchIcon"),p=j("InputIcon"),b=j("IconField"),A=j("TreeNode");return f(),k("div",K({class:n.cx("root")},n.ptmi("root")),[n.loading&&n.loadingMode==="mask"?(f(),k("div",K({key:0,class:n.cx("mask")},n.ptm("mask")),[X(n.$slots,"loadingicon",{class:F(n.cx("loadingIcon"))},function(){return[n.loadingIcon?(f(),k("i",K({key:0,class:[n.cx("loadingIcon"),"pi-spin",n.loadingIcon]},n.ptm("loadingIcon")),null,16)):(f(),N(c,K({key:1,spin:"",class:n.cx("loadingIcon")},n.ptm("loadingIcon")),null,16,["class"]))]})],16)):M("",!0),n.filter?(f(),N(b,{key:1,unstyled:n.unstyled,pt:n.ptm("pcFilter"),class:F(n.cx("pcFilter"))},{default:D(function(){return[C(u,{modelValue:i.filterValue,"onUpdate:modelValue":t[0]||(t[0]=function(E){return i.filterValue=E}),autocomplete:"off",class:F(n.cx("pcFilterInput")),placeholder:n.filterPlaceholder,unstyled:n.unstyled,onKeydown:l.onFilterKeydown,pt:n.ptm("pcFilterInput")},null,8,["modelValue","class","placeholder","unstyled","onKeydown","pt"]),C(p,{unstyled:n.unstyled,pt:n.ptm("pcFilterIconContainer")},{default:D(function(){return[X(n.$slots,n.$slots.filtericon?"filtericon":"searchicon",{class:F(n.cx("filterIcon"))},function(){return[C(a,K({class:n.cx("filterIcon")},n.ptm("filterIcon")),null,16,["class"])]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt","class"])):M("",!0),g("div",K({class:n.cx("wrapper"),style:{maxHeight:n.scrollHeight}},n.ptm("wrapper")),[X(n.$slots,"header",{value:n.value,expandedKeys:n.expandedKeys,selectionKeys:n.selectionKeys}),g("ul",K({class:n.cx("rootChildren"),role:"tree","aria-labelledby":n.ariaLabelledby,"aria-label":n.ariaLabel},n.ptm("rootChildren")),[(f(!0),k(z,null,Oe(l.valueToRender,function(E,R){return f(),N(A,{key:E.key,node:E,templates:n.$slots,level:n.level+1,index:R,expandedKeys:i.d_expandedKeys,onNodeToggle:l.onNodeToggle,onNodeClick:l.onNodeClick,selectionMode:n.selectionMode,selectionKeys:n.selectionKeys,onCheckboxChange:l.onCheckboxChange,loadingMode:n.loadingMode,unstyled:n.unstyled,pt:n.pt},null,8,["node","templates","level","index","expandedKeys","onNodeToggle","onNodeClick","selectionMode","selectionKeys","onCheckboxChange","loadingMode","unstyled","pt"])}),128))],16,Vt),X(n.$slots,"footer",{value:n.value,expandedKeys:n.expandedKeys,selectionKeys:n.selectionKeys})],16)],16)}Be.render=Rt;const Ut={},zt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Wt(n,t){return f(),k("svg",zt,t[0]||(t[0]=[g("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3254 2.95241C10.5351 3.13212 10.5593 3.44777 10.3796 3.65744L6.65854 7.99871L10.3796 12.34C10.5593 12.5496 10.5351 12.8653 10.3254 13.045C10.1157 13.2247 9.80008 13.2004 9.62037 12.9908L5.62037 8.3241C5.45988 8.13686 5.45988 7.86056 5.62037 7.67331L9.62037 3.00664C9.80008 2.79698 10.1157 2.7727 10.3254 2.95241Z",fill:"currentColor"},null,-1)]))}const Ht=je(Ut,[["render",Wt]]),qt={class:"w-full h-16 sm:h-[72px] border-b border-gray-200 bg-white sticky top-0 z-50"},Jt={class:"flex items-center justify-between h-full w-full mx-auto px-4 sm:px-6 xl:px-8"},Gt={class:"flex items-center gap-2 min-w-0"},Qt={class:"flex-1 flex justify-center"},Xt={class:"flex items-center gap-2 sm:gap-3 xl:gap-6 h-full flex-shrink-0"},Zt=be({__name:"BackHeader",setup(n){const t=_e();return(e,o)=>{const i=ve;return f(),k("div",qt,[g("div",Jt,[g("div",Gt,[C(lt,{class:"flex-shrink-0"}),C(i,{label:e.$t("back"),severity:"secondary",variant:"text",class:F([["action-medium-semibold","text-neutral"],"h-[48px] px-3 xl:px-4 py-3"]),onClick:o[0]||(o[0]=l=>_(t).go(-1))},{icon:D(()=>[C(_(Ht),{class:"w-4 h-4"})]),_:1},8,["label"])]),g("div",Qt,[X(e.$slots,"default")]),g("div",Xt,[C(it),C(rt)])])])}}}),Yt={class:"rounded-xl w-full"},en={class:"card flex flex-col"},tn={class:"node-content flex flex-row w-full items-center justify-between"},nn={key:0,class:"flex-grow flex items-center"},on={key:1,class:"flex-grow flex items-center"},ln=["size","onKeydown","onBlur"],rn={key:2,class:"flex-grow flex items-center"},an=["onDblclick"],sn={key:3,class:"ml-auto flex items-center space-x-1"},cn=["onClick","title"],dn=["onClick","title"],un=["onClick","title"],fn={class:"flex justify-left whitespace-pre-wrap text-xl"},hn={class:"flex justify-left whitespace-pre-wrap text-xl mb-5"},pn={class:"flex justify-end gap-2"},yn=be({__name:"FilesPanel",props:{filesList:{}},emits:["select-file","create-file","create-folder","rename-file","rename-folder","delete-file","delete-folder"],setup(n,{emit:t}){const e=n,o=t,i=I([]),l=I(),c=Xe("currentPath"),u=I(""),a=I(null),p=I(null),b=I(!1),A=I(null);W(()=>e.filesList,r=>{E(r)});function E(r){!r||r.length===0?i.value=[{key:"home",label:"home",children:[{key:"home/main.py",label:"main.py"}],expanded:!1}]:i.value=R(r)}W(i,()=>{U(i.value)},{deep:!0}),W(a,async r=>{var s,h;r!==null&&(await Ze(),(s=p.value)==null||s.focus(),(h=p.value)==null||h.select())});const R=r=>{const s=[],h=new Map,y=[...r].sort((d,x)=>d.path.localeCompare(x.path));for(const d of y){const x=d.path.split("/");let v=s,S="";for(let P=0;P<x.length;P++){const q=x[P],he=P===x.length-1&&d.name===q;S=S?`${S}/${q}`:q;let B=h.get(S);B||(B={key:S,label:q,children:he?void 0:[],expanded:he?void 0:!1},v.push(B),h.set(S,B)),he||(B.children||(B.children=[]),v=B.children)}}return s},te=(r,s)=>{const h=r.children!==void 0,y=s.children!==void 0;return h&&!y?-1:!h&&y?1:r.label.localeCompare(s.label)},U=r=>{r.sort(te),r.forEach(s=>{s.children&&U(s.children)})},T=r=>r.children!==void 0,L=r=>T(r)?r.expanded?"pi pi-folder-open":"pi pi-folder":r.label.endsWith(".py")?"pi pi-code":"pi pi-file",O=(r,s,h=null)=>{for(const y of s){if(y.key===r)return h;if(T(y)){const d=O(r,y.children,y);if(d)return d}}return null},ne=(r,s)=>{const h=r?r.children:i.value,y=!s.includes(".");let d=s,x=0,v=!0;for(;v;){v=!1;for(const S of h)if(S.label===d){v=!0;break}if(v)if(x++,y)d=`${s}(${x})`;else{const S=s.split("."),P=S.pop();d=`${S.join(".")}(${x}).${P}`}}return d},H=async r=>{a.value||(l.value=r.key,c.value=r.key,T(r)||o("select-file",r.key,r.label))},re=async r=>{T(r)&&(r.expanded=!0)},ae=async r=>{T(r)&&(r.expanded=!1)},oe=(r,s)=>{const h=r||null,y=h?h.key:null,x=ne(h,s?"untitled.py":"new-folder"),v=y?`${y}/${x}`:x;o(s?"create-file":"create-folder",v);const S={key:v,label:x,children:s?void 0:[]};(h&&h.children?h.children:i.value).push(S),i.value=[...i.value],H(S)},se=r=>{oe(r,!0)},ce=r=>{oe(r,!1)},de=r=>{A.value=r,b.value=!0},ue=()=>{b.value=!1,A.value=null},fe=()=>{if(b.value=!1,!A.value)return;const r=A.value,s=r.key;if(T(r)&&r.children&&r.children.length>0){console.warn(`Нельзя удалить непустую папку: ${r.label}`);return}const h=O(s,i.value);let y;if(h?y=h.children:y=i.value,y){T(r)?o("delete-folder",r.key):o("delete-file",r.key);const d=y.findIndex(x=>x.key===s);d!==-1&&(y.splice(d,1),l.value=void 0,c.value=""),i.value=[...i.value]}},le=r=>{a.value=r.key,u.value=r.label},m=async r=>{if(u.value.trim()===""||u.value===r.label){a.value=null;return}const s=r.key,h=O(s,i.value),d=(h?h.children:i.value).some(S=>S.label===u.value&&S.key!==s),x=h?h.key:"",v=x?`${x}/${u.value}`:u.value;if(d){console.warn(`Файл или папка с именем "${u.value}" уже существует.`),a.value=null;return}T(r)?o("rename-folder",s,v):o("rename-file",s,v),r.label=u.value,r.key=v,T(r)&&r.children&&w(r,v),c.value===s&&(c.value=v),a.value=null,i.value=[...i.value]},w=(r,s)=>{if(r.children)for(const h of r.children){const y=`${s}/${h.label}`;h.key=y,h.children&&w(h,y)}};return Ge(async()=>{E(e.filesList),i.value[0].children&&await H(i.value[0].children[0])}),(r,s)=>{const h=ve,y=Ee;return f(),k("div",Yt,[g("div",en,[C(_(Be),{value:i.value,filter:!0,"filter-placeholder":"Search",selectionMode:"single",selectionKeys:l.value,"onUpdate:selectionKeys":s[3]||(s[3]=d=>l.value=d),onNodeSelect:H,onNodeExpand:re,onNodeCollapse:ae,class:"p-tree-vscode flex-grow overflow-auto custom-tree-no-arrows"},{default:D(d=>{var x;return[g("div",tn,[d.node.key=="home"?(f(),k("div",nn,[g("i",{class:F([L(d.node),"mr-2"])},null,2),s[5]||(s[5]=g("span",null,"/",-1))])):a.value===d.node.key?(f(),k("div",on,[g("i",{class:F([L(d.node),"mr-2 opacity-50"])},null,2),ie(g("input",{ref_key:"editInputRef",ref:p,type:"text","onUpdate:modelValue":s[0]||(s[0]=v=>u.value=v),size:u.value.length||1,onKeydown:[Ce(v=>m(d.node),["enter"]),s[1]||(s[1]=Ce(v=>a.value=null,["esc"]))],onBlur:v=>m(d.node),onClick:s[2]||(s[2]=Q(()=>{},["stop"])),class:"edit-input"},null,40,ln),[[Qe,u.value]])])):(f(),k("div",rn,[g("i",{class:F([L(d.node),"mr-2"])},null,2),g("span",{onDblclick:v=>le(d.node)},Z(d.node.label),41,an)])),_(c)==d.node.key&&a.value!==d.node.key?(f(),k("div",sn,[T(d.node)?(f(),k("button",{key:0,onClick:Q(v=>se(d.node),["stop"]),title:r.$t("pages.ide.createFile"),class:"action-btn"},s[6]||(s[6]=[g("i",{class:"pi pi-file-plus"},null,-1)]),8,cn)):M("",!0),T(d.node)?(f(),k("button",{key:1,onClick:Q(v=>ce(d.node),["stop"]),title:r.$t("pages.ide.createFolder"),class:"action-btn"},s[7]||(s[7]=[g("i",{class:"pi pi-folder-plus"},null,-1)]),8,dn)):M("",!0),d.node.key!="home"&&(!T(d.node)||T(d.node)&&((x=d.node.children)==null?void 0:x.length)===0)?(f(),k("button",{key:2,onClick:Q(v=>de(d.node),["stop"]),title:r.$t("pages.ide.delete"),class:"action-btn text-red-500"},s[8]||(s[8]=[g("i",{class:"pi pi-trash"},null,-1)]),8,un)):M("",!0)])):M("",!0)])]}),_:1},8,["value","selectionKeys"])]),C(y,{visible:b.value,"onUpdate:visible":s[4]||(s[4]=d=>b.value=d),modal:"",header:r.$t("pages.ide.delete")},{default:D(()=>{var d;return[g("div",fn,Z(r.$t("pages.ide.deleteDialogText")),1),g("div",hn,'"'+Z((d=A.value)==null?void 0:d.label)+'"',1),g("div",pn,[C(h,{type:"button",label:r.$t("pages.ide.deleteDialogCancel"),severity:"secondary",onClick:ue},null,8,["label"]),C(h,{type:"button",label:r.$t("pages.ide.delete"),onClick:fe},null,8,["label"])])]}),_:1},8,["visible","header"])])}}}),gn=je(yn,[["__scopeId","data-v-0f4fec17"]]);class mn{constructor(t){ke(this,"prefix");this.prefix=t.endsWith("/")?t:t+"/"}saveFile(t,e){return localStorage.setItem(this.prefix+t,e),Promise.resolve()}loadFile(t){const e=localStorage.getItem(this.prefix+t)||"";return Promise.resolve(e)}getFileList(){const t=[],e=this.prefix.length;for(let o=0;o<localStorage.length;o++){const i=localStorage.key(o);if(i&&i.startsWith(this.prefix)){const l=i.substring(e),c=l.split("/").pop()||"";t.push({path:l,name:c})}}return Promise.resolve(t)}deleteFile(t){return localStorage.removeItem(this.prefix+t),Promise.resolve()}async renameFile(t,e){const o=await this.loadFile(t);return this.saveFile(e,o),this.deleteFile(t),Promise.resolve()}async renameFolder(t,e){const o=t.endsWith("/")?t:t+"/",i=e.endsWith("/")?e:e+"/",l=this.prefix+o,c=[];for(let u=0;u<localStorage.length;u++){const a=localStorage.key(u);a&&a.startsWith(l)&&c.push(a)}for(const u of c){const a=localStorage.getItem(u);if(a!==null){const p=u.substring(l.length),b=this.prefix+i+p;localStorage.setItem(b,a),localStorage.removeItem(u)}}return Promise.resolve()}}const bn={class:"flex flex-col items-center"},vn={class:"w-full flex",style:{height:"calc(100vh - 72px)"}},kn={class:"bg-white p-0 overflow-y-scroll flex-grow min-w-0",style:{width:"calc(100% - 450px)"}},xn={class:"flex flex-grow min-w-0",style:{width:"calc(100% - 450px)"}},wn={class:"bg-white p-4 overflow-y-scroll min-w-0 basis-[30%]"},Cn={class:"bg-white p-0 border-l border-r min-w-0 basis-[70%]"},Sn={key:0,class:"bg-white p-0 max-w-[450px] w-[450px]"},Kn={class:"flex justify-left whitespace-pre-wrap text-xl"},Tn={class:"flex justify-end gap-2"},G="ide",ao=be({__name:"IdeView",setup(n){var le;const t=tt(),e=_e(),o=Ye(),{userInfo:i}=Se(o),l=ut(),{selectedKitType:c}=Se(l),u="ide_"+((le=i.value)==null?void 0:le.email),a=new mn(u);at(G).addNeededModules([]);const b=I("Blocks"),A=I(["Blocks","Python"]),E=st(G),R=I([]),te=I([]),U=I(null),T=I(null),L=I(!0),O=I({});nt("currentPath",U);const ne=I(!1);et(async()=>{if(await ue(),b.value.toLowerCase()=="blocks"){const m=await a.loadFile("_blocks");m!=""&&(O.value=JSON.parse(m))}ne.value=!0}),W(()=>t.query.type,m=>{m&&(b.value=m.toString().toLowerCase()==="python"?"Python":"Blocks")},{immediate:!0}),W(b,async m=>{await e.replace({query:{...t.query,type:m.toLowerCase()}})});async function H(m,w){const r=await a.loadFile(m);T.value=w;const s=document.getElementById("codeViewTitle");s&&(s.innerHTML=w),r!=null&&E.setCode(r)}async function re(m){a.saveFile(m,"")}async function ae(m){console.warn(m,". createFolder not supported")}async function oe(m,w){await a.renameFile(m,w)}async function se(m,w){await a.renameFolder(m,w)}async function ce(m){a.deleteFile(m)}async function de(m){console.warn(m,". deleteFolder not supported")}async function ue(){te.value=await a.getFileList()}function fe(m){U.value!=null&&m.code!=null&&a.saveFile(U.value,m.code)}return W(O,()=>{O.value!=null&&a.saveFile("_blocks",JSON.stringify(O.value))}),(m,w)=>{const r=ot,s=ve,h=Ee;return f(),k(z,null,[g("div",bn,[C(_(Zt),null,{default:D(()=>[C(r,{modelValue:b.value,"onUpdate:modelValue":w[0]||(w[0]=y=>b.value=y),options:A.value,"allow-empty":!1},null,8,["modelValue","options"])]),_:1}),g("div",vn,[ie(g("div",kn,[ne.value?(f(),N(_(ft),{key:0,id:G,emulatorRun:_(c)=="pibody",state:O.value,"onUpdate:state":w[1]||(w[1]=y=>O.value=y)},null,8,["emulatorRun","state"])):M("",!0)],512),[[Ke,b.value.toLowerCase()=="blocks"]]),ie(g("div",xn,[g("div",wn,[C(gn,{"files-list":te.value,onSelectFile:H,onCreateFile:re,onCreateFolder:ae,onRenameFile:oe,onRenameFolder:se,onDeleteFile:ce,onDeleteFolder:de},null,8,["files-list"])]),g("div",Cn,[C(_(dt),{class:"w-full h-full",id:G,connectbuttons:!0,"code-view-title":T.value??"",onSaveAnswer:fe},null,8,["code-view-title"])])],512),[[Ke,b.value.toLowerCase()=="python"]]),_(c)=="pibody"?(f(),k("div",Sn,[C(_(ct),{class:"max-w-[450px] w-full",slots:R.value,"onUpdate:slots":w[2]||(w[2]=y=>R.value=y),id:G,horizontal:!1},null,8,["slots"])])):M("",!0)])]),b.value.toLowerCase()=="python"?(f(),N(h,{key:0,visible:L.value,"onUpdate:visible":w[4]||(w[4]=y=>L.value=y),modal:"",header:m.$t("pages.ide.warningDialogTitle"),style:{width:"40rem"}},{default:D(()=>[g("div",Kn,Z(m.$t("pages.ide.warningDialogText")),1),g("div",Tn,[C(s,{type:"button",label:"Ok",onClick:w[3]||(w[3]=y=>L.value=!1)})])]),_:1},8,["visible","header"])):M("",!0)],64)}}});export{ao as default};
