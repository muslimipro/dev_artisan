import{h as B,z as _,s as P}from"./index-v1ivQW6n.js";import{s as C}from"./index-19jCyGXe.js";import{s as N}from"./index-Ca4SICfI.js";import{s as S}from"./index-B3NttIqY.js";import{e as j,f as z,u as A,r as c,D as L,o as u,c as q,k as t,a as o,h as x,w as i,t as r,i as y,G as b,j as $,F as D,n as E,l as O}from"./index-8eYd0-Co.js";import{O as G}from"./otherApi-DDWnLwKS.js";import{_ as H}from"./AuthHeader.vue_vue_type_script_setup_true_lang-DXIRbBJE.js";import"./index-WXQmNEQQ.js";import"./index-B8MXaspB.js";import"./logo-D1-3uCnC.js";const M={class:"card flex flex-col items-center pt-4"},U={class:"flex flex-col flex-1 items-center justify-center my-4"},Y={class:"text-4xl font-semibold px-2 mr-4 text-center"},J={class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},K={class:"flex flex-col gap-1"},Q={for:"email"},ne=j({__name:"ForgotPassword",setup(W){const{t:p}=z(),d=A(),w=E(),l=c(!1),s=c(0);let n;const h=()=>{s.value=60,n=setInterval(()=>{s.value>0?s.value--:clearInterval(n)},1e3)},k=c({email:""}),I=B(_.object({email:_.string().min(1,{message:p("pages.login.emailIsRequired")}).max(100,{message:p("pages.login.max100chars")})})),T=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:a}=await G.requestPasswordReset(e.states.email.value);d.add({severity:"success",summary:a.message,life:3e3}),h()}catch(a){d.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return L(()=>{clearInterval(n)}),(e,a)=>{const f=O,V=S,F=N,v=C,R=P;return u(),q(D,null,[t(H),o("div",M,[t(f,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:a[0]||(a[0]=m=>x(w).replace({name:"login"}))},null,8,["label"]),t(R,{initialValues:k.value,resolver:x(I),onSubmit:T,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(m=>{var g;return[o("div",U,[o("p",Y,r(e.$t("pages.login.forgotPassword")),1),o("p",J,r(e.$t("pages.login.provideYourAccountsEmailToResetPassword")),1)]),o("div",K,[t(F,{variant:"on"},{default:i(()=>[t(V,{id:"email",name:"email",type:"text",fluid:""}),o("label",Q,r(e.$t("email")),1)]),_:1}),(g=m.email)!=null&&g.invalid?(u(),y(v,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[b(r(m.email.error.message),1)]),_:2},1024)):$("",!0)]),s.value>0?(u(),y(v,{key:0,severity:"success"},{default:i(()=>[b(r(e.$t("pages.login.weHaveSentLinkToResetPassword")),1)]),_:1})):$("",!0),t(f,{type:"submit",label:s.value>0?`${e.$t("pages.login.resendIn")} ${s.value}s`:e.$t("pages.login.send"),loading:l.value,disabled:l.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{ne as default};
