import{h as B,z as S,s as z}from"./index-zUgF_fUw.js";import{s as D}from"./index-CmgTJnJ7.js";import{s as U}from"./index-DoQeMzHI.js";import{o as x,c as M,a as d,$ as Z,e as H,f as J,u as G,b as Y,r as q,t as y,F as K,q as Q,k as R,h as F,G as A,i as C,w as N,j as T,H as X,l as ee}from"./index-RQaPKU3q.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te={},ae={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ne(a,e){return x(),M("svg",ae,e[0]||(e[0]=[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.4226 5.24408C17.748 5.56952 17.748 6.09715 17.4226 6.42259L9.6785 14.1667C9.02763 14.8176 7.97236 14.8175 7.32149 14.1667L3.74408 10.5893C3.41864 10.2638 3.41864 9.73617 3.74408 9.41075C4.06952 9.08533 4.59715 9.08533 4.92259 9.41075L8.5 12.9882L16.2441 5.24408C16.5695 4.91864 17.0972 4.91864 17.4226 5.24408Z",fill:"currentColor"},null,-1)]))}const ie=se(te,[["render",ne]]);var re=Object.defineProperty,oe=(a,e,s)=>e in a?re(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,E=(a,e,s)=>oe(a,typeof e!="symbol"?e+"":e,s);const V={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},L=(a,e,s)=>a.replaceAll(e,"").replace(s,".").replace("..",".").replace(/[^.\d]/g,""),W=(a,e,s)=>{var t;return new Intl.NumberFormat(((t=s.number)==null?void 0:t.locale)??"en",{minimumFractionDigits:a,maximumFractionDigits:e,roundingMode:"trunc"})},le=(a,e=!0,s)=>{var t,n,r,u;const c=((t=s.number)==null?void 0:t.unsigned)!==!0&&a.startsWith("-")?"-":"",h=((n=s.number)==null?void 0:n.fraction)??0;let l=W(0,h,s);const o=l.formatToParts(1000.12),m=((r=o.find(i=>i.type==="group"))==null?void 0:r.value)??" ",v=((u=o.find(i=>i.type==="decimal"))==null?void 0:u.value)??".",p=L(a,m,v);if(Number.isNaN(parseFloat(p)))return c;const f=p.split(".");if(f[1]!=null&&f[1].length>=1){const i=f[1].length<=h?f[1].length:h;l=W(i,h,s)}let k=l.format(parseFloat(p));return e?h>0&&p.endsWith(".")&&!p.slice(0,-1).includes(".")&&(k+=v):k=L(k,m,v),c+k},j=a=>JSON.parse(a.replaceAll("'",'"')),ue=(a,e={})=>{const s={...e};a.dataset.maska!=null&&a.dataset.maska!==""&&(s.mask=ce(a.dataset.maska)),a.dataset.maskaEager!=null&&(s.eager=$(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(s.reversed=$(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(s.tokensReplace=$(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(s.tokens=pe(a.dataset.maskaTokens));const t={};return a.dataset.maskaNumberLocale!=null&&(t.locale=a.dataset.maskaNumberLocale),a.dataset.maskaNumberFraction!=null&&(t.fraction=parseInt(a.dataset.maskaNumberFraction)),a.dataset.maskaNumberUnsigned!=null&&(t.unsigned=$(a.dataset.maskaNumberUnsigned)),(a.dataset.maskaNumber!=null||Object.values(t).length>0)&&(s.number=t),s},$=a=>a!==""?!!JSON.parse(a):!0,ce=a=>a.startsWith("[")&&a.endsWith("]")?j(a):a,pe=a=>{if(a.startsWith("{")&&a.endsWith("}"))return j(a);const e={};return a.split("|").forEach(s=>{const t=s.split(":");e[t[0]]={pattern:O()?new RegExp(t[1],"u"):new RegExp(t[1]),optional:t[2]==="optional",multiple:t[2]==="multiple",repeated:t[2]==="repeated"}}),e},O=()=>{try{return new RegExp("\\p{L}","u"),!0}catch{return!1}};class de{constructor(e={}){E(this,"opts",{}),E(this,"memo",new Map);const s={...e};if(s.tokens!=null){s.tokens=s.tokensReplace?{...s.tokens}:{...V,...s.tokens};for(const t of Object.values(s.tokens))typeof t.pattern=="string"&&(t.pattern=O()?new RegExp(t.pattern,"u"):new RegExp(t.pattern))}else s.tokens=V;Array.isArray(s.mask)&&(s.mask.length>1?s.mask=[...s.mask].sort((t,n)=>t.length-n.length):s.mask=s.mask[0]??""),s.mask===""&&(s.mask=null),this.opts=s}masked(e){return this.process(String(e),this.findMask(String(e)))}unmasked(e){return this.process(String(e),this.findMask(String(e)),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(e){const s=this.findMask(String(e));if(this.opts.mask==null||s==null)return!1;const t=this.process(String(e),s).length;return typeof this.opts.mask=="string"?t>=this.opts.mask.length:t>=s.length}findMask(e){const s=this.opts.mask;if(s==null)return null;if(typeof s=="string")return s;if(typeof s=="function")return s(e);const t=this.process(e,s.slice(-1).pop()??"",!1);return s.find(n=>this.process(e,n,!1).length>=t.length)??""}escapeMask(e){const s=[],t=[];return e.split("").forEach((n,r)=>{n==="!"&&e[r-1]!=="!"?t.push(r-t.length):s.push(n)}),{mask:s.join(""),escaped:t}}process(e,s,t=!0){if(this.opts.number!=null)return le(e,t,this.opts);if(s==null)return e;const n=`v=${e},mr=${s},m=${t?1:0}`;if(this.memo.has(n))return this.memo.get(n);const{mask:r,escaped:u}=this.escapeMask(s),c=[],h=this.opts.tokens!=null?this.opts.tokens:{},l=this.isReversed()?-1:1,o=this.isReversed()?"unshift":"push",m=this.isReversed()?0:r.length-1,v=this.isReversed()?()=>i>-1&&g>-1:()=>i<r.length&&g<e.length,p=b=>!this.isReversed()&&b<=m||this.isReversed()&&b>=m;let f,k=-1,i=this.isReversed()?r.length-1:0,g=this.isReversed()?e.length-1:0,w=!1;for(;v();){const b=r.charAt(i),_=h[b],I=(_==null?void 0:_.transform)!=null?_.transform(e.charAt(g)):e.charAt(g);if(!u.includes(i)&&_!=null?(I.match(_.pattern)!=null?(c[o](I),_.repeated?(k===-1?k=i:i===m&&i!==k&&(i=k-l),m===k&&(i-=l)):_.multiple&&(w=!0,i-=l),i+=l):_.multiple?w&&(i+=l,g-=l,w=!1):I===f?f=void 0:_.optional&&(i+=l,g-=l),g+=l):(t&&!this.isEager()&&c[o](b),I===b&&!this.isEager()?g+=l:f=b,this.isEager()||(i+=l)),this.isEager())for(;p(i)&&(h[r.charAt(i)]==null||u.includes(i));){if(t){if(c[o](r.charAt(i)),e.charAt(g)===r.charAt(i)){i+=l,g+=l;continue}}else r.charAt(i)===e.charAt(g)&&(g+=l);i+=l}}return this.memo.set(n,c.join("")),this.memo.get(n)}}class me{constructor(e,s={}){E(this,"items",new Map),E(this,"eventAbortController"),E(this,"onInput",t=>{if(t instanceof CustomEvent&&t.type==="input"&&!t.isTrusted&&!t.bubbles)return;const n=t.target,r=this.items.get(n);if(r===void 0)return;const u="inputType"in t&&t.inputType.startsWith("delete"),c=r.isEager(),h=u&&c&&r.unmasked(n.value)===""?"":n.value;this.fixCursor(n,u,()=>this.setValue(n,h))}),this.options=s,this.eventAbortController=new AbortController,this.init(this.getInputs(e))}update(e={}){this.options={...e},this.init(Array.from(this.items.keys()))}updateValue(e){var s;e.value!==""&&e.value!==((s=this.processInput(e))==null?void 0:s.masked)&&this.setValue(e,e.value)}destroy(){this.eventAbortController.abort(),this.items.clear()}init(e){const s=this.getOptions(this.options);for(const t of e){if(!this.items.has(t)){const{signal:r}=this.eventAbortController;t.addEventListener("input",this.onInput,{capture:!0,signal:r})}const n=new de(ue(t,s));this.items.set(t,n),queueMicrotask(()=>this.updateValue(t)),t.selectionStart===null&&n.isEager()&&console.warn("Maska: input of `%s` type is not supported",t.type)}}getInputs(e){return typeof e=="string"?Array.from(document.querySelectorAll(e)):"length"in e?Array.from(e):[e]}getOptions(e){const{onMaska:s,preProcess:t,postProcess:n,...r}=e;return r}fixCursor(e,s,t){var n,r;const u=e.selectionStart,c=e.value;if(t(),u===null||u===c.length&&!s)return;const h=e.value,l=c.slice(0,u),o=h.slice(0,u),m=(n=this.processInput(e,l))==null?void 0:n.unmasked,v=(r=this.processInput(e,o))==null?void 0:r.unmasked;if(m===void 0||v===void 0)return;let p=u;l!==o&&(p+=s?h.length-c.length:m.length-v.length),e.setSelectionRange(p,p)}setValue(e,s){const t=this.processInput(e,s);t!==void 0&&(e.value=t.masked,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(n=>n(t)):this.options.onMaska(t)),e.dispatchEvent(new CustomEvent("maska",{detail:t})),e.dispatchEvent(new CustomEvent("input",{detail:t.masked})))}processInput(e,s){const t=this.items.get(e);if(t===void 0)return;let n=s??e.value;this.options.preProcess!=null&&(n=this.options.preProcess(n));let r=t.masked(n);return this.options.postProcess!=null&&(r=this.options.postProcess(r)),{masked:r,unmasked:t.unmasked(n),completed:t.completed(n)}}}const P=new WeakMap,he=(a,e)=>{if(a.arg==null||a.instance==null)return;const s="setup"in a.instance.$.type;a.arg in a.instance?a.instance[a.arg]=e:s&&console.warn("Maska: please expose `%s` using defineExpose",a.arg)},ge=(a,e)=>{var s;const t=a instanceof HTMLInputElement?a:a.querySelector("input");if(t==null||(t==null?void 0:t.type)==="file")return;let n={};if(e.value!=null&&(n=typeof e.value=="string"?{mask:e.value}:{...e.value}),e.arg!=null){const r=u=>{const c=e.modifiers.unmasked?u.unmasked:e.modifiers.completed?u.completed:u.masked;he(e,c)};n.onMaska=n.onMaska==null?r:Array.isArray(n.onMaska)?[...n.onMaska,r]:[n.onMaska,r]}P.has(t)?(s=P.get(t))==null||s.update(n):P.set(t,new me(t,n))},ve={sendPremiumRequest:fe};async function fe(a){return await Z.post("/premium-request",{name:a.name,phone:a.phone,school:a.school})}const ke={class:"bg-purple400 p-6 rounded-xl flex gap-10"},ye={class:"flex-grow flex flex-col gap-8 text-white"},be={class:"text-heading-2-semibold"},_e={class:"flex flex-col gap-4"},xe={class:"flex items-center justify-center w-7 h-7 bg-white/40 rounded-full"},we={class:"text-body-large-regular"},Re={key:0,class:"min-w-[350px] bg-white p-6 rounded-lg flex flex-col items-center justify-center gap-2"},Ae={class:"text-heading-3-semibold text-neutral900"},Me={class:"text-body-large-regular text-neutral600 text-center"},Ee={class:"text-heading-3-semibold text-neutral900"},Ie={class:"flex flex-col gap-4"},Se={class:"flex flex-col gap-1"},Ce={class:"text-body-medium-regular text-neutral900"},Ne={class:"flex flex-col gap-1"},$e={class:"text-body-medium-regular text-neutral900"},qe={class:"flex flex-col gap-1"},Fe={class:"text-body-medium-regular text-neutral900"},je=H({__name:"PremiumForm",setup(a){const{t:e}=J(),s=G(),t=Y(()=>[e("advantage1"),e("advantage2"),e("advantage3"),e("advantage4"),e("advantage5"),e("advantage6")]),n=q({name:"",phone:"",school:""}),r=B(S.object({name:S.string().min(1,{message:e("pages.login.nameIsRequired")}).max(100,{message:e("pages.login.max100chars")}),phone:S.string().min(1,{message:e("phoneIsRequired")}).regex(/^\+7\s?\(7\d{2}\)\s?\d{3}-\d{2}-\d{2}$/,{message:e("phoneIsRequired")}),school:S.string().min(1,{message:e("pages.login.nameIsRequired")}).max(100,{message:e("pages.login.max100chars")})})),u=q(!1),c=q(!1),h=async o=>{var m,v;if(o.valid)try{u.value=!0;const{data:p}=await ve.sendPremiumRequest({name:o.states.name.value,phone:o.states.phone.value,school:o.states.school.value});s.add({severity:"success",summary:e("pages.settings.success"),detail:p.message||e("pages.settings.premiumRequestSubmitted"),life:3e3}),c.value=!0}catch(p){const f=((v=(m=p.response)==null?void 0:m.data)==null?void 0:v.error)||e("pages.settings.premiumRequestFailed");s.add({severity:"error",summary:e("pages.settings.error"),detail:f,life:3e3})}finally{u.value=!1}},l=()=>{c.value=!1};return(o,m)=>{const v=ee,p=U,f=D,k=z;return x(),M("div",ke,[d("div",ye,[d("div",be,y(o.$t("goPremiumToUnlock")),1),d("div",_e,[(x(!0),M(K,null,Q(t.value,i=>(x(),M("div",{key:i,class:"flex gap-2"},[d("div",xe,[R(F(ie),{class:"w-5 h-5"})]),d("div",we,y(i),1)]))),128))])]),c.value?(x(),M("div",Re,[d("div",Ae,y(o.$t("allSet")),1),d("div",Me,[A(y(o.$t("yourRequestIsOnItsWay")),1),m[0]||(m[0]=d("br",null,null,-1)),A(y(o.$t("wellBeInTouchSoon")),1)]),R(v,{onClick:l,label:o.$t("submitAgain"),severity:"help",class:"action-medium-semibold"},null,8,["label"])])):(x(),C(k,{key:1,initialValues:n.value,resolver:F(r),onSubmit:h,class:"min-w-[350px] bg-white p-6 rounded-lg flex flex-col gap-8"},{default:N(i=>{var g,w,b;return[d("div",Ee,y(o.$t("submitRequest")),1),d("div",Ie,[d("div",Se,[d("div",Ce,y(o.$t("pages.settings.name")),1),R(p,{name:"name",type:"text",fluid:"",placeholder:o.$t("pages.settings.name")},null,8,["placeholder"]),(g=i.name)!=null&&g.invalid?(x(),C(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:N(()=>[A(y(i.name.error.message),1)]),_:2},1024)):T("",!0)]),d("div",Ne,[d("div",$e,y(o.$t("phone")),1),X(R(p,{name:"phone",type:"tel",fluid:"",placeholder:"+7 (7__) ___-__-__"},null,512),[[F(ge),"+7 (7##) ###-##-##"]]),(w=i.phone)!=null&&w.invalid?(x(),C(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:N(()=>[A(y(i.phone.error.message),1)]),_:2},1024)):T("",!0)]),d("div",qe,[d("div",Fe,y(o.$t("pages.settings.school")),1),R(p,{name:"school",type:"text",fluid:"",placeholder:o.$t("pages.settings.school")},null,8,["placeholder"]),(b=i.school)!=null&&b.invalid?(x(),C(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:N(()=>[A(y(i.school.error.message),1)]),_:2},1024)):T("",!0)])]),R(v,{type:"submit",label:o.$t("submitYourRequest"),severity:"help",class:"action-medium-semibold",loading:u.value,disabled:u.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]))])}}});export{je as _};
