import{s as b}from"./index-BQKo0YUX.js";import{d as D,u as B,r as h,e as y,o,c as r,a as e,H as C,i as x,I as L,j as g,t as c,y as I,k as _,h as m,F as w,n as S,l as V,s as j,b as N,C as P,f as T,B as q,q as F}from"./index-RQaPKU3q.js";import{_ as M}from"./MainHeader.vue_vue_type_script_setup_true_lang-BuW7JKj1.js";import"./index-zUgF_fUw.js";import{D as A}from"./docApi-2TFkEQN6.js";import{T as R}from"./index-DnxWnOWO.js";import{s as z}from"./index-BEGyIpqi.js";import{s as E}from"./index-i87uic1r.js";import{_ as H}from"./UserMenu.vue_vue_type_script_setup_true_lang-3l-gndQ6.js";import{L as O}from"./lessonApi-CDtd4rn4.js";import"./index-C1N2nWcC.js";import"./index-DYe12pIs.js";import"./index-5bJt7VTk.js";import"./logo-D1-3uCnC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PremiumForm.vue_vue_type_script_setup_true_lang-DOQWPUhj.js";import"./index-CmgTJnJ7.js";import"./index-DoQeMzHI.js";import"./index-BQlFFWCz.js";import"./index-DZ_1xp5G.js";import"./index-ZflZKAdM.js";import"./LocaleSelectButton.vue_vue_type_script_setup_true_lang-D5A7GxOk.js";import"./index-csPL02fk.js";import"./language-DYQF8nnT.js";const U=D("docs-store",()=>{const d=B(),s=h([]),a=h(!1);async function n(){try{a.value=!0;const{data:l}=await A.getDocs();s.value=l}catch(l){d.add({severity:"error",summary:l.response.data.error,life:2e3})}finally{a.value=!1}}return{docs:s,isLoading:a,loadDocs:n}}),G={class:"absolute top-0 left-0"},J={class:"flex gap-2 w-full h-full items-end"},K={class:"flex-grow flex flex-col gap-[2px]"},Q={class:"flex items-center gap-2"},W={key:0,class:"text-purple h-[22px] w-4"},X={class:"text-body-large-semibold"},Y={class:"pt-[10px] flex flex-col gap-1"},Z={key:0},ss={key:1},es={key:2},os=y({__name:"ModuleCard",props:{doc:{}},setup(d){const s=d,a=S(),n=h(!1),l=()=>{if(s.doc.access_status!=="available"){s.doc.access_status=="premium_restriction"&&(n.value=!0);return}a.push({name:s.doc.student_progress==100?"lesson-revise":"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})};async function f(){if(s.doc.access_status!=="available"){s.doc.access_status=="premium_restriction"&&(n.value=!0);return}await O.resetLessonById(s.doc.lesson_id),a.push({name:"lesson",params:{id:s.doc.lesson_id},query:{route_id:s.doc.route_id}})}return(t,i)=>{const p=V,v=E,u=z,k=R;return o(),r(w,null,[e("div",{class:"relative flex flex-col rounded-lg h-[160px] w-[360px] pt-2 px-3 cursor-pointer bg-neutral50",onClick:l},[e("div",G,[t.doc.student_progress>0?C((o(),x(p,{key:0,icon:"pi pi-refresh",variant:"link",onClick:L(f,["stop","prevent"]),class:"text-warning400"},null,512)),[[k,t.$t("startOver"),void 0,{top:!0}]]):g("",!0)]),e("div",J,[e("div",K,[e("div",Q,[s.doc.access_status==="premium_restriction"?(o(),r("div",W,i[1]||(i[1]=[e("i",{class:"pi pi-crown","aria-hidden":"true"},null,-1)]))):g("",!0),e("div",X,c(s.doc.lesson_name),1)])]),t.doc.source_image_url?(o(),x(v,{key:0,src:s.doc.source_image_url,alt:"Image",class:"w-[120px] h-[120px]"},null,8,["src"])):g("",!0)]),e("div",Y,[e("div",{class:I(["action-small-bold","text-warning400"])},[t.doc.student_progress==100||t.doc.completed?(o(),r("span",Z,c(t.$t("done")),1)):t.doc.student_progress==0?(o(),r("span",ss,c(t.$t("start")),1)):(o(),r("span",es,c(t.$t("inProgress")),1))]),_(u,{value:t.doc.student_progress,"show-value":!1,class:"w-full rounded-full h-[2px]",dt:{value:{background:"var(--color-warning400)"},background:"var(--color-warning50)"}},null,8,["value"])])]),_(m(H),{"model-value":n.value,"onUpdate:modelValue":i[0]||(i[0]=$=>n.value=$)},null,8,["model-value"])],64)}}}),ts={class:"flex flex-col items-center"},rs={class:"w-full flex max-w-[1280px] px-8 py-10 justify-start"},as={class:"text-heading-2-bold text-neutral900"},is={class:"w-full max-w-[1280px] px-8 pb-10"},ns={key:1,class:"flex justify-center"},ls={key:2,class:"flex flex-col gap-8"},cs={class:"flex flex-wrap gap-6 bg-white p-6 rounded-2xl"},Ps=y({__name:"DocsPage",setup(d){const s=U(),{docs:a,isLoading:n}=j(s),{loadDocs:l}=s,f=N(()=>{var i;return(i=a.value)==null?void 0:i.filter(p=>p.stage==="published")});P(()=>l());const{locale:t}=T();return q(t,async()=>{await l()}),(i,p)=>{const v=b;return o(),r("div",ts,[_(m(M)),e("div",rs,[e("div",as,c(i.$t("modules")),1)]),e("div",is,[m(n)?(o(),x(v,{key:0,class:"flex justify-center"})):m(a)?(o(),r("div",ls,[e("div",cs,[(o(!0),r(w,null,F(f.value,u=>(o(),r("div",{key:u.lesson_id},[_(os,{doc:u},null,8,["doc"])]))),128))])])):(o(),r("div",ns,"No docs yet"))])])}}});export{Ps as default};
