import{s as Z}from"./index-DgTsGfqw.js";import{B as ee,s as te,o as t,c as n,m as se,d as ne,u as oe,a as ae,r as k,b as z,U as K,e as ie,f as W,g as le,h as re,i as y,j as e,k as s,t as c,l as ce,F as T,n as X,p as G,q as f,v as J,w as de,x as ue,y as me}from"./index-D3tgtg5U.js";import{_ as pe}from"./MainHeader.vue_vue_type_script_setup_true_lang-DWKyL8yj.js";import{R as Q,m as Y}from"./mapRouteFromDto-B3IgY8K5.js";import{g as fe,f as N}from"./groupRoutesByType-B8LQ_TR7.js";import{L as he}from"./lessonApi-Cp4Ny8VN.js";import{m as ge}from"./mapLessonFromDto-DxMZVnwf.js";import"./index-BRipEVfU.js";import"./index-OOKGAGTr.js";import"./index-BQIo0HBF.js";import"./logo-D1-3uCnC.js";import"./mapUnitFromDto-BRBO9875.js";import"./transformUnitDtosToPages-CGD_PO48.js";var _e=function(h){var i=h.dt;return`
.p-skeleton {
    overflow: hidden;
    background: `.concat(i("skeleton.background"),`;
    border-radius: `).concat(i("skeleton.border.radius"),`;
}

.p-skeleton::after {
    content: "";
    animation: p-skeleton-animation 1.2s infinite;
    height: 100%;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    transform: translateX(-100%);
    z-index: 1;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0), `).concat(i("skeleton.animation.background"),`, rgba(255, 255, 255, 0));
}

[dir='rtl'] .p-skeleton::after {
    animation-name: p-skeleton-animation-rtl;
}

.p-skeleton-circle {
    border-radius: 50%;
}

.p-skeleton-animation-none::after {
    animation: none;
}

@keyframes p-skeleton-animation {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(100%);
    }
}

@keyframes p-skeleton-animation-rtl {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(-100%);
    }
}
`)},ye={root:{position:"relative"}},xe={root:function(h){var i=h.props;return["p-skeleton p-component",{"p-skeleton-circle":i.shape==="circle","p-skeleton-animation-none":i.animation==="none"}]}},ve=ee.extend({name:"skeleton",theme:_e,classes:xe,inlineStyles:ye}),ke={name:"BaseSkeleton",extends:te,props:{shape:{type:String,default:"rectangle"},size:{type:String,default:null},width:{type:String,default:"100%"},height:{type:String,default:"1rem"},borderRadius:{type:String,default:null},animation:{type:String,default:"wave"}},style:ve,provide:function(){return{$pcSkeleton:this,$parentInstance:this}}},d={name:"Skeleton",extends:ke,inheritAttrs:!1,computed:{containerStyle:function(){return this.size?{width:this.size,height:this.size,borderRadius:this.borderRadius}:{width:this.width,height:this.height,borderRadius:this.borderRadius}}}};function be(p,h,i,L,j,$){return t(),n("div",se({class:p.cx("root"),style:[p.sx("root"),$.containerStyle],"aria-hidden":"true"},p.ptmi("root")),null,16)}d.render=be;const we=ne("home-store",()=>{const p=oe(),{t:h}=ae(),i=k([]),L=k(!1);async function j(){try{L.value=!0;const{data:o}=await Q.getRoutes();i.value=(o==null?void 0:o.map(Y))??[]}catch(o){p.add({severity:"error",summary:o,life:2e3})}finally{L.value=!1}}const $=z(()=>fe(i.value)),V=z(()=>N(i.value,"main")),M=z(()=>N(i.value,"side")),x=z(()=>N(i.value,"one_kit")),B=z(()=>N(i.value,"hackathon"));let D={};const I=k(0),C=k(!1);async function q(){try{C.value=!0;const{data:o}=await K.getUserProgress();I.value=o.xp,D=o.attempts.reduce((m,a)=>(m[a.date]={date:a.date,count:a.count,success:a.success},m),{})}catch(o){p.add({severity:"error",summary:o,life:2e3})}finally{C.value=!1}}const S=new Date,U=S.toISOString().slice(0,10),E=(S.getDay()+6)%7,g=new Date(S);g.setDate(S.getDate()-E-14);const A=g;function v(o,m){const a=(o-1)*7+(m-1),u=new Date(A);return u.setDate(A.getDate()+a),u.toISOString().slice(0,10)}function H(o,m){const a=v(o,m);if(a>U)return"bg-white";const u=D[a];return u?u.success?"bg-green-400":"bg-green-100":"bg-gray-200"}function _(o,m){const a=v(o,m);if(a>U)return"";const u=D[a];return u?`${a}
attempts: ${u.count}
success: ${u.success}`:`${a}: no attempts`}const l=k({lesson_id:0,lesson_level_name:"",lesson_name:"",lesson_type:"learn",route_id:0,route_name:""}),b=k(""),P=k(""),R=k(!1);async function F(){try{R.value=!0;const{data:o}=await K.getUserLastLesson();l.value=o,b.value=h("continue")}catch(o){const{data:m}=await he.getLessonById(5,"1",void 0),a=ge(m),{data:u}=await Q.getRouteById(1),r=Y(u);l.value.lesson_id=a.id,l.value.lesson_level_name=r.levels[0].name,l.value.lesson_name=a.name,l.value.route_id=1,l.value.route_name=r.name,b.value=h("start"),p.add({severity:"error",summary:o,life:2e3})}finally{R.value=!1,P.value="/v2/lesson/"+l.value.lesson_id+"?route_id="+l.value.route_id}}return{routes:i,isRoutesLoading:L,loadRoutes:j,groupedRoutes:$,mainRoutes:V,sideRoutes:M,oneKitRoutes:x,hackathonRoutes:B,isProgressLoading:C,loadProgress:q,getDayClass:H,getDayTooltip:_,xp:I,isLastLessonLoading:R,lastLesson:l,lastButtonLabel:b,lastButtonURL:P,loadLastLesson:F}}),Le={class:"flex flex-col items-center h-screen"},Se={class:"w-full h-full max-w-[1400px] px-4 md:px-28 py-8"},Re={class:"flex flex-col gap-8 py-8"},$e={class:"flex gap-8"},Be={class:"flex flex-col gap-8"},De={class:"flex flex-col w-[400px] h-[286px] bg-white border border-gray-100 rounded-3xl p-8"},Ce={key:0,class:"text-4xl font-sans font-light text-gray-500 mb-4"},Pe={key:1,class:"text-4xl font-sans font-light text-gray-500 mb-4"},ze={class:"font-normal text-5xl text-black"},Te={class:"flex"},je={class:"flex-grow flex gap-2 justify-between items-end text-gray-500"},Ie={class:"grid grid-rows-6 grid-cols-7 gap-0.5 w-full h-full"},Ue=["title"],Ae={class:"w-[400px] h-[180px] bg-purple-50 border border-gray-100 rounded-3xl p-8"},Fe={key:0},Xe={key:1,class:"flex flex-col justify-between gap-5"},Ne={class:"flex items-center justify-center gap-4"},Ve={class:"flex flex-col"},Me={class:"text-lg"},qe={class:"text-gray-500"},Ee={class:"flex flex-col gap-8 w-full"},He={class:"relative flex items-center bg-slate-50 border border-gray-100 rounded-3xl p-5"},Oe={key:1},Ke={class:"flex flex-col"},We={class:"italic text-gray-500"},Ge={key:1,class:"text-2xl"},Je={class:"flex flex-col absolute right-5 top-3 items-end"},Qe={key:1,class:"text-gray-400"},Ye={key:3,class:"text-gray-500"},Ze={class:"flex-grow flex flex-col justify-between items-center bg-white border border-gray-100 rounded-3xl px-8 pb-4 pt-10"},et={class:"flex flex-col items-center"},tt={key:1,class:"text-2xl font-semibold mb-2"},st={key:3,class:"text-blue-400 font-sans"},nt={key:1,class:"text-[100px]"},ot={class:"flex flex-col items-center w-full min-w-full"},at={key:1,class:"text-gray-500 font-sans mb-4"},it={class:"flex gap-4 bg-gray-50 rounded-3xl p-8 overflow-x-scroll"},lt={key:0,class:"flex flex-row gap-4"},rt={class:"flex flex-col items-center"},ct={class:"text-lg font-semibold"},dt={class:"text-sm text-gray-500 text-center"},ut={key:0},mt={key:1},pt={key:2},Bt=ie({__name:"HomePage",setup(p){const h=ue(),i=we(),{isRoutesLoading:L,mainRoutes:j,sideRoutes:$,isProgressLoading:V,xp:M,isLastLessonLoading:x,lastLesson:B,lastButtonLabel:D,lastButtonURL:I}=W(i),{loadRoutes:C,loadProgress:q,getDayClass:S,getDayTooltip:U,loadLastLesson:O}=i,E=le(),{userInfo:g,userLabel:A,isUserInfoLoading:v}=W(E),H=["pi pi-microchip","pi pi-arrow-up-right","pi pi-code","pi pi-box"];return re(()=>{q(),O(),C()}),(_,l)=>{var R,F,o,m,a,u;const b=me,P=Z;return t(),n("div",Le,[y(e(pe)),s("div",Se,[s("div",Re,[s("div",$e,[s("div",Be,[s("div",De,[e(V)?(t(),n("div",Ce,[y(e(d),{width:"11rem",height:"49px"})])):(t(),n("div",Pe,[s("span",ze,c(e(M)),1),l[1]||(l[1]=ce(" xp "))])),s("div",Te,[(t(),n(T,null,X(["Mo","Tu","We","Th","Fr","Sa","Su"],(r,w)=>s("div",{key:`day-${w}`,class:"w-full h-full flex items-center justify-center rounded text-xs text-gray-500 font-medium"},c(r),1)),64))]),s("div",je,[s("div",Ie,[(t(),n(T,null,X(3,r=>(t(),n(T,null,[(t(),n(T,null,X(7,w=>s("div",{key:`cell-${r}-${w}`,class:G(["aspect-square flex items-center justify-center rounded m-1",e(S)(r,w)]),title:e(U)(r,w)},null,10,Ue)),64))],64))),64))])])]),s("div",Ae,[e(v)?(t(),n("div",Fe,[e(x)?(t(),f(e(d),{key:0,height:"115px",class:"w-full mb-2"})):J("",!0)])):(t(),n("div",Xe,[s("div",Ne,[l[2]||(l[2]=s("i",{class:"pi pi-crown text-orange-300",style:{"font-size":"28px"}},null,-1)),s("div",Ve,[s("div",Me,c(_.$t("unlockPremium")),1),s("div",qe,c(_.$t("getExclusiveContent")),1)])]),y(b,{label:_.$t("explorePremium"),severity:"help",class:"rounded-full"},null,8,["label"])]))])]),s("div",Ee,[s("div",He,[e(v)?(t(),f(e(d),{key:0,class:"mr-6",shape:"circle",size:"4rem"})):e(g)?(t(),n("div",Oe,[e(g).small_avatar_url?(t(),f(P,{key:0,class:"mr-6",size:"xlarge",shape:"circle",image:e(g).small_avatar_url},null,8,["image"])):(t(),f(P,{key:1,label:e(A),class:"mr-6",size:"xlarge",shape:"circle"},null,8,["label"]))])):J("",!0),s("div",Ke,[s("span",We,c(_.$t("welcomeBack")),1),e(v)?(t(),f(e(d),{key:0,width:"15rem",height:"33px"})):(t(),n("div",Ge,c((R=e(g))==null?void 0:R.name),1))]),s("div",Je,[e(v)?(t(),f(e(d),{key:0,width:"12rem",height:"25px",class:"mb-1"})):(t(),n("div",Qe,c((F=e(g))==null?void 0:F.school_name),1)),e(v)?(t(),f(e(d),{key:2,width:"3rem",height:"25px"})):(t(),n("div",Ye,c((o=e(g))==null?void 0:o.class_name),1))])]),s("div",Ze,[s("div",et,[e(x)?(t(),f(e(d),{key:0,width:"15rem",height:"30px",class:"mb-2"})):(t(),n("div",tt,c((m=e(B))==null?void 0:m.lesson_name),1)),e(x)?(t(),f(e(d),{key:2,width:"10rem",height:"20px",class:"mb-2"})):(t(),n("div",st,c((a=e(B))==null?void 0:a.lesson_level_name),1))]),e(x)?(t(),f(e(d),{key:0,width:"10rem",height:"9rem",class:"mb-2"})):(t(),n("div",nt,"ðŸš€")),s("div",ot,[e(x)?(t(),f(e(d),{key:0,width:"10rem",height:"20px",class:"mb-4"})):(t(),n("div",at,c((u=e(B))==null?void 0:u.route_name),1)),y(b,{label:e(D),class:"rounded-full h-12 min-w-full",disabled:e(x),onClick:l[0]||(l[0]=r=>e(h).push(e(I)))},null,8,["label","disabled"])])])])]),s("div",it,[e(L)?(t(),n("div",lt,[y(e(d),{height:"16rem",width:"18rem"}),y(e(d),{height:"16rem",width:"18rem"}),y(e(d),{height:"16rem",width:"18rem"}),y(e(d),{height:"16rem",width:"18rem"})])):(t(!0),n(T,{key:1},X([...e(j),...e($)],(r,w)=>(t(),n("div",{key:r.id,class:"flex-shrink-0 flex flex-col items-center justify-between h-64 w-72 bg-white rounded-xl p-4"},[s("div",rt,[s("div",ct,c(r.name),1),s("div",dt,c(r.description),1)]),s("div",{class:G(["text-[64px] text-gray-500",H[w]])},null,2),y(b,{class:"rounded-full w-full",severity:"info",variant:"outlined",onClick:ft=>e(h).push({name:"route",params:{id:r.id}})},{default:de(()=>[r.studentProgress==0?(t(),n("span",ut,c(_.$t("start")),1)):r.studentProgress==100?(t(),n("span",mt,c(_.$t("done")),1)):(t(),n("span",pt,c(_.$t("continue")),1))]),_:2},1032,["onClick"])]))),128))])])])])}}});export{Bt as default};
