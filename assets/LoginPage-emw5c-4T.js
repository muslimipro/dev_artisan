import{z as C,a as p,s as M}from"./index-Bcby25kn.js";import{d as N,u as T,a as I,r as b,o,c as m,b as a,e as t,w as i,t as n,f as h,g as L,h as P,F as k,i as q,j as u,k as A,s as E}from"./index-CD-RZOao.js";import{s as R}from"./index-Cx7qZuFU.js";import{s as D}from"./index-DBBDKR6P.js";import{s as H}from"./index-BYgAk61S.js";import{s as U}from"./index-Ljzkmy5v.js";import{_ as G}from"./AuthHeader.vue_vue_type_script_setup_true_lang-P5xN10hT.js";import{a as J}from"./index-DBceM-0I.js";import"./logo-DmpzTU2D.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-g5WItcu9.js";import"./index-7N8pAeDB.js";const K={class:"card flex flex-col items-center pt-4"},O={class:"flex flex-1 items-center justify-center my-4"},Q={class:"text-4xl font-semibold px-2 mr-4"},W={class:"flex flex-col gap-1"},X={for:"email"},Y={class:"flex flex-col gap-1"},Z={for:"password"},ss={class:"flex justify-between"},es={class:"my-0 flex flex-col gap-1"},as={key:1},_s=N({__name:"LoginPage",setup(ts){const f=T(),c=A(),_=I(),l=b(!1),$=b({email:"",password:""}),z=C(p.object({email:p.string().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."}),password:p.string().min(1,{message:"Password is required."}).max(100,{message:"Maximum 100 characters."})})),S=async s=>{if(!l.value&&s.valid){l.value=!0;try{const{data:e}=await J.login(s.states.email.value,s.states.password.value);_.setToken(e),_.setUser(e),c.push({name:"projects"}),f.add({severity:"success",summary:"Success",life:3e3})}catch(e){f.add({severity:"error",summary:e.toString(),life:3e3})}finally{l.value=!1}}};return(s,e)=>{const V=U,v=H,g=D,F=R,d=E,j=M;return o(),m(k,null,[a(G),t("div",K,[a(j,{initialValues:$.value,resolver:u(z),onSubmit:S,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(r=>{var x,y;return[t("div",O,[t("p",Q,n(s.$t("logIn")),1)]),t("div",W,[a(v,{variant:"on"},{default:i(()=>[a(V,{id:"email",name:"email",type:"text",fluid:""}),t("label",X,n(s.$t("email")),1)]),_:1}),(x=r.email)!=null&&x.invalid?(o(),h(g,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[L(n(r.email.error.message),1)]),_:2},1024)):P("",!0)]),t("div",Y,[a(v,{variant:"on"},{default:i(()=>[a(F,{id:"password",name:"password",feedback:!1,toggleMask:"",fluid:""}),t("label",Z,n(s.$t("password")),1)]),_:1}),t("div",ss,[(y=r.password)!=null&&y.invalid?(o(),h(g,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[t("ul",es,[(o(!0),m(k,null,q(r.password.errors,(w,B)=>(o(),m("li",{key:B},n(w.message),1))),128))])]),_:2},1024)):(o(),m("div",as)),a(d,{label:"Forgot password?",variant:"link",size:"small",class:"p-0",onClick:e[0]||(e[0]=w=>u(c).push({name:"forgot-password"}))})])]),a(d,{type:"submit",label:s.$t("logIn"),loading:l.value,disabled:l.value},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"]),a(d,{variant:"link",label:s.$t("dontHaveAnAccount"),onClick:e[1]||(e[1]=r=>u(c).push({name:"signup"})),size:"small"},null,8,["label"])])],64)}}});export{_s as default};
