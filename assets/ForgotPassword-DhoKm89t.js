import{h as I,o as B,s as P,a as R}from"./types-DM7f0bKm.js";import{s as C}from"./index-CXWJh2Nm.js";import{s as N}from"./index-BLtEdgdJ.js";import{s as S}from"./index-DIx-fEHn.js";import{a as q,u as E,r as c,a0 as L,b as u,e as j,f as t,h as o,g,w as i,t as r,k as _,i as x,l as y,F as z,p as A,q as M}from"./index-BatFYxel.js";import{_ as D}from"./AuthHeader.vue_vue_type_script_setup_true_lang-WdPrnt4R.js";import{a as H}from"./http-Djzp07-Y.js";import"./index-Db6KP036.js";import"./index-C_mupEx_.js";import"./logo-D1-3uCnC.js";const U={class:"card flex flex-col items-center pt-4"},Y={class:"flex flex-col flex-1 items-center justify-center my-4"},G={class:"text-4xl font-semibold px-2 mr-4 text-center"},J={class:"text-md px-2 mt-4 mr-4 text-slate-500 text-center"},K={class:"flex flex-col gap-1"},O={for:"email"},ie=q({__name:"ForgotPassword",setup(Q){const p=E(),b=A(),l=c(!1),s=c(0);let n;const $=()=>{s.value=60,n=setInterval(()=>{s.value>0?s.value--:clearInterval(n)},1e3)},w=c({email:""}),h=I(B({email:P().min(1,{message:"Email is required."}).max(100,{message:"Maximum 100 characters."})})),k=async e=>{if(!l.value&&e.valid){l.value=!0;try{const{data:a}=await H.requestPasswordReset(e.states.email.value);p.add({severity:"success",summary:a.message,life:3e3}),$()}catch(a){p.add({severity:"error",summary:a.response.data.error,life:3e3})}finally{l.value=!1}}};return L(()=>{clearInterval(n)}),(e,a)=>{const d=M,T=S,V=N,f=C,F=R;return u(),j(z,null,[t(D),o("div",U,[t(d,{label:e.$t("pages.login.backToLogin"),variant:"outlined",icon:"pi pi-arrow-left",size:"small",onClick:a[0]||(a[0]=m=>g(b).replace({name:"login"}))},null,8,["label"]),t(F,{initialValues:w.value,resolver:g(h),onSubmit:k,class:"flex flex-col gap-4 w-full sm:w-80 mx-6 sm:px-0 px-8"},{default:i(m=>{var v;return[o("div",Y,[o("p",G,r(e.$t("pages.login.forgotPassword")),1),o("p",J,r(e.$t("pages.login.provideYourAccountsEmailToResetPassword")),1)]),o("div",K,[t(V,{variant:"on"},{default:i(()=>[t(T,{id:"email",name:"email",type:"text",fluid:""}),o("label",O,r(e.$t("email")),1)]),_:1}),(v=m.email)!=null&&v.invalid?(u(),_(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[x(r(m.email.error.message),1)]),_:2},1024)):y("",!0)]),s.value>0?(u(),_(f,{key:0,severity:"success"},{default:i(()=>[x(r(e.$t("pages.login.weHaveSentLinkToResetPassword")),1)]),_:1})):y("",!0),t(d,{type:"submit",label:s.value>0?`${e.$t("pages.login.resendIn")} ${s.value}s`:e.$t("pages.login.send"),loading:l.value,disabled:l.value||s.value>0},null,8,["label","loading","disabled"])]}),_:1},8,["initialValues","resolver"])])],64)}}});export{ie as default};
