import{s as C,a as N}from"./index-BJXW17cL.js";import{s as V}from"./index-ZflZKAdM.js";import{s as x,a as F}from"./index-CBvRvFRr.js";import{s as k}from"./index-DoQeMzHI.js";import{e as I,r as p,C as A,o as u,c as f,k as t,w as a,a as s,t as l,j as B,G as v,b2 as M,l as T}from"./index-RQaPKU3q.js";import{S as D}from"./schoolApi-Ju9ppD7U.js";import{m as P}from"./mapStudentFromDto-D4MSietx.js";import"./index-DP6Jkdyj.js";import"./index-BctX0Pow.js";import"./index-DZ_1xp5G.js";import"./index-CdWRCESg.js";import"./index-CJfAG3aM.js";import"./index-5bVhi2nm.js";import"./index-Cvpkor55.js";import"./index-vGkf9gTg.js";import"./index-6V6lXQ4K.js";import"./index-CY8HVpGr.js";import"./index-3r_oBTLo.js";import"./index-Rzgfwlcn.js";const U={class:"flex-grow min-w-0 pb-4 mb-4 bg-white rounded-md border"},O={class:"flex items-center"},j={class:"flex-grow flex gap-2 items-center"},E={key:0,class:"text-2xl"},ie=I({__name:"StudentsPage",setup(G){const m=p(!1),d=p([]),c=p(),n=p();(()=>{n.value={global:{value:null,matchMode:M.CONTAINS}}})();const g=()=>{c.value.exportCSV()};async function h(){try{m.value=!0;const{data:e}=await D.getStudents();d.value=(e==null?void 0:e.map(P))??[]}catch(e){console.log(e)}finally{m.value=!1}}return A(h),(e,r)=>{const b=T,_=x,$=k,y=F,S=V,i=C,w=N;return u(),f("div",U,[t(w,{ref_key:"dt",ref:c,filters:n.value,"onUpdate:filters":r[1]||(r[1]=o=>n.value=o),value:d.value,dataKey:"id",loading:m.value,scrollable:"",globalFilterFields:["name","email","className","xp"],class:"rounded-md overflow-hidden w-full",paginator:"",rows:10,rowsPerPageOptions:[5,10,25]},{header:a(()=>[s("div",O,[s("div",j,[d.value?(u(),f("div",E,l(e.$t("pages.school.students"))+" - "+l(d.value.length),1)):B("",!0)]),t(b,{label:e.$t("export"),icon:"pi pi-upload",severity:"info",variant:"outlined",class:"mr-2",onClick:g},null,8,["label"]),t(y,null,{default:a(()=>[t(_,null,{default:a(()=>r[2]||(r[2]=[s("i",{class:"pi pi-search"},null,-1)])),_:1}),t($,{modelValue:n.value.global.value,"onUpdate:modelValue":r[0]||(r[0]=o=>n.value.global.value=o),placeholder:e.$t("pages.school.search")},null,8,["modelValue","placeholder"])]),_:1})])]),empty:a(()=>[v(l(e.$t("pages.school.noStudentsFound")),1)]),loading:a(()=>[v(l(e.$t("pages.school.loadingStudents")),1)]),default:a(()=>[t(i,{header:e.$t("pages.school.avatar"),sortable:""},{body:a(({data:o})=>[t(S,{image:o.smallAvatarUrl},null,8,["image"])]),_:1},8,["header"]),t(i,{field:"name",header:e.$t("pages.school.name"),sortable:""},{body:a(({data:o})=>[s("div",null,l(`${o.name}`),1)]),_:1},8,["header"]),t(i,{field:"email",header:e.$t("pages.school.email"),sortable:""},{body:a(({data:o})=>[s("div",null,l(`${o.email}`),1)]),_:1},8,["header"]),t(i,{field:"className",header:e.$t("pages.school.class"),sortable:""},{body:a(({data:o})=>[s("div",null,l(`${o.className}`),1)]),_:1},8,["header"]),t(i,{field:"xp",header:e.$t("pages.school.xp"),sortable:""},{body:a(({data:o})=>[s("div",null,l(`${o.xp}`),1)]),_:1},8,["header"])]),_:1},8,["filters","value","loading"])])}}});export{ie as default};
