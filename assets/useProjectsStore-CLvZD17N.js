import{d as c,u as n,r as t}from"./index-RQaPKU3q.js";import{P as o}from"./projectApi-C84aqwGt.js";import{m as u}from"./mapUnitFromDto-DRcH-Z8v.js";import{t as l}from"./transformUnitDtosToPages-BbPlv-Pt.js";const m=e=>{var s;return{accessStatus:e.access_status,accessType:e.access_type,createdAt:new Date(e.created_at),createdBy:e.created_by,description:e.description,id:e.id,lessonType:e.lesson_type,levelId:e.level_id,name:e.name,previewImageUrl:e.preview_image_url,reviewedBy:e.reviewed_by,sourceImageUrl:e.source_image_url,stage:e.stage,studentProgress:e.student_progress,completed:e.completed,pages:l(e.units??[]),units:((s=e.units)==null?void 0:s.map(u))??[],lastAccessedUnit:e.last_accessed_unit,updatedAt:new Date(e.updated_at),updatedBy:e.updated_by,editable:e.editable,routeId:e.route_id??0,routeName:e.route_name??"",levelName:e.level_name??"",originalRouteId:e.original_route_id}},g=c("projects-store",()=>{const e=n(),s=t([]),a=t(!1);async function i(){try{a.value=!0;const{data:r}=await o.getProjects();s.value=(r==null?void 0:r.map(m))??[]}catch(r){e.add({severity:"error",summary:r.response.data.error,life:2e3})}finally{a.value=!1}}return{projects:s,isLoading:a,loadProjects:i}});export{g as u};
