import{s as S}from"./index-B_C8rJ2c.js";import{d as B,a as C,r as g,m as T,o as t,c,b as w,e as v,t as o,f as a,w as i,g as l,h as u,j as _,F as N,n as x,k as E,s as F}from"./index-Bk0IZ4tT.js";import{s as I}from"./index-DNr5KzL9.js";import{_ as M}from"./AuthHeader.vue_vue_type_script_setup_true_lang-BSIhar-j.js";import{a as y}from"./index-CEWv-L79.js";import"./logo-Dp326gRZ.js";import"./LocaleSwitcher.vue_vue_type_script_setup_true_lang-BcMnyukT.js";import"./index-pDSYKn_O.js";import"./index-DuLx8aIU.js";import"./index-CDEOsIqs.js";const R={class:"card flex flex-col items-center pt-4 gap-4"},b={class:"text-2xl"},j={key:0},q={key:1},Q=B({__name:"VerifyEmail",setup(A){const k=x(),m=E(),p=C(),s=g(!1),r=g(null);async function $(){s.value=!0;try{await y.verifyEmail(k.query.token),r.value=!0;const{data:e}=await y.refresh();p.setToken(e),p.setUser(e)}catch(e){r.value=!1,console.log(e)}finally{s.value=!1}}return T(()=>{$()}),(e,n)=>{const f=I,d=F,V=S;return t(),c(N,null,[w(M),v("div",R,[v("div",b,o(e.$t("pages.login.emailVerification")),1),s.value?u("",!0):(t(),c("div",j,[r.value==!0?(t(),a(f,{key:0,severity:"success"},{default:i(()=>[l(o(e.$t("pages.login.emailSuccessfullyVerified")),1)]),_:1})):(t(),a(f,{key:1,severity:"error"},{default:i(()=>[l(o(e.$t("pages.login.tokenIsInvalidTryAgain")),1)]),_:1}))])),s.value?u("",!0):(t(),c("div",q,[r.value==!0?(t(),a(d,{key:0,onClick:n[0]||(n[0]=h=>_(m).replace("/"))},{default:i(()=>[l(o(e.$t("pages.login.goToHome")),1)]),_:1})):(t(),a(d,{key:1,onClick:n[1]||(n[1]=h=>_(m).replace("/settings/change-email"))},{default:i(()=>[l(o(e.$t("pages.login.goToSettings")),1)]),_:1}))])),s.value?(t(),a(V,{key:2})):u("",!0)])],64)}}});export{Q as default};
